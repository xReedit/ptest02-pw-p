(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{aVxZ:function(l,n,t){"use strict";t.r(n);var u=t("8Y7J");class e{}var i=t("pMnS"),a=t("bujt"),s=t("Fwaw"),o=t("5GAg"),c=t("omvX"),b=t("SVse");class r{constructor(){this.NextPregunta=new u.m}ngOnInit(){}xNextPregunta(l){setTimeout(()=>{this.NextPregunta.emit(l)},300)}}var d=u.qb({encapsulation:0,styles:[[".btnIco[_ngcontent-%COMP%]{opacity:.7;padding:10px;cursor:pointer;transition:transform .2s}.btnIco[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:1}.divBtn[_ngcontent-%COMP%]{display:grid}.divBtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.op[_ngcontent-%COMP%]{text-align:center;line-height:1}.op[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65px}"]],data:{}});function p(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,4,"div",[["class","divBtn text-center"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.xNextPregunta(l.context.$implicit)&&u),u},null,null)),(l()(),u.sb(2,0,null,null,3,"div",[["class","op"]],null,null,null,null,null)),(l()(),u.sb(3,0,null,null,0,"img",[["alt","btnOption"],["class","btnIco"]],[[8,"src",4]],null,null,null,null)),(l()(),u.sb(4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Mb(5,null,["",""]))],null,function(l,n){l(n,3,0,u.wb(1,"assets/images/encuesta-img/",n.context.$implicit.img,"")),l(n,5,0,n.context.$implicit.descripcion)})}function h(l){return u.Ob(0,[(l()(),u.hb(16777216,null,null,1,null,p)),u.rb(1,278528,null,0,b.l,[u.O,u.L,u.r],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,1,0,n.component.ListOption)},null)}var g=t("Rlre"),m=t("rWV4"),f=t("zOUh"),v=t("+lji"),C=t("/sn2"),O=t("yFR0");class x{constructor(l,n,t,u){this.infoTokenService=l,this.crudService=n,this.navigatorService=t,this.socketService=u,this.nomSede=[],this.countFin=4,this.selectedTabEncuesta=0,this.intervalConteo=null,this.ListRespuestas=[],this.xIdEncuesta=0,this.countOption=1}ngOnInit(){this.infoToken=this.infoTokenService.getInfoUs(),console.log(this.infoToken),this.nomSede=localStorage.getItem("sys::s").split("|"),this.dataPost={idsede:this.infoToken.idsede},this.loadOpciones(),this.loadEncuesta(),this.navigatorService.disabledBack=!0,history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)}}loadEncuesta(){this.crudService.postFree(this.dataPost,"encuesta","la-encuesta",!1).subscribe(l=>{if(l.success){const n=l.data[0].preguntas;this.xIdEncuesta=n.idencuesta,this.titulo_inicio=n.inicio,this.titulo_fin=n.fin,this.listPreguntas=n.preguntas,this.countOption+=this.listPreguntas.length}})}loadOpciones(){this.crudService.postFree(this.dataPost,"encuesta","las-opciones",!1).subscribe(l=>{console.log("las opciones",l),l.success&&(this.listOption=l.data)})}pasarTab(l=null,n=null,t=null){if(!l)return void this.selectedTabEncuesta++;const u="1"===n.obligatorio;this.ListRespuestas.push({idencuesta_pregunta:n.idencuesta_pregunta,idencuesta_respuesta:l.idencuesta_respuesta||0,iscomentario:u,comentario:t||""}),this.selectedTabEncuesta++,u&&this.guardarEncuesta(),console.log("countOption",this.countOption),console.log("selectedTabEncuesta",this.selectedTabEncuesta),this.countOption===this.selectedTabEncuesta&&(console.log("terminar encuesta"),this.cuentaRegresiva())}guardarEncuesta(){this.crudService.postFree({item:this.ListRespuestas,i:this.xIdEncuesta},"encuesta","guardar",!1).subscribe(l=>{console.log("guardado",l)})}cuentaRegresiva(){this.countFin<=0?(this.intervalConteo=null,this.cerrarSession()):this.conteoFinEncuesta()}conteoFinEncuesta(){this.intervalConteo=setTimeout(()=>{this.countFin--,this.cuentaRegresiva()},1e3)}cerrarSession(){this.navigatorService.cerrarSession(),this.infoTokenService.cerrarSession(),this.socketService.isSocketOpenReconect=!0,this.socketService.closeConnection()}}var _=u.qb({encapsulation:0,styles:[[".encabezado-encuesta[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;background:#3f51b5;color:#f5f5f5}.contain-size[_ngcontent-%COMP%]{contain:size}.mat-tab-header-pagination-controls-enabled[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-header-pagination.mat-tab-header-pagination-disabled[_ngcontent-%COMP%]{display:none!important}  .mat-tab-header-pagination{display:none!important}.hv-50[_ngcontent-%COMP%]{height:45vh}"]],data:{}});function E(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,7,null,null,null,null,null,null,null)),(l()(),u.sb(1,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),u.sb(2,0,[["txt_comentario",1]],null,0,"textarea",[["cols","100"],["id","txt_comentario"],["rows","3"],["style","width: 70%;"]],null,null,null,null,null)),(l()(),u.sb(3,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(4,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(5,0,null,null,2,"button",[["color","primary"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var e=!0,i=l.component;return"click"===n&&(e=!1!==i.pasarTab(i.listOption,l.parent.context.$implicit,u.Eb(l,2).value)&&e),e},a.b,a.a)),u.rb(6,180224,null,0,s.b,[u.k,o.d,[2,c.a]],{color:[0,"color"]},null),(l()(),u.Mb(-1,0,["Listo, Enviar"]))],function(l,n){l(n,6,0,"primary")},function(l,n){l(n,5,0,u.Eb(n,6).disabled||null,"NoopAnimations"===u.Eb(n,6)._animationMode)})}function P(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"app-encuesta-opcion",[["class","d-flex"]],null,[[null,"NextPregunta"]],function(l,n,t){var u=!0;return"NextPregunta"===n&&(u=!1!==l.component.pasarTab(t,l.parent.context.$implicit)&&u),u},h,d)),u.rb(1,114688,null,0,r,[],{ListOption:[0,"ListOption"]},{NextPregunta:"NextPregunta"})],function(l,n){l(n,1,0,n.component.listOption)},null)}function w(l){return u.Ob(0,[(l()(),u.sb(0,16777216,null,null,12,"mat-tab",[["disabled",""]],null,null,null,g.d,g.a)),u.rb(1,770048,[[1,4]],2,m.c,[u.O],{disabled:[0,"disabled"]},null),u.Kb(603979776,4,{templateLabel:0}),u.Kb(335544320,5,{_explicitContent:0}),(l()(),u.sb(4,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.sb(5,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.sb(6,0,null,0,6,"div",[["class","overflow-hidden"]],null,null,null,null,null)),(l()(),u.sb(7,0,[["opitem",1]],null,5,"div",[],null,null,null,null,null)),(l()(),u.sb(8,0,null,null,1,"p",[["class","fs-17 fw-600"]],null,null,null,null,null)),(l()(),u.Mb(9,null,["",""])),(l()(),u.hb(16777216,null,null,1,null,E)),u.rb(11,16384,null,0,b.m,[u.O,u.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),u.hb(0,[["elseTemplate",2]],null,0,null,P)),(l()(),u.hb(0,null,null,0))],function(l,n){l(n,1,0,""),l(n,11,0,"1"===n.context.$implicit.obligatorio,u.Eb(n,12))},function(l,n){l(n,9,0,n.context.$implicit.pregunta)})}function M(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"footer",[["class","xfooter text-center bg-white p-3"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"button",[["color","accent"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.cerrarSession()&&u),u},a.b,a.a)),u.rb(2,180224,null,0,s.b,[u.k,o.d,[2,c.a]],{color:[0,"color"]},null),(l()(),u.Mb(-1,0,["En otro momento, gracias."]))],function(l,n){l(n,2,0,"accent")},function(l,n){l(n,1,0,u.Eb(n,2).disabled||null,"NoopAnimations"===u.Eb(n,2)._animationMode)})}function k(l){return u.Ob(0,[u.Gb(0,b.e,[u.t]),(l()(),u.sb(1,0,null,null,42,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,4,"div",[["class","text-center p-3 encabezado-encuesta"]],null,null,null,null,null)),(l()(),u.sb(3,0,null,null,1,"p",[["class","fs-17 fw-600 m-0"]],null,null,null,null,null)),(l()(),u.Mb(4,null,["",""])),(l()(),u.sb(5,0,null,null,1,"span",[["class","fs-14 fw-100 p-0"]],null,null,null,null,null)),(l()(),u.Mb(6,null,["",""])),(l()(),u.sb(7,0,null,null,34,"div",[["class","text-center xcontainer-centrado p-3 hv-50"]],null,null,null,null,null)),(l()(),u.sb(8,0,null,null,33,"mat-tab-group",[["class","contain-size mat-tab-group"]],[[2,"mat-tab-group-dynamic-height",null],[2,"mat-tab-group-inverted-header",null]],null,null,g.c,g.b)),u.rb(9,3325952,null,1,m.f,[u.k,u.h,[2,m.a],[2,c.a]],{disableRipple:[0,"disableRipple"],dynamicHeight:[1,"dynamicHeight"],selectedIndex:[2,"selectedIndex"]},null),u.Kb(603979776,1,{_tabs:1}),(l()(),u.sb(11,16777216,null,null,15,"mat-tab",[["class","overflow-hidden"],["disabled",""]],null,null,null,g.d,g.a)),u.rb(12,770048,[[1,4]],2,m.c,[u.O],{disabled:[0,"disabled"]},null),u.Kb(603979776,2,{templateLabel:0}),u.Kb(335544320,3,{_explicitContent:0}),(l()(),u.sb(15,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.sb(16,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.sb(17,0,null,0,9,"div",[["class","overflow-hidden"]],null,null,null,null,null)),(l()(),u.sb(18,0,null,null,1,"p",[["class","fs-17 fw-600"]],null,null,null,null,null)),(l()(),u.Mb(19,null,["",""])),(l()(),u.sb(20,0,null,null,0,"img",[["alt","."],["src","assets/images/reactions_1.gif"],["width","100%"]],null,null,null,null,null)),(l()(),u.sb(21,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(22,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(23,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(24,0,null,null,2,"button",[["color","primary"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.pasarTab()&&u),u},a.b,a.a)),u.rb(25,180224,null,0,s.b,[u.k,o.d,[2,c.a]],{color:[0,"color"]},null),(l()(),u.Mb(-1,0,["Listo, Comenzar"])),(l()(),u.hb(16777216,null,null,1,null,w)),u.rb(28,278528,null,0,b.l,[u.O,u.L,u.r],{ngForOf:[0,"ngForOf"]},null),(l()(),u.sb(29,16777216,null,null,12,"mat-tab",[["disabled",""]],null,null,null,g.d,g.a)),u.rb(30,770048,[[1,4]],2,m.c,[u.O],{disabled:[0,"disabled"]},null),u.Kb(603979776,6,{templateLabel:0}),u.Kb(335544320,7,{_explicitContent:0}),(l()(),u.sb(33,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.sb(34,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.sb(35,0,null,0,6,"div",[["class","overflow-hidden"]],null,null,null,null,null)),(l()(),u.sb(36,0,null,null,1,"p",[["class","fs-17 fw-600"]],null,null,null,null,null)),(l()(),u.Mb(37,null,["",""])),(l()(),u.sb(38,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.sb(39,0,null,null,2,"p",[["class","text-secondary fs-50 fw-100"]],null,null,null,null,null)),(l()(),u.Mb(40,null,["",""])),u.Ib(41,2),(l()(),u.hb(16777216,null,null,1,null,M)),u.rb(43,16384,null,0,b.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,9,0,!0,!1,t.selectedTabEncuesta),l(n,12,0,""),l(n,25,0,"primary"),l(n,28,0,t.listPreguntas),l(n,30,0,""),l(n,43,0,0===t.selectedTabEncuesta)},function(l,n){var t=n.component;l(n,4,0,t.nomSede[0]),l(n,6,0,t.nomSede[1]),l(n,8,0,u.Eb(n,9).dynamicHeight,"below"===u.Eb(n,9).headerPosition),l(n,19,0,t.titulo_inicio),l(n,24,0,u.Eb(n,25).disabled||null,"NoopAnimations"===u.Eb(n,25)._animationMode),l(n,37,0,t.titulo_fin);var e=u.Nb(n,40,0,l(n,41,0,u.Eb(n,0),t.countFin,"2."));l(n,40,0,e)})}function S(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"app-encuesta",[],null,null,null,k,_)),u.rb(1,114688,null,0,x,[f.a,v.a,C.a,O.a],null,null)],function(l,n){l(n,1,0)},null)}var I=u.ob("app-encuesta",x,S,{},{},[]),y=t("t68o"),T=t("xYTU"),L=t("POq0"),F=t("Xd0L"),N=t("QQfA"),R=t("IP0z"),z=t("s6ns"),j=t("qJ5m"),K=t("s7LF"),q=t("iInd");const H={titulo:"Inicio"};class ${}var B=t("cUpR"),A=t("/HVE"),J=t("Gi4r"),U=t("oapL"),V=t("HsOI"),G=t("ZwOa"),D=t("zMNK"),Q=t("8P0U"),X=t("BzsH"),Y=t("hOhj"),Z=t("r0V8"),W=t("dFDH"),ll=t("qJ50"),nl=t("rsRi"),tl=t("lSLK");t.d(n,"EncuestaModuleNgFactory",function(){return ul});var ul=u.pb(e,[],function(l){return u.Bb([u.Cb(512,u.j,u.ab,[[8,[i.a,I,y.a,T.a,T.b]],[3,u.j],u.w]),u.Cb(4608,b.o,b.n,[u.t,[2,b.D]]),u.Cb(4608,L.c,L.c,[]),u.Cb(4608,F.a,F.a,[]),u.Cb(4608,N.a,N.a,[N.g,N.c,u.j,N.f,N.d,u.q,u.y,b.d,R.b,[2,b.h]]),u.Cb(5120,N.h,N.i,[N.a]),u.Cb(5120,z.c,z.d,[N.a]),u.Cb(135680,z.e,z.e,[N.a,u.q,[2,b.h],[2,z.b],z.c,[3,z.e],N.c]),u.Cb(5120,j.b,j.a,[[3,j.b]]),u.Cb(4608,K.e,K.e,[]),u.Cb(4608,K.v,K.v,[]),u.Cb(1073742336,b.c,b.c,[]),u.Cb(1073742336,q.n,q.n,[[2,q.s],[2,q.l]]),u.Cb(1073742336,$,$,[]),u.Cb(1073742336,R.a,R.a,[]),u.Cb(1073742336,F.e,F.e,[[2,F.b],[2,B.f]]),u.Cb(1073742336,A.b,A.b,[]),u.Cb(1073742336,F.g,F.g,[]),u.Cb(1073742336,s.c,s.c,[]),u.Cb(1073742336,J.a,J.a,[]),u.Cb(1073742336,U.c,U.c,[]),u.Cb(1073742336,L.d,L.d,[]),u.Cb(1073742336,V.d,V.d,[]),u.Cb(1073742336,G.b,G.b,[]),u.Cb(1073742336,D.g,D.g,[]),u.Cb(1073742336,o.a,o.a,[]),u.Cb(1073742336,m.k,m.k,[]),u.Cb(1073742336,Q.c,Q.c,[]),u.Cb(1073742336,X.b,X.b,[]),u.Cb(1073742336,Y.b,Y.b,[]),u.Cb(1073742336,N.e,N.e,[]),u.Cb(1073742336,z.j,z.j,[]),u.Cb(1073742336,Z.d,Z.d,[]),u.Cb(1073742336,Z.c,Z.c,[]),u.Cb(1073742336,W.e,W.e,[]),u.Cb(1073742336,ll.e,ll.e,[]),u.Cb(1073742336,j.c,j.c,[]),u.Cb(1073742336,nl.a,nl.a,[]),u.Cb(1073742336,K.u,K.u,[]),u.Cb(1073742336,K.r,K.r,[]),u.Cb(1073742336,K.i,K.i,[]),u.Cb(1073742336,tl.a,tl.a,[]),u.Cb(1073742336,e,e,[]),u.Cb(1024,q.j,function(){return[[{path:"",component:x,data:H,children:[{path:"",redirectTo:"inicio"}]}]]},[])])})}}]);