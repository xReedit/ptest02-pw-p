(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Xxw6:function(t,e,i){"use strict";i.r(e),i.d(e,"CashModule",(function(){return L}));var o=i("ofXK"),s=i("tyNb"),n=i("eI2u"),a=i("fXoL"),r=i("FKr1");let c=(()=>{class t{constructor(t,e){this.router=t,this.listenService=e,this.numberShowPageAtm=0}ngOnInit(){this.listenService.numberPageShowAtm$.subscribe(t=>{this.numberShowPageAtm=t})}goBackCash(){--this.numberShowPageAtm,this.numberShowPageAtm<0&&this.router.navigate(["../home"]),this.numberShowPageAtm=this.numberShowPageAtm<0?0:this.numberShowPageAtm,this.listenService.setNumberShowPageAtm(this.numberShowPageAtm)}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(s.d),a.Kb(n.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-main"]],decls:10,vars:0,consts:[[1,"animated","fadeIn","overflow-hidden","w-100"],[1,"header-app-1","p-3","d-flex","justify-content-between"],[1,"fa","fa-arrow-left",3,"click"],["matRipple","",1,"text-center"],[1,"pl-2","fs-13","fw-100","text-puntos"],[1,"d-flex"],[1,"fa","fa-credit-card"],[1,"div-content"]],template:function(t,e){1&t&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"i",2),a.Yb("click",(function(){return e.goBackCash()})),a.Pb(),a.Qb(3,"div",3),a.Qb(4,"span",4),a.Hc(5,"Papaya Cash"),a.Pb(),a.Pb(),a.Qb(6,"div",5),a.Lb(7,"i",6),a.Pb(),a.Pb(),a.Qb(8,"div",7),a.Lb(9,"router-outlet"),a.Pb(),a.Pb())},directives:[r.o,s.i],styles:[".header-app-1[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;width:100%;top:0;left:0;z-index:1;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline}"]}),t})();var b=i("qmRn"),l=i("22RU"),d=i("/mdI"),m=i("+lji"),h=i("yFR0"),p=i("AA5P"),g=i("bTqV"),u=i("DXvS"),f=i("9UHp"),P=i("DYek");function w(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div",26),a.Qb(1,"app-comp-ctrl-add-fast",27),a.Yb("objResponse",(function(e){return a.wc(t),a.cc(2).resultCantItem(e)})),a.Pb(),a.Lb(2,"img",28),a.Qb(3,"p",29),a.Hc(4),a.Pb(),a.Qb(5,"p",8),a.Hc(6),a.dc(7,"number"),a.Pb(),a.Pb()}if(2&t){const t=e.$implicit,i=a.cc(2);a.zb(1),a.kc("objItem",t)("stopAdd",i.stopAdd),a.zb(1),a.mc("src","assets/images/icon-app/",t.img,"",a.xc),a.zb(2),a.Jc(" ",t.denominacion," "),a.zb(2),a.Kc("",t.simbolo," ",a.fc(7,6,t.valor,".2"),"")}}function v(t,e){1&t&&(a.Ob(0),a.Lb(1,"span",30),a.Nb())}function S(t,e){if(1&t&&(a.Qb(0,"span"),a.Hc(1),a.dc(2,"number"),a.Pb()),2&t){const t=a.cc(2);a.zb(1),a.Jc(" S/. ",a.fc(2,1,t.costoEntrega,".2")," ")}}function C(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div",2),a.Qb(1,"div",3),a.Lb(2,"img",4),a.Pb(),a.Qb(3,"div",5),a.Qb(4,"div",6),a.Qb(5,"p",7),a.Hc(6,"Selecciona el monto que deseas retirar. Confirma la cantidad y un repartidor te llevar\xe1 el efectivo. El monto maximo a retirar es de "),a.Qb(7,"span",8),a.Hc(8,"S/. 200.00"),a.Pb(),a.Pb(),a.Pb(),a.Lb(9,"hr"),a.Qb(10,"div",9),a.Qb(11,"h4"),a.Hc(12,"ATM"),a.Pb(),a.Qb(13,"div",10),a.Fc(14,w,8,9,"div",11),a.Pb(),a.Pb(),a.Lb(15,"hr"),a.Qb(16,"div",12),a.Lb(17,"br"),a.Qb(18,"button",13),a.Yb("click",(function(){return a.wc(t),a.cc().btnNext()})),a.Hc(19," Continuar "),a.Qb(20,"span",5),a.Hc(21),a.dc(22,"number"),a.Pb(),a.Pb(),a.Pb(),a.Lb(23,"br"),a.Lb(24,"br"),a.Pb(),a.Qb(25,"div",14),a.Qb(26,"h5"),a.Hc(27,"Detalle del retiro"),a.Pb(),a.Lb(28,"br"),a.Qb(29,"app-comp-get-datos-cliente",15),a.Yb("frmResponse",(function(e){return a.wc(t),a.cc().frmClienteResponse(e)})),a.Pb(),a.Lb(30,"hr"),a.Qb(31,"table",16),a.Qb(32,"tbody"),a.Qb(33,"tr"),a.Qb(34,"td"),a.Qb(35,"span"),a.Hc(36,"Monto a retirar"),a.Pb(),a.Pb(),a.Qb(37,"td",17),a.Qb(38,"span",18),a.Hc(39),a.dc(40,"number"),a.Pb(),a.Pb(),a.Pb(),a.Qb(41,"tr"),a.Qb(42,"td"),a.Qb(43,"span"),a.Hc(44," Costo de entrega "),a.Pb(),a.Pb(),a.Qb(45,"td",19),a.Fc(46,v,2,0,"ng-container",20),a.Fc(47,S,3,4,"ng-template",null,21,a.Gc),a.Pb(),a.Pb(),a.Qb(49,"tr"),a.Qb(50,"td"),a.Qb(51,"span"),a.Hc(52," Total "),a.Pb(),a.Pb(),a.Qb(53,"td",19),a.Qb(54,"span",22),a.Hc(55),a.dc(56,"number"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Lb(57,"hr"),a.Lb(58,"br"),a.Qb(59,"div",12),a.Qb(60,"button",23),a.Yb("click",(function(){return a.wc(t),a.cc().btnBackAtm()})),a.Lb(61,"span",24),a.Hc(62," Atras"),a.Pb(),a.Qb(63,"button",25),a.Yb("click",(function(){return a.wc(t),a.cc().nextPagar()})),a.Hc(64," Listo, Confirmar "),a.Pb(),a.Pb(),a.Lb(65,"br"),a.Lb(66,"br"),a.Pb(),a.Pb()}if(2&t){const t=a.tc(48),e=a.cc();a.zb(3),a.kc("hidden",0!=e.opShowPage),a.zb(11),a.kc("ngForOf",e.listBilletes),a.zb(4),a.kc("disabled",0===e.importeRetirar),a.zb(2),a.kc("hidden",0===e.importeRetirar),a.zb(1),a.Jc(" S/. ",a.fc(22,12,e.importeRetirar,".2")," "),a.zb(4),a.kc("hidden",1!=e.opShowPage),a.zb(4),a.kc("opciones",e.opcionesFrmCliente),a.zb(10),a.Jc("S/. ",a.fc(40,15,e.importeRetirar,".2"),""),a.zb(7),a.kc("ngIf",e.isLoadingCosto)("ngIfElse",t),a.zb(9),a.Jc("S/. ",a.fc(56,18,e.importeNetoRetirar,".2"),""),a.zb(8),a.kc("disabled",!e.enabledSendPedido)}}function Q(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div",31),a.Qb(1,"app-comp-pasarela-pago",32),a.Yb("responseTransa",(function(e){return a.wc(t),a.cc().respuestaTransaccion(e)}))("repuestaBtnListo",(function(e){return a.wc(t),a.cc().finTransaccionOk(e)})),a.Pb(),a.Pb()}if(2&t){const t=a.cc();a.zb(1),a.kc("dataTrasa",t.dataAtmPago)}}const A=[{path:"",component:c,data:{titulo:"Inicio"},children:[{path:"",redirectTo:"atm"},{path:"atm",component:(()=>{class t{constructor(t,e,i,o,s,n){this.parametrosDelivery=t,this.router=e,this.listenService=i,this.crudService=o,this.socketService=s,this.verifyClientService=n,this.listBilletes=[],this.importeRetirar=0,this.stopAdd=!1,this.limitAdd=200,this.opcionesFrmCliente=new b.a,this.opShowPage=0,this.enabledSendPedido=!1,this.comisionAtm=0,this.costoEntrega=0,this.importeNetoRetirar=0,this.isLoadingCosto=!1,this.dataAtmPago=new d.a,this.isClienteLogueado=!1}ngOnInit(){this.infoClient=this.verifyClientService.getDataClient(),this.socketService.connect(this.infoClient,0,!1,!0),this.verifyBtnPagoReload(),this.opcionesFrmCliente.showDirreccionA=!0,this.opcionesFrmCliente.telefono=!0,this.opcionesFrmCliente.calDistanciaCentro=!0,this.opcionesFrmCliente.tituloDirA="A d\xf3nde lo llevamos?",this.listBilletes.push({denominacion:"Cien nuevos soles",valor:100,simbolo:"S/. ",img:"b100.jpg"}),this.listBilletes.push({denominacion:"Cicuenta nuevos soles",valor:50,simbolo:"S/. ",img:"b50.jpg"}),this.listenService.numberPageShowAtm$.subscribe(t=>{this.opShowPage=t})}verifyBtnPagoReload(){let t=localStorage.getItem("sys::btnP");t=t||"","1"===t.toString()&&(localStorage.setItem("sys::btnP","0"),window.location.reload())}resultCantItem(t){this.importeRetirar=this.listBilletes.map(t=>(t.cantidad_selected=t.cantidad_selected?t.cantidad_selected:0,t.importeTotal=t.cantidad_selected*t.valor,t.importeTotal)).reduce((t,e)=>t+e,0),this.stopAdd=this.importeRetirar>=200}btnNext(){this.opShowPage=1,this.listenService.setNumberShowPageAtm(this.opShowPage),this.getComisionAtm()}btnBackAtm(){--this.opShowPage,this.opShowPage=this.opShowPage<0?0:this.opShowPage,this.listenService.setNumberShowPageAtm(this.opShowPage)}getComisionAtm(){this.parametrosDelivery.getComisionAtm(this.importeRetirar).subscribe(t=>{this.comisionAtm=t.comision})}calcCostoEntrega(){this.costosPlaza&&(this.costoEntrega=this.costosPlaza.c_servicio+parseFloat(this.comisionAtm.toString()),this.importeNetoRetirar=this.importeRetirar+this.costoEntrega,this.setDataFromAtmCash())}setDataFromAtmCash(){this.dataAtmPago.from="atm",this.dataAtmPago.importe=this.importeNetoRetirar}frmClienteResponse(t){this.isLoadingCosto=!0,this.responseFrmDatosCliente=t,this.isLoadingCosto=t.ladingCostoServicio,this.enabledSendPedido=!this.isLoadingCosto&&t.success,t.ladingCostoServicio||(this.costosPlaza=t.costosPlaza,this.calcCostoEntrega())}nextPagar(){this.opShowPage=2,this.listenService.setNumberShowPageAtm(this.opShowPage),window.scroll(0,0)}respuestaTransaccion(t){t.success&&this.crudService.postFree({importeSolicita:this.importeRetirar,importeTotal:this.importeNetoRetirar,importeEntrega:this.costosPlaza.c_servicio,importeTransaccion:this.comisionAtm,idcliente:this.responseFrmDatosCliente.cliente.idcliente,billetes:this.listBilletes,transaccion:t.data,entrega:{cliente:{idcliente:this.responseFrmDatosCliente.cliente.idcliente,nombres:this.responseFrmDatosCliente.cliente.nombres,telefono:this.responseFrmDatosCliente.telefono},direccion:this.responseFrmDatosCliente.direccionA}},"delivery","set-cash-atm",!1).subscribe(t=>{this.socketService.emit("nuevo-retiro-cash-atm","")})}finTransaccionOk(t){t?this.router.navigate(["../"]):(this.btnBackAtm(),this.opShowPage=0,this.listenService.setNumberShowPageAtm(this.opShowPage))}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(l.a),a.Kb(s.d),a.Kb(n.a),a.Kb(m.a),a.Kb(h.a),a.Kb(p.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-atm"]],decls:2,vars:2,consts:[["class","animated fadeIn w-100 div-content overflow-auto",4,"ngIf"],["class","animated fadeInRight w-100 p-1",4,"ngIf"],[1,"animated","fadeIn","w-100","div-content","overflow-auto"],[2,"min-width","186px","background","lightsteelblue"],["src","assets/images/icon-app/atm2.jpg","alt","","width","100%"],[3,"hidden"],[1,"p-3"],[1,"fs-13","fw-100"],[1,"fw-600"],[1,"pl-3","pr-3","pt-1"],[1,"d-flex","justify-content-start"],["class","img-billete mr-4",4,"ngFor","ngForOf"],[1,"w-100","text-center"],["mat-raised-button","","color","primary",1,"w-75",3,"disabled","click"],[1,"animated","fadeInRight","w-100","p-3",3,"hidden"],[1,"fs-12",3,"opciones","frmResponse"],[1,"w-100"],["align","right",1,"aling-right"],[1,"fw-600","fs-16"],["align","right"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"fw-600","fs-17"],["mat-raised-button","","color","accent",1,"mr-2",3,"click"],[1,"fa","fa-arrow-circle-left","pr-1"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"img-billete","mr-4"],[3,"objItem","stopAdd","objResponse"],["alt","b100",3,"src"],[1,"text-secondary","fs-12"],[1,"fa","fa-circle-o-notch","fa-spin"],[1,"animated","fadeInRight","w-100","p-1"],[3,"dataTrasa","responseTransa","repuestaBtnListo"]],template:function(t,e){1&t&&(a.Fc(0,C,67,21,"div",0),a.Fc(1,Q,2,1,"div",1)),2&t&&(a.kc("ngIf",2!==e.opShowPage),a.zb(1),a.kc("ngIf",2===e.opShowPage))},directives:[o.t,o.s,g.b,u.a,f.a,P.a],pipes:[o.g],styles:["p[_ngcontent-%COMP%]{margin:0}.div-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.img-billete[_ngcontent-%COMP%]{display:grid}.img-billete[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;padding-right:5px}"]}),t})(),data:{titulo:"Categorias"}}]}];let k=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[s.h.forChild(A)],s.h]}),t})();var R=i("rsRi"),y=i("lSLK");let L=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[o.c,k,R.a,y.a]]}),t})()}}]);