function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"0alx":function(e,i,t){"use strict";var o=t("VKeD");i.isIterable=function(e){return e&&"function"==typeof e[o.iterator]}},"2KeD":function(e,i,t){"use strict";var o=t("Q1FS"),n=t("zB/H"),a=t("zfKp");i.scheduleObservable=function(e,i){return new o.Observable((function(t){var o=new n.Subscription;return o.add(i.schedule((function(){var n=e[a.observable]();o.add(n.subscribe({next:function(e){o.add(i.schedule((function(){return t.next(e)})))},error:function(e){o.add(i.schedule((function(){return t.error(e)})))},complete:function(){o.add(i.schedule((function(){return t.complete()})))}}))}))),o}))}},"2qMH":function(e,i,t){"use strict";var o=t("Q1FS"),n=t("zB/H");i.scheduleArray=function(e,i){return new o.Observable((function(t){var o=new n.Subscription,a=0;return o.add(i.schedule((function(){a!==e.length?(t.next(e[a++]),t.closed||o.add(this.schedule())):t.complete()}))),o}))}},CdcT:function(e,i,t){"use strict";var o,n=this&&this.__extends||(o=function(e,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)}),a=t("FWf1"),s=t("1pIY"),r=t("EOBV");i.throttleTime=function(e,i,t){return void 0===i&&(i=s.async),void 0===t&&(t=r.defaultThrottleConfig),function(o){return o.lift(new c(e,i,t.leading,t.trailing))}};var c=function(){function e(e,i,t,o){this.duration=e,this.scheduler=i,this.leading=t,this.trailing=o}return e.prototype.call=function(e,i){return i.subscribe(new l(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),l=function(e){function i(i,t,o,n,a){var s=e.call(this,i)||this;return s.duration=t,s.scheduler=o,s.leading=n,s.trailing=a,s._hasTrailingValue=!1,s._trailingValue=null,s}return n(i,e),i.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(d,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},i.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},i.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},i}(a.Subscriber);function d(e){e.subscriber.clearThrottle()}},EBtg:function(e,i,t){"use strict";var o=t("2KeD"),n=t("n73p"),a=t("2qMH"),s=t("LJ/p"),r=t("HZF8"),c=t("90cg"),l=t("yRPT"),d=t("0alx");i.scheduled=function(e,i){if(null!=e){if(r.isInteropObservable(e))return o.scheduleObservable(e,i);if(c.isPromise(e))return n.schedulePromise(e,i);if(l.isArrayLike(e))return a.scheduleArray(e,i);if(d.isIterable(e)||"string"==typeof e)return s.scheduleIterable(e,i)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},EOBV:function(e,i,t){"use strict";var o,n=this&&this.__extends||(o=function(e,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)}),a=t("Y4kR"),s=t("cSoz");i.defaultThrottleConfig={leading:!0,trailing:!1},i.throttle=function(e,t){return void 0===t&&(t=i.defaultThrottleConfig),function(i){return i.lift(new r(e,t.leading,t.trailing))}};var r=function(){function e(e,i,t){this.durationSelector=e,this.leading=i,this.trailing=t}return e.prototype.call=function(e,i){return i.subscribe(new c(e,this.durationSelector,this.leading,this.trailing))},e}(),c=function(e){function i(i,t,o,n){var a=e.call(this,i)||this;return a.destination=i,a.durationSelector=t,a._leading=o,a._trailing=n,a._hasValue=!1,a}return n(i,e),i.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},i.prototype.send=function(){var e=this._sendValue;this._hasValue&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},i.prototype.throttle=function(e){var i=this.tryDurationSelector(e);i&&this.add(this._throttled=s.subscribeToResult(this,i))},i.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(i){return this.destination.error(i),null}},i.prototype.throttlingDone=function(){var e=this._throttled,i=this._trailing;e&&e.unsubscribe(),this._throttled=null,i&&this.send()},i.prototype.notifyNext=function(e,i,t,o,n){this.throttlingDone()},i.prototype.notifyComplete=function(){this.throttlingDone()},i}(a.OuterSubscriber)},HZF8:function(e,i,t){"use strict";var o=t("zfKp");i.isInteropObservable=function(e){return e&&"function"==typeof e[o.observable]}},I65S:function(e,i,t){"use strict";var o=t("nzqU"),n=t("zzsZ"),a=t("2qMH");i.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var t=e[e.length-1];return o.isScheduler(t)?(e.pop(),a.scheduleArray(e,t)):n.fromArray(e)}},IKMM:function(e,i,t){"use strict";var o=t("I65S"),n=t("c4Wt");i.concat=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return n.concatAll()(o.of.apply(void 0,e))}},"LJ/p":function(e,i,t){"use strict";var o=t("Q1FS"),n=t("zB/H"),a=t("VKeD");i.scheduleIterable=function(e,i){if(!e)throw new Error("Iterable cannot be null");return new o.Observable((function(t){var o,s=new n.Subscription;return s.add((function(){o&&"function"==typeof o.return&&o.return()})),s.add(i.schedule((function(){o=e[a.iterator](),s.add(i.schedule((function(){if(!t.closed){var e,i;try{var n=o.next();e=n.value,i=n.done}catch(a){return void t.error(a)}i?t.complete():(t.next(e),this.schedule())}})))}))),s}))}},QtHX:function(e,i,t){"use strict";var o=t("UNqx"),n=t("yoF8");i.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),o.mergeMap(n.identity,e)}},R7wr:function(e,i,t){"use strict";i.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},RmLz:function(e,i,t){"use strict";var o=t("IKMM"),n=t("nzqU");i.startWith=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var t=e[e.length-1];return n.isScheduler(t)?(e.pop(),function(i){return o.concat(e,i,t)}):function(i){return o.concat(e,i)}}},U2p0:function(e,i,t){"use strict";var o,n=this&&this.__extends||(o=function(e,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)}),a=t("1pIY"),s=t("R7wr"),r=t("FWf1"),c=t("xKqS");i.delay=function(e,i){void 0===i&&(i=a.async);var t=s.isDate(e)?+e-i.now():Math.abs(e);return function(e){return e.lift(new l(t,i))}};var l=function(){function e(e,i){this.delay=e,this.scheduler=i}return e.prototype.call=function(e,i){return i.subscribe(new d(e,this.delay,this.scheduler))},e}(),d=function(e){function i(i,t,o){var n=e.call(this,i)||this;return n.delay=t,n.scheduler=o,n.queue=[],n.active=!1,n.errored=!1,n}return n(i,e),i.dispatch=function(e){for(var i=e.source,t=i.queue,o=e.scheduler,n=e.destination;t.length>0&&t[0].time-o.now()<=0;)t.shift().notification.observe(n);if(t.length>0){var a=Math.max(0,t[0].time-o.now());this.schedule(e,a)}else this.unsubscribe(),i.active=!1},i.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(i.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},i.prototype.scheduleNotification=function(e){if(!0!==this.errored){var i=this.scheduler,t=new u(i.now()+this.delay,e);this.queue.push(t),!1===this.active&&this._schedule(i)}},i.prototype._next=function(e){this.scheduleNotification(c.Notification.createNext(e))},i.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.scheduleNotification(c.Notification.createComplete()),this.unsubscribe()},i}(r.Subscriber),u=function(e,i){this.time=e,this.notification=i}},UNqx:function(e,i,t){"use strict";var o,n=this&&this.__extends||(o=function(e,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)}),a=t("cSoz"),s=t("Y4kR"),r=t("Vi6O"),c=t("q3Kh"),l=t("gTqA");i.mergeMap=function e(i,t,o){return void 0===o&&(o=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(e((function(e,o){return l.from(i(e,o)).pipe(c.map((function(i,n){return t(e,i,o,n)})))}),o))}:("number"==typeof t&&(o=t),function(e){return e.lift(new d(i,o))})};var d=function(){function e(e,i){void 0===i&&(i=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=i}return e.prototype.call=function(e,i){return i.subscribe(new u(e,this.project,this.concurrent))},e}();i.MergeMapOperator=d;var u=function(e){function i(i,t,o){void 0===o&&(o=Number.POSITIVE_INFINITY);var n=e.call(this,i)||this;return n.project=t,n.concurrent=o,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return n(i,e),i.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},i.prototype._tryNext=function(e){var i,t=this.index++;try{i=this.project(e,t)}catch(o){return void this.destination.error(o)}this.active++,this._innerSub(i,e,t)},i.prototype._innerSub=function(e,i,t){var o=new r.InnerSubscriber(this,i,t),n=this.destination;n.add(o);var s=a.subscribeToResult(this,e,void 0,void 0,o);s!==o&&n.add(s)},i.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},i.prototype.notifyNext=function(e,i,t,o,n){this.destination.next(i)},i.prototype.notifyComplete=function(e){var i=this.buffer;this.remove(e),this.active--,i.length>0?this._next(i.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},i}(s.OuterSubscriber);i.MergeMapSubscriber=u},aJGj:function(e,i,t){"use strict";var o=t("Q1FS");i.EMPTY=new o.Observable((function(e){return e.complete()})),i.empty=function(e){return e?function(e){return new o.Observable((function(i){return e.schedule((function(){return i.complete()}))}))}(e):i.EMPTY}},c4Wt:function(e,i,t){"use strict";var o=t("QtHX");i.concatAll=function(){return o.mergeAll(1)}},gTqA:function(e,i,t){"use strict";var o=t("Q1FS"),n=t("6qA3"),a=t("EBtg");i.from=function(e,i){return i?a.scheduled(e,i):e instanceof o.Observable?e:new o.Observable(n.subscribeTo(e))}},n73p:function(e,i,t){"use strict";var o=t("Q1FS"),n=t("zB/H");i.schedulePromise=function(e,i){return new o.Observable((function(t){var o=new n.Subscription;return o.add(i.schedule((function(){return e.then((function(e){o.add(i.schedule((function(){t.next(e),o.add(i.schedule((function(){return t.complete()})))})))}),(function(e){o.add(i.schedule((function(){return t.error(e)})))}))}))),o}))}},nLiW:function(e,i,t){"use strict";t.r(i),t.d(i,"PedidoModule",(function(){return Rs}));var o=t("ofXK"),n=t("3Pt+"),a=t("lSLK"),s=t("nx09"),r=t("/sn2"),c=t("eI2u"),l=t("yFR0"),d=t("AA5P"),u=t("JOr0"),b=t("zOUh"),m=t("fXoL"),p=t("WF5t"),f=t("bv9b");function h(e,i){if(1&e&&(m.Pb(0),m.Mb(1,"mat-progress-bar",1),m.ec(2,"async"),m.Ob()),2&e){var t=m.dc();m.zb(1),m.lc("value",m.fc(2,1,t.timerLimitService.countdown$))}}var g,v,C=((g=function(){function e(i){_classCallCheck(this,e),this.timerLimitService=i}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||g)(m.Lb(p.a))},g.\u0275cmp=m.Fb({type:g,selectors:[["app-progress-time-limit"]],decls:2,vars:3,consts:[[4,"ngIf"],["mode","determinate","color","accent",1,"animated","fadeInDown",3,"value"]],template:function(e,i){1&e&&(m.Ec(0,h,3,3,"ng-container",0),m.ec(1,"async")),2&e&&m.lc("ngIf",m.fc(1,1,i.timerLimitService.isPorgressVisible$))},directives:[o.t,f.a],pipes:[o.b],styles:[""]}),g),S=t("0IaG"),y=t("bTqV"),k=((v=function(){function e(i){switch(_classCallCheck(this,e),this.msj="",i?i.idMjs:0){case 0:this.msj="Confirma que desea de borrar el pedido actual?";break;case 1:this.msj="Confirma que desea salir?";break;case 2:this.msj="Solo puede hacer un pedido por establecimiento a la vez. Confirma que desea salir?"}}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||v)(m.Lb(S.a))},v.\u0275cmp=m.Fb({type:v,selectors:[["app-dialog-reset"]],decls:10,vars:2,consts:[[1,"p-3"],[1,"fw-100","fs-15"],[1,"d-flex"],["mat-stroked-button","","mat-dialog-close","",1,"mr-2"],["mat-flat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Rb(1,"span",1),m.Gc(2),m.Qb(),m.Mb(3,"hr"),m.Rb(4,"div",2),m.Rb(5,"button",3),m.Gc(6,"Cancelar"),m.Qb(),m.Rb(7,"button",4),m.Gc(8,"Si, confirmo."),m.Qb(),m.Qb(),m.Mb(9,"br"),m.Qb()),2&e&&(m.zb(2),m.Hc(i.msj),m.zb(5),m.lc("mat-dialog-close",!0))},directives:[y.b,S.d],styles:[""]}),v),x=t("pLZG"),_=t("wne+"),R=t("Qu3c"),P=t("+lji"),w=t("bSwM"),I=t("kmnG"),M=t("d3UM"),T=t("FKr1");function O(e,i){if(1&e&&(m.Rb(0,"mat-option",10),m.Gc(1),m.Qb()),2&e){var t=i.$implicit;m.lc("value",t),m.zb(1),m.Ic(" ",t.descripcion," ")}}function Q(e,i){if(1&e&&(m.Rb(0,"mat-option",10),m.Gc(1),m.Qb()),2&e){var t=i.$implicit;m.lc("value",t),m.zb(1),m.Ic(" ",t.descripcion," ")}}var D,z,E,F,L,j,G,V=((D=function(){function e(i,t,o){_classCallCheck(this,e),this.crudService=i,this.establecimientoService=t,this.infoTokenService=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.listImpresoras=this.establecimientoService.getImpresoras(),this.loadCanalesConsumo();var e=JSON.parse(localStorage.getItem("sys::punto"));e&&(this.isPuntoAutoPedidoCheck=e.ispunto_autopedido,this.selectedValueImpresora=e.impresora,this.isTomaPedidoRapido=e.istoma_pedido_rapido,this.selectedValueCanConsumo=e.canal_consumo,this.infoTokenService.setIsPuntoAutoPedido(this.isPuntoAutoPedidoCheck),this.infoTokenService.setIsTomaPedidoRapido(this.isTomaPedidoRapido))}},{key:"setConifg",value:function(){this.isPuntoAutoPedidoCheck=!this.isTomaPedidoRapido&&this.isPuntoAutoPedidoCheck,localStorage.setItem("sys::punto",JSON.stringify({istoma_pedido_rapido:this.isTomaPedidoRapido,canal_consumo:this.selectedValueCanConsumo,ispunto_autopedido:this.isPuntoAutoPedidoCheck,impresora:this.selectedValueImpresora})),this.infoTokenService.setIsPuntoAutoPedido(this.isPuntoAutoPedidoCheck),this.infoTokenService.setIsTomaPedidoRapido(this.isTomaPedidoRapido),location.reload()}},{key:"loadCanalesConsumo",value:function(){var e=this,i={idsede:this.infoTokenService.getInfoUs().idsede};this.crudService.postFree(i,"pedido","get-canales-consumo",!1).subscribe((function(i){e.listCanalConsumo=i.data}))}},{key:"compareById",value:function(e,i){return e&&i&&e.idimpresora===i.idimpresora}},{key:"compareByIdCanal",value:function(e,i){return e&&i&&e.idtipo_consumo===i.idtipo_consumo}}]),e}()).\u0275fac=function(e){return new(e||D)(m.Lb(P.a),m.Lb(u.a),m.Lb(b.a))},D.\u0275cmp=m.Fb({type:D,selectors:[["app-dialog-config-punto"]],decls:36,vars:10,consts:[[1,"fs-18"],[3,"ngModel","ngModelChange"],[1,"fw-600"],[1,"fs-12"],["placeholder","Canal de consumo","name","selectedValueImpresora",3,"ngModel","value","compareWith","ngModelChange","valueChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Impresora","name","selectedValueImpresora",3,"ngModel","value","compareWith","ngModelChange","valueChange"],[1,"d-flex"],["mat-raised-button","","color","primary",1,"mr-2",3,"click"],["mat-raised-button","","color","accent","mat-dialog-close",""],[3,"value"]],template:function(e,i){1&e&&(m.Rb(0,"div"),m.Rb(1,"p",0),m.Gc(2,"Configuraciones"),m.Qb(),m.Mb(3,"hr"),m.Rb(4,"mat-checkbox",1),m.Zb("ngModelChange",(function(e){return i.isTomaPedidoRapido=e})),m.Rb(5,"span",2),m.Gc(6,"Tomar pedido r\xe1pido"),m.Qb(),m.Qb(),m.Rb(7,"p",3),m.Gc(8,"Se adjuntara los items al clic, solo mostrar\xe1 el detalle en los items que tienen opciones por seleccionar. "),m.Rb(9,"strong"),m.Gc(10,"Elija un canal de consumo predertiminado."),m.Qb(),m.Qb(),m.Rb(11,"mat-form-field"),m.Rb(12,"mat-label"),m.Gc(13,"Canal consumo prederminado"),m.Qb(),m.Rb(14,"mat-select",4),m.Zb("ngModelChange",(function(e){return i.selectedValueCanConsumo=e}))("valueChange",(function(e){return i.selectedValueCanConsumo=e})),m.Ec(15,O,2,2,"mat-option",5),m.Qb(),m.Qb(),m.Mb(16,"hr"),m.Rb(17,"mat-checkbox",1),m.Zb("ngModelChange",(function(e){return i.isPuntoAutoPedidoCheck=e})),m.Rb(18,"span",2),m.Gc(19,"Punto de Autopedido"),m.Qb(),m.Qb(),m.Rb(20,"p",3),m.Gc(21,"Configurar este equipo como Punto de Autopedido, donde el cliente podra realizar por su cuenta su pedido. Vincule una impresora donde el cliente obtendr\xe1 una copia de su pedido. "),m.Rb(22,"strong"),m.Gc(23,"El canal de consumo ser\xe1: Para Llevar"),m.Qb(),m.Qb(),m.Mb(24,"br"),m.Rb(25,"mat-form-field"),m.Rb(26,"mat-label"),m.Gc(27,"Impresora Vinculada"),m.Qb(),m.Rb(28,"mat-select",6),m.Zb("ngModelChange",(function(e){return i.selectedValueImpresora=e}))("valueChange",(function(e){return i.selectedValueImpresora=e})),m.Ec(29,Q,2,2,"mat-option",5),m.Qb(),m.Qb(),m.Mb(30,"hr"),m.Rb(31,"div",7),m.Rb(32,"button",8),m.Zb("click",(function(){return i.setConifg()})),m.Gc(33,"Listo Aplicar"),m.Qb(),m.Rb(34,"button",9),m.Gc(35,"Cerrar"),m.Qb(),m.Qb(),m.Qb()),2&e&&(m.zb(4),m.lc("ngModel",i.isTomaPedidoRapido),m.zb(10),m.lc("ngModel",i.selectedValueCanConsumo)("value",i.selectedValueCanConsumo)("compareWith",i.compareByIdCanal),m.zb(1),m.lc("ngForOf",i.listCanalConsumo),m.zb(2),m.lc("ngModel",i.isPuntoAutoPedidoCheck),m.zb(11),m.lc("ngModel",i.selectedValueImpresora)("value",i.selectedValueImpresora)("compareWith",i.compareById),m.zb(1),m.lc("ngForOf",i.listImpresoras))},directives:[w.a,n.p,n.s,I.c,I.g,M.a,o.s,y.b,S.d,T.i],styles:[""]}),D),A=t("mrSG"),B=((z=function(){function e(i){_classCallCheck(this,e),this.dialogRef=i}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||z)(m.Lb(S.i))},z.\u0275cmp=m.Fb({type:z,selectors:[["app-mozo-dialog"]],decls:12,vars:0,consts:[[1,"text-center"],["src","./assets/images/icon-app/robot_piter.gif","alt",""],[1,"fw-600","fs-13","pt-1"],[1,"fw-100","fs-13"],[1,"content-btn"],[1,"fa","fa-microphone"],["mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Mb(1,"img",1),m.Rb(2,"p",2),m.Gc(3,"Hola!, soy Piter, su mozo virtual por voz."),m.Qb(),m.Rb(4,"div"),m.Rb(5,"p",3),m.Gc(6,"Si desea que lo atienda active el microfono que esta en la parte superior."),m.Qb(),m.Rb(7,"div",4),m.Mb(8,"i",5),m.Qb(),m.Qb(),m.Mb(9,"hr"),m.Rb(10,"button",6),m.Gc(11,"Ok, Entendido."),m.Qb(),m.Qb())},directives:[y.b,S.d],styles:[".content-btn[_ngcontent-%COMP%]{border-radius:50%;background:#302855;width:30px;line-height:30px;color:#fff;text-align:center;margin:auto}"]}),z),q=t("7RJT"),N=t("U2p0"),H=((F=function(){function e(){_classCallCheck(this,e),this.speechDataEvent=new m.n,this.ttsDataEvent=new m.n}return _createClass(e,[{key:"emit",value:function(e,i){return!1}}]),e}()).\u0275fac=function(e){return new(e||F)},F.\u0275prov=m.Hb({token:F,factory:F.\u0275fac,providedIn:"root"}),F),$=((E=function(){function e(i){var t=this;_classCallCheck(this,e),this.speechProviverConnet=i,this.speechTexResponseSource=new q.BehaviorSubject(null),this.speechTexResponse$=this.speechTexResponseSource.asObservable().pipe(Object(N.delay)(400)),this.listenOnTraduceSource=new q.BehaviorSubject(!1),this.listenOnTraduce$=this.listenOnTraduceSource.asObservable(),this.lastTranscript="",this.bufferSize=2048,this.audioElement=document.querySelector("audio"),this.finalWord=!1,this.removeLastSentence=!0,this.streamStreaming=!1,this.constraints={audio:!0,video:!1},this.downsampleBuffer=function(e,i,t){if(t===i)return e;if(t>i)throw new Error("downsampling rate show be smaller than original sample rate");for(var o=i/t,n=Math.round(e.length/o),a=new Int16Array(n),s=0,r=0;s<a.length;){for(var c=Math.round((s+1)*o),l=0,d=0,u=r;u<c&&u<e.length;u++)l+=e[u],d++;a[s]=32767*Math.min(1,l/d),s++,r=c}return a.buffer},this.speechProviverConnet.speechDataEvent.subscribe((function(e){t.speechData(e),t.listenOnTraduceSource.next(!0)}))}return _createClass(e,[{key:"startRecording",value:function(){this.initRecording()}},{key:"initRecording",value:function(){var e=this;this.speechProviverConnet.emit("startGoogleCloudStream",""),this.streamStreaming=!0,this.AudioContext=window.AudioContext,this.context=new AudioContext({}),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.processor.connect(this.context.destination),this.context.resume(),navigator.mediaDevices.getUserMedia(this.constraints).then((function(i){e.globalStream=i,e.input=e.context.createMediaStreamSource(i),e.input.connect(e.processor),e.processor.onaudioprocess=function(i){var t=i.inputBuffer.getChannelData(0),o=e.downsampleBuffer(t,44100,16e3);e.speechProviverConnet.emit("binaryData",o)}}))}},{key:"microphoneProcess",value:function(e){var i=e.inputBuffer.getChannelData(0),t=this.downsampleBuffer(i,44100,16e3);this.speechProviverConnet.emit("binaryData",t)}},{key:"stopRecording",value:function(){var e=this;this.streamStreaming=!1,this.speechProviverConnet.emit("endGoogleCloudStream",""),this.listenOnTraduceSource.next(!1),this.globalStream.getTracks()[0].stop(),this.input.disconnect(this.processor),this.processor.disconnect(this.context.destination),this.context.close().then((function(){e.input=null,e.processor=null,e.context=null,e.AudioContext=null}))}},{key:"speechData",value:function(e){0!==e.results.length&&this.lastTranscript!==e.results[0].alternatives[0].transcript.toLowerCase()&&(this.speechTexResponseSource.next(e.results),this.lastTranscript=e.results[0].alternatives[0].transcript.toLowerCase(),this.finalWord=!0)}},{key:"capitalize",value:function(e){return e.length<1?e:e.charAt(0).toUpperCase()+e.slice(1)}}]),e}()).\u0275fac=function(e){return new(e||E)(m.Vb(H))},E.\u0275prov=m.Hb({token:E,factory:E.\u0275fac,providedIn:"root"}),E),U=function e(){_classCallCheck(this,e)},Z=t("NEqF"),J=((G=function(){function e(i){var t=this;_classCallCheck(this,e),this.speechProviverConnet=i,this.isTalkingSource=new q.BehaviorSubject(!1),this.isTalking$=this.isTalkingSource.asObservable(),this.sendDataTTS=new U,this.speechProviverConnet.ttsDataEvent.subscribe((function(e){return Object(A.a)(t,void 0,void 0,regeneratorRuntime.mark((function i(){var t,o=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:(t=new Audio("".concat(Z.g).concat(e))).play(),this.isTalkingSource.next(!0),t.addEventListener("ended",(function(){o.isTalkingSource.next(!1)}));case 2:case"end":return i.stop()}}),i,this)})))}))}return _createClass(e,[{key:"convertTxtToVoice",value:function(e){this.speechProviverConnet.emit("tts",e)}}]),e}()).\u0275fac=function(e){return new(e||G)(m.Vb(H))},G.\u0275prov=m.Hb({token:G,factory:G.\u0275fac,providedIn:"root"}),G),W=((j=function(){function e(i,t,o,n){_classCallCheck(this,e),this.establecimientoService=i,this.miPedidoService=t,this.navigatorLinkService=o,this.uttilService=n,this.commandNavegacionSeccionSource=new q.BehaviorSubject(null),this.commandNavegacionSeccion$=this.commandNavegacionSeccionSource.asObservable(),this.commandNavegacionRecomendadoSource=new q.BehaviorSubject([]),this.commandNavegacionRecomendado$=this.commandNavegacionRecomendadoSource.asObservable(),this.commandAddItemSource=new q.BehaviorSubject(null),this.commandAddItem$=this.commandAddItemSource.asObservable(),this.commandAceptadoSource=new q.BehaviorSubject(0),this.commandAceptado$=this.commandAceptadoSource.asObservable(),this.commandFinalizarPedidoSource=new q.BehaviorSubject(!1),this.commandFinalizarPedido$=this.commandFinalizarPedidoSource.asObservable(),this.commandIsShowPedidoSource=new q.BehaviorSubject(!1),this.commandIsShowPedido$=this.commandIsShowPedidoSource.asObservable(),this.isPedidoEnviadoSource=new q.BehaviorSubject(!1),this.isPedidoEnviado$=this.isPedidoEnviadoSource.asObservable()}return _createClass(e,[{key:"getNameSede",value:function(){return this.establecimientoService.get().nombre}},{key:"getIdSede",value:function(){return this.establecimientoService.get().idsede}},{key:"getSeccionesCarta",value:function(){var e,i="";return this.arrStringSecciones?this.arrStringSecciones:(this.getCarta(),i+=(null===(e=this.laCarta)||void 0===e?void 0:e.bodega)?this.laCarta.bodega.map((function(e){return e.des})).join(",")||",":"",i=this.laCarta.carta.map((function(e){return e.secciones.map((function(e){return e.des}))})).join(","),this.arrStringSecciones=i,i)}},{key:"getItemsCarta",value:function(){var e,i,t="";return this.arrStringItems?this.arrStringItems:(this.getCarta(),t+=(null===(e=this.laCarta)||void 0===e?void 0:e.bodega)?(null===(i=this.laCarta)||void 0===i?void 0:i.bodega.map((function(e){return e.items.map((function(e){return e.des}))})).join(","))||",":"",t=this.laCarta.carta.map((function(e){return e.secciones.map((function(e){return e.items.map((function(e){return e.des}))}))})).join(","),this.arrStringItems=t,t)}},{key:"getItemsSeccionSelected",value:function(e){var i,t=!0;e=e.toLowerCase();var o=(null===(i=this.laCarta)||void 0===i?void 0:i.bodega.find((function(i){return i.des.toLowerCase()===e})))||null;return o||(t=!1,o=this.laCarta.carta.map((function(i){return i.secciones.find((function(i){return i.des.toLowerCase()===e}))}))),o?t?o.items.map((function(e){return e.des})).join(","):o.map((function(e){return e.items.map((function(e){return e.des}))})).join(",")||"":""}},{key:"getItemsSeccionSelectedStr",value:function(e){return e.items.filter((function(e){return"0"!==e.cantidad})).map((function(e){return e.des})).join(",")}},{key:"getItemsRecomendadosStr",value:function(){return this.laCarta||this.getCarta(),this.laCarta.recomendados?this.laCarta.recomendados.map((function(e){return e.des})).join(","):null}},{key:"getISeccionSelected",value:function(e){var i,t;e=e.toLowerCase();var o=(null===(i=this.laCarta)||void 0===i?void 0:i.bodega)?null===(t=this.laCarta)||void 0===t?void 0:t.bodega.find((function(i){return i.des.toLowerCase()===e})):null;return o||(o=this.laCarta.carta.map((function(i){return i.secciones.find((function(i){return i.des.toLowerCase()===e}))}))[0]),o}},{key:"getIItemsSelected",value:function(e){var i,t;e=e.toLowerCase();var o=(null===(i=this.laCarta)||void 0===i?void 0:i.bodega)?null===(t=this.laCarta)||void 0===t?void 0:t.bodega.map((function(i){return i.items.find((function(i){return i.des.toLowerCase()===e}))})).find((function(e){return e})):null;return o||(o=this.laCarta.carta.map((function(i){return i.secciones.map((function(i){return i.items.find((function(i){return i.des.toLowerCase()===e}))}))}))[0].find((function(e){return e}))),o}},{key:"getCarta",value:function(){this.laCarta=this.miPedidoService.getObjCarta()}},{key:"getIsPedidoValido",value:function(){return!!this.miPedidoService.getMiPedido()}},{key:"goNavegacionSeccionCarta",value:function(e){this.commandNavegacionSeccionSource.next(e),this.goNavigacionShowCarta()}},{key:"goNavegacionItemRecomendados",value:function(){this.commandNavegacionRecomendadoSource.next(this.laCarta.recomendados),this.goNavigacionShowCarta()}},{key:"goNavigacionShowMiPedido",value:function(){this.navigatorLinkService.setPageActive("mipedido"),this.commandIsShowPedidoSource.next(!0)}},{key:"goNavigacionShowCarta",value:function(){this.navigatorLinkService.setPageActive("carta")}},{key:"addItemPedido",value:function(e){this.commandAddItemSource.next(e)}},{key:"setIsCommandAceptado",value:function(e){this.commandAceptadoSource.next(e)}},{key:"setFinalizarPedido",value:function(e){this.commandFinalizarPedidoSource.next(e)}},{key:"setIsPedidoConfirmado",value:function(){this.isPedidoEnviadoSource.next(!0)}},{key:"setIndicaciones",value:function(e,i){e.indicaciones=this.uttilService.addslashes(i);var t=this.miPedidoService.findOnlyItemMiPedido(e);t&&(t.indicaciones=i),this.miPedidoService.setLocalStoragePedido()}}]),e}()).\u0275fac=function(e){return new(e||j)(m.Vb(u.a),m.Vb(s.a),m.Vb(r.a),m.Vb(_.a))},j.\u0275prov=m.Hb({token:j,factory:j.\u0275fac,providedIn:"root"}),j),K=((L=function(){function e(i,t,o,n,a,s,r){var c=this;_classCallCheck(this,e),this.crudService=i,this.speechTTService=t,this.spechTotextService=o,this.speechDataProviderService=n,this.infoTokenService=a,this.dialog=s,this.utilitariosService=r,this.isMicrophoneOn=!1,this.lastCommnad=null,this.lastTextoRecibido="",this.lastComandOk="",this.isProcessTalking=!1,this.isTalking=!1,this.isActive=!1,this.keySotrageCommand="sys::cmdv",this.spechTotextService.speechTexResponse$.subscribe((function(e){if(e){var i=e[0].alternatives[0].transcript;""!==c.lastComandOk&&c.utilitariosService.compareSimilaryText(c.lastComandOk,i)>=.79||c.cocinarComand(i)}})),this.speechTTService.isTalking$.subscribe((function(e){c.isTalking=e,c.isMicrophoneOn&&(e?c.spechTotextService.stopRecording():c.spechTotextService.startRecording())})),this.speechDataProviderService.isPedidoEnviado$.subscribe((function(e){if(e){if(!c.isMicrophoneOn)return;c.isTalking=!1,c.spechTotextService.stopRecording()}}))}return _createClass(e,[{key:"getIsActive",value:function(){return this.isActive}},{key:"setIsActive",value:function(e){this.isActive=e}},{key:"getComands",value:function(){var e=this;this.dataListComand||this.crudService.getAll("speech","comandos",!1,!1,!1).subscribe((function(i){e.dataListComand=i.data}))}},{key:"startRecording",value:function(){this.isMicrophoneOn=!0,this.spechTotextService.startRecording()}},{key:"stopRecording",value:function(){this.isMicrophoneOn&&(this.isMicrophoneOn=!1,this.spechTotextService.stopRecording())}},{key:"cocinarComand",value:function(e){var i=this.searchComandList(e);i&&(this.lastCommnad="inicio"!==i.seccion&&"finalizar_pedido"!==i.seccion&&"carta_recomendacion"!==i.seccion?i:null,i.texto_recibido=e.replace(this.lastTextoRecibido,""),this.analizeCommand(i))}},{key:"searchComandList",value:function(e){var i=null;if(e=e.toLowerCase(),this.dataListComand)return this.dataListComand.map((function(t){var o=t.comando.split(",").find((function(i){return new RegExp(i).test(e)}));o&&((i=t).texto_recibido=e,i.comando_recibido=o)})),i||this.lastCommnad&&(this.lastCommnad.texto_recibido=e,i=this.lastCommnad),i}},{key:"searchCommandStr",value:function(e,i){var t=this,o="";return i.map((function(i){t.utilitariosService.compareSimilaryText(e.trim(),i.trim())>.78&&(o=i)})),o}},{key:"analizeCommand",value:function(e){return Object(A.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.lastComandOk.toLowerCase().trim()===e.texto_recibido.toLowerCase().trim()||this.isTalking){i.next=21;break}i.t0=e.seccion,i.next="inicio"===i.t0?4:"carta"===i.t0?6:"carta_recomendacion"===i.t0?8:"navegacion"===i.t0?10:"carta_contenido"===i.t0?12:"carta_item_suma"===i.t0?14:"carta_item_resta"===i.t0?16:"carta_item_resetea"===i.t0?18:"finalizar_pedido"===i.t0?20:21;break;case 4:return this.commandIncio(e),i.abrupt("break",21);case 6:return this.commandCarta(e),i.abrupt("break",21);case 8:return this.commandCartaRecomendacion(e),i.abrupt("break",21);case 10:return this.commandNavegacion(e),i.abrupt("break",21);case 12:return this.commandCartaContenido(e),i.abrupt("break",21);case 14:return this.commandCartaItemSuma(e),i.abrupt("break",21);case 16:return this.commandCartaItemResta(e),i.abrupt("break",21);case 18:return this.commandCartaItemResetea(e),i.abrupt("break",21);case 20:this.commandFinalizarPedido(e);case 21:case"end":return i.stop()}}),i,this)})))}},{key:"commandIncio",value:function(e){switch(e.comando){case"bienvenido":var i=this.speechDataProviderService.getNameSede(),t=this.getCommandStorage(e);if(t){if(!t.isTimePlay)return;e.text=e.texto_default.text2,e.text=e.text.replace("?nomcliente","")}else e.text=e.texto_default.text1,e.text=e.text.replace("?nomsede",i);e.idsede=this.speechDataProviderService.getIdSede(),this.speechVoice(e),this.dialog.open(B)}}},{key:"commandCarta",value:function(e){var i=this.getSeccionCarta(e);if(i.seccion){var t=this.speechDataProviderService.getItemsSeccionSelectedStr(i.seccion);this.isCommandOk(e.texto_recibido,1),this.sendTxtToVoice(e,"De ".concat(i.nomSeccion,", tenemos: ").concat(t)),this.speechDataProviderService.goNavegacionSeccionCarta(i.seccion)}this.speechDataProviderService.getCarta()}},{key:"commandCartaRecomendacion",value:function(e){var i=this.speechDataProviderService.getItemsRecomendadosStr();if(!i)return this.isCommandOk(e.texto_recibido,1),void this.sendTxtToVoice(e,e.texto_default.text1);this.isCommandOk(e.texto_recibido,1),this.sendTxtToVoice(e,"Le recomendamos: "+i),this.speechDataProviderService.goNavegacionItemRecomendados()}},{key:"commandCartaContenido",value:function(e){var i=this.getItemCarta(e);i.item&&(this.isCommandOk(e.texto_recibido,1),this.sendTxtToVoice(e,"".concat(i.nomItem,":. ").concat(i.item.detalles)))}},{key:"commandCartaItemSuma",value:function(e){var i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido),t=this.convertTxtToNum(i);if(t){var o=(null==t?void 0:t.num)||null;i=i.replace(t.numStr||"","").trim();var n=this.getItemCarta(e,i);this.sendItemToPedido(n,o,!0,e)}}},{key:"commandCartaItemResta",value:function(e){var i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido),t=this.convertTxtToNum(i);if(t){var o=(null==t?void 0:t.num)||null;i=i.replace(t.numStr||"","");var n=this.getItemCarta(e,i);n.item&&(o=o||n.item.cantidad_seleccionada,this.sendItemToPedido(n,o,!1,e))}}},{key:"commandCartaItemResetea",value:function(e){var i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido),t=this.convertTxtToNum(i);if(t){var o=(null==t?void 0:t.num)||null;i=i.replace(t.numStr||"","");var n=this.getItemCarta(e,i);n.item&&o&&(this.sendItemToPedido(n,n.item.cantidad_seleccionada,!1,e),this.sendItemToPedido(n,o,!0,e),this.isCommandOk(e.texto_recibido,1))}}},{key:"sendItemToPedido",value:function(e,i,t,o){if(e.item){this.isCommandOk(o.texto_recibido,2),e.isSuma=t;for(var n=0;n<i;n++)this.speechDataProviderService.addItemPedido(e)}}},{key:"commandNavegacion",value:function(e){var i=this.getSeccionCarta(e);i.seccion?(this.speechDataProviderService.goNavegacionSeccionCarta(i.seccion),this.isCommandOk(e.texto_recibido,1)):e.texto_recibido.indexOf("pedido")>-1&&(this.speechDataProviderService.goNavigacionShowMiPedido(),this.isCommandOk(e.texto_recibido,1))}},{key:"commandFinalizarPedido",value:function(e){this.speechDataProviderService.getIsPedidoValido()&&(this.isCommandOk(e.texto_recibido,1),this.speechDataProviderService.goNavigacionShowMiPedido(),this.speechDataProviderService.setFinalizarPedido(!0),""===this.infoTokenService.getInfoUs().nombres?(e.text=e.texto_default.text1,this.speechVoice(e)):(e.text=e.texto_default.text2,this.speechVoice(e)))}},{key:"getSeccionCarta",value:function(e){var i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido),t=this.speechDataProviderService.getSeccionesCarta().toLowerCase().split(","),o=this.searchCommandStr(i,t);return{nomSeccion:o,seccion:""!==o?this.speechDataProviderService.getISeccionSelected(o):null}}},{key:"getItemCarta",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=i||this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido),o=this.speechDataProviderService.getItemsCarta().toLowerCase().split(","),n=this.searchCommandStr(t,o);return{nomItem:n,item:""!==n?this.speechDataProviderService.getIItemsSelected(n):null}}},{key:"convertTxtToNum",value:function(e){var i=null,t="uno,dos,tres,cuatro,cinco,seis,siete,ocho,nueve,diez,once,doce,trece,catorce,quince,dieciseis,diecisiete,diecisiete,dieciocho,diecinueve,veinte,veintiuno,veintidos,veintitres,veinticuatro,veinticinco",o="",n=(e=" "+e).match(/\d+/);return(i=n?n[0]:null)||(i=t.split(",").findIndex((function(i){return e.match(" "+i+" ")}))+1,o=t.split(",")[i-1],0===i&&(i="otro,un,una".split(",").findIndex((function(i){return e.match(" "+i+" ")})),o="otro,un,una".split(",")[i],i=i?1:null)),i?{num:i,numStr:o}:null}},{key:"replaceTextRecibidoComand",value:function(e,i){var t=e.toLowerCase(),o=i.toLowerCase();return t.replace(o,"").trim()}},{key:"sendTxtToVoice",value:function(e,i){var t=this;this.isProcessTalking||(this.isProcessTalking=!0,e.idsede=1,e.text=i,this.speechTTService.convertTxtToVoice(e),setTimeout((function(){t.isProcessTalking=!1}),1e3))}},{key:"isCommandOk",value:function(e,i){var t=this;this.lastComandOk=e,this.speechDataProviderService.setIsCommandAceptado(i),setTimeout((function(){t.lastComandOk=""}),1e3)}},{key:"speechVoice",value:function(e){this.speechTTService.convertTxtToVoice(e)}},{key:"getCommandStorage",value:function(e){var i=null,t=localStorage.getItem(this.keySotrageCommand),o=t?JSON.parse(t):null;if(o)if(i=o.filter((function(i){return i.idcomando_voz===e.idcomando_voz}))[0]||null){var n=this.diffMinTimeComandStorage(i);i.isTimePlay=n>15,i.isTimePlay&&(i.time=(new Date).toISOString(),localStorage.setItem(this.keySotrageCommand,JSON.stringify(o)))}else this.saveCommandStorage(e);else this.saveCommandStorage(e);return i}},{key:"saveCommandStorage",value:function(e){var i=localStorage.getItem(this.keySotrageCommand),t=i?JSON.parse(i):[],o={idcomando_voz:e.idcomando_voz,time:(new Date).toISOString()};t.push(o),localStorage.setItem(this.keySotrageCommand,JSON.stringify(t))}},{key:"diffMinTimeComandStorage",value:function(e){var i=new Date(e.time),t=new Date,o=Math.abs(i-t);return Math.floor(o/1e3/60)}}]),e}()).\u0275fac=function(e){return new(e||L)(m.Vb(P.a),m.Vb(J),m.Vb($),m.Vb(W),m.Vb(b.a),m.Vb(S.b),m.Vb(_.a))},L.\u0275prov=m.Hb({token:L,factory:L.\u0275fac,providedIn:"root"}),L),Y=t("/t3+");function X(e,i){1&e&&(m.Pb(0),m.Mb(1,"i",3),m.Ob())}function ee(e,i){1&e&&m.Mb(0,"i",4)}var ie,te=function(e){return{on:e}},oe=((ie=function(){function e(i,t){_classCallCheck(this,e),this.comandAnalizerService=i,this.establecimientoService=t,this.isGrabando=!1}return _createClass(e,[{key:"ngOnInit",value:function(){0!==this.establecimientoService.get().speech_disabled&&this.comandAnalizerService.getComands()}},{key:"goClickBtn",value:function(){this.isGrabando?this.stopRecording():this.startRecording()}},{key:"startRecording",value:function(){this.comandAnalizerService.startRecording(),this.isGrabando=!0}},{key:"stopRecording",value:function(){this.comandAnalizerService.stopRecording(),this.isGrabando=!1}}]),e}()).\u0275fac=function(e){return new(e||ie)(m.Lb(K),m.Lb(u.a))},ie.\u0275cmp=m.Fb({type:ie,selectors:[["app-mozo-virtual-on-speech"]],decls:4,vars:5,consts:[[1,"content-btn",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["elseTemplateNoGraba",""],["aria-hidden","true",1,"fa","fa-microphone","text-danger","animated","infinite","bounceIn"],["aria-hidden","true",1,"fa","fa-microphone-slash"]],template:function(e,i){if(1&e&&(m.Rb(0,"div",0),m.Zb("click",(function(){return i.goClickBtn()})),m.Ec(1,X,2,0,"ng-container",1),m.Ec(2,ee,1,0,"ng-template",null,2,m.Fc),m.Qb()),2&e){var t=m.uc(3);m.lc("ngClass",m.qc(3,te,i.isGrabando)),m.zb(1),m.lc("ngIf",i.isGrabando)("ngIfElse",t)}},directives:[o.q,o.t],styles:[".content-btn[_ngcontent-%COMP%]{border-radius:50%;background:#5363bf}.content-btn.on[_ngcontent-%COMP%]{background:#2a3785;font-size:20px}"]}),ie),ne=["txtBuscar"];function ae(e,i){1&e&&(m.Rb(0,"div",14),m.Mb(1,"app-mozo-virtual-on-speech"),m.Qb())}function se(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",15),m.Zb("click",(function(){return m.xc(t),m.dc(2).configPunto()})),m.Mb(1,"i",16),m.Qb()}if(2&e){var o=m.dc(2);m.lc("matRippleColor",o.rippleColor)}}function re(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"span",3),m.Gc(2),m.ec(3,"titlecase"),m.Qb(),m.Mb(4,"span",4),m.Ec(5,ae,2,0,"div",5),m.Ec(6,se,2,1,"div",6),m.Rb(7,"div",7),m.Zb("click",(function(){return m.xc(t),m.dc().sharedCarta()})),m.Mb(8,"i",8),m.Qb(),m.Rb(9,"div",9),m.Rb(10,"div",10),m.Zb("click",(function(){return m.xc(t),m.dc().activaBusqueda()})),m.Mb(11,"i",11),m.Qb(),m.Rb(12,"div",12),m.Zb("click",(function(){return m.xc(t),m.dc().cerrarSession()})),m.Mb(13,"i",13),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc();m.zb(2),m.Hc(m.fc(3,6,o.nomSede)),m.zb(3),m.lc("ngIf",o.isActiveMozoVoz),m.zb(1),m.lc("ngIf",!o.isCliente),m.zb(1),m.lc("matRippleColor",o.rippleColor),m.zb(3),m.lc("matRippleColor",o.rippleColorBusqueda),m.zb(2),m.lc("matRippleColor",o.rippleColor)}}function ce(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",17),m.Rb(2,"div",18),m.Zb("click",(function(){return m.xc(t),m.dc().activaBusqueda()})),m.Mb(3,"i",19),m.Qb(),m.Rb(4,"input",20,21),m.Zb("keyup",(function(){m.xc(t);var e=m.uc(5);return m.dc().buscarCharAhora(e.value)})),m.Qb(),m.Rb(6,"div",22),m.Zb("click",(function(){return m.xc(t),m.dc().clearTextBuqueda()})),m.Mb(7,"i",23),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.uc(5),n=m.dc();m.zb(2),m.lc("matRippleColor",n.rippleColorPlomo),m.zb(4),m.lc("hidden",""===o.value)("matRippleColor",n.rippleColorPlomo)}}var le,de,ue,be=function(e){return{"toolbar-busqueda":e}},me={showDelay:500,hideDelay:1e3,touchendHideDelay:500},pe=((le=function(){function e(i,t,o,n,a,s,r,c,l,d){_classCallCheck(this,e),this.miPedidoService=i,this.navigatorService=t,this.dialog=o,this.listenStatusService=n,this.renderer=a,this.infoTokenService=s,this.utilitariosSerivce=r,this.crudService=c,this.establecimientoService=l,this.comandAnalizerService=d,this.isBusqueda=!1,this.rippleColor="rgba(238,238,238,0.2)",this.rippleColorBusqueda="rgba(238,238,238,0.9)",this.rippleColorPlomo="rgba(158,158,158,0.5)",this.isClienteDelivery=!1,this.isCliente=!1,this.isSpeechVoiceAcivado=!1,this.isActiveMozoVoz=!1,this.nomSede=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.isSpeechVoiceAcivado=1===this.establecimientoService.get().speech_disabled,this.listenStatusService.isBusqueda$.subscribe((function(i){e.isBusqueda=i})),this.listenStatusService.hayDatosSede$.pipe(Object(x.a)((function(e){return!0===e}))).subscribe((function(i){e.getNomSede()})),this.isClienteDelivery=this.infoTokenService.isDelivery(),this.isCliente=this.infoTokenService.isCliente(),this.idSedeCartaVirtual=this.infoTokenService.infoUsToken.idsede,this.isActiveMozoVoz=this.isSpeechVoiceAcivado&&this.isCliente&&!this.isClienteDelivery,this.getLinkSharedCarta()}},{key:"getNomSede",value:function(){this.nomSede=this.miPedidoService.objDatosSede.datossede[0].sedenombre}},{key:"getLinkSharedCarta",value:function(){var e=this;this.crudService.postFree({idsede:this.idSedeCartaVirtual},"delivery","get-shared-url-carta",!1).subscribe((function(i){e.urlSharedCartaVirtual=i.data[0].qr_delivery}))}},{key:"activaBusqueda",value:function(){var e=this;this.navigatorService.setPageActive("carta"),this.navigatorService.addLink("carta-i-"),this.listenStatusService.setIsBusqueda(),setTimeout((function(){e.txtBuscar&&(e.renderer.selectRootElement(e.txtBuscar.nativeElement).focus(),e.txtBuscar.nativeElement.value=e.getStorageBusqueda())}),300)}},{key:"buscarCharAhora",value:function(e){this.listenStatusService.setCharBusqueda(e),this.setStorageBusqueda(e)}},{key:"setStorageBusqueda",value:function(e){window.localStorage.setItem("sys::find",e)}},{key:"getStorageBusqueda",value:function(){return window.localStorage.getItem("sys::find")||""}},{key:"clearTextBuqueda",value:function(){this.renderer.selectRootElement(this.txtBuscar.nativeElement).focus(),this.txtBuscar.nativeElement.value="",window.localStorage.setItem("sys::find","")}},{key:"cerrarSession",value:function(){var e=this,i=new S.e;i.data={idMjs:1},this.dialog.open(k,i).afterClosed().subscribe((function(i){i&&(e.stopRecordingToolbar(),e.miPedidoService.resetAllNewPedido(),e.miPedidoService.cerrarSession(),e.infoTokenService.cerrarSession())}))}},{key:"goBackOutEstablecimiento",value:function(){var e=this,i=new S.e;i.data={idMjs:2},this.dialog.open(k,i).afterClosed().subscribe((function(i){i&&(e.miPedidoService.resetAllNewPedido(),e.miPedidoService.cerrarSession(),e.infoTokenService.cerrarSession())}))}},{key:"sharedCarta",value:function(){console.log("this.urlSharedCartaVirtual",this.urlSharedCartaVirtual),this.utilitariosSerivce.sharedNative(this.urlSharedCartaVirtual,this.nomSede)}},{key:"configPunto",value:function(){var e=new S.e;e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialog.open(V,e)}},{key:"stopRecordingToolbar",value:function(){this.comandAnalizerService.stopRecording()}}]),e}()).\u0275fac=function(e){return new(e||le)(m.Lb(s.a),m.Lb(r.a),m.Lb(S.b),m.Lb(c.a),m.Lb(m.E),m.Lb(b.a),m.Lb(_.a),m.Lb(P.a),m.Lb(u.a),m.Lb(K))},le.\u0275cmp=m.Fb({type:le,selectors:[["app-tool-bar"]],viewQuery:function(e,i){var t;1&e&&m.Mc(ne,!0),2&e&&m.tc(t=m.ac())&&(i.txtBuscar=t.first)},features:[m.yb([{provide:R.a,useValue:me}])],decls:4,vars:5,consts:[["color","primary"],[3,"ngClass"],[4,"ngIf"],[1,"nom-comercio"],[1,"example-spacer"],["class","example-ripple-container fs-15",4,"ngIf"],["class","example-ripple-container fs-15","matRipple","","matRippleCentered","true",3,"matRippleColor","click",4,"ngIf"],["matRipple","","matRippleCentered","true","matTooltip","Enlace Copiado",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Compartir Carta","aria-hidden","true",1,"fa","fa-share-alt"],[2,"display","contents"],["matRipple","","matRippleCentered","true","matRippleUnbounded","true","matRippleRadius","290","title","Buscar",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Buscar","aria-hidden","true",1,"fa","fa-search"],["matRipple","","matRippleCentered","true","title","Cerrar Sesion",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Cerrar Sesion","aria-hidden","true",1,"fa","fa-close"],[1,"example-ripple-container","fs-15"],["matRipple","","matRippleCentered","true",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Configuracion","aria-hidden","true",1,"fa","fa-wrench"],[1,"d-flex","w-100"],["matRipple","","matRippleCentered","true","title","Atras",1,"example-ripple-container","text-success","fs-15",2,"margin-left","-15px",3,"matRippleColor","click"],["title","Cerrar Sesion","aria-hidden","true",1,"fa","fa-arrow-left"],["type","text","placeholder","Buscar...","autofocus","",1,"text-busqueda","w-100",3,"keyup"],["txtBuscar",""],["matRipple","","matRippleCentered","true",1,"example-ripple-container","text-dark","fs-15",3,"hidden","matRippleColor","click"],["title","Atras","aria-hidden","true",1,"fa","fa-times"]],template:function(e,i){1&e&&(m.Rb(0,"mat-toolbar",0),m.Rb(1,"mat-toolbar-row",1),m.Ec(2,re,14,8,"ng-container",2),m.Ec(3,ce,8,3,"ng-container",2),m.Qb(),m.Qb()),2&e&&(m.zb(1),m.lc("ngClass",m.qc(3,be,i.isBusqueda)),m.zb(1),m.lc("ngIf",!i.isBusqueda),m.zb(1),m.lc("ngIf",i.isBusqueda))},directives:[Y.a,Y.c,o.q,o.t,T.n,R.b,oe],pipes:[o.F],styles:[".example-icon[_ngcontent-%COMP%]{padding:0 14px}.example-spacer[_ngcontent-%COMP%]{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}.example-ripple-container[_ngcontent-%COMP%]{cursor:pointer;text-align:center;width:40px;height:40px;-webkit-flex-shrink:0;flex-shrink:0;line-height:40px;border-radius:50%;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-drag:none;-webkit-tap-highlight-color:transparent}.text-busqueda[_ngcontent-%COMP%]{border:none;outline:none}.toolbar-busqueda[_ngcontent-%COMP%]{background:#fff}.nom-comercio[_ngcontent-%COMP%]{max-width:70%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"]}),le),fe=t("wZkO"),he=t("PGKp"),ge=t("fbMX"),ve=t("Q1FS"),Ce=((de=function(){function e(i,t){_classCallCheck(this,e),this.storageService=i,this.socketService=t,this.keyStorage="sys::rules"}return _createClass(e,[{key:"loadReglasCarta",value:function(){return this.dataReglasCarta()}},{key:"getObjReglasCarta",value:function(){return this.objReglasCarta}},{key:"dataReglasCarta",value:function(){var e=this;return new ve.Observable((function(i){e.socketService.onReglasCarta().subscribe((function(t){e.objReglasCarta=t[0],e.codeObjInSotrage(),i.next(e.objReglasCarta)}))}))}},{key:"codeObjInSotrage",value:function(){this.storageService.set(this.keyStorage,btoa(JSON.stringify(this.objReglasCarta)))}},{key:"decodeObjInSotrage",value:function(){var e=this;return new ve.Observable((function(i){var t=e.storageService.get(e.keyStorage);try{e.objReglasCarta=JSON.parse(atob(t)),i.next(e.objReglasCarta)}catch(o){e.dataReglasCarta()}}))}}]),e}()).\u0275fac=function(e){return new(e||de)(m.Vb(ge.a),m.Vb(l.a))},de.\u0275prov=m.Hb({token:de,factory:de.\u0275fac,providedIn:"root"}),de),Se=t("ds6q"),ye=t("IW2O"),ke=t("qFsG"),xe=t("9UHp"),_e=t("CdcT"),Re=((ue=function(){function e(){_classCallCheck(this,e),this.debounceTime=300,this.debounceClick=new m.n,this.clicks=new Se.Subject}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.clicks.pipe(Object(_e.throttleTime)(this.debounceTime)).subscribe((function(i){e.debounceClick.emit(i)}))}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"clickEvent",value:function(e){e.preventDefault(),e.stopPropagation(),this.clicks.next(e)}}]),e}()).\u0275fac=function(e){return new(e||ue)},ue.\u0275dir=m.Gb({type:ue,selectors:[["","appDebounceClick",""]],hostBindings:function(e,i){1&e&&m.Zb("click",(function(e){return i.clickEvent(e)}))},inputs:{debounceTime:"debounceTime"},outputs:{debounceClick:"debounceClick"}}),ue);function Pe(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"div",24),m.Mb(2,"img",25),m.Qb(),m.Ob()),2&e){var t=m.dc();m.zb(2),m.oc("src","",t.url_img,"",t.item.img,"",m.yc),m.mc("alt",t.item.img)}}function we(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"p",26),m.Gc(2),m.Qb(),m.Mb(3,"hr"),m.Ob()),2&e){var t=m.dc();m.zb(2),m.Hc(t.item.detalles)}}function Ie(e,i){if(1&e&&(m.Rb(0,"div",42),m.Gc(1),m.ec(2,"number"),m.Qb()),2&e){var t=m.dc(2).$implicit;m.zb(1),m.Ic(" + ",m.gc(2,1,t.precio,"0.2")," ")}}var Me=function(e){return{"li-tachado":e}};function Te(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"mat-checkbox",37),m.Zb("change",(function(){m.xc(t);var e=m.dc().$implicit,i=m.dc().$implicit;return m.dc(2).addSubItem(i,e)}))("ngModelChange",(function(e){return m.xc(t),m.dc().$implicit.selected=e})),m.Rb(2,"div",38),m.Rb(3,"div"),m.Rb(4,"span"),m.Gc(5),m.Qb(),m.Rb(6,"span",39),m.Gc(7),m.Qb(),m.Qb(),m.Rb(8,"div",40),m.Ec(9,Ie,3,4,"div",41),m.Qb(),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc().$implicit;m.zb(1),m.lc("ngModel",o.selected)("ngClass",m.qc(7,Me,o.cantidad<1))("disabled",o.cantidad<1),m.zb(4),m.Ic("",o.des," "),m.zb(1),m.lc("hidden",!o.cantidad_visible),m.zb(1),m.Ic(" | ",o.cantidad,""),m.zb(2),m.lc("ngIf",0!=o.precio)}}function Oe(e,i){if(1&e&&(m.Rb(0,"span",46),m.Gc(1),m.ec(2,"number"),m.Qb()),2&e){var t=m.dc(2).$implicit,o=m.dc(3);m.zb(1),m.Jc(" + ",o.simbolo_moneda," ",m.gc(2,2,t.precio,"0.2")," ")}}function Qe(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",43),m.Rb(1,"div"),m.Rb(2,"span"),m.Gc(3),m.Qb(),m.Rb(4,"span",39),m.Gc(5),m.Qb(),m.Ec(6,Oe,3,5,"span",44),m.Qb(),m.Rb(7,"div",40),m.Rb(8,"app-comp-ctrl-add-fast",45),m.Zb("objResponse",(function(e){m.xc(t);var i=m.dc(2).$implicit;return m.dc(2).addSubItemCtrlCantidad(i,e)})),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc().$implicit;m.lc("ngClass",m.qc(8,Me,o.cantidad<1)),m.zb(3),m.Ic("",o.des," "),m.zb(1),m.lc("hidden",!o.cantidad_visible),m.zb(1),m.Ic(" | ",o.cantidad,""),m.zb(1),m.lc("ngIf",0!=o.precio),m.zb(2),m.lc("objItem",o)("stopAdd",o.stop_add)("zoom",1.2)}}function De(e,i){if(1&e&&(m.Rb(0,"div",34),m.Ec(1,Te,10,9,"ng-container",35),m.Ec(2,Qe,9,10,"ng-template",null,36,m.Fc),m.Qb()),2&e){var t=m.uc(3),o=m.dc().$implicit;m.zb(1),m.lc("ngIf",0===(null==o?null:o.show_cant_item))("ngIfElse",t)}}function ze(e,i){if(1&e&&(m.Rb(0,"div"),m.Rb(1,"div",28),m.Rb(2,"div"),m.Rb(3,"span",29),m.Gc(4,"Obligatorio"),m.Qb(),m.Rb(5,"div",30),m.Rb(6,"p",31),m.Gc(7),m.Qb(),m.Rb(8,"span",32),m.Gc(9),m.Qb(),m.Qb(),m.Qb(),m.Rb(10,"div"),m.Ec(11,De,4,2,"div",33),m.Qb(),m.Qb(),m.Qb()),2&e){var t=i.$implicit,o=m.dc(2);m.zb(3),m.lc("hidden",!t.isObligatorio),m.zb(4),m.Hc(o.primerMayuscula(t.des)),m.zb(2),m.Hc(t.des_cant_select),m.zb(2),m.lc("ngForOf",t.opciones)}}function Ee(e,i){if(1&e&&(m.Pb(0),m.Ec(1,ze,12,4,"div",27),m.Ob()),2&e){var t=m.dc();m.zb(1),m.lc("ngForOf",t.item.subitems)}}function Fe(e,i){if(1&e){var t=m.Sb();m.Rb(0,"button",47),m.Zb("click",(function(){m.xc(t);var e=m.dc();return m.uc(22).value="",e.setIndicaciones("")})),m.Mb(1,"i",48),m.Qb()}}function Le(e,i){1&e&&m.Mb(0,"i",55)}var je=function(e){return{"border-bottom":e}},Ge=function(e){return{bounceIn:e}};function Ve(e,i){if(1&e){var t=m.Sb();m.Rb(0,"tr",49),m.Rb(1,"td"),m.Gc(2),m.Qb(),m.Rb(3,"td"),m.Rb(4,"div",50),m.Rb(5,"div",51),m.Gc(6),m.Qb(),m.Rb(7,"div",52),m.Zb("debounceClick",(function(){m.xc(t);var e=i.$implicit;return m.dc().addItemToDialogItem(e,1)}))("debounceWait",(function(){return m.xc(t),m.dc().isWaitBtnMenos})),m.Ec(8,Le,1,0,"i",53),m.Gc(9," -"),m.Qb(),m.Rb(10,"div",54),m.Zb("debounceClick",(function(){m.xc(t);var e=i.$implicit;return m.dc().addItemToDialogItem(e,0)})),m.Gc(11,"+"),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.dc();m.lc("ngClass",m.qc(6,je,!n.isOneTipoConsumo)),m.zb(2),m.Ic(" ",o.descripcion," "),m.zb(3),m.lc("hidden",0===o.cantidad_seleccionada)("ngClass",m.qc(8,Ge,o.animar_cantidad)),m.zb(1),m.Hc(o.cantidad_seleccionada),m.zb(2),m.lc("ngIf",n.isWaitBtnMenos)}}var Ae,Be=function(e){return{he2:e}},qe=function(e){return{"div-tpc-one-option-buttom":e}},Ne=function(e,i){return{"div-tpc":e,"div-tpc-one-option":i}},He=((Ae=function(){function e(i,t,o,n,a,s,r){_classCallCheck(this,e),this.miPedidoService=i,this.uttilService=t,this.infoToken=o,this.dialogRef=n,this.socketService=a,this.establecimientoService=r,this._subitems_selected=[],this.isOptionRequeridosComplet=!0,this.isObjSubItems=!0,this.isUsCliente=!0,this.isOneTipoConsumo=!1,this.url_img=Z.d,this.isWaitBtnMenos=!1,this.destroyDlg$=new Se.Subject,this.isFirstOpen=!0,this.clearSubItemOpcionesCtrlCant(s.item),this.item=s.item,this.item.cantidad=this.getCantidadItemCarta(),this.objItemTipoConsumoSelected=s.objItemTipoConsumoSelected,this.miPedidoService.setObjSeccionSeleced(s.seccion),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),this.isOneTipoConsumo=1===this.objItemTipoConsumoSelected.length,this.item.detalles=this.primerMayuscula(this.item.detalles)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.isUsCliente=this.infoToken.getInfoUs().isCliente,this.miPedidoService.itemStockChangeObserve$.pipe(Object(ye.takeUntil)(this.destroyDlg$)).subscribe((function(i){e.isFirstOpen?e.isFirstOpen=!1:e.item.iditem===i.iditem&&(e.item.cantidad=i.cantidad)})),this.item.subitems_selected=null,this.item.subitems_view=null,this.getSubItemsItemSelect(this.item),this.simbolo_moneda=this.establecimientoService.getSimboloMoneda()}},{key:"ngOnDestroy",value:function(){this.destroyDlg$.next(!0),this.destroyDlg$.unsubscribe()}},{key:"clearSubItemOpcionesCtrlCant",value:function(e){if(!e.cantidad_seleccionada||0===(null==e?void 0:e.cantidad_seleccionada)){if(!e.subitems)return;e.subitems.map((function(e){1===e.show_cant_item&&e.opciones.map((function(e){(null==e?void 0:e.cantidad_selected)>0&&(e.des=e.desIni,e.precio=e.precio_first.toFixed(2),e.cantidad_selected=0,e.stop_add=!1)}))}))}}},{key:"shoFirstChartUpperOptions",value:function(e){var i=this;e.subitems&&e.subitems.map((function(e){e.opciones.map((function(e){e.des=i.uttilService.primeraConMayusculas(e.des.toLowerCase())}))}))}},{key:"getCantidadItemCarta",value:function(){return parseInt(this.miPedidoService.findItemCarta(this.item).cantidad.toString(),0)}},{key:"getSubItemsItemSelect",value:function(e){var i=this;if(0===e.procede)return this.isObjSubItems=!1,void(this.isOptionRequeridosComplet=!0);e.is_search_subitems?(this.shoFirstChartUpperOptions(e),this.cocinarListSubItemsView(),this.compItemSumImporte()):this.socketService.emitRes("search-subitems-del-item",e.iditem).subscribe((function(t){var o=t[0].respuesta;o="string"==typeof o?JSON.parse(o):null,e.subitems=o,e.is_search_subitems=!0,i.shoFirstChartUpperOptions(e),i.cocinarListSubItemsView(),i.compItemSumImporte()}))}},{key:"cocinarListSubItemsView",value:function(){this.item.subitems&&this.item.subitems.length>0?(this.item.subitems.map((function(e){e.isSoloUno=1===e.subitem_cant_select_ini,e.isObligatorio=1===e.subitem_required_select,e.subitem_cant_select=0===e.subitem_cant_select?e.opciones.length:e.subitem_cant_select,e.des_cant_select=e.isSoloUno?"Solo 1":"Hasta "+e.subitem_cant_select,e.des_cant_select=1===e.show_cant_item&&0===e.subitem_cant_select_ini?"Seleccione":e.des_cant_select,e.opciones.map((function(e){e.iditem_subitem=e.iditem_subitem,e.precio_visible=0!==e.precio,e.precio=e.precio_visible?e.precio:0,e.cantidad_visible=!isNaN(parseFloat(e.cantidad)),e.selected=!1}))})),this.isObjSubItems=!0,this.item.indicaciones="",this.checkOptionObligario()):(this.isObjSubItems=!1,this.isOptionRequeridosComplet=!0)}},{key:"addSubItemCtrlCantidad",value:function(e,i){if(i.selected=i.cantidad_selected>0,1===i.cantidad_selected&&(parseFloat(i.precio)>i.precio_first?i.precio_first=i.precio_first:(i.desIni=0!==i.precio_first?i.des:i.desIni,i.precio_first=parseFloat(i.precio))),i.precio=i.cantidad_selected>1?i.isSuma_selected?parseFloat(i.precio)+parseFloat(i.precio_first):parseFloat(i.precio)-parseFloat(i.precio_first):i.precio_first,i.des=i.cantidad_selected>0?"".concat(i.cantidad_selected," ").concat(i.desIni):i.desIni,i.precio=i.precio.toFixed(2),0===e.subitem_cant_select_ini)i.stop_add=!1;else{var t=e.opciones.map((function(e){return e.cantidad_selected||0})).reduce((function(e,i){return e+i}),0),o=e.subitem_cant_select===t;e.opciones.map((function(e){return e.stop_add=o}))}this.addSubItem(e,i)}},{key:"addSubItem",value:function(e,i){var t=this,o=e.opciones.filter((function(e){return e.selected})),n=o.length;o.map((function(t,o){n>e.subitem_cant_select&&t!==i&&(t.selected=!1,n--)}));var a=(o=e.opciones.filter((function(e){return e.selected}))).length;if(1===e.subitem_required_select)if(1===e.show_cant_item){var s=e.opciones.map((function(e){return e.cantidad_selected||0})).reduce((function(e,i){return e+i}),0);e.isObligatorio=s!==e.subitem_cant_select}else e.isObligatorio=a!==e.subitem_cant_select;this._subitems_selected=[],this.item.subitems.map((function(e){e.opciones.filter((function(e){return e.selected})).map((function(e){t._subitems_selected.push(e)}))})),this.item.subitems_selected=this._subitems_selected,this.checkOptionObligario(),this.compItemSumImporte(!0)}},{key:"checkOptionObligario",value:function(){var e=0;this.item.subitems&&null!==this.item.subitems?(this.item.subitems.map((function(i){e=i.isObligatorio?1:e})),this.isOptionRequeridosComplet=0===e):this.isOptionRequeridosComplet=!0}},{key:"compItemSumImporte",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var i=0;this.item.subitems.map((function(e){e.opciones.filter((function(e){return e.selected})).map((function(e){i+=parseFloat(e.precio.toString())}))})),this.precioProducto=this._precioProductoIni+i}else this.precioProducto=this.getImporteTotalItem(),this._precioProductoIni=this.precioProducto}},{key:"getImporteTotalItem",value:function(){var e=0;return e=0===(e=this.miPedidoService.getImporteTotalItemFromMiPedido(this.item))?parseFloat(this.item.precio):e}},{key:"addItemToDialogItem",value:function(e,i){var t=!0;this.item.subitems_selected=this._subitems_selected,this.item.subitems_selected.map((function(i){return i.idtipo_consumo=e.idtipo_consumo})),this.item.subitems_selected.map((function(e){"ND"===e.cantidad||0!==parseFloat(e.cantidad.toString())||(t=!1)})),t&&(this.miPedidoService.addItem2(e,this.item,i),e.animar_cantidad=!0,setTimeout((function(){e.animar_cantidad=!1}),500),this.compItemSumImporte())}},{key:"setIndicaciones",value:function(e){var i;this.item.indicaciones=this.uttilService.addslashes(e);var t=!1;this.isObjSubItems&&(t=(null===(i=this.item.subitems_selected)||void 0===i?void 0:i.length)>0);var o=this.miPedidoService.findOnlyItemMiPedido(this.item);o&&!this.isObjSubItems&&(o.indicaciones=e),o&&!t&&(o.indicaciones=e),this.miPedidoService.setLocalStoragePedido()}},{key:"getEstadoStockItem",value:function(e){if("ND"===e||isNaN(e))return"verde";var i=parseInt(e,0);return i>10?"verde":i>5?"amarillo":"rojo"}},{key:"cerrarDlg",value:function(){this.dialogRef.close()}},{key:"primerMayuscula",value:function(e){return this.uttilService.primeraConMayusculas(e)}}]),e}()).\u0275fac=function(e){return new(e||Ae)(m.Lb(s.a),m.Lb(_.a),m.Lb(b.a),m.Lb(S.i),m.Lb(l.a),m.Lb(S.a),m.Lb(u.a))},Ae.\u0275cmp=m.Fb({type:Ae,selectors:[["app-dialog-item-edit"]],decls:37,vars:32,consts:[[1,"item-content"],[1,"i-header"],[1,"d-flex"],[1,"fs-13","fw-600"],[1,"d-flex","align-items-start"],["matRipple","",1,"i-btn-exit",2,"width","30px",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"i-body","fw-100","fs-13",3,"ngClass"],[4,"ngIf"],[1,"p-3"],[1,"fs-18","text-secondary","fw-600"],[1,"mb-3",3,"ngClass"],[1,"w-100"],["matInput","","placeholder","Agregue una indicacion","name","indicaciones",3,"ngModel","ngModelChange","keyup"],["txtIdicaciones",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"p-3","w-100",3,"ngClass"],[1,"fs-12","text-danger",3,"hidden"],["id","tpc_content",1,"mb-2"],["width","100%",1,"tb-tpc"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"i-footer","d-flex","justify-content-between"],["mat-flat-button","","color","primary",3,"click"],[1,"i-precio"],[1,"text-center","border-bottom"],[1,"img-carta",3,"src","alt"],[1,"titlo-detalle"],[4,"ngFor","ngForOf"],[1,"pb-3","pt-2","mb-3"],[1,"txt-obligatorio",3,"hidden"],[1,"sub-i-titulo","mb-2"],[1,"mb-1","fw-600","fs-14"],[1,"fs-12","text-secondary"],["class","xoption w-100","matRipple","",4,"ngFor","ngForOf"],["matRipple","",1,"xoption","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"w-100",3,"ngModel","ngClass","disabled","change","ngModelChange"],[1,"w-100","d-flex","justify-content-between","fs-13"],[1,"xprecio","pl-1",3,"hidden"],[1,"xprecio","aling-derecha"],["class","fw-600 fs-12",4,"ngIf"],[1,"fw-600","fs-12"],[1,"w-100","d-flex","justify-content-between","fs-13","pt-2","pb-2",3,"ngClass"],["class","ml-2 fs-11 fw-600",4,"ngIf"],[3,"objItem","stopAdd","zoom","objResponse"],[1,"ml-2","fs-11","fw-600"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"fa","fa-close"],[3,"ngClass"],[1,"d-flex","float-right"],[1,"fs-19","pr-2","animated",3,"hidden","ngClass"],["appDebounceClick","","matRipple","",1,"btn-tbl","bg-danger","xCursor",3,"debounceClick","debounceWait"],["class","fa fa-arrow-right",4,"ngIf"],["appDebounceClick","","matRipple","",1,"btn-tbl","bg-success","xCursor",3,"debounceClick"],[1,"fa","fa-arrow-right"]],template:function(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",0),m.Rb(1,"div",1),m.Rb(2,"div",2),m.Rb(3,"div",3),m.Rb(4,"div",4),m.Rb(5,"span"),m.Gc(6),m.ec(7,"number"),m.Qb(),m.Rb(8,"span"),m.Gc(9),m.Qb(),m.Qb(),m.Qb(),m.Rb(10,"div",5),m.Zb("click",(function(){return i.cerrarDlg()})),m.Mb(11,"i",6),m.Qb(),m.Qb(),m.Qb(),m.Rb(12,"div",7),m.Ec(13,Pe,3,3,"ng-container",8),m.Rb(14,"div",9),m.Rb(15,"p",10),m.Gc(16),m.Qb(),m.Ec(17,we,4,1,"ng-container",8),m.Ec(18,Ee,2,1,"ng-container",8),m.Rb(19,"div",11),m.Rb(20,"mat-form-field",12),m.Rb(21,"input",13,14),m.Zb("ngModelChange",(function(e){return i.item.indicaciones=e}))("keyup",(function(){m.xc(t);var e=m.uc(22);return i.setIndicaciones(e.value)})),m.Qb(),m.Ec(23,Fe,2,0,"button",15),m.Qb(),m.Qb(),m.Qb(),m.Rb(24,"div",16),m.Rb(25,"span",17),m.Gc(26,"Hay opciones obligatorias por marcar"),m.Qb(),m.Rb(27,"div",18),m.Rb(28,"table",19),m.Ec(29,Ve,12,10,"tr",20),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(30,"div",21),m.Rb(31,"div"),m.Rb(32,"button",22),m.Zb("click",(function(){return i.cerrarDlg()})),m.Gc(33,"Listo, continuar"),m.Qb(),m.Qb(),m.Rb(34,"div",23),m.Gc(35),m.ec(36,"number"),m.Qb(),m.Qb(),m.Qb()}2&e&&(m.zb(5),m.Bb("fs-12 i-stock estado-color-",i.getEstadoStockItem(i.item.cantidad),""),m.zb(1),m.Ic(" ",m.gc(7,19,i.item.cantidad,"2."),""),m.zb(3),m.Hc(i.item.des),m.zb(3),m.lc("ngClass",m.qc(25,Be,!i.isOneTipoConsumo)),m.zb(1),m.lc("ngIf",i.item.img.length>0),m.zb(3),m.Ic(" ",i.item.des," "),m.zb(1),m.lc("ngIf",i.item.detalles.length>0),m.zb(1),m.lc("ngIf",i.item.subitems),m.zb(1),m.lc("ngClass",m.qc(27,qe,i.isOneTipoConsumo)),m.zb(2),m.lc("ngModel",i.item.indicaciones),m.zb(2),m.lc("ngIf",i.item.indicaciones),m.zb(1),m.lc("ngClass",m.rc(29,Ne,i.isOneTipoConsumo,i.isOneTipoConsumo)),m.zb(1),m.lc("hidden",i.isOptionRequeridosComplet),m.zb(2),m.Ab("disabled",!i.isOptionRequeridosComplet||null),m.zb(2),m.lc("ngForOf",i.objItemTipoConsumoSelected),m.zb(6),m.Jc("",i.simbolo_moneda," ",m.gc(36,22,i.precioProducto,"0.2"),""))},directives:[T.n,o.q,o.t,I.c,ke.a,n.c,n.p,n.s,o.s,y.b,w.a,xe.a,I.j,Re],pipes:[o.g],styles:[".mat-checkbox-layout{margin:0;width:100%;position:relative}  .mat-checkbox-inner-container{margin-left:0!important}  .cdk-overlay-dark-backdrop{background:rgba(0,0,0,.52)}.item-content[_ngcontent-%COMP%]{position:relative}.i-header[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #d3d3d3;background:#eee}.titlo-detalle[_ngcontent-%COMP%]{font-size:14px;font-family:Ubuntu-Light;color:#616161}.i-stock[_ngcontent-%COMP%]{border-radius:5px;text-align:center;margin-right:5px;padding:5px}.i-btn-exit[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;padding:8px;line-height:10px;background:hsla(0,0%,74.1%,.7);border-radius:4px}.li-tachado[_ngcontent-%COMP%]{text-decoration:line-through;color:red}.sub-i-titulo-content[_ngcontent-%COMP%]{padding-bottom:20px}.sub-i-titulo[_ngcontent-%COMP%]{line-height:1.2}.borde-bajo[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}.i-body[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 170px);height:calc(100vh - 170px);overflow-x:hidden;overflow-y:auto}.i-body.he2[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 110px);height:calc(100vh - 110px)}.txt-obligatorio[_ngcontent-%COMP%]{font-size:12px;background:#e0e0e0;padding:3px;margin-left:5px;border-radius:8px;position:relative;float:right}.mat-checkbox-layout[_ngcontent-%COMP%]{margin:0}.xoption[_ngcontent-%COMP%]{padding-right:8px;min-width:150px;font-size:12px;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;border-bottom:1px solid #eee;padding-bottom:2px;padding-top:2px}.xoption[_ngcontent-%COMP%]   .agotado[_ngcontent-%COMP%]{text-decoration:line-through;color:#db7093}.xoption[_ngcontent-%COMP%]   .xprecio[_ngcontent-%COMP%]{font-size:10px;color:#757575}.xprecio.aling-derecha[_ngcontent-%COMP%]{position:absolute;float:right;right:0}.i-footer[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;bottom:0;z-index:1;border-top:1px solid #d3d3d3;background:#fff;width:100%;padding:15px;background:#eee}.i-precio[_ngcontent-%COMP%]{position:absolute;right:15px;font-size:20px;font-weight:600;top:18px}.tb-tpc[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px}.tb-tpc-one[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;border:none}.btn-tbl[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:7px 16px;font-size:15px;border-radius:5px;margin-left:4px;margin-bottom:4px}#tpc_content[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.43}.estado-color-verde[_ngcontent-%COMP%]{background:#43a047;color:#e0e0e0}.estado-color-amarillo[_ngcontent-%COMP%]{background:#ffb300;color:#424242}.estado-color-rojo[_ngcontent-%COMP%]{background:#d81b60;color:#e0e0e0}.img-carta[_ngcontent-%COMP%]{max-width:100%;max-height:40vh;-o-object-fit:cover;object-fit:cover;-webkit-transition:all .1s;transition:all .1s}.div-tpc[_ngcontent-%COMP%]{bottom:50px;position:fixed;background:#fff;border-top:1px solid #bdbdbd}@media only screen and (min-width:445px){.img-carta[_ngcontent-%COMP%]{padding:10px}.i-footer[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky}.i-body[_ngcontent-%COMP%]{max-height:-webkit-calc(90vh - 110px);max-height:calc(90vh - 110px)}.i-body[_ngcontent-%COMP%], .i-body.he2[_ngcontent-%COMP%]{height:auto}.div-tpc[_ngcontent-%COMP%]{position:relative;bottom:0}.div-tpc-one-option[_ngcontent-%COMP%]{bottom:50px;position:absolute}.div-tpc-one-option-buttom[_ngcontent-%COMP%]{padding-bottom:80px}}"]}),Ae),$e=t("quSY"),Ue=t("HWNa");function Ze(e,i){if(1&e&&(m.Rb(0,"p",16),m.Gc(1),m.Qb()),2&e){var t=m.dc().$implicit;m.zb(1),m.Hc(t.comentario)}}var Je=function(e,i){return{"badge-danger":e,"badge-warning":i}};function We(e,i){if(1&e&&(m.Rb(0,"div",9),m.Rb(1,"div",10),m.Rb(2,"p",11),m.Gc(3),m.Qb(),m.Rb(4,"div",12),m.Rb(5,"span",13),m.Gc(6),m.ec(7,"number"),m.Qb(),m.Rb(8,"p",14),m.Mb(9,"i",6),m.Gc(10),m.ec(11,"number"),m.Qb(),m.Qb(),m.Qb(),m.Ec(12,Ze,2,1,"p",15),m.Qb()),2&e){var t=i.$implicit;m.zb(3),m.Ic("",t.nomcliente," "),m.zb(3),m.Hc(m.gc(7,5,t.numpedidos,"2.")),m.zb(2),m.lc("ngClass",m.rc(11,Je,t.calificacion<3,t.calificacion<4)),m.zb(2),m.Ic(" ",m.gc(11,8,t.calificacion,".1"),""),m.zb(2),m.lc("ngIf",""!=t.comentario)}}var Ke,Ye,Xe,ei=((Ke=function(){function e(i){_classCallCheck(this,e),this.dataComentarios=i,this.listComentarios=this.dataComentarios.listCalificacion}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ke)(m.Lb(S.a))},Ke.\u0275cmp=m.Fb({type:Ke,selectors:[["app-dialog-calificacion-sede"]],decls:19,vars:9,consts:[[1,"div-content-opiniones"],[1,"d-flex","justify-content-between","align-items-center"],["mat-dialog-close","",1,"btn","btn-sm","btn-secondary"],[1,"fa","fa-close"],[1,"p-2"],[1,"badge","badge-secondary","mr-2","fs-13"],[1,"fa","fa-star"],[1,"fs-13"],["class","border-bottom pb-2 pt-2 mb-1 fs-12",4,"ngFor","ngForOf"],[1,"border-bottom","pb-2","pt-2","mb-1","fs-12"],[1,"d-flex","justify-content-between"],[1,"fw-600","text-secondary","mr-2","fs-11"],[1,"d-flex"],[1,"badge","badge-secondary","mr-2"],[1,"badge","badge-success",3,"ngClass"],["class","fw-100 text-secondary",4,"ngIf"],[1,"fw-100","text-secondary"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Rb(1,"div",1),m.Rb(2,"p"),m.Gc(3,"Comentarios"),m.Qb(),m.Rb(4,"button",2),m.Mb(5,"i",3),m.Qb(),m.Qb(),m.Mb(6,"hr"),m.Rb(7,"div",4),m.Rb(8,"div"),m.Rb(9,"span",5),m.Mb(10,"i",6),m.Gc(11),m.ec(12,"number"),m.Qb(),m.Rb(13,"span",7),m.Gc(14),m.ec(15,"number"),m.Qb(),m.Qb(),m.Mb(16,"hr"),m.Rb(17,"div"),m.Ec(18,We,13,14,"div",8),m.Qb(),m.Qb(),m.Qb()),2&e&&(m.zb(11),m.Ic(" ",m.gc(12,3,i.dataComentarios.calificacion,".1"),""),m.zb(3),m.Ic("Puntuacion basada en ",m.gc(15,6,i.dataComentarios.cantidad,"2.")," opiniones de usuarios."),m.zb(4),m.lc("ngForOf",i.listComentarios))},directives:[S.d,o.s,o.q,o.t],pipes:[o.g],styles:[".mat-dialog-container{padding:0}.div-content-opiniones[_ngcontent-%COMP%]{padding:24px}p[_ngcontent-%COMP%]{margin:0}"]}),Ke),ii=t("RHa8"),ti=((Ye=function(){function e(i,t,o){_classCallCheck(this,e),this.pedidoService=i,this.socketService=t,this.cocinarDescuentosPromoService=o}return _createClass(e,[{key:"iniReloadOpenPromo",value:function(e){var i=this;this.listPromos=e,this.socketService.emit("date-now-info",null),setInterval((function(){i.socketService.emit("date-now-info",null)}),15e3),this.socketService.onGetInfoDateNow().subscribe((function(e){var t=new Date(e);i.listPromos.map((function(e){i.consultarPromoAbierto(e,t)}))}))}},{key:"promoFilterShow",value:function(e,i){var t=this,o=[];return this.carta=this.pedidoService.getObjCarta(),e.items&&e.lista.map((function(e){if(e.iditem){var n=e.iditem.toString(),a=parseFloat(e.porc_descuento),s=i.secciones.map((function(e){return e.items.find((function(e){return e.iditem.toString()===n}))})).find((function(e){return e}));if(s){var r=Object.assign({},s);r.ispromo=e,e.cantidad_x||t.cocinarDescuentosPromoService.aplicarDescuentoItem(r,a),o.push(r)}}})),e.productos&&e.lista.map((function(e){if(e.idproducto_stock){var i=e.idproducto_stock.toString(),n=parseFloat(e.porc_descuento),a=t.carta.bodega.map((function(e){return e.items.find((function(e){return e.idcarta_lista.toString()===i}))})).find((function(e){return e}));if(a){var s=Object.assign({},a);s.ispromo=e,e.cantidad_x||t.cocinarDescuentosPromoService.aplicarDescuentoItem(s,n),o.push(s)}}})),e.secciones&&e.lista.map((function(e){var n=e.idseccion.toString(),a=parseFloat(e.porc_descuento),s=i.secciones.find((function(e){return e.idseccion.toString()===n}));s&&s.items.map((function(i){var n=Object.assign({},i);n.ispromo=e,t.cocinarDescuentosPromoService.aplicarDescuentoItem(n,a),o.push(n)}))})),o}},{key:"getImportePedido",value:function(){return this.pedidoService.getSubTotalMiPedido()}},{key:"consultarPromoAbierto",value:function(e,i){var t,o=i.getDay(),n=e.parametros.body.dias_semana.indexOf(o)>-1,a=new Date,s=new Date,r=e.parametros.body.h_inicio.split(":"),c=e.parametros.body.h_fin.split(":");a.setHours(parseFloat(r[0])),a.setMinutes(parseFloat(r[1])),s.setHours(parseFloat(c[0])),s.setMinutes(parseFloat(c[1])),t=i.getTime()>=a.getTime()&&i.getTime()<=s.getTime(),e.abierto=n&&t?1:0}},{key:"showDiasSemana",value:function(e){var i=this,t=e.split(",").filter((function(e){return""!==e}));if(7===t.length)return"Todos los dias";var o="";return t.map((function(e){o+=i.getDiasByNum(parseInt(e,0))+", "})),o=o.slice(0,-2)}},{key:"getDiasByNum",value:function(e){return["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"][e]}},{key:"addZero",value:function(e){return e<10&&(e="0"+e),e}}]),e}()).\u0275fac=function(e){return new(e||Ye)(m.Vb(s.a),m.Vb(l.a),m.Vb(ii.a))},Ye.\u0275prov=m.Hb({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye),oi=t("6NNB"),ni=((Xe=function(){function e(i,t){_classCallCheck(this,e),this.socketService=i,this.pedidoService=t,this.datosSede=[],this.impresoras=[]}return _createClass(e,[{key:"getDataSede",value:function(){this.datosSede=this.pedidoService.objDatosSede}},{key:"relationRowToPrint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getDataSede();var i=this.pedidoService.getMiPedido(),t=[],o=[],n=[],a=[],s=null;this.impresoras=this.datosSede.impresoras;var r=this.datosSede.datossede[0].num_copias,c=this.datosSede.datossede[0].var_size_font_tall_comanda,l=this.datosSede.datossede[0].pie_pagina,d=this.datosSede.datossede[0].pie_pagina_comprobante,u=!0;e&&this.setFirstPrinterSeccionCliente(i,this.impresoras);var b=JSON.parse(localStorage.getItem("sys::punto"))||{};return b.ispunto_autopedido=!!b&&b.ispunto_autopedido,this.impresoras.map((function(m){if(u=!1,a=[],i.tipoconsumo.map((function(i,t){if(a[t]={des:i.descripcion,id:i.idtipo_consumo,titlo:i.titulo,conDatos:!1},i.secciones.filter((function(e){return e.idimpresora===m.idimpresora})).map((function(i){s=m,i.items.map((function(o){(0!==o.imprimir_comanda||e)&&(u=!0,a[t].conDatos=!0,a[t][o.iditem]=o,a[t][o.iditem].des_seccion=i.des,a[t][o.iditem].cantidad=o.cantidad_seleccionada.toString().padStart(2,"0"),a[t][o.iditem].precio_print=parseFloat(o.precio_print.toString()).toFixed(2),o.subitems_view||(a[t][o.iditem].subitems_view=null))}))})),i.secciones.filter((function(e){return e.idimpresora_otro===m.idimpresora})).map((function(i){s=m,i.items.map((function(o){(0!==o.imprimir_comanda||e)&&(u=!0,a[t].conDatos=!0,a[t][o.iditem]=o,a[t][o.iditem].des_seccion=i.des,a[t][o.iditem].cantidad=o.cantidad_seleccionada.toString().padStart(2,"0"),a[t][o.iditem].precio_print=parseFloat(o.precio_print.toString()).toFixed(2),o.subitems_view||(a[t][o.iditem].subitems_view=null))}))})),b.ispunto_autopedido){if(b.impresora.ip_print=b.impresora.ip,m.idimpresora!==b.impresora.idimpresora)return;i.secciones.map((function(i){s=b.impresora,i.items.map((function(o){(0!==o.imprimir_comanda||e)&&(u=!0,a[t].conDatos=!0,a[t][o.iditem]=o,a[t][o.iditem].des_seccion=i.des,a[t][o.iditem].cantidad=o.cantidad_seleccionada.toString().padStart(2,"0"),a[t][o.iditem].precio_print=parseFloat(o.precio_print.toString()).toFixed(2),o.subitems_view||(a[t][o.iditem].subitems_view=null))}))}))}})),0!==a.length&&u){n=[];var p={};p.ip_print=s.ip,p.var_margen_iz=s.var_margen_iz,p.var_size_font=s.var_size_font,p.local=0,p.num_copias=r,p.var_size_font_tall_comanda=c,p.copia_local=0,p.img64="",p.papel_size=s.papel_size,p.pie_pagina=l,p.pie_pagina_comprobante=d,n.push(p),t.push({arrBodyPrint:a,arrPrinters:n}),o.push(p)}})),t.listPrinters=o,t}},{key:"GetFirstPrinter",value:function(e){var i=null,t=e.length;return t>0&&(i=e[0]),t>1&&"caja"===i.descripcion.toLowerCase()&&(i=e[1]),i}},{key:"setFirstPrinterSeccionCliente",value:function(e,i){var t={};e.tipoconsumo.map((function(e){t=e.secciones.filter((function(e){return 0!==e.idimpresora}))[0]})),t||(t=this.GetFirstPrinter(i)),t&&e.tipoconsumo.map((function(e,i){t=e.secciones.filter((function(e){return 0===e.idimpresora})).map((function(e){e.idimpresora=t.idimpresora}))}))}},{key:"getPrinterPrecuenta",value:function(){var e=[],i=[];this.getDataSede(),e=[];var t=this.datosSede.datossede[0].var_size_font_tall_comanda,o=this.datosSede.datossede[0].pie_pagina,n=this.datosSede.datossede[0].pie_pagina_comprobante,a=this.pedidoService.getMiPedido();i=[],a.tipoconsumo.map((function(e,t){i[t]={des:e.descripcion,id:e.idtipo_consumo,titlo:e.titulo,conDatos:!1},e.secciones.map((function(e){e.items.map((function(o){i[t].conDatos=!0,i[t][o.iditem]=i[t][o.iditem]?i[t][o.iditem]:o,i[t][o.iditem].des_seccion=e.des,i[t][o.iditem].cantidad=i[t][o.iditem].cantidad?i[t][o.iditem].cantidad:0,i[t][o.iditem].precio_print_app=i[t][o.iditem].precio_print_app?i[t][o.iditem].precio_print_app:0,i[t][o.iditem].cantidad+=parseFloat(o.cantidad_seleccionada.toString()),i[t][o.iditem].precio_print_app+=parseFloat(o.precio_print.toString()),i[t][o.iditem].precio_print=parseFloat(i[t][o.iditem].precio_print_app.toString()).toFixed(2),o.subitems_view||(i[t][o.iditem].subitems_view=null)}))}))})),this.impresoras=this.datosSede.impresoras;var s=this.impresoras.filter((function(e){return e.idtipo_otro})).filter((function(e){return e.idtipo_otro.indexOf("-2")>-1}))[0];if(!s)return!1;var r={};return r.ip_print=s.ip,r.var_margen_iz=s.var_margen_iz,r.var_size_font=s.var_size_font,r.local=0,r.num_copias=0,r.var_size_font_tall_comanda=t,r.copia_local=0,r.img64="",r.papel_size=s.papel_size,r.pie_pagina=o,r.pie_pagina_comprobante=n,e.push(r),{arrBodyPrint:i,arrPrinters:e}}},{key:"enviarMiPedido",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.relationRowToPrint(e)}}]),e}()).\u0275fac=function(e){return new(e||Xe)(m.Vb(l.a),m.Vb(s.a))},Xe.\u0275prov=m.Hb({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe),ai=t("nYx/"),si=t("Ie24"),ri=t("Te6q"),ci=t("3ui4"),li=t("1G5W"),di=t("OzqD"),ui=t("tyNb"),bi=function(e){return[e]};function mi(e,i){if(1&e&&(m.Rb(0,"div",5),m.Mb(1,"app-comp-list-item-pedido-cliente",6),m.Qb()),2&e){var t=m.dc();m.lc("ngClass",m.qc(2,bi,t.isVisibleConfirmarAnimated?"fadeOutLeft d-none":"fadeInLeft")),m.zb(1),m.lc("arrSubtotales",t._arrSubtotales)}}function pi(e,i){1&e&&(m.Rb(0,"span",31),m.Gc(1,"Promo"),m.Qb())}function fi(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",38),m.Zb("click",(function(){m.xc(t);var e=m.dc().$implicit,i=m.dc(3).$implicit,o=m.dc(2).$implicit,n=m.dc(2).$implicit;return m.dc(3).addItemToResumen(n,o,i,e,1)})),m.Gc(1,"-"),m.Qb()}}function hi(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",39),m.Zb("click",(function(){m.xc(t);var e=m.dc().$implicit,i=m.dc(3).$implicit,o=m.dc(2).$implicit,n=m.dc(2).$implicit;return m.dc(3).addItemToResumen(n,o,i,e,0)})),m.Gc(1,"+"),m.Qb()}}var gi=function(e){return{"pl-4":e}};function vi(e,i){if(1&e&&(m.Rb(0,"li",33),m.Rb(1,"div",34),m.Ec(2,fi,2,0,"div",35),m.Gc(3),m.ec(4,"number"),m.Ec(5,hi,2,0,"div",36),m.Qb(),m.Rb(6,"div",37),m.Gc(7),m.ec(8,"number"),m.Qb(),m.Qb()),2&e){var t=i.$implicit,o=m.dc(10);m.lc("matRippleColor",o.rippleColorSubItem),m.zb(1),m.lc("ngClass",m.qc(14,gi,o.isHayCuentaBusqueda)),m.zb(1),m.lc("ngIf",!o.isHayCuentaBusqueda),m.zb(1),m.Jc(" ",m.gc(4,8,t.cantidad_seleccionada,"2.")," ",t.des," "),m.zb(2),m.lc("ngIf",!o.isHayCuentaBusqueda),m.zb(1),m.lc("hidden",0===t.precio),m.zb(1),m.Ic(" + ",m.gc(8,11,t.precio,"0.2")," ")}}function Ci(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"div"),m.Rb(2,"ul",25),m.Ec(3,vi,9,16,"li",32),m.Qb(),m.Qb(),m.Ob()),2&e){var t=m.dc(2).$implicit;m.zb(3),m.lc("ngForOf",t.subitems_view)}}function Si(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"li",26),m.Zb("click",(function(){m.xc(t);var e=m.dc().$implicit,i=m.dc(2).$implicit;return m.dc(5).openDlgItemToResumen(i,e)})),m.Rb(2,"div",27),m.Gc(3),m.ec(4,"number"),m.Qb(),m.Rb(5,"div",28),m.Gc(6),m.ec(7,"lowercase"),m.Rb(8,"span",19),m.Gc(9),m.Qb(),m.Ec(10,pi,2,0,"span",29),m.Qb(),m.Rb(11,"div",30),m.Gc(12),m.ec(13,"number"),m.Qb(),m.Qb(),m.Ec(14,Ci,4,1,"ng-container",4),m.Ob()}if(2&e){var o=m.dc().$implicit,n=m.dc(7);m.zb(1),m.lc("matRippleColor",n.rippleColor),m.zb(2),m.Hc(m.gc(4,8,o.cantidad_seleccionada,"2.")),m.zb(3),m.Ic("",m.fc(7,11,o.des)," "),m.zb(2),m.lc("hidden",!o.indicaciones),m.zb(1),m.Ic("( ",o.indicaciones," )"),m.zb(1),m.lc("ngIf",o.ispromo),m.zb(2),m.Hc(m.gc(13,13,o.precio_print,"0.2")),m.zb(2),m.lc("ngIf",o.subitems_view)}}function yi(e,i){if(1&e&&(m.Rb(0,"div"),m.Ec(1,Si,15,16,"ng-container",4),m.Qb()),2&e){var t=i.$implicit;m.zb(1),m.lc("ngIf",t.cantidad_seleccionada>0)}}function ki(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"div",23),m.Rb(2,"span"),m.Gc(3),m.ec(4,"titlecase"),m.Qb(),m.Rb(5,"div",24),m.Gc(6),m.Qb(),m.Qb(),m.Rb(7,"ul",25),m.Ec(8,yi,2,1,"div",22),m.Qb(),m.Ob()),2&e){var t=m.dc().$implicit;m.zb(3),m.Hc(m.fc(4,3,t.des)),m.zb(3),m.Hc(t.count_items),m.zb(2),m.lc("ngForOf",t.items)}}function xi(e,i){if(1&e&&(m.Rb(0,"div"),m.Ec(1,ki,9,5,"ng-container",4),m.Qb()),2&e){var t=i.$implicit;m.zb(1),m.lc("ngIf",t.count_items>0)}}function _i(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",18),m.Rb(2,"span",19),m.Gc(3),m.Qb(),m.Rb(4,"span",19),m.Rb(5,"i",20),m.Zb("click",(function(){return m.xc(t),m.dc(4).goBackCarta()})),m.Qb(),m.Gc(6," Resumen de mi orden"),m.Qb(),m.Rb(7,"div",21),m.Gc(8),m.Qb(),m.Qb(),m.Ec(9,xi,2,1,"div",22),m.Ob()}if(2&e){var o=m.dc().$implicit,n=m.dc(3);m.zb(2),m.lc("hidden",n.isDeliveryCliente),m.zb(1),m.Hc(o.descripcion),m.zb(1),m.lc("hidden",!n.isDeliveryCliente),m.zb(4),m.Hc(o.count_items_seccion),m.zb(1),m.lc("ngForOf",o.secciones)}}function Ri(e,i){if(1&e&&(m.Rb(0,"div",17),m.Ec(1,_i,10,5,"ng-container",4),m.Qb()),2&e){var t=i.$implicit;m.zb(1),m.lc("ngIf",t.count_items_seccion>0)}}function Pi(e,i){if(1&e&&(m.Rb(0,"li",40),m.Rb(1,"div",25),m.Gc(2),m.ec(3,"titlecase"),m.Qb(),m.Rb(4,"div"),m.Gc(5),m.ec(6,"number"),m.Qb(),m.Qb()),2&e){var t=i.$implicit,o=m.dc(3);m.lc("matRippleColor",o.rippleColor),m.zb(2),m.Hc(m.fc(3,3,t.descripcion)),m.zb(3),m.Hc(m.gc(6,5,t.importe,"0.2"))}}function wi(e,i){1&e&&m.Mb(0,"i",46)}function Ii(e,i){if(1&e){var t=m.Sb();m.Rb(0,"button",44),m.Zb("click",(function(){return m.xc(t),m.dc(4).imprimirPrecuenta()})),m.Ec(1,wi,1,0,"i",45),m.Gc(2," Imprimir Precuenta "),m.Qb()}if(2&e){var o=m.dc(4);m.lc("disabled",o.loadPrinterPrecuenta),m.zb(1),m.lc("ngIf",o.loadPrinterPrecuenta)}}function Mi(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",41),m.Rb(2,"button",42),m.Zb("click",(function(){return m.xc(t),m.dc(3).nuevoPedidoFromCuenta()})),m.Gc(3,"Nuevo Pedido"),m.Qb(),m.Ec(4,Ii,3,2,"button",43),m.Qb(),m.Ob()}if(2&e){var o=m.dc(3);m.zb(4),m.lc("ngIf",!o.isCliente)}}function Ti(e,i){if(1&e&&(m.Rb(0,"div",12),m.Ec(1,Ri,2,1,"div",13),m.Rb(2,"div",14),m.Rb(3,"ul",15),m.Ec(4,Pi,7,8,"li",16),m.Qb(),m.Qb(),m.Mb(5,"br"),m.Ec(6,Mi,5,1,"ng-container",4),m.Mb(7,"br"),m.Mb(8,"br"),m.Mb(9,"br"),m.Mb(10,"br"),m.Mb(11,"br"),m.Qb()),2&e){var t=m.dc(2);m.lc("ngClass",m.qc(4,bi,t.isVisibleConfirmarAnimated?"d-none":"d-inline")),m.zb(1),m.lc("ngForOf",t._miPedido.tipoconsumo),m.zb(3),m.lc("ngForOf",t._arrSubtotales),m.zb(2),m.lc("ngIf",t.isHayCuentaBusqueda)}}function Oi(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",49),m.Rb(2,"app-comp-datos-reserva",50),m.Zb("isReady",(function(e){return m.xc(t),m.dc(3).isReadyClienteReserva=e}))("dataReserva",(function(e){return m.xc(t),m.dc(3).getDatosFormConfirmaReserva(e)})),m.Qb(),m.Rb(3,"p",51),m.Mb(4,"i",52),m.Gc(5," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),m.Qb(),m.Mb(6,"hr"),m.Qb(),m.Ob()}}function Qi(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div"),m.Rb(1,"app-text-nom-cliente",58),m.Zb("isNombreValid",(function(e){return m.xc(t),m.dc(5).nombreClienteValido=e})),m.Qb(),m.Qb()}2&e&&(m.zb(1),m.lc("sizeTextBg",!0))}var Di=function(e){return{xdisabled:e}};function zi(e,i){if(1&e){var t=m.Sb();m.Pb(0,25),m.Rb(1,"div",41),m.Mb(2,"br"),m.Mb(3,"br"),m.Ec(4,Qi,2,1,"div",4),m.Mb(5,"hr"),m.Rb(6,"div"),m.Rb(7,"p",55),m.Mb(8,"i",52),m.Gc(9," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),m.Qb(),m.Mb(10,"hr"),m.Mb(11,"br"),m.Rb(12,"div",41),m.Rb(13,"button",56),m.Zb("click",(function(){return m.xc(t),m.dc(4).prepararEnvio()})),m.Rb(14,"div"),m.Rb(15,"span",57),m.Gc(16,"Enviar Pedido"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc(4);m.zb(4),m.lc("ngIf",o.isShowNombreClienteLoginInvitado),m.zb(9),m.lc("disabled",!o.nombreClienteValido)("ngClass",m.qc(3,Di,o.isRequiereMesa))}}function Ei(e,i){if(1&e){var t=m.Sb();m.Rb(0,"app-confirmar-delivery",59),m.Zb("isReady",(function(e){return m.xc(t),m.dc(4).isReadyClienteDelivery=e}))("dataDelivery",(function(e){return m.xc(t),m.dc(4).getDatosFormConfirmaDelivery(e)})),m.Qb()}if(2&e){var o=m.dc(4);m.lc("listSubtotales",o._arrSubtotales)}}function Fi(e,i){if(1&e&&(m.Ec(0,zi,17,5,"ng-container",53),m.Ec(1,Ei,1,1,"ng-template",null,54,m.Fc)),2&e){var t=m.uc(2),o=m.dc(3);m.lc("ngIf",!o.isDeliveryCliente||o.isPuntoAuntoPedido)("ngIfElse",t)}}function Li(e,i){if(1&e&&(m.Pb(0),m.Ec(1,Oi,7,0,"ng-container",47),m.Ec(2,Fi,3,2,"ng-template",null,48,m.Fc),m.Ob()),2&e){var t=m.uc(3),o=m.dc(2);m.zb(1),m.lc("ngIf",o.isReservaCliente)("ngIfElse",t)}}function ji(e,i){1&e&&(m.Rb(0,"div",70),m.Rb(1,"p",71),m.Gc(2,"RESERVAR"),m.Qb(),m.Qb())}function Gi(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",70),m.Rb(1,"span",72),m.Gc(2,"Indique # de mesa"),m.Qb(),m.Rb(3,"div",25),m.Rb(4,"mat-form-field",73),m.Rb(5,"input",74,75),m.Zb("ngModelChange",(function(e){return m.xc(t),m.dc(3).frmConfirma.nummesa=e}))("keyup",(function(){m.xc(t);var e=m.uc(6);return m.dc(3).checkIsRequierMesa(e.value)})),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc(3);m.zb(5),m.lc("ngModel",o.frmConfirma.nummesa)("required",o.isRequiereMesa)}}function Vi(e,i){if(1&e){var t=m.Sb();m.Pb(0,null,60),m.Rb(2,"div",61),m.Rb(3,"form",null,62),m.Ec(5,ji,3,0,"div",63),m.Ec(6,Gi,7,2,"div",63),m.Rb(7,"div",25),m.Rb(8,"mat-form-field",64),m.Rb(9,"input",65),m.Zb("ngModelChange",(function(e){return m.xc(t),m.dc(2).frmConfirma.referencia=e})),m.Qb(),m.Qb(),m.Qb(),m.Mb(10,"br"),m.Rb(11,"div",66),m.Rb(12,"mat-checkbox",67),m.Zb("ngModelChange",(function(e){return m.xc(t),m.dc(2).frmConfirma.reserva=e}))("change",(function(){return m.xc(t),m.dc(2).checkIsRequierMesa()})),m.Gc(13," Esto es una reserva. "),m.Qb(),m.Qb(),m.Mb(14,"br"),m.Mb(15,"br"),m.Mb(16,"hr"),m.Rb(17,"p",68),m.Mb(18,"i",52),m.Gc(19," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),m.Qb(),m.Mb(20,"hr"),m.Qb(),m.Qb(),m.Rb(21,"div",19),m.Rb(22,"app-datos-delivery",69),m.Zb("changeStatus",(function(e){return m.xc(t),m.dc(2).checkDataDelivery(e)})),m.Qb(),m.Rb(23,"p",51),m.Mb(24,"i",52),m.Gc(25," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),m.Qb(),m.Mb(26,"hr"),m.Mb(27,"br"),m.Mb(28,"br"),m.Mb(29,"br"),m.Mb(30,"br"),m.Qb(),m.Ob()}if(2&e){var o=m.dc(2);m.zb(2),m.lc("hidden",o.isDelivery),m.zb(3),m.lc("ngIf",o.frmConfirma.reserva),m.zb(1),m.lc("ngIf",!o.frmConfirma.reserva),m.zb(3),m.lc("ngModel",o.frmConfirma.referencia),m.zb(3),m.lc("ngModel",o.frmConfirma.reserva),m.zb(9),m.lc("hidden",!o.isDelivery),m.zb(1),m.lc("listSubtotales",o._arrSubtotales)}}var Ai=function(e){return{"xh-100":e}},Bi=function(e,i,t){return[e,i,t]};function qi(e,i){if(1&e&&(m.Rb(0,"div",7),m.Ec(1,Ti,12,6,"div",8),m.Rb(2,"div",9),m.Rb(3,"div",10),m.Rb(4,"div",11),m.Ec(5,Li,4,2,"ng-container",4),m.Ec(6,Vi,31,7,"ng-container",4),m.Qb(),m.Qb(),m.Qb(),m.Qb()),2&e){var t=m.dc();m.lc("ngClass",m.qc(6,Ai,t.isVisibleConfirmarAnimated)),m.zb(1),m.lc("ngIf",!t.isCliente&&!t.isPuntoAuntoPedido||t.isHayCuentaBusqueda),m.zb(1),m.lc("hidden",!t.isVisibleConfirmar),m.zb(1),m.lc("ngClass",m.sc(8,Bi,t.isVisibleConfirmarAnimated?"show":"hide",t.isVisibleConfirmarAnimated?"fadeInRight":"fadeInLeft",t.isDeliveryCliente?"bg-2":"bg-1")),m.zb(2),m.lc("ngIf",t.isCliente||t.isPuntoAuntoPedido),m.zb(1),m.lc("ngIf",!t.isCliente&&!t.isPuntoAuntoPedido)}}function Ni(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",41),m.Mb(1,"br"),m.Mb(2,"img",76),m.Mb(3,"br"),m.Rb(4,"span",72),m.Gc(5,"Ver cuenta de la mesa #:"),m.Qb(),m.Rb(6,"div",25),m.Rb(7,"mat-form-field",73),m.Mb(8,"input",77,78),m.Qb(),m.Qb(),m.Rb(10,"span",79),m.Gc(11,"No se encontro cuenta de esta mesa."),m.Qb(),m.Mb(12,"br"),m.Mb(13,"br"),m.Rb(14,"button",80),m.Zb("click",(function(){m.xc(t);var e=m.uc(9);return m.dc().xLoadCuentaMesa(e.value)})),m.Gc(15,"Listo, buscar"),m.Qb(),m.Mb(16,"br"),m.Mb(17,"br"),m.Mb(18,"br"),m.Qb()}if(2&e){var o=m.dc();m.zb(10),m.lc("hidden",!o.msjErr)}}function Hi(e,i){1&e&&(m.Pb(0),m.Mb(1,"i",46),m.Ob())}function $i(e,i){1&e&&m.Gc(0," Recargar Lista ")}function Ui(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",81),m.Rb(2,"div",82),m.Rb(3,"p"),m.Gc(4,"Aun no tiene ningun producto en lista."),m.Qb(),m.Rb(5,"button",83),m.Zb("click",(function(){return m.xc(t),m.dc().pintarMiPedidoNuevamente()})),m.Ec(6,Hi,2,0,"ng-container",47),m.Ec(7,$i,1,0,"ng-template",null,84,m.Fc),m.Qb(),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.uc(8),n=m.dc();m.zb(6),m.lc("ngIf",n.isReloadListPedidos)("ngIfElse",o)}}function Zi(e,i){1&e&&(m.Pb(0),m.Gc(1," Borrar Lista "),m.Ob())}function Ji(e,i){1&e&&m.Gc(0," Nuevo Pedido ")}function Wi(e,i){1&e&&m.Nb(0)}function Ki(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",95),m.Zb("click",(function(){return m.xc(t),m.dc(2).confirmarPeiddo()})),m.Rb(1,"div"),m.Rb(2,"span",96),m.Gc(3,"Continuar "),m.Mb(4,"i",97),m.Qb(),m.Qb(),m.Qb()}}function Yi(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",100),m.Zb("click",(function(){return m.xc(t),m.dc(4).prepararEnvio()})),m.Rb(1,"div"),m.Rb(2,"span",57),m.Gc(3,"Enviar Pedido"),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc(4);m.lc("ngClass",m.qc(1,Di,o.isRequiereMesa))}}function Xi(e,i){if(1&e&&(m.Pb(0),m.Ec(1,Yi,4,3,"div",99),m.Ob()),2&e){var t=m.dc(3);m.zb(1),m.lc("ngIf",!t.isCliente&&!t.isPuntoAuntoPedido)}}function et(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",100),m.Zb("click",(function(){return m.xc(t),m.dc(3).prepararEnvio()})),m.Rb(1,"div"),m.Rb(2,"span",57),m.Gc(3,"Enviar delivery"),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc(3);m.lc("ngClass",m.qc(1,Di,o.isDelivery&&!o.isDeliveryValid))}}function it(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",100),m.Zb("click",(function(){return m.xc(t),m.dc(3).prepararEnvio()})),m.Rb(2,"div"),m.Rb(3,"span",57),m.Gc(4,"Confirmar"),m.Qb(),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc(3);m.zb(1),m.lc("ngClass",m.qc(1,Di,!o.isReadyClienteDelivery))}}function tt(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",100),m.Zb("click",(function(){return m.xc(t),m.dc(3).prepararEnvio()})),m.Rb(2,"div"),m.Rb(3,"span",57),m.Gc(4,"Enviar Reserva"),m.Qb(),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc(3);m.zb(1),m.lc("ngClass",m.qc(1,Di,!o.isReadyClienteReserva))}}function ot(e,i){if(1&e&&(m.Ec(0,Xi,2,1,"ng-container",47),m.Ec(1,et,4,3,"ng-template",null,98,m.Fc),m.Ec(3,it,5,3,"ng-container",4),m.Ec(4,tt,5,3,"ng-container",4)),2&e){var t=m.uc(2),o=m.dc(2);m.lc("ngIf",!o.isDelivery)("ngIfElse",t),m.zb(3),m.lc("ngIf",o.isDeliveryCliente),m.zb(1),m.lc("ngIf",o.isReservaCliente)}}function nt(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",85),m.Rb(2,"div",86),m.Rb(3,"div",87),m.Zb("click",(function(){return m.xc(t),m.dc().nuevoPedido()})),m.Rb(4,"span",88),m.Ec(5,Zi,2,0,"ng-container",47),m.Ec(6,Ji,1,0,"ng-template",null,89,m.Fc),m.Qb(),m.Rb(8,"span",90),m.Mb(9,"i",91),m.Gc(10," Atras "),m.Qb(),m.Qb(),m.Ec(11,Wi,1,0,"ng-container",92),m.Ec(12,Ki,5,0,"ng-template",null,93,m.Fc),m.Ec(14,ot,5,4,"ng-template",null,94,m.Fc),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.uc(7),n=m.uc(13),a=m.uc(15),s=m.dc();m.zb(4),m.lc("hidden",s.isVisibleConfirmarAnimated),m.zb(1),m.lc("ngIf",s.isCliente)("ngIfElse",o),m.zb(3),m.lc("hidden",!s.isVisibleConfirmarAnimated),m.zb(3),m.lc("ngIf",!s.isVisibleConfirmarAnimated)("ngIfThen",n)("ngIfElse",a)}}var at,st=((at=function(){function e(i,t,o,n,a,s,r,c,l,d,u,b,m,p,f,h){_classCallCheck(this,e),this.miPedidoService=i,this.reglasCartaService=t,this.navigatorService=o,this.socketService=n,this.jsonPrintService=a,this.infoToken=s,this.crudService=r,this.listenStatusService=c,this.estadoPedidoClientService=l,this.dialog=d,this.router=u,this.registrarPagoService=b,this.establecimientoService=m,this.utilService=p,this.verifyClientService=f,this.speechDataProviderService=h,this.destroy$=new Se.Subject,this._miPedido=new oi.a,this._arrSubtotales=[],this.hayItems=!1,this.isVisibleConfirmar=!1,this.isVisibleConfirmarAnimated=!1,this.numMesaCuenta="",this.msjErr=!1,this.isReserva=!1,this.isRequiereMesa=!1,this.isDelivery=!1,this.isDeliveryValid=!1,this.frmConfirma={},this.frmDelivery={},this.frmReservaCliente={},this.rippleColor="rgb(255,238,88, 0.5)",this.rippleColorSubItem="rgba(117,117,117,0.1)",this.loadPrinterPrecuenta=!1,this.objCuenta=[],this.isReadyClienteDelivery=!1,this.isReadyClienteReserva=!1,this.isReloadListPedidos=!1,this.isFirstLoadListen=!1,this.isBtnPagoShow=!1,this.systemOS="",this.nombreClienteValido=!1,this.isShowNombreClienteLoginInvitado=!1,this.showCuentaCliente=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.systemOS=this.utilService.getOS(),this._miPedido=this.miPedidoService.getMiPedido(),this.isPuntoAuntoPedido=this.infoToken.isPuntoAutoPedido(),this.validarNomhbreCliente(),this.reglasCartaService.loadReglasCarta().pipe(Object(li.a)(this.destroy$)).subscribe((function(i){e.rulesCarta=i[0]?i[0].reglas?i[0].reglas:[]:i.reglas?i.reglas:[],e.rulesSubtoTales=i.subtotales||i[0].subtotales,e.establecimientoService.setRulesSubtotales(e.rulesSubtoTales),e.listenMiPedido(),e.newFomrConfirma()})),this.listenStatusService.isBtnPagoShow$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){if(e.isBtnPagoShow=i,!i){var t=localStorage.getItem("sys::btnP");t&&"1"===t.toString()&&(e.isBtnPagoShow=!0)}})),this.speechDataProviderService.commandFinalizarPedido$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){i&&(e.isVisibleConfirmarAnimated=!0,setTimeout((function(){e.isVisibleConfirmar=!0}),300),e.checkTiposDeConsumo(),e.checkIsRequierMesa(),e.checkIsDelivery(),e.navigatorService.addLink("mipedido-confirma"),e.isClienteSetValues())})),this.speechDataProviderService.commandIsShowPedido$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){i&&(e.isVisibleConfirmarAnimated=!1,e.isRequiereMesa=!1,setTimeout((function(){e.isVisibleConfirmar=!1}),300))})),this.isCliente=this.infoToken.isCliente(),this.isSoloLLevar=this.infoToken.isSoloLlevar(),this.isDeliveryCliente=this.infoToken.isDelivery(),this.isReservaCliente=this.infoToken.isReserva(),this.isClienteSetValues()}},{key:"isClienteSetValues",value:function(){this.isCliente&&(this.isRequiereMesa=!1)}},{key:"validarNomhbreCliente",value:function(){if(this.isShowNombreClienteLoginInvitado=this.verifyClientService.getDataClient().isLoginByInvitado,this.isShowNombreClienteLoginInvitado||this.isPuntoAuntoPedido){var e=this.infoToken.infoUsToken.nombres;this.isPuntoAuntoPedido&&(e="",this.infoToken.infoUsToken.nombres="",this.infoToken.set()),e=e.toLocaleLowerCase().indexOf("invitado")>-1?"":e,this.isShowNombreClienteLoginInvitado=""===e,this.nombreClienteValido=!this.isShowNombreClienteLoginInvitado}else{var i=this.infoToken.infoUsToken.nombres;i=i.toLocaleLowerCase().indexOf("invitado")>-1?"":i,this.nombreClienteValido=""!==i}}},{key:"ngOnDestroy",value:function(){this.destroy$.next(!0),this.destroy$.unsubscribe()}},{key:"newFomrConfirma",value:function(){this.frmConfirma={nummesa:"",nummesa_resplado:"",referencia:"",reserva:!1,solo_llevar:!1,delivery:!1},this.establecimientoService.getComsionEntrega(),this.isPuntoAuntoPedido&&this.validarNomhbreCliente()}},{key:"pintarMiPedido",value:function(){var e=this;this.isReloadListPedidos=!0,this.miPedidoService.validarReglasCarta(this.rulesCarta),this._arrSubtotales=this.miPedidoService.getArrSubTotales(this.rulesSubtoTales),localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales))),this.hayItems=parseFloat(this._arrSubtotales[0].importe)>0,setTimeout((function(){e.isReloadListPedidos=!1}),1e3)}},{key:"pintarMiPedidoNuevamente",value:function(){this.isReloadListPedidos=!0,this.rulesCarta?this.pintarMiPedido():window.location.reload()}},{key:"listenMiPedido",value:function(){var e=this;this.miPedidoService.countItemsObserve$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){e.hayItems=i>0})),this.miPedidoService.miPedidoObserver$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){e._miPedido=i,e.pintarMiPedido()})),this.listenStatusService.hayCuentaBusqueda$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){e.isHayCuentaBusqueda=i})),this.listenStatusService.isPagoSucces$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){i&&e.registrarPagoService.getDataTrasaction().isSuccess&&e.isSoloLLevar&&(e.registrarPagoService.removeLocalDataTransaction(),e.enviarPedido())})),this.socketService.isSocketOpen$.pipe(Object(li.a)(this.destroy$)).subscribe((function(e){})),this.isCliente&&this.socketService.onGetNuevoPedido().pipe(Object(li.a)(this.destroy$)).subscribe((function(e){})),this.estadoPedidoClientService.hayCuentaCliente$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){i&&(e.showCuentaCliente=!0,e.xLoadCuentaMesa("",i))})),this.listenStatusService.isOutEstablecimientoDelivery$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){i&&(e.goBackOutEstablecimiento(),e.listenStatusService.setIsOutEstablecimientoDelivery(!1))}))}},{key:"addItemToResumen",value:function(e,i,t,o,n){this.miPedidoService.setObjSeccionSeleced(i);var a=this.miPedidoService.findItemCarta(t),s=a.itemtiposconsumo.filter((function(i){return i.idtipo_consumo===e.idtipo_consumo}))[0];a.subitems_selected=o.subitems,a.cantidad_seleccionada=t.cantidad_seleccionada,this.miPedidoService.addItem2(s,a,n)}},{key:"openDlgItemToResumen",value:function(e,i){if(!this.isHayCuentaBusqueda){var t=new S.e,o=this.miPedidoService.findItemCarta(i);o.indicaciones=o.indicaciones?o.indicaciones:i.indicaciones||"",t.autoFocus=!1,t.data={idTpcItemResumenSelect:null,seccion:e,item:o,objItemTipoConsumoSelected:o.itemtiposconsumo},t.panelClass=["my-dialog-orden-detalle","margen-0","margen-0"],this.dialog.open(He,t).afterClosed().subscribe((function(e){}))}}},{key:"nuevoPedido",value:function(){var e=this;if(this.backConfirmacion(),this.isVisibleConfirmar)this.backConfirmacion();else{var i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,this.dialog.open(k,i).afterClosed().subscribe((function(i){i&&(e.miPedidoService.resetAllNewPedido(),e.navigatorService.setPageActive("carta"),e.isDeliveryValid=!1)})),this.newFomrConfirma()}}},{key:"nuevoPedidoFromCuenta",value:function(){this.navigatorService.setPageActive("carta")}},{key:"backConfirmacion",value:function(){var e=this;this.navigatorService.addLink("mipedido"),this.isVisibleConfirmarAnimated=!1,this.isRequiereMesa=!1,setTimeout((function(){e.isVisibleConfirmar=!1}),300)}},{key:"getDatosFormConfirmaDelivery",value:function(e){this.frmDelivery=e}},{key:"getDatosFormConfirmaReserva",value:function(e){this.frmReservaCliente=e.formData,this.frmConfirma={nummesa:"",nummesa_resplado:"",referencia:this.frmReservaCliente.nombre_reserva+" "+this.frmReservaCliente.empresa+" "+this.frmReservaCliente.hora_reserva,reserva:!0,solo_llevar:!1,delivery:!1}}},{key:"confirmarPeiddo",value:function(){if(this.isVisibleConfirmarAnimated){if(this.isRequiereMesa||!this.isDeliveryValid)return void(1===this.infoToken.infoUsToken.metodoPago.idtipo_pago&&this.isDeliveryValid&&this.prepararEnvio());this.prepararEnvio()}else this.isVisibleConfirmar=!0,this.isVisibleConfirmarAnimated=!0,this.checkTiposDeConsumo(),this.checkIsRequierMesa(),this.checkIsDelivery(),this.navigatorService.addLink("mipedido-confirma"),this.isClienteSetValues()}},{key:"prepararEnvio",value:function(){this.isDeliveryCliente?2!==this.infoToken.infoUsToken.metodoPago.idtipo_pago?this.showLoaderPedido():this.enviarPedido():this.showLoaderPedido()}},{key:"showLoaderPedido",value:function(){var e=this;this.listenStatusService.setLoaderSendPedido(!0),this.infoToken.setMetodoPagoSelected(this.infoToken.infoUsToken.metodoPago),setTimeout((function(){e.enviarPedido()}),1400)}},{key:"enviarPedido",value:function(){var e=2===this.infoToken.getInfoUs().metodoPago.idtipo_pago;this.checkTiposDeConsumo(),this.infoToken.setMetodoPagoSelected(this.infoToken.getInfoUs().metodoPago),this._arrSubtotales=JSON.parse(atob(localStorage.getItem("sys::st"))),localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales)));var i=this.infoToken.getInfoUs();console.log("aaaaaaaaaaaa");var t={};this.isCliente||this.isPuntoAuntoPedido&&!this.isReservaCliente?(this.frmConfirma.solo_llevar=!!this.isSoloLLevar||this.frmConfirma.solo_llevar,t.m=this.isSoloLLevar?"":i.numMesaLector,t.m=this.isDeliveryCliente?"":i.numMesaLector,t.r=i.nombres.toUpperCase(),t.nom_us=i.nombres.toUpperCase(),t.m_respaldo=t.m):(t.m_respaldo=this.frmConfirma.nummesa_resplado,t.m=this.frmConfirma.nummesa?this.frmConfirma.nummesa:this.arrReqFrm.isRequiereMesa?this.frmConfirma.nummesa_resplado:"00",t.r=this.frmConfirma.delivery?this.frmDelivery.nombre:this.utilService.addslashes(this.frmConfirma.referencia)||"",t.nom_us=i.nombres.split(" ")[0].toUpperCase()),console.log("bbbbbbbbbbbbbb");var o={m:t.m,m_respaldo:t.m_respaldo,r:t.r,nom_us:t.nom_us,delivery:this.frmConfirma.delivery||this.isDeliveryCliente?1:0,reservar:this.frmConfirma.reserva?1:0,solo_llevar:this.frmConfirma.solo_llevar?1:0,idcategoria:localStorage.getItem("sys::cat"),correlativo_dia:"",num_pedido:"",isCliente:this.isCliente?1:0,isSoloLLevar:this.isSoloLLevar,idregistro_pago:0,arrDatosDelivery:this.frmDelivery,arrDatosReserva:this.frmReservaCliente,systemOS:this.systemOS,idregistra_scan_qr:this.establecimientoService.getLocalIdScanQr(),is_print_subtotales:this.miPedidoService.objDatosSede.datossede[0].is_print_subtotales,isprint_copy_short:this.miPedidoService.objDatosSede.datossede[0].isprint_copy_short,isprint_all_short:this.miPedidoService.objDatosSede.datossede[0].isprint_all_short,appv:"v.2v"};console.log("cccccccccccccc");var n=this._arrSubtotales;0===parseFloat(n[n.length-1].importe)&&(n=this.frmDelivery.subTotales,this._arrSubtotales=n,localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales))));var a={p_header:o,p_body:this._miPedido,p_subtotales:n,idpedido:0};console.log("ddddddddddd");var s=this.jsonPrintService.enviarMiPedido(this.isCliente),r=[];s.map((function(e){r.push({Array_enca:o,ArraySubTotales:n,ArrayItem:e.arrBodyPrint,Array_print:e.arrPrinters})}));var c={dataPedido:a,dataPrint:r,dataUsuario:{idusuario:i.idusuario,idcliente:i.idcliente,idorg:i.idorg,idsede:i.idsede,nombres:i.nombres,cargo:i.cargo,usuario:i.usuario},isDeliveryAPP:1===o.delivery,isClienteRecogeLocal:this.infoToken.infoUsToken.pasoRecoger,dataDescuento:[],listPrinters:s.listPrinters};if(console.log("eeeeeeeeeeeeeeeeeeeee"),this.isDeliveryCliente&&2===i.metodoPago.idtipo_pago)return this.infoToken.setOrderDelivery(JSON.stringify(c),JSON.stringify(n)),void this.pagarCuentaDeliveryCliente();if(this.infoToken.infoUsToken.isHayDescuento){var l=this.miPedidoService.getIdsDescuentos();c.dataDescuento=l}this.infoToken.infoUsToken.isCliente&&this.infoToken.setIdCliente(),console.log("ffffffffffffffffffff"),this.savePedidoSocket(c,e,n),this.isDeliveryValid=!1}},{key:"backConfirmarPedido",value:function(){this.backConfirmacion(),this.navigatorService.setPageActive(this.isCliente?"estado":"carta"),this.isDeliveryValid=!1}},{key:"checkTiposDeConsumo",value:function(){this.arrReqFrm=this.miPedidoService.findEvaluateTPCMiPedido(),this.isRequiereMesa=this.arrReqFrm.isRequiereMesa,this.frmConfirma.solo_llevar=!this.arrReqFrm.isTpcSoloDelivery&&this.arrReqFrm.isTpcSoloLLevar,this.frmConfirma.delivery=this.arrReqFrm.isTpcSoloDelivery}},{key:"checkIsRequierMesa",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==e&&(this.frmConfirma.nummesa=e),this.frmConfirma.nummesa_resplado=e;var i=parseInt(this.miPedidoService.objDatosSede.datossede[0].mesas,0);i=isNaN(i)?0:i;var t=!!this.frmConfirma.nummesa&&""!==this.frmConfirma.nummesa,o=t?parseInt(this.frmConfirma.nummesa,0):0;t=!(o<=0||o>i),this.isRequiereMesa=this.arrReqFrm.isRequiereMesa,this.isRequiereMesa=this.isRequiereMesa&&!t&&!this.frmConfirma.reserva}},{key:"checkIsDelivery",value:function(){this.isDelivery=this.miPedidoService.findMiPedidoIsTPCDelivery()}},{key:"checkDataDelivery",value:function(e){this.isDeliveryValid=e.formIsValid,this.frmDelivery=e.formData}},{key:"imprimirPrecuenta",value:function(){var e=this;this.loadPrinterPrecuenta=!0;var i=this.jsonPrintService.getPrinterPrecuenta();i&&(this.miPedidoService.printerPrecuenta({dataPrint:{Array_enca:{m:this.numMesaCuenta,r:"",num_pedido:"",reservar:0,solo_llevar:0,correlativo_dia:"",precuenta:!0,delivery:!1,arrDatosDelivery:[],idregistro_pago:0,nom_us:this.infoToken.infoUsToken.usuario},Array_print:i.arrPrinters,ArrayItem:i.arrBodyPrint,ArraySubTotales:this._arrSubtotales},isprecuenta:1}),setTimeout((function(){e.loadPrinterPrecuenta=!1}),2e3))}},{key:"xLoadCuentaMesa",value:function(e){var i=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.isHayCuentaBusqueda=!1,this.msjErr=!1,this.numMesaCuenta=e;var o={mesa:e};if(t)return this.desglozarCuenta(t),void setTimeout((function(){i.estadoPedidoClientService.setImporte(i._arrSubtotales[i._arrSubtotales.length-1].importe)}),1e3);this.crudService.postFree(o,"pedido","lacuenta").subscribe((function(e){i.desglozarCuenta(e)}))}},{key:"desglozarCuenta",value:function(e){var i=new oi.a,t=[];if(0===e.data.length)return this.isHayCuentaBusqueda=!1,this.msjErr=!0,void this.listenStatusService.setHayCuentaBuesqueda(!1);this.isHayCuentaBusqueda=!0,this.listenStatusService.setHayCuentaBuesqueda(!0),e.data.map((function(e){var i=t.filter((function(i){return i.idtipo_consumo===e.idtipo_consumo}))[0];i||((i=new ci.a).descripcion=e.des_tp,i.idtipo_consumo=parseInt(e.idtipo_consumo,0),t.push(i))})),t.map((function(i){e.data.filter((function(e){return e.idtipo_consumo===i.idtipo_consumo})).map((function(e,t){var o=i.secciones.filter((function(i){return i.idseccion.toString()===e.idseccion.toString()}))[0];o||((o=new si.a).idseccion=e.idseccion.toString(),o.des=e.des_seccion,o.sec_orden=e.sec_orden,o.ver_stock_cero=0,i.count_items_seccion=t+1,i.secciones.push(o))}))})),t.map((function(i){i.secciones.map((function(t){e.data.filter((function(e){return e.idtipo_consumo.toString()===i.idtipo_consumo.toString()&&e.idseccion.toString()===t.idseccion.toString()})).map((function(e,i){var o=new ri.a;o.des=e.descripcion,o.detalles="",o.iditem=e.iditem,o.idcarta_lista=e.idcarta_lista,o.idseccion=e.idseccion,o.isalmacen=e.isalmacen,o.cantidad_seleccionada=parseInt(e.cantidad,0),o.precio=e.punitario,o.precio_print=parseFloat(e.ptotal),o.precio_total=parseFloat(e.ptotal),o.procede="0"===e.procede?1:0,o.seccion=e.des_seccion,o.subitems_view="null"!==e.subitems&&""!==e.subitems&&e.subitems?JSON.parse(e.subitems):[],t.count_items=i+1,t.items.push(o)}))}))})),i.tipoconsumo=t,this.miPedidoService.setObjMiPedido(i),this._miPedido=this.miPedidoService.getMiPedido(),this._arrSubtotales=this.miPedidoService.getArrSubTotales(this.rulesSubtoTales),localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales)))}},{key:"pagarCuentaDeliveryCliente",value:function(){var e=this;this.router.navigate(["./pagar-cuenta"]).then((function(){e.isBtnPagoShow&&window.location.reload()}))}},{key:"confirmarPedidoDeliveryEnviado",value:function(){this.router.navigate(["./pedido-confirmado"])}},{key:"goBackOutEstablecimiento",value:function(){var e=this,i=new S.e;i.data={idMjs:2},this.dialog.open(k,i).afterClosed().subscribe((function(i){i&&(e.miPedidoService.resetAllNewPedido(),e.miPedidoService.cerrarSession(),e.isDeliveryValid=!1,e.infoToken.cerrarSession())}))}},{key:"goBackCarta",value:function(){this.navigatorService.setPageActive("carta")}},{key:"verificarConexionSocket",value:function(){console.log("this.socketService.isSocketOpen",this.socketService.isSocketOpen),this.socketService.isSocketOpen||this.socketService.connect()}},{key:"savePedidoSocket",value:function(e,i,t){var o=this;console.log("111111111111"),this.socketService.emitRes("nuevoPedido",JSON.stringify(e)).subscribe((function(n){var a;if(console.log("222222",n),!1===n)return alert("!Ups a ocurrido un error, por favor verifique los datos y vuelve a intentarlo."),o.crudService.postFree({elerror:n,elorigen:"resumen-pedido"},"error","set-error",!1).subscribe((function(e){return console.log(e)})),void o.listenStatusService.setLoaderSendPedido(!1);setTimeout((function(){o.listenStatusService.setLoaderSendPedido(!1),o.miPedidoService.stopTimerLimit(),o.miPedidoService.prepareNewPedido()}),600);var s=n[0];if(e.dataPedido.idpedido=s.idpedido,e.dataPrint=s.data[1]?null===(a=s.data[1])||void 0===a?void 0:a.print:null,o.newFomrConfirma(),o.estadoPedidoClientService.setHoraInitPedido((new Date).getTime()),o.isDeliveryCliente&&!i)return o.infoToken.setOrderDelivery(JSON.stringify(e),JSON.stringify(t)),void o.confirmarPedidoDeliveryEnviado();o.isReservaCliente?o.confirmarPedidoDeliveryEnviado():o.backConfirmarPedido()}))}}]),e}()).\u0275fac=function(e){return new(e||at)(m.Lb(s.a),m.Lb(Ce),m.Lb(r.a),m.Lb(l.a),m.Lb(ni),m.Lb(b.a),m.Lb(P.a),m.Lb(c.a),m.Lb(di.a),m.Lb(S.b),m.Lb(ui.d),m.Lb(ai.a),m.Lb(u.a),m.Lb(_.a),m.Lb(d.a),m.Lb(W))},at.\u0275cmp=m.Fb({type:at,selectors:[["app-resumen-pedido"]],decls:8,vars:10,consts:[["class","animated fadeIn transicion",3,"ngClass",4,"ngIf"],[1,"bg-dark","fs-13","p-2","text-white","text-center",3,"hidden"],["class","d-flex w-100 xanimated xfadeIn div-content-all","id","cardcontentall",3,"ngClass",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"animated","fadeIn","transicion",3,"ngClass"],[3,"arrSubtotales"],["id","cardcontentall",1,"d-flex","w-100","xanimated","xfadeIn","div-content-all",3,"ngClass"],["class","w-100 div-resumen-pedido transicion",3,"ngClass",4,"ngIf"],[1,"div-resumen-pre-pago","w-100",3,"hidden"],[1,"xcontent","div-confirma-pedido","w-100","p-3","transicion","animated","fadeInRight",3,"ngClass"],[1,"text-center","d-flex","justify-content-center",2,"max-width","500px"],[1,"w-100","div-resumen-pedido","transicion",3,"ngClass"],["class","xCursor",4,"ngFor","ngForOf"],[1,"div-total"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],[1,"xCursor"],[1,"div-plr","titulo-tpc"],[3,"hidden"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"countItem","countTpc"],[4,"ngFor","ngForOf"],[1,"div-plr","titulo-seccion"],[1,"countItem","countSeccion"],[1,"w-100"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor","click"],[1,"pr-2","fw-100"],[1,"w-100","fw-100","pr-1"],["style","font-size: 9px; font-weight: 100;","class","badge badge-info fw-100 fs-9",4,"ngIf"],[1,"fw-100"],[1,"badge","badge-info","fw-100","fs-9",2,"font-size","9px","font-weight","100"],["class","d-flex div-plr li-item fw-100 fs-13 text-secondary subitem-content-resumen","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"d-flex","div-plr","li-item","fw-100","fs-13","text-secondary","subitem-content-resumen",3,"matRippleColor"],[1,"d-flex","w-100",3,"ngClass"],["class","btnCount btnMenos",3,"click",4,"ngIf"],["class","btnCount btnMas",3,"click",4,"ngIf"],[1,"fs-11","text-right",2,"width","45px",3,"hidden"],[1,"btnCount","btnMenos",3,"click"],[1,"btnCount","btnMas",3,"click"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"],[1,"text-center"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","primary","class","ml-2",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary",1,"ml-2",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],[4,"ngIf","ngIfElse"],["elseTemplateDelivery",""],[1,"w-100","p-2",2,"max-width","500px"],[3,"isReady","dataReserva"],[1,"fw-100","fs-14","text-secondary"],["aria-hidden","true",1,"fa","fa-exclamation-triangle"],["class","w-100",4,"ngIf","ngIfElse"],["templateDelivery",""],[1,"fw-100","fs-15","text-dark"],["matRipple","",1,"btn","btn-footer-next","transicion","w-50","m-auto",3,"disabled","ngClass","click"],[1,"animated","fadeInLeft"],[3,"sizeTextBg","isNombreValid"],[3,"listSubtotales","isReady","dataDelivery"],["divUsuarioAutorizado",""],[1,"div-confirma-pedido-mesa","w-100",3,"hidden"],["frmconfirma","ngForm"],["class","xanimated xfadeIn",4,"ngIf"],[1,"w-100","text-center"],["matInput","","placeholder","Indique alguna referencia","name","referencia",3,"ngModel","ngModelChange"],[1,"w-50"],["name","reserva",3,"ngModel","ngModelChange","change"],[1,"fw-100","fs-17","text-secondary"],[3,"listSubtotales","changeStatus"],[1,"xanimated","xfadeIn"],[1,"fs-30","fw-100"],[1,"fw-100","fs-20"],[1,"text-center","fs-20"],["type","number","matInput","","name","mesa",3,"ngModel","required","ngModelChange","keyup"],["txtNumMesa",""],["src","./assets/images/icon_1.gif","width","300px","alt","..",1,"img-cuenta"],["type","number","matInput",""],["txt_mesa_cuenta",""],[1,"fs-14","font-weight-bold","text-danger","animated","flash",3,"hidden"],["mat-flat-button","","color","primary",3,"click"],[1,"text-center","d-flex","flex-column","h-75"],[1,"m-auto"],[1,"btn","btn-sm","btn-secondary",3,"click"],["elseTemplateText",""],[1,"xfooter"],[1,"m-0","w-100","d-flex","justify-content-between"],["matRipple","",1,"btn-footer-cancel",3,"click"],[1,"animated","fadeInRight",3,"hidden"],["elseTemplateisDeliveryCliente",""],[1,"animated","fadeInLeft",3,"hidden"],[1,"fa","fa-arrow-left"],[4,"ngIf","ngIfThen","ngIfElse"],["divBtnListo",""],["divBtnEnviar",""],["matRipple","",1,"btn-footer-next","transicion",3,"click"],[1,"animated","fadeInRight"],[1,"fa","fa-arrow-right"],["elseTemplate",""],["class","btn-footer-next transicion","matRipple","",3,"ngClass","click",4,"ngIf"],["matRipple","",1,"btn-footer-next","transicion",3,"ngClass","click"]],template:function(e,i){1&e&&(m.Ec(0,mi,2,4,"div",0),m.Rb(1,"div",1),m.Gc(2),m.ec(3,"number"),m.Qb(),m.Ec(4,qi,7,12,"div",2),m.Ec(5,Ni,19,1,"div",3),m.Ec(6,Ui,9,2,"ng-container",4),m.Ec(7,nt,16,7,"ng-container",4)),2&e&&(m.lc("ngIf",!i.isHayCuentaBusqueda&&i.isCliente||i.isPuntoAuntoPedido),m.zb(1),m.lc("hidden",!i.isHayCuentaBusqueda),m.zb(1),m.Ic(" CUENTA DE LA MESA ",m.gc(3,7,i.numMesaCuenta,"2."),"\n"),m.zb(2),m.lc("ngIf",i.hayItems),m.zb(1),m.lc("ngIf",!i.hayItems&&!i.isCliente&&!i.isPuntoAuntoPedido),m.zb(1),m.lc("ngIf",!i.hayItems&&i.isCliente&&!i.isDeliveryCliente),m.zb(1),m.lc("ngIf",i.hayItems&&!i.isHayCuentaBusqueda))},styles:[".xcontent[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0}.div-plr[_ngcontent-%COMP%]{padding-left:7px;padding-right:7px}.div-content-all[_ngcontent-%COMP%]{top:0;position:relative;background:#fff}.titulo-tpc[_ngcontent-%COMP%]{background:#424242;color:#e0e0e0}.titulo-seccion[_ngcontent-%COMP%], .titulo-tpc[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.titulo-seccion[_ngcontent-%COMP%]{background:#ffebcd}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.countItem[_ngcontent-%COMP%]{border-radius:50%;line-height:1.2;font-size:12px;min-width:20px;min-height:20px;padding:4px;text-align:center}.countTpc[_ngcontent-%COMP%]{float:right;background:#212121;color:#bdbdbd}.countSeccion[_ngcontent-%COMP%]{float:right;color:#616161;background:#ffcc80}.btn-footer-cancel[_ngcontent-%COMP%]{background:#f44336}.btn-footer-cancel[_ngcontent-%COMP%], .btn-footer-next[_ngcontent-%COMP%]{padding:12px;color:#fff;text-align:center;width:40%}.btn-footer-next[_ngcontent-%COMP%]{background:#00c853;white-space:nowrap}.btn-footer-next.xdisabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5;white-space:nowrap;background:#ccc}.div-resumen-pedido[_ngcontent-%COMP%]{position:absolute;height:-webkit-calc(100vh - 49px);height:calc(100vh - 49px);overflow:auto}.div-resumen-pedido.hide[_ngcontent-%COMP%]{margin-left:-100%}.div-resumen-pedido.show[_ngcontent-%COMP%]{margin-left:0}.div-confirma-pedido-mesa[_ngcontent-%COMP%]{height:100vh;position:relative}.div-confirma-pedido[_ngcontent-%COMP%]{background:#fff;overflow:hidden;top:0;margin:0;position:relative;text-align:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.bg-1[_ngcontent-%COMP%], .bg-2[_ngcontent-%COMP%]{background:#fff}.div-confirma-pedido.hide[_ngcontent-%COMP%]{margin-left:100%}.div-confirma-pedido.show[_ngcontent-%COMP%]{margin-left:0}.xh-100[_ngcontent-%COMP%]{height:100vh}.subitem-content-resumen[_ngcontent-%COMP%]{background:#d3eafd;font-size:12px;color:#616161;display:-webkit-box;display:-webkit-flex;display:flex}.subitem-content-resumen[_ngcontent-%COMP%]   .btnCount[_ngcontent-%COMP%]{-webkit-transition:all .1s ease-in;transition:all .1s ease-in;height:18px;cursor:pointer;opacity:0}.subitem-content-resumen[_ngcontent-%COMP%]:hover   .btnCount[_ngcontent-%COMP%]{opacity:1}.subitem-content-resumen[_ngcontent-%COMP%]   .btnMenos[_ngcontent-%COMP%]{font-weight:700;background:#d32f2f;padding:0 8px;margin-right:3px;border-radius:3px;color:#fff}.subitem-content-resumen[_ngcontent-%COMP%]   .btnMas[_ngcontent-%COMP%]{font-weight:700;background:#1565c0;padding:0 8px;margin-left:3px;border-radius:3px;color:#fff}@media only screen and (min-width:600px){.div-resumen-pedido[_ngcontent-%COMP%]{position:relative;height:auto;overflow:hidden}.div-resumen-pre-pago[_ngcontent-%COMP%]{position:absolute}.xfooter[_ngcontent-%COMP%]{bottom:0;position:fixed;background:#e0e0e0;box-sizing:border-box;min-width:230px;max-width:360px;width:-webkit-calc(100%/9.8 * 3);width:calc(100% / 9.8 * 3)}.div-content-all[_ngcontent-%COMP%]{font-size:14px!important}}.content-resumen[_ngcontent-%COMP%]{background:#eee}@media only screen and (max-width:1050px){.content-resumen[_ngcontent-%COMP%]{display:none}.xfooter[_ngcontent-%COMP%]{width:100%;max-width:100%}}.img-cuenta[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:15px}"]}),at);function rt(e,i){if(1&e&&(m.Rb(0,"div",9),m.Rb(1,"p",10),m.Gc(2),m.Qb(),m.Rb(3,"p",11),m.Gc(4),m.Qb(),m.Rb(5,"p",12),m.Gc(6),m.Qb(),m.Rb(7,"p",12),m.Gc(8),m.Qb(),m.Qb()),2&e){var t=m.dc();m.zb(2),m.Hc(t.ItemPromoheader.titulo),m.zb(2),m.Hc(t.ItemPromoheader.descripcion),m.zb(2),m.Jc("Abierto de: ",t.ItemPromoBody.h_inicio," a ",t.ItemPromoBody.h_fin,""),m.zb(2),m.Hc(t.diasActivo)}}var ct=function(e,i){return{fadeInDown:e,fadeOutDown:i}};function lt(e,i){if(1&e&&(m.Rb(0,"div",13),m.Rb(1,"p",14),m.Gc(2),m.Qb(),m.Qb()),2&e){var t=m.dc();m.lc("ngClass",m.rc(2,ct,t.showInfoPromo,!t.showInfoPromo)),m.zb(2),m.Ic("Acceda con un consumo m\xednimo de S/",t.ItemPromoBody.importe_consumo_min," en otros productos.")}}var dt=function(e){return{wobble:e}};function ut(e,i){if(1&e&&(m.Pb(0),m.Mb(1,"img",15),m.Ob()),2&e){var t=m.dc();m.zb(1),m.lc("ngClass",m.qc(1,dt,t.animateBloqueo))}}function bt(e,i){if(1&e&&(m.Rb(0,"div",17),m.Rb(1,"div",18),m.Rb(2,"span",19),m.Gc(3),m.Qb(),m.Rb(4,"p",20),m.Gc(5),m.Qb(),m.Qb(),m.Rb(6,"div",21),m.Rb(7,"p",22),m.Gc(8,"Consumo m\xednimo"),m.Qb(),m.Qb(),m.Qb()),2&e){var t=m.dc(2);m.lc("ngClass",m.qc(3,dt,t.animateBloqueo)),m.zb(3),m.Hc(t.simbolo_moneda),m.zb(2),m.Ic(" ",t.ItemPromoBody.importe_consumo_min," ")}}function mt(e,i){if(1&e&&m.Ec(0,bt,9,5,"div",16),2&e){var t=m.dc();m.lc("ngIf",t.ItemPromoBody.importe_consumo_min)}}var pt,ft=function(e){return{"bg-confetti-animated":e}},ht=((pt=function(){function e(i,t){_classCallCheck(this,e),this.cocinarPromocionService=i,this.establecimientoService=t,this.selected=new m.n,this.diasActivo="",this.isAbierto=!1,this.animateBloqueo=!1,this.iconGifPromo="",this.showInfoPromo=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.isAbierto=1===this.promo.abierto,this.ItemPromoheader=this.promo.parametros.header,this.ItemPromoBody=this.promo.parametros.body,this.diasActivo=this.cocinarPromocionService.showDiasSemana(this.ItemPromoBody.dias_semana),this.iconGifPromo="assets/images/"+this.ItemPromoheader.icon,this.isAbierto=1===this.promo.abierto,this.simbolo_moneda=this.establecimientoService.getSimboloMoneda()}},{key:"clickPromo",value:function(){this.validarIngresoPromo()&&(this.isAbierto=!0,this.selected.emit(this.promo))}},{key:"validarIngresoPromo",value:function(){var e=this,i=!1,t=null;return 1===this.promo.abierto&&(i=!0,t=this.ItemPromoBody.importe_consumo_min)&&(i=this.cocinarPromocionService.getImportePedido()>=t),i||(this.isAbierto=!1,this.animateBloqueo=!0,setTimeout((function(){e.showInfoPromo=!(!t||1!==e.promo.abierto),e.animateBloqueo=!1,e.showInfoPromo&&setTimeout((function(){e.showInfoPromo=!1}),6e3)}),300)),i}}]),e}()).\u0275fac=function(e){return new(e||pt)(m.Lb(ti),m.Lb(u.a))},pt.\u0275cmp=m.Fb({type:pt,selectors:[["app-item-promocion"]],inputs:{promo:"promo"},outputs:{selected:"selected"},decls:10,vars:8,consts:[[1,"w-100",3,"ngClass","click"],[1,"div-promo","w-100"],[1,"d-flex","align-items-center"],[1,"img-promo"],["alt","ico_promo",3,"src"],["class","info-promo animated fadeIn",4,"ngIf"],["class","info-promo animated",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplateGo",""],[1,"info-promo","animated","fadeIn"],[1,"fw-600","fs-15"],[1,"fw-600","fs-12","text-secondary"],[1,"fw-100","fs-12","text-secondary"],[1,"info-promo","animated",3,"ngClass"],[1,"fw-600","fs-13","text-danger"],["src","assets/images/002-lock.png","alt","bloqueado",1,"animated",3,"ngClass"],["class","content-importe-minimo animated",3,"ngClass",4,"ngIf"],[1,"content-importe-minimo","animated",3,"ngClass"],[1,"importe-minimo"],[1,"fs-10"],[1,"fs-18","fw-600"],[1,"text-center"],[1,"fs-9","text-secondary"]],template:function(e,i){if(1&e&&(m.Rb(0,"div",0),m.Zb("click",(function(){return i.clickPromo()})),m.Rb(1,"div",1),m.Rb(2,"div",2),m.Rb(3,"div",3),m.Mb(4,"img",4),m.Qb(),m.Ec(5,rt,9,5,"div",5),m.Ec(6,lt,3,5,"div",6),m.Qb(),m.Ec(7,ut,2,3,"ng-container",7),m.Ec(8,mt,1,1,"ng-template",null,8,m.Fc),m.Qb(),m.Qb()),2&e){var t=m.uc(9);m.lc("ngClass",m.qc(6,ft,1===i.promo.abierto)),m.zb(4),m.mc("src",i.iconGifPromo,m.yc),m.zb(1),m.lc("ngIf",!i.showInfoPromo),m.zb(1),m.lc("ngIf",i.showInfoPromo),m.zb(1),m.lc("ngIf",0===i.promo.abierto)("ngIfElse",t)}},directives:[o.q,o.t],styles:[".bg-confetti-animated[_ngcontent-%COMP%]{background-repeat:repeat-x;background-position:top -10px center;background-image:url(\"data:image/svg+xml,%3Csvg width='600' height='90' viewBox='0 0 600 90' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='42' y='-10' width='6' height='10'/%3E%3Crect x='84' y='-10' width='6' height='10'/%3E%3Crect x='126' y='-13' width='5' height='13'/%3E%3Crect x='168' y='-13' width='5' height='13'/%3E%3Crect x='210' y='-10' width='6' height='10'/%3E%3Crect x='252' y='-13' width='5' height='13'/%3E%3Crect x='294' y='-10' width='6' height='10'/%3E%3Crect x='336' y='-13' width='5' height='13'/%3E%3Crect x='378' y='-13' width='5' height='13'/%3E%3Crect x='420' y='-10' width='6' height='10'/%3E%3Crect x='462' y='-10' width='6' height='10'/%3E%3Crect x='504' y='-13' width='5' height='13'/%3E%3Crect x='546' y='-10' width='6' height='10'/%3E%3Cstyle type='text/css'%3E rect %7B opacity: 0; %7D rect:nth-child(1) %7B transform-origin: 45px 5px; transform: rotate(-145deg); animation: blast 700ms infinite ease-out; animation-delay: 88ms; animation-duration: 631ms; %7D rect:nth-child(2) %7B transform-origin: 87px 5px; transform: rotate(164deg); animation: blast 700ms infinite ease-out; animation-delay: 131ms; animation-duration: 442ms; %7D rect:nth-child(3) %7B transform-origin: 128px 6px; transform: rotate(4deg); animation: blast 700ms infinite ease-out; animation-delay: 92ms; animation-duration: 662ms; %7D rect:nth-child(4) %7B transform-origin: 170px 6px; transform: rotate(-175deg); animation: blast 700ms infinite ease-out; animation-delay: 17ms; animation-duration: 593ms; %7D rect:nth-child(5) %7B transform-origin: 213px 5px; transform: rotate(-97deg); animation: blast 700ms infinite ease-out; animation-delay: 122ms; animation-duration: 476ms; %7D rect:nth-child(6) %7B transform-origin: 255px 6px; transform: rotate(57deg); animation: blast 700ms infinite ease-out; animation-delay: 271ms; animation-duration: 381ms; %7D rect:nth-child(7) %7B transform-origin: 297px 5px; transform: rotate(-46deg); animation: blast 700ms infinite ease-out; animation-delay: 131ms; animation-duration: 619ms; %7D rect:nth-child(8) %7B transform-origin: 338px 6px; transform: rotate(-65deg); animation: blast 700ms infinite ease-out; animation-delay: 85ms; animation-duration: 668ms; %7D rect:nth-child(9) %7B transform-origin: 380px 6px; transform: rotate(13deg); animation: blast 700ms infinite ease-out; animation-delay: 128ms; animation-duration: 377ms; %7D rect:nth-child(10) %7B transform-origin: 423px 5px; transform: rotate(176deg); animation: blast 700ms infinite ease-out; animation-delay: 311ms; animation-duration: 508ms; %7D rect:nth-child(11) %7B transform-origin: 465px 5px; transform: rotate(108deg); animation: blast 700ms infinite ease-out; animation-delay: 108ms; animation-duration: 595ms; %7D rect:nth-child(12) %7B transform-origin: 506px 6px; transform: rotate(62deg); animation: blast 700ms infinite ease-out; animation-delay: 105ms; animation-duration: 375ms; %7D rect:nth-child(13) %7B transform-origin: 549px 5px; transform: rotate(16deg); animation: blast 700ms infinite ease-out; animation-delay: 149ms; animation-duration: 491ms; %7D rect:nth-child(odd) %7B fill: %2365BB5C; %7D rect:nth-child(even) %7B z-index: 1; fill: %2333AAFF; %7D rect:nth-child(4n) %7B animation-duration: 1400ms; fill: %23F23B14; %7D rect:nth-child(3n) %7B animation-duration: 1750ms; animation-delay: 700ms; %7D rect:nth-child(4n-7) %7B fill: %232A2F6A; %7D rect:nth-child(6n) %7B fill: %23FBBA23; %7D @keyframes blast %7B from %7B opacity: 0; %7D 20%25 %7B opacity: 1; %7D to %7B transform: translateY(90px); %7D %7D %3C/style%3E%3C/svg%3E%0A\");@media (prefers-reduced-motion){background-image:url(\"data:image/svg+xml,%3Csvg width='574' height='60' viewBox='0 0 574 60' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect opacity='0.8' x='27.1224' y='20.0458' width='5' height='13' transform='rotate(-139 27.1224 20.0458)' fill='%23F23B14'/%3E%3Crect opacity='0.8' x='118.478' y='7.00201' width='5' height='13' transform='rotate(-38.8114 118.478 7.00201)' fill='%23FBBA23'/%3E%3Crect opacity='0.8' x='504.616' y='25.4479' width='5' height='13' transform='rotate(-60.2734 504.616 25.4479)' fill='%23F23B14'/%3E%3Crect opacity='0.6' x='538.983' y='45.555' width='5' height='13' transform='rotate(16.7826 538.983 45.555)' fill='%232A2F6A'/%3E%3Crect opacity='0.3' x='470.322' y='2.63625' width='5' height='13' transform='rotate(11.295 470.322 2.63625)' fill='%2333AAFF'/%3E%3Crect opacity='0.3' x='190.295' y='4.58138' width='5' height='13' transform='rotate(27.5954 190.295 4.58138)' fill='%23F23B14'/%3E%3Crect opacity='0.8' x='234.303' y='16.3233' width='5' height='13' transform='rotate(-41.8233 234.303 16.3233)' fill='%2365BB5C'/%3E%3Crect opacity='0.6' x='369.702' y='40.9875' width='5' height='13' transform='rotate(-56.419 369.702 40.9875)' fill='%2333AAFF'/%3E%3Crect opacity='0.3' x='402.121' y='31.0848' width='5' height='13' transform='rotate(-17.9234 402.121 31.0848)' fill='%23F23B14'/%3E%3Crect opacity='0.6' x='200.316' y='31.9328' width='5' height='13' transform='rotate(-15.8896 200.316 31.9328)' fill='%232A2F6A'/%3E%3Crect opacity='0.6' x='69.6745' y='23.4725' width='6' height='10' transform='rotate(70.0266 69.6745 23.4725)' fill='%2365BB5C'/%3E%3Crect opacity='0.6' x='291.945' y='7.16931' width='6' height='10' transform='rotate(30.4258 291.945 7.16931)' fill='%23FBBA23'/%3E%3Crect opacity='0.3' x='33.7754' y='38.2208' width='6' height='10' transform='rotate(38.6056 33.7754 38.2208)' fill='%23FBBA23'/%3E%3Crect opacity='0.8' x='109.752' y='31.1743' width='6' height='10' transform='rotate(28.5296 109.752 31.1743)' fill='%2333AAFF'/%3E%3Crect opacity='0.3' x='278.081' y='37.8695' width='6' height='10' transform='rotate(-26.5651 278.081 37.8695)' fill='%23F23B14'/%3E%3Crect opacity='0.8' x='416.294' y='11.5573' width='6' height='10' transform='rotate(-22.8498 416.294 11.5573)' fill='%23FBBA23'/%3E%3Crect opacity='0.3' x='354.667' y='9.32341' width='6' height='10' transform='rotate(17.7506 354.667 9.32341)' fill='%232A2F6A'/%3E%3Crect opacity='0.8' x='532.404' y='16.6372' width='6' height='10' transform='rotate(-75.3432 532.404 16.6372)' fill='%23FBBA23'/%3E%3Crect opacity='0.6' x='460.463' y='39.3557' width='6' height='10' transform='rotate(45.4982 460.463 39.3557)' fill='%2365BB5C'/%3E%3C/svg%3E\")}}.div-promo[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.div-promo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.img-promo[_ngcontent-%COMP%]{text-align:left;width:64px}.info-promo[_ngcontent-%COMP%]{margin-left:-1px;max-width:210px}.content-importe-minimo[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #e0e0e0;margin-right:-20px;background:#e1f5fe;padding:10px 0;width:72px;height:75px}.importe-minimo[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.label-promo[_ngcontent-%COMP%]{width:60px;float:left;position:absolute;background:#0ff;color:#0ff;-webkit-transform:rotate(318deg);transform:rotate(318deg);text-align:center;margin:-15px -40px;padding:10 px}"]}),pt);function gt(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",14),m.Zb("click",(function(){return m.xc(t),m.dc().goBack()})),m.Mb(2,"i",15),m.Rb(3,"span",16),m.Gc(4),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc();m.zb(4),m.Hc(o.tituloToolBar)}}function vt(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",17),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogComentarios()})),m.Rb(1,"div",18),m.Rb(2,"span",19),m.Mb(3,"i",20),m.Gc(4),m.ec(5,"number"),m.Qb(),m.Qb(),m.Rb(6,"div"),m.Rb(7,"span"),m.Gc(8),m.Mb(9,"i",21),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc();m.lc("matRippleColor",o.rippleColor),m.zb(4),m.Ic(" ",m.gc(5,3,o.dataCalificacion.calificacion,".1"),""),m.zb(4),m.Ic("",o.dataCalificacion.cantidad," Opiniones ")}}function Ct(e,i){if(1&e){var t=m.Sb();m.Rb(0,"li",23),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc(2).getSecciones(e)})),m.Rb(1,"div",24),m.Rb(2,"div",25),m.Mb(3,"img",26),m.Qb(),m.Rb(4,"div"),m.Rb(5,"span",27),m.Gc(6),m.Qb(),m.Mb(7,"br"),m.Rb(8,"div",28),m.Rb(9,"span",29),m.Gc(10),m.ec(11,"lowercase"),m.Qb(),m.Mb(12,"br"),m.Mb(13,"i",30),m.Rb(14,"span",31),m.Gc(15),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.dc(2);m.lc("matRippleColor",n.rippleColor),m.zb(6),m.Hc(o.des),m.zb(4),m.Hc(m.fc(11,5,o.detalle)),m.zb(5),m.Jc("Horario de atencion: de ",o.hora_ini," a ",o.hora_fin," ")}}function St(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"ul"),m.Ec(2,Ct,16,7,"li",22),m.Qb(),m.Ob()),2&e){var t=m.dc();m.zb(2),m.lc("ngForOf",t.miPedidoService.objCarta.carta)}}function yt(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",33),m.Rb(1,"app-item-promocion",34),m.Zb("selected",(function(){m.xc(t);var e=i.$implicit;return m.dc(2).showItemsPromo(e)})),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.dc(2);m.lc("matRippleColor",n.rippleColor),m.zb(1),m.lc("promo",o)}}function kt(e,i){if(1&e&&(m.Pb(0),m.Ec(1,yt,2,2,"div",32),m.Ob()),2&e){var t=m.dc();m.zb(1),m.lc("ngForOf",t.objPromociones)}}function xt(e,i){if(1&e&&(m.Pb(0),m.Mb(1,"img",42),m.Ob()),2&e){var t=m.dc().index;m.zb(1),m.nc("src","assets/images/",t,".png",m.yc)}}function _t(e,i){if(1&e&&m.Mb(0,"img",42),2&e){var t=m.dc().$implicit;m.nc("src","assets/images/",t.img,"",m.yc)}}function Rt(e,i){if(1&e&&(m.Rb(0,"div"),m.Rb(1,"span",43),m.Gc(2),m.Qb(),m.Qb()),2&e){var t=m.dc().$implicit;m.zb(2),m.Ic("- ",t.descuento,"")}}function Pt(e,i){if(1&e){var t=m.Sb();m.Rb(0,"li",35),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc().getItems(e)})),m.Rb(1,"div",24),m.Rb(2,"div",36),m.Ec(3,xt,2,1,"ng-container",9),m.Ec(4,_t,1,1,"ng-template",null,37,m.Fc),m.Qb(),m.Rb(6,"div",38),m.Rb(7,"div"),m.Rb(8,"div",18),m.Rb(9,"span",39),m.Gc(10),m.Qb(),m.Mb(11,"br"),m.Ec(12,Rt,3,1,"div",5),m.Qb(),m.Rb(13,"div",40),m.Rb(14,"span",41),m.Gc(15),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.uc(5),a=m.dc();m.lc("matRippleColor",a.rippleColor),m.zb(3),m.lc("ngIf",""===o.img)("ngIfElse",n),m.zb(7),m.Hc(o.des),m.zb(2),m.lc("ngIf",o.descuento),m.zb(3),m.Hc(a.getObjDetalleSeccion(o))}}function wt(e,i){1&e&&m.Mb(0,"i",20)}function It(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"p",57),m.Gc(2),m.Qb(),m.Ob()),2&e){var t=m.dc(2).$implicit;m.zb(2),m.Hc(t.detalles)}}function Mt(e,i){if(1&e&&(m.Rb(0,"span",58),m.Gc(1),m.ec(2,"number"),m.Qb()),2&e){var t=m.dc(2).$implicit;m.zb(1),m.Hc(m.gc(2,1,t.precio_antes,"0.2"))}}function Tt(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"div",51),m.Rb(2,"div"),m.Rb(3,"span",52),m.Gc(4),m.Ec(5,wt,1,0,"i",53),m.Qb(),m.Ec(6,It,3,1,"ng-container",5),m.Qb(),m.Rb(7,"div",54),m.Rb(8,"p",55),m.Ec(9,Mt,3,4,"span",56),m.Gc(10),m.ec(11,"number"),m.Qb(),m.Qb(),m.Qb(),m.Ob()),2&e){var t=m.dc().$implicit;m.zb(4),m.Ic("",t.des," "),m.zb(1),m.lc("ngIf","1"===t.is_recomendacion),m.zb(1),m.lc("ngIf",t.detalles.length>0),m.zb(3),m.lc("ngIf",t.precio_antes),m.zb(1),m.Ic(" ",m.gc(11,5,t.precio,"0.2")," ")}}function Ot(e,i){1&e&&m.Mb(0,"i",20)}function Qt(e,i){if(1&e&&(m.Rb(0,"p",57),m.Gc(1),m.Qb()),2&e){var t=m.dc(2).$implicit;m.zb(1),m.Hc(t.detalles)}}function Dt(e,i){if(1&e&&(m.Rb(0,"p",66),m.Gc(1),m.ec(2,"number"),m.Qb()),2&e){var t=m.dc(2).$implicit;m.zb(1),m.Hc(m.gc(2,1,t.precio_antes,"0.2"))}}function zt(e,i){if(1&e&&(m.Rb(0,"div",59),m.Rb(1,"div"),m.Rb(2,"span",52),m.Gc(3),m.Ec(4,Ot,1,0,"i",53),m.Qb(),m.Pb(5),m.Ec(6,Qt,2,1,"p",60),m.Rb(7,"div"),m.Ec(8,Dt,3,4,"p",61),m.Rb(9,"p",62),m.Gc(10),m.ec(11,"number"),m.Qb(),m.Qb(),m.Ob(),m.Qb(),m.Rb(12,"div",63),m.Rb(13,"div",64),m.Mb(14,"img",65),m.Qb(),m.Qb(),m.Qb()),2&e){var t=m.dc().$implicit,o=m.dc(2);m.zb(3),m.Ic("",t.des," "),m.zb(1),m.lc("ngIf","1"===t.is_recomendacion),m.zb(2),m.lc("ngIf",t.detalles.length>0),m.zb(2),m.lc("ngIf",t.precio_antes),m.zb(2),m.Hc(m.gc(11,7,t.precio,"0.2")),m.zb(4),m.oc("src","",o.rutaImgItem,"",t.img,"",m.yc)}}function Et(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",68),m.Rb(1,"app-comp-ctrl-add-fast",69),m.Zb("objResponse",(function(e){return m.xc(t),m.dc(4).resultCantItemMercado(e)})),m.Qb(),m.Rb(2,"div",70),m.Zb("click",(function(){m.xc(t);var e=m.dc(2).$implicit;return m.dc(2).selectedItem(e,!0)})),m.Mb(3,"i",71),m.Rb(4,"span",72),m.Gc(5,"Indicaciones"),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc(2).$implicit;m.zb(1),m.lc("cantidad_show",o.cantidad_seleccionada)("objItem",o)("comprimir",!1)("quitarFadeUp",!0)("limitAdd",o.cantidad)}}function Ft(e,i){if(1&e&&(m.Pb(0),m.Ec(1,Et,6,5,"div",67),m.Ob()),2&e){var t=m.dc().$implicit;m.zb(1),m.lc("ngIf",t.is_visible_control_last_add||t.cantidad_seleccionada>0)}}var Lt=function(e,i){return{"li-tachado":e,"p-titulo-item-sin-detalle":i}};function jt(e,i){if(1&e){var t=m.Sb();m.Rb(0,"li",46),m.Rb(1,"div",47),m.Rb(2,"div",48),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc(2).selectedItem(e)})),m.Rb(3,"div",49),m.Ec(4,Tt,12,8,"ng-container",9),m.Ec(5,zt,15,10,"ng-template",null,50,m.Fc),m.Qb(),m.Qb(),m.Ec(7,Ft,2,1,"ng-container",5),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.uc(6),a=m.dc(2);m.zb(1),m.Bb("border-bottom-li xcontent child-item border-left-item-",a.getEstadoStockItem(o.cantidad),""),m.lc("matRippleColor",a.rippleColor),m.zb(1),m.lc("ngClass",m.rc(8,Lt,o.cantidad<1,0===o.detalles.length)),m.zb(2),m.lc("ngIf",""===o.img)("ngIfElse",n),m.zb(3),m.lc("ngIf",a.isPuntoAutoPedido||a.isTomaPedidoRapido||a.isCliente)}}function Gt(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"ul",44),m.Ec(2,jt,8,11,"li",45),m.Qb(),m.Ob()),2&e){var t=m.dc();m.zb(2),m.lc("ngForOf",t.objItems)}}function Vt(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"img",84),m.Zb("click",(function(){m.xc(t);var e=m.dc().$implicit;return m.dc(2).selectedItem(e)})),m.Qb(),m.Ob()}if(2&e){var o=m.dc(3);m.zb(1),m.mc("src",o.imgNull,m.yc)}}function At(e,i){if(1&e){var t=m.Sb();m.Rb(0,"img",84),m.Zb("click",(function(){m.xc(t);var e=m.dc().$implicit;return m.dc(2).selectedItem(e)})),m.Qb()}if(2&e){var o=m.dc().$implicit,n=m.dc(2);m.oc("src","",n.rutaImgItem,"",o.img,"",m.yc)}}function Bt(e,i){1&e&&m.Mb(0,"i",20)}function qt(e,i){if(1&e&&(m.Rb(0,"p",66),m.Gc(1),m.ec(2,"number"),m.Qb()),2&e){var t=m.dc().$implicit;m.zb(1),m.Hc(m.gc(2,1,t.precio_antes,"0.2"))}}var Nt=function(e){return{"li-tachado":e}};function Ht(e,i){if(1&e){var t=m.Sb();m.Rb(0,"li",75),m.Rb(1,"div",76),m.Rb(2,"div",77),m.Rb(3,"div",78),m.Rb(4,"div"),m.Rb(5,"app-comp-ctrl-add-fast",79),m.Zb("objResponse",(function(e){return m.xc(t),m.dc(2).resultCantItemMercado(e)})),m.Qb(),m.Rb(6,"div",63),m.Rb(7,"div",80),m.Ec(8,Vt,2,1,"ng-container",9),m.Ec(9,At,1,2,"ng-template",null,81,m.Fc),m.Qb(),m.Qb(),m.Qb(),m.Rb(11,"div",82),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc(2).selectedItem(e)})),m.Rb(12,"span",83),m.Gc(13),m.Ec(14,Bt,1,0,"i",53),m.Qb(),m.Rb(15,"div"),m.Ec(16,qt,3,4,"p",61),m.Rb(17,"p",62),m.Gc(18),m.ec(19,"number"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.uc(10);m.zb(1),m.lc("ngClass",m.qc(13,Nt,o.cantidad<1)),m.zb(4),m.lc("cantidad_show",o.cantidad_seleccionada)("objItem",o)("limitAdd",o.cantidad),m.zb(3),m.lc("ngIf",""===o.img)("ngIfElse",n),m.zb(5),m.Ic("",o.des," "),m.zb(1),m.lc("ngIf","1"===o.is_recomendacion),m.zb(2),m.lc("ngIf",o.precio_antes),m.zb(2),m.Hc(m.gc(19,10,o.precio,"0.2"))}}function $t(e,i){if(1&e&&(m.Rb(0,"ul",73),m.Ec(1,Ht,20,15,"li",74),m.Qb()),2&e){var t=m.dc();m.zb(1),m.lc("ngForOf",t.objItems)}}function Ut(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"p",88),m.Gc(2),m.Qb(),m.Ob()),2&e){var t=m.dc().$implicit;m.zb(2),m.Jc("",t.seccion,": ",t.detalles,"")}}var Zt=function(e,i,t){return{"li-tachado":e,"p-titulo-item-sin-detalle":i,"p-titulo-item-select":t}};function Jt(e,i){if(1&e){var t=m.Sb();m.Rb(0,"li",85),m.Rb(1,"div"),m.Rb(2,"div",86),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc().selectedItem(e)})),m.Rb(3,"div",87),m.Rb(4,"span"),m.Gc(5),m.Qb(),m.Ec(6,Ut,3,2,"ng-container",5),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.dc();m.lc("hidden",!o.visible),m.zb(1),m.Bb("xcontent border-left-item-",n.getEstadoStockItem(o.cantidad),""),m.zb(1),m.lc("matRippleColor",n.rippleColor)("ngClass",m.sc(8,Zt,o.cantidad<1,0===o.detalles.length,o.selected)),m.zb(3),m.Hc(o.des),m.zb(1),m.lc("ngIf",o.detalles.length>0)}}var Wt,Kt=((Wt=function(){function e(i,t,o,n,a,s,r,c,l,d,u,b){_classCallCheck(this,e),this.socketService=i,this.miPedidoService=t,this.reglasCartaService=o,this.navigatorService=n,this.listenStatusService=a,this.infoToken=s,this.dialog=r,this.establecimientoService=c,this.calcDistanciaService=l,this.crudService=d,this.speechDataProviderService=u,this.cocinarPromoShowService=b,this.unsubscribeCarta=new $e.a,this.objCartaBus=[],this.isBusqueda=!1,this.rutaImgItem=Z.d,this.imgNull="./assets/images/icon-app/img-null.png",this.isCargado=!0,this.showCategoria=!1,this.showSecciones=!1,this.showItems=!1,this.showToolBar=!1,this.tituloToolBar="",this.rippleColor="rgb(255,238,88, 0.5)",this.objSecciones=[],this.objItems=[],this.objPromociones=null,this.tiposConsumo=[],this.objNewItemTiposConsumo=[],this.countSeeBack=2,this.nomCategoriaSeleted="",this.destroy$=new Se.Subject,this.isFirstLoadListen=!1,this.isScreenIsMobile=!0,this.isViewMercado=!1,this.isShowCalificacion=!1,this.isCliente=!1,this.isPuntoAutoPedido=!1,this.isTomaPedidoRapido=!1,this.isCantidadCero=!0}return _createClass(e,[{key:"onResize",value:function(e){this.detectScreenSize()}},{key:"detectScreenSize",value:function(){this.isScreenIsMobile=!(window.innerWidth>599)}},{key:"ngOnInit",value:function(){var e=this;this.detectScreenSize();var i=JSON.parse(localStorage.getItem("sys::punto"))||{};if(this.isViewMercado=1===this.establecimientoService.get().pwa_show_item_view_mercado,this.isCliente=this.infoToken.infoUsToken.isCliente,this.isPuntoAutoPedido=i.ispunto_autopedido||!1,this.isTomaPedidoRapido=i.istoma_pedido_rapido||!1,this.isTomaPedidoRapido&&(this.canalConsumoTomaPedidoRapido=null==i?void 0:i.canal_consumo),this.initCarta(),this.isShowCalificacion=this.establecimientoService.get().calificacion>=3.7,this.isShowCalificacion){this.dataCalificacion={calificacion:this.establecimientoService.get().calificacion,cantidad:0,listCalificacion:[]};var t={idsede:this.establecimientoService.get().idsede};this.crudService.postFree(t,"delivery","get-calificacion-sede",!1).subscribe((function(i){e.dataCalificacion.listCalificacion=i.data,e.dataCalificacion.cantidad=e.dataCalificacion.listCalificacion.map((function(e){return e.numpedidos})).reduce((function(e,i){return e+i}),0)}))}this.infoToken.getInfoUs().isCliente&&!this.infoToken.getInfoUs().isReserva&&this.calcDistanciaService.calcCostoEntregaApiGoogleRain(this.infoToken.getInfoUs().direccionEnvioSelected,this.establecimientoService.get())}},{key:"ngAfterViewInit",value:function(){}},{key:"initCarta",value:function(){var e=this;this.isCargado=!0,this.socketService.connect(),this.listenStatusService.setLoaderCarta(!0),this.listeStatusBusqueda(),this.infoToken.isReserva()||this.miPedidoService.getDeliveryConstCantEscala(),this.unsubscribeCarta=this.navigatorService.resNavigatorSourceObserve$.subscribe((function(i){if("carta"===i.pageActive){if(e.countSeeBack<2)return void e.countSeeBack++;e.goBack()}else e.countSeeBack=0})),this.establecimientoService.getComsionEntrega(),this.unsubscribeCarta=this.socketService.onGetCarta().subscribe((function(i){if(e.listenStatusService.setLoaderCarta(!1),e.socketService.isSocketOpenReconect)return e.miPedidoService.setObjCarta(i),e.resetParamsCarta(),e.miPedidoService.findIsHayItems()&&e.miPedidoService.updatePedidoFromStrorage(),void e.navigatorService.setPageActive("carta");e.miPedidoService.setObjCarta(i),e.miPedidoService.objCarta.promociones&&e.miPedidoService.objCarta.promociones.lista_promociones&&(e.objPromociones=e.miPedidoService.objCarta.promociones.lista_promociones,e.isCliente||(e.objPromociones=e.objPromociones.filter((function(e){return 0===e.parametros.body.solo_app}))),e.cocinarPromoShowService.iniReloadOpenPromo(e.objPromociones)),e.resetParamsCarta(),e.miPedidoService.clearPedidoIsLimitTime(),e.miPedidoService.updatePedidoFromStrorage(),e.miPedidoService.restoreTimerLimit(),e.loadItemsBusqueda(),e.isFirstLoadListen||(e.isFirstLoadListen=!0,e.miPedidoService.listenChangeCantItem())})),this.unsubscribeCarta=this.socketService.onGetTipoConsumo().subscribe((function(i){e.socketService.isSocketOpenReconect||(e.tiposConsumo=i,e.tiposConsumo.map((function(i){var t=new he.a;if(t.descripcion=i.descripcion,t.idtipo_consumo=i.idtipo_consumo,t.titulo=i.titulo,e.infoToken.isCliente())if(e.infoToken.isDelivery()){if("DELIVERY"!==i.descripcion)return;t.descripcion="CANTIDAD"}else{if("DELIVERY"===i.descripcion)return;if(e.infoToken.isSoloLlevar()&&-1===i.descripcion.indexOf("LLEVAR"))return}e.infoToken.isPuntoAutoPedido()&&-1===i.descripcion.indexOf("LLEVAR")||e.objNewItemTiposConsumo.push(t)})),e.miPedidoService.setObjNewItemTiposConsumo(e.objNewItemTiposConsumo),e.navigatorService.addLink("carta-i-"),e.initFirtsCategoria())})),this.unsubscribeCarta=this.socketService.onGetDataSedeDescuentos().subscribe((function(i){e.miPedidoService.setObjCartaDescuentos(i)})),this.reglasCartaService.loadReglasCarta()}},{key:"initFirtsCategoria",value:function(){1===this.miPedidoService.objCarta.carta.length&&(this.objSecciones=this.miPedidoService.objCarta.carta[0].secciones,this.tituloToolBar=this.miPedidoService.objCarta.carta[0].des,this.showSecciones=!0,this.showCategoria=!1,this.showToolBar=!0,this.getSecciones(this.miPedidoService.objCarta.carta[0]),this.isScreenIsMobile||this.getItems(this.objSecciones[0]),this.objItems=this.objSecciones[0].items)}},{key:"resetParamsCarta",value:function(){this.isCargado=!1,this.objSecciones=[],this.objItems=[],this.showSecciones=!1,this.showItems=!1,this.showToolBar=!1,this.showCategoria=!0}},{key:"ngOnDestroy",value:function(){this.unsubscribeCarta.unsubscribe(),this.destroy$.next(!0),this.destroy$.unsubscribe()}},{key:"getSecciones",value:function(e){var i=this;this.categoriaSeleted=e,setTimeout((function(){i.objSecciones=e.secciones,i.showSecciones=!0,i.showCategoria=!1,i.showToolBar=!0,localStorage.setItem("sys::cat",e.idcategoria.toString()),i.tituloToolBar=e.des,i.nomCategoriaSeleted=e.des,i.navigatorService.addLink("carta-i-secciones")}),250)}},{key:"getItems",value:function(e){var i=this;this.miPedidoService.setObjSeccionSeleced(e),setTimeout((function(){i.seccionSelected=e,i.objItems=e.items,i.showSecciones=!1,i.showItems=!0,i.isScreenIsMobile&&(i.tituloToolBar=i.nomCategoriaSeleted+" / "+e.des),i.navigatorService.addLink("carta-i-secciones-items")}),150)}},{key:"getItemsPromo",value:function(e){var i=this;setTimeout((function(){i.objItems=e,i.showSecciones=!1,i.showItems=!0,i.navigatorService.addLink("carta-i-secciones-items")}),150)}},{key:"getItems_seccion_from_busqueda",value:function(e){this.miPedidoService.setObjSeccionSeleced({des:e.seccion,idseccion:e.idseccion,idimpresora:e.idimpresora,sec_orden:e.sec_orden,ver_stock_cero:e.ver_stock_cero})}},{key:"loadItemsBusqueda",value:function(){var e,i,t=this;(e=this.miPedidoService.getObjCarta()).carta&&(e.carta.map((function(e){e.secciones.map((function(e){e.items.map((function(o){(i=o).seccion=e.des,i.idimpresora=e.idimpresora,i.sec_orden=e.sec_orden,i.ver_stock_cero=e.ver_stock_cero,i.selected=!1,i.visible=!0,t.objCartaBus.push(i)}))}))})),window.localStorage.setItem("sys::find",""))}},{key:"goBack",value:function(){try{if(1===this.miPedidoService.objCarta.carta.length&&!this.isScreenIsMobile)return}catch(e){}if(this.objItems.map((function(e){return e.selected=!1})),this.showItems)return this.showItems=!1,this.showSecciones=!0,void(this.tituloToolBar=this.tituloToolBar.split(" / ")[0]);this.showSecciones&&(this.showSecciones=!1,this.showToolBar=!1,this.showCategoria=!0)}},{key:"selectedItem",value:function(e){var i,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this.isPuntoAutoPedido||this.isTomaPedidoRapido||this.isCliente)||t||0!==(null==e?void 0:e.count_subitems)||this.isViewMercado){if("0"!==e.cantidad.toString()||e.cantidad_seleccionada){e.selected=!0,this.itemSelected=e;var o=JSON.parse(JSON.stringify(this.objNewItemTiposConsumo));this.objItemTipoConsumoSelected=e.itemtiposconsumo?e.itemtiposconsumo:o,e.itemtiposconsumo||(e.itemtiposconsumo=this.objItemTipoConsumoSelected);var n=(null===(i=this.seccionSelected)||void 0===i?void 0:i.idseccion)||0,a=this.miPedidoService.getObjSeccionSeleced();(this.itemSelected.idseccion!==n||a.idseccion!==n)&&(this.seccionSelected=this.miPedidoService.findItemSeccionCarta(this.itemSelected.idseccion),this.miPedidoService.setObjSeccionSeleced(this.seccionSelected)),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),this.openDlgItem(e)}}else this.resultCantItemMercado(e,!0)}},{key:"openDlgItem",value:function(e){var i=new S.e,t=e.ispromo?e:this.miPedidoService.findItemCarta(e);t.itemtiposconsumo||(t.itemtiposconsumo=e.itemtiposconsumo),i.autoFocus=!1,i.data={idTpcItemResumenSelect:null,seccion:this.isBusqueda?this.miPedidoService.findItemSeccionCarta(t.idseccion):this.seccionSelected,item:t,objItemTipoConsumoSelected:this.itemSelected.itemtiposconsumo},i.panelClass=["my-dialog-orden-detalle","margen-0","my-dialog-item-producto"],this.dialog.open(He,i).afterClosed().subscribe((function(e){}))}},{key:"addItemToPedido",value:function(e,i){this.miPedidoService.addItem2(e,this.itemSelected,i)}},{key:"addItemToPedidoFromBusqueda",value:function(e,i){this.getItems_seccion_from_busqueda(this.itemSelected),this.miPedidoService.addItem2(e,this.itemSelected,i)}},{key:"addItemIndicaciones",value:function(e,i){this.itemSelected.indicaciones=i,e.indicaciones=i}},{key:"getEstadoStockItem",value:function(e){if("ND"===e||isNaN(e))return"verde";var i=parseInt(e,0);return i>10?"verde":i>5?"amarillo":"rojo"}},{key:"listeStatusBusqueda",value:function(){var e=this;this.listenStatusService.isBusqueda$.subscribe((function(i){e.isBusqueda=i})),this.listenStatusService.charBuqueda$.pipe(Object(ye.takeUntil)(this.destroy$)).subscribe((function(i){e.isBusquedaFindNow(i)})),this.socketService.isSocketOpen$.pipe(Object(ye.takeUntil)(this.destroy$)).subscribe((function(i){i||e.unsubscribeCarta.unsubscribe()})),this.speechDataProviderService.commandNavegacionSeccion$.pipe(Object(ye.takeUntil)(this.destroy$)).subscribe((function(i){i&&(e.getSecciones(e.miPedidoService.objCarta.carta[0]),setTimeout((function(){e.getItems(i)}),100))})),this.speechDataProviderService.commandNavegacionRecomendado$.pipe(Object(ye.takeUntil)(this.destroy$)).subscribe((function(i){i.length>0&&e.getItemsPromo(i)})),this.speechDataProviderService.commandAddItem$.pipe(Object(ye.takeUntil)(this.destroy$)).subscribe((function(i){i&&e.resultCantItemMercado(i.item,i.isSuma)}))}},{key:"isBusquedaFindNow",value:function(e){e=e.toLowerCase();var i="";this.objCartaBus.map((function(t){i=(i="".concat(t.des," ").concat(t.seccion," ").concat(t.detalles)).toLowerCase(),t.visible=i.indexOf(e)>-1}))}},{key:"getObjDetalleSeccion",value:function(e){var i="";if(null!==e.items)return e.items.map((function(e,t){t>5||(i+=e.des.toLowerCase()+", ")})),i.slice(0,-2)}},{key:"resultCantItemMercado",value:function(e){var i,t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.itemSelected=e;var n=JSON.parse(JSON.stringify(this.objNewItemTiposConsumo));this.objItemTipoConsumoSelected=e.itemtiposconsumo?e.itemtiposconsumo:n,e.itemtiposconsumo||(e.itemtiposconsumo=this.objItemTipoConsumoSelected),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected);var a=this.objItemTipoConsumoSelected[0];this.isTomaPedidoRapido&&(a=this.objItemTipoConsumoSelected.filter((function(e){return e.descripcion.toLocaleLowerCase()===t.canalConsumoTomaPedidoRapido.descripcion.toLocaleLowerCase()}))[0]);var s=o||e.isSuma_selected?0:1,r=(null===(i=this.seccionSelected)||void 0===i?void 0:i.idseccion)||0,c=this.miPedidoService.getObjSeccionSeleced();(this.itemSelected.idseccion!==r||c.idseccion!==r)&&(this.seccionSelected=this.miPedidoService.findItemSeccionCarta(this.itemSelected.idseccion),this.miPedidoService.setObjSeccionSeleced(this.seccionSelected)),this.miPedidoService.addItem2(a,this.itemSelected,s),e.is_visible_control_last_add=0!==e.cantidad_seleccionada}},{key:"openDialogComentarios",value:function(){var e=new S.e;e.autoFocus=!1,e.data=this.dataCalificacion,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialog.open(ei,e).afterClosed().subscribe((function(e){}))}},{key:"showItemsPromo",value:function(e){var i=this.cocinarPromoShowService.promoFilterShow(e,this.categoriaSeleted);this.getItemsPromo(i)}}]),e}()).\u0275fac=function(e){return new(e||Wt)(m.Lb(l.a),m.Lb(s.a),m.Lb(Ce),m.Lb(r.a),m.Lb(c.a),m.Lb(b.a),m.Lb(S.b),m.Lb(u.a),m.Lb(Ue.a),m.Lb(P.a),m.Lb(W),m.Lb(ti))},Wt.\u0275cmp=m.Fb({type:Wt,selectors:[["app-carta"]],hostBindings:function(e,i){1&e&&m.Zb("resize",(function(e){return i.onResize(e)}),!1,m.wc)},decls:27,vars:13,consts:[[1,"fondo"],[1,"content-master",3,"hidden"],[4,"ngIfIsBusqueda","ngIf"],[1,"content-secciones","xanimated","xfadeIn",3,"hidden"],["class","p-2 pl-3 pr-3 border-bottom d-flex justify-content-between fs-14","style","background: #e3f2fd;","matRipple","",3,"matRippleColor","click",4,"ngIf"],[4,"ngIf"],[1,"content-secciones","xanimated","xfadeIn","m-main-pt-40",3,"hidden"],["class","li-seccion xCursor","matRipple","",3,"matRippleColor","click",4,"ngFor","ngForOf"],[1,"content-items","xtransicion","m-main-pt-40",3,"hidden"],[4,"ngIf","ngIfElse"],["elseViewItemMercado",""],[1,"content-resumen"],[1,"xtransicion","color-fondo-ul","xanimated","xfadeInDown",2,"border-top","8px solid #3f51b5",3,"hidden"],[3,"hidden",4,"ngFor","ngForOf"],["matRipple","",1,"text-white","bg-primary","p-2","m-toolbar-seccion","xanimated","xfadeInDown","text-puntos-suspensivos",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],[1,"pl-2","font-weight-light","fs-13"],["matRipple","",1,"p-2","pl-3","pr-3","border-bottom","d-flex","justify-content-between","fs-14",2,"background","#e3f2fd",3,"matRippleColor","click"],[1,"d-flex"],[1,"pr-2"],[1,"fa","fa-star","text-warning","pr-1"],[1,"fa","fa-angle-right","text-secondary","pl-2"],["class","xCursor","matRipple","",3,"matRippleColor","click",4,"ngFor","ngForOf"],["matRipple","",1,"xCursor",3,"matRippleColor","click"],[1,"m1","seccion"],[1,"img","mt-2"],["src","assets/images/048-grill.png","alt",""],[1,"fw-100","fs-20"],[1,"text-secondary"],[1,"mt-2","fs-15"],["aria-hidden","true",1,"fa","fa-clock-o","pr-2"],[1,"mt-2","fs-12"],["class","m1 seccion li-seccion xCursor","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"m1","seccion","li-seccion","xCursor",3,"matRippleColor"],[1,"w-100",3,"promo","selected"],["matRipple","",1,"li-seccion","xCursor",3,"matRippleColor","click"],[1,"img"],["elseTemplateImg",""],[2,"width","calc(100% - 50px) !important"],[1,"fw-100","fs-19"],[1,"titulo-detalle-seccion","text-secondary"],[1,"fw-100","mt-2","fs-13"],["alt","img-icon",3,"src"],[1,"badge","badge-danger","ml-2"],[1,"ul-items"],["class","li-item",4,"ngFor","ngForOf"],[1,"li-item"],["matRipple","",3,"matRippleColor"],[1,"m1","d-flex","xtitulo",3,"ngClass","click"],[1,"content-titulo-item","w-100","d-flex","align-items-center","justify-content-between","w-100"],["elseConImagen",""],[1,"d-flex","justify-content-between","w-100"],[1,"fw-600","fs-12","item-titulo"],["class","fa fa-star text-warning pr-1",4,"ngIf"],[1,"text-right","pl-1"],[1,"mb-0","fw-600"],["class","fw-600 li-tachado mr-1",4,"ngIf"],[1,"titlo-detalle","mb-1"],[1,"fw-600","li-tachado","mr-1"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["class","titlo-detalle mb-1",4,"ngIf"],["class","mb-0 fw-600 li-tachado",4,"ngIf"],[1,"mb-0","fw-600","pr-2"],[1,"text-right","ml-1"],[1,"rounded-circle","icon-div-carta"],["alt","icon-item-carta",1,"icon-item-carta","rounded-circle",3,"src"],[1,"mb-0","fw-600","li-tachado"],["class","control-more-clic animated fadeInUp",4,"ngIf"],[1,"control-more-clic","animated","fadeInUp"],[1,"float-left","mr-1",3,"cantidad_show","objItem","comprimir","quitarFadeUp","limitAdd","objResponse"],[1,"btn-indicacion-last-control",3,"click"],[1,"fa","fa-pencil","pr-1"],[1,"fs-11"],[1,"content-view-item-mercado"],["class","li-content-mercado",4,"ngFor","ngForOf"],[1,"li-content-mercado"],["matRipple","",1,"li-item-mercado","d-flex","xtitulo","p-titulo-item-sin-detalle",3,"ngClass"],[1,"w-100"],[1,"w-100","align-items-center"],[1,"div-control-add-fast",3,"cantidad_show","objItem","limitAdd","objResponse"],[1,"text-center"],["elseTemplateConImg",""],[1,"text-center",3,"click"],[1,"fw-600","fs-11","item-titulo"],["alt","icon-item-carta",1,"icon-item-carta",3,"src","click"],[3,"hidden"],["matRipple","",1,"m1","d-flex","xtitulo",3,"matRippleColor","ngClass","click"],[1,"content-titulo-item","w-100"],[1,"titlo-detalle"]],template:function(e,i){if(1&e&&(m.Rb(0,"div",0),m.Rb(1,"div",1),m.Ec(2,gt,5,1,"ng-container",2),m.Rb(3,"div",3),m.Ec(4,vt,10,6,"div",4),m.Ec(5,St,3,1,"ng-container",5),m.Qb(),m.Rb(6,"div",6),m.Ec(7,kt,2,1,"ng-container",5),m.Pb(8),m.Rb(9,"ul"),m.Ec(10,Pt,16,6,"li",7),m.Qb(),m.Mb(11,"br"),m.Mb(12,"br"),m.Ob(),m.Qb(),m.Rb(13,"div",8),m.Pb(14),m.Ec(15,Gt,3,1,"ng-container",9),m.Ec(16,$t,2,1,"ng-template",null,10,m.Fc),m.Ob(),m.Qb(),m.Pb(18),m.Rb(19,"div",11),m.Mb(20,"app-resumen-pedido"),m.Qb(),m.Ob(),m.Mb(21,"br"),m.Qb(),m.Rb(22,"div",12),m.Pb(23),m.Rb(24,"ul"),m.Ec(25,Jt,7,12,"li",13),m.Qb(),m.Ob(),m.Qb(),m.Mb(26,"br"),m.Qb()),2&e){var t=m.uc(17);m.zb(1),m.lc("hidden",i.isBusqueda),m.zb(1),m.lc("ngIf",i.showToolBar),m.zb(1),m.lc("hidden",!i.showCategoria),m.zb(1),m.lc("ngIf",i.isShowCalificacion&&i.isCliente),m.zb(1),m.lc("ngIf",i.miPedidoService.objCarta),m.zb(1),m.lc("hidden",!i.showSecciones&&i.isScreenIsMobile),m.zb(1),m.lc("ngIf",i.objPromociones),m.zb(3),m.lc("ngForOf",i.objSecciones),m.zb(3),m.lc("hidden",!i.showItems&&i.isScreenIsMobile),m.zb(2),m.lc("ngIf",!i.isViewMercado)("ngIfElse",t),m.zb(7),m.lc("hidden",!i.isBusqueda),m.zb(3),m.lc("ngForOf",i.objCartaBus)}},directives:[o.t,o.s,st,T.n,ht,o.q,xe.a],pipes:[o.g,o.p],styles:[".text-puntos-suspensivos[_ngcontent-%COMP%]{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-view-item-mercado[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.li-content-mercado[_ngcontent-%COMP%]{list-style-type:none}.li-item-mercado[_ngcontent-%COMP%]{background:#fff;padding:8px 15px}.div-control-add-fast[_ngcontent-%COMP%]{position:absolute;right:20px;top:5px}.control-more-clic[_ngcontent-%COMP%]{padding-left:15px;margin-bottom:10px}.btn-indicacion-last-control[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:#3cb371;color:#fff;text-align:center;padding:2px 10px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:28px}@media only screen and (min-width:600px){.content-master[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.content-secciones[_ngcontent-%COMP%]{max-width:350px;min-width:310px;border-right:2px solid #bdbdbd}.content-items[_ngcontent-%COMP%], .content-secciones[_ngcontent-%COMP%]{width:100%;height:-webkit-calc(100vh - 110px);height:calc(100vh - 110px);overflow:auto}.content-items[_ngcontent-%COMP%]{min-width:320px;border-right:1px solid #dee2e6!important}.content-resumen[_ngcontent-%COMP%]{min-width:360px;max-width:420px;width:100%;padding:50px 20px 0;border:2px solid #bdbdbd;height:-webkit-calc(100vh - 110px);height:calc(100vh - 110px);overflow:auto;background:#eee}}@media only screen and (max-width:1050px){.content-resumen[_ngcontent-%COMP%]{display:none}}@media only screen and (min-width:1250px){.ul-items[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;flex-flow:row wrap}.li-item[_ngcontent-%COMP%]{-webkit-flex-basis:50%;flex-basis:50%;border-right:2px solid hsla(0,0%,93.3%,.93)}.child-item[_ngcontent-%COMP%]{height:100%}}",".m1[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{background:#fff;padding:8px 15px}.m1.seccion[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.border-bottom-li[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.img[_ngcontent-%COMP%]{border:1px solid #bdbdbd;text-align:center;border-radius:50px;width:50px;line-height:10px;padding:8px;float:left;margin-right:10px;max-height:52px}.estado-color-verde[_ngcontent-%COMP%]{background:#43a047;color:#e0e0e0}.estado-color-amarillo[_ngcontent-%COMP%]{background:#ffb300;color:#424242}.estado-color-rojo[_ngcontent-%COMP%]{background:#d81b60;color:#e0e0e0}.trasicion-border[_ngcontent-%COMP%]{-webkit-transition:border-left .3s ease-out;transition:border-left .3s ease-out}.border-left-item-verde[_ngcontent-%COMP%]{border-left:5px solid #43a047}.border-left-item-rojo[_ngcontent-%COMP%]{border-left:5px solid #d81b60}.border-left-item-amarillo[_ngcontent-%COMP%]{border-left:5px solid #ffb300}.m1-selected[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.margin-input[_ngcontent-%COMP%]{margin-bottom:-20px;margin-top:-20px}.color-fondo-ul[_ngcontent-%COMP%]{background:#616161}.li-padding-selected[_ngcontent-%COMP%]{padding:12px}.li-padding-selected[_ngcontent-%COMP%]   .xcontent[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.p-titulo-item-sin-detalle[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.p-titulo-item-select[_ngcontent-%COMP%]{padding:8px 15px}.content-titulo-item[_ngcontent-%COMP%]{font-size:14px}.content-titulo-item[_ngcontent-%COMP%]   .titlo-detalle[_ngcontent-%COMP%]{font-size:13px;font-family:Ubuntu-Light;color:#616161;display:-webkit-box;max-width:100%;max-height:40px;margin:0 auto;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;text-transform:lowercase}.titulo-detalle-seccion[_ngcontent-%COMP%]{width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.li-padding-selected[_ngcontent-%COMP%]   .xtitulo[_ngcontent-%COMP%]{background:#e0e0e0}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock[_ngcontent-%COMP%]{display:inline-block}.tb-tpc[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px dashed #e0e0e0}.btn-tbl[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:5px 15px;font-size:15px}.flag-stock[_ngcontent-%COMP%]{position:absolute;float:right;margin-top:-9px;margin-right:50px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1;display:none}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock-dialog[_ngcontent-%COMP%]{display:inline-block}.li-tachado[_ngcontent-%COMP%]{text-decoration:line-through;color:red}.flag-stock-dialog[_ngcontent-%COMP%]{float:right;margin-top:-9px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1}.mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.m-toolbar-seccion[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:1}.m-main-pt-40[_ngcontent-%COMP%]{padding-top:40px}.titulo-num-mesa[_ngcontent-%COMP%]{background:#757575;color:#000}.subitem-content[_ngcontent-%COMP%]{width:100%;background:#fafad2;padding:5px;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-top:20px;margin-bottom:20px;border-top:1px solid #bdbdbd;border-bottom:1px solid #bdbdbd}.subitem-content[_ngcontent-%COMP%], .subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{padding-right:8px;min-width:150px}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]   .agotado[_ngcontent-%COMP%]{text-decoration:line-through;color:#db7093}.item-titulo[_ngcontent-%COMP%]{color:#424242}.icon-div-carta[_ngcontent-%COMP%]{border:1px solid #bdbdbd}.icon-item-carta[_ngcontent-%COMP%]{height:60px;-o-object-fit:cover;object-fit:cover;-webkit-transition:all .1s;transition:all .1s;width:60px;border-radius:5px}.li-seccion[_ngcontent-%COMP%]{cursor:pointer}"]}),Wt);function Yt(e,i){1&e&&(m.Rb(0,"span"),m.Mb(1,"i",4),m.Qb())}var Xt,eo=function(e){return{fadeInUp:"isShowTxtTraduce",fadeOutDown:e}},io=function(e,i){return{"text-success":e,"fw-600":i}},to=((Xt=function(){function e(i,t,o){_classCallCheck(this,e),this.spechTotextService=i,this.speechDataProviderService=t,this.utilitariosSerivce=o,this.destroy$=new Se.Subject,this.isShowTxtTraduce=!1,this.isShowCheck=!1,this.countTimeClose=null,this.textTranscript=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.spechTotextService.listenOnTraduce$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){i&&(e.isShowTxtTraduce=i),clearInterval(e.countTimeClose),e.activeCloseBanner()})),this.spechTotextService.speechTexResponse$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){i&&(e.txtResults=i,e.textTranscript=e.txtResults[0].alternatives[0].transcript,e.isShowCheck=!1)})),this.speechDataProviderService.commandAceptado$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){if(i>0){setTimeout((function(){e.isShowCheck=!0}),100);var t=setInterval((function(){i<=0?clearInterval(t):(e.utilitariosSerivce.beep(),i--)}),100)}}))}},{key:"activeCloseBanner",value:function(){var e=this,i=0;this.countTimeClose=setInterval((function(){i>4&&(e.isShowTxtTraduce=!1,clearInterval(e.countTimeClose)),i++}),1e3)}}]),e}()).\u0275fac=function(e){return new(e||Xt)(m.Lb($),m.Lb(W),m.Lb(_.a))},Xt.\u0275cmp=m.Fb({type:Xt,selectors:[["app-mozo-show-traduce-text"]],decls:5,vars:9,consts:[[1,"bg-voz","footer-btn-go-lista","animated","fadeIn",3,"ngClass"],[1,"text-center"],[1,"mr-2",3,"ngClass"],[4,"ngIf"],[1,"fa","fa-check","text-success"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Rb(1,"div",1),m.Rb(2,"span",2),m.Gc(3),m.Qb(),m.Ec(4,Yt,2,0,"span",3),m.Qb(),m.Qb()),2&e&&(m.lc("ngClass",m.qc(4,eo,!i.isShowTxtTraduce)),m.zb(2),m.lc("ngClass",m.rc(6,io,i.isShowCheck,i.isShowCheck)),m.zb(1),m.Hc(i.textTranscript),m.zb(1),m.lc("ngIf",i.isShowCheck))},directives:[o.q,o.t],styles:[".footer-btn-go-lista[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;text-align:center;background:#d3d3d3;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:13px;z-index:100;font-weight:400;border-top:3px solid #3f78b5}.footer-btn-go-lista[_ngcontent-%COMP%], .footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;width:85%;font-size:14px;border-radius:5px 5px 0 0;padding:10px;font-weight:100;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}"]}),Xt);function oo(e,i){}function no(e,i){if(1&e&&(m.Rb(0,"span"),m.Gc(1,"Tiempo de espera "),m.Rb(2,"strong"),m.Gc(3),m.Qb(),m.Gc(4," aprox."),m.Qb()),2&e){var t=m.dc(3);m.zb(3),m.Ic("",t.tiempoEspera," min")}}function ao(e,i){1&e&&(m.Rb(0,"span"),m.Gc(1,"Su pedido esta por llegar."),m.Qb())}function so(e,i){1&e&&(m.Rb(0,"span"),m.Gc(1,"Su pedido ya fue despachado."),m.Qb())}function ro(e,i){if(1&e&&(m.Rb(0,"div",22),m.Ec(1,no,5,1,"span",23),m.Ec(2,ao,2,0,"span",23),m.Ec(3,so,2,0,"span",23),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.lc("ngIf",0===t.estadoPedido.estado),m.zb(1),m.lc("ngIf",1===t.estadoPedido.estado),m.zb(1),m.lc("ngIf",2===t.estadoPedido.estado)}}function co(e,i){1&e&&(m.Pb(0),m.Rb(1,"span",24),m.Gc(2,"Tiene pedido pendiente."),m.Qb(),m.Ob())}function lo(e,i){if(1&e){var t=m.Sb();m.Rb(0,"span",25),m.Zb("click",(function(){return m.xc(t),m.dc(2).verCuenta()})),m.Gc(1,"Ver cuenta"),m.Qb()}}function uo(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",26),m.Zb("click",(function(){return m.xc(t),m.dc(2).solicitarAtencion()})),m.Rb(1,"div",27),m.Rb(2,"span",9),m.Gc(3,"Solicitar atenci\xf3n del personal."),m.Qb(),m.Rb(4,"span",28),m.Gc(5,"Solicitud enviada."),m.Qb(),m.Qb(),m.Rb(6,"div",18),m.Mb(7,"img",29),m.Qb(),m.Qb()}if(2&e){var o=m.dc(2);m.lc("matRippleColor",o.rippleColor),m.zb(4),m.lc("hidden",!o.isViewMsjSolicitudPersoanl)}}function bo(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",3),m.Rb(2,"div",4),m.Rb(3,"span"),m.Gc(4),m.Qb(),m.Rb(5,"h3"),m.Gc(6),m.ec(7,"number"),m.Qb(),m.Qb(),m.Ec(8,oo,0,0,"ng-template",null,5,m.Fc),m.Ec(10,ro,4,3,"div",6),m.Qb(),m.Rb(11,"div",7),m.Rb(12,"div",8),m.Rb(13,"span",9),m.Gc(14,"Importe a pagar"),m.Qb(),m.Mb(15,"br"),m.Ec(16,co,3,0,"ng-container",1),m.Ec(17,lo,2,0,"ng-template",null,10,m.Fc),m.Qb(),m.Rb(19,"div",11),m.Rb(20,"span",12),m.Gc(21),m.ec(22,"number"),m.Qb(),m.Qb(),m.Qb(),m.Rb(23,"div",13),m.Rb(24,"div",14),m.Mb(25,"img",15),m.Mb(26,"img",16),m.Mb(27,"img",17),m.Qb(),m.Rb(28,"div",18),m.Rb(29,"button",19),m.Zb("click",(function(){return m.xc(t),m.dc().pagarCuenta()})),m.Gc(30,"Pagar"),m.Qb(),m.Qb(),m.Qb(),m.Ec(31,uo,8,2,"div",20),m.Rb(32,"div",7),m.Rb(33,"div",21),m.Rb(34,"span",9),m.Gc(35,"Al cancelar la cuenta por favor tomece un minuto para calificar nuestro servicio, su opini\xf3n es muy importante."),m.Qb(),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.uc(18),n=m.dc();m.zb(4),m.Hc(n.tituloMesa),m.zb(2),m.Hc(m.gc(7,9,n.infoToken.numMesaLector,"2.")),m.zb(4),m.lc("ngIf",n.estadoPedido),m.zb(6),m.lc("ngIf",n.estadoPedido.hayPedidoClientePendiente)("ngIfElse",o),m.zb(5),m.Jc("",n.simbolo_moneda," ",m.gc(22,12,n.estadoPedido.importe,".2"),""),m.zb(8),m.lc("disabled",n.estadoPedido.hayPedidoClientePendiente||0==n.estadoPedido.importe),m.zb(2),m.lc("ngIf",!n.infoToken.isSoloLLevar)}}function mo(e,i){if(1&e&&(m.Rb(0,"div",30),m.Rb(1,"span",31),m.Gc(2,"Direccion de entrega:"),m.Qb(),m.Rb(3,"p",32),m.Gc(4,"Jr. Reyes Guerra 456"),m.Qb(),m.Qb(),m.Rb(5,"div",30),m.Rb(6,"p",32),m.Mb(7,"i",33),m.Gc(8," Hora de entrega: 10 - 15 min"),m.Qb(),m.Qb(),m.Rb(9,"div",30),m.Rb(10,"mat-form-field",34),m.Mb(11,"input",35),m.Qb(),m.Rb(12,"span",31),m.Gc(13,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),m.Qb(),m.Qb(),m.Rb(14,"div",30),m.Mb(15,"div",36),m.Qb()),2&e){var t=m.dc();m.lc("matRippleColor",t.rippleColor),m.zb(5),m.lc("matRippleColor",t.rippleColor),m.zb(4),m.lc("matRippleColor",t.rippleColor),m.zb(5),m.lc("matRippleColor",t.rippleColor)}}var po,fo=((po=function(){function e(i,t,o,n,a,s,r){_classCallCheck(this,e),this.listenStatusService=i,this.estadoPedidoClienteService=t,this.infoTokenService=o,this.navigatorService=n,this.socketService=a,this.router=s,this.establecimientoService=r,this.rippleColor="rgb(255,238,88, 0.5)",this.tituloMesa="Mesa",this.isViewMsjSolicitudPersoanl=!1,this.isBtnPagoShow=!1,this.destroyEstado$=new Se.Subject}return _createClass(e,[{key:"ngOnInit",value:function(){this.infoToken=this.infoTokenService.getInfoUs(),this.isDeliveryCliente=this.infoToken.isDelivery,this.simbolo_moneda=this.establecimientoService.getSimboloMoneda(),this.listenStatus()}},{key:"ngOnDestroy",value:function(){this.destroyEstado$.next(!0),this.destroyEstado$.unsubscribe()}},{key:"listenStatus",value:function(){var e=this;this.navigatorService.resNavigatorSourceObserve$.pipe(Object(li.a)(this.destroyEstado$)).subscribe((function(i){"estado"===i.pageActive&&(e.tituloMesa=e.infoToken.isSoloLLevar?"Para Llevar":"Mesa",setTimeout((function(){e.estadoPedidoClienteService.getCuentaTotales()}),2500))})),this.navigatorService.resNavigatorSourceObserve$.pipe(Object(li.a)(this.destroyEstado$)).subscribe((function(i){return Object(A.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("estado"!==i.pageActive){e.next=5;break}return e.next=3,this.estadoPedidoClienteService.getImporteCuenta();case 3:t=e.sent,this.estadoPedido.importe=t||0;case 5:case"end":return e.stop()}}),e,this)})))})),this.listenStatusService.hayPedidoPendiente$.pipe(Object(li.a)(this.destroyEstado$)).subscribe((function(i){e.estadoPedidoClienteService.setHayPedidoPendiente(i)})),this.listenStatusService.estadoPedido$.pipe(Object(li.a)(this.destroyEstado$)).subscribe((function(i){e.estadoPedido=i,0===e.estadoPedido.importe&&e.estadoPedido.isRegisterOnePago&&(e.estadoPedidoClienteService.setisRegisterPago(!1),e.navigatorService._router("../lanzar-encuesta"))})),this.estadoPedidoClienteService.timeRestanteAprox$.subscribe((function(i){e.tiempoEspera=i})),this.socketService.onPedidoPagado().pipe(Object(li.a)(this.destroyEstado$)).subscribe((function(i){e.estadoPedidoClienteService.getCuentaTotales(),e.estadoPedidoClienteService.setisRegisterPago(!0)})),this.listenStatusService.isBtnPagoShow$.pipe(Object(li.a)(this.destroyEstado$)).subscribe((function(i){e.isBtnPagoShow=i}))}},{key:"verCuenta",value:function(){this.estadoPedidoClienteService.getCuenta(),this.navigatorService.setPageActive("mipedido")}},{key:"pagarCuenta",value:function(){var e=this;localStorage.getItem("sys::st")?(this.estadoPedidoClienteService.getCuenta(),this.router.navigate(["./pagar-cuenta"]).then((function(){e.isBtnPagoShow&&window.location.reload()})),this.listenStatusService.setIsPagePagarCuentaShow(!0)):this.verCuenta()}},{key:"solicitarAtencion",value:function(){var e=this;this.isViewMsjSolicitudPersoanl||(this.socketService.emit("notificar-cliente-llamado",this.infoToken.numMesaLector),this.isViewMsjSolicitudPersoanl=!0,setTimeout((function(){e.isViewMsjSolicitudPersoanl=!1}),3e4))}}]),e}()).\u0275fac=function(e){return new(e||po)(m.Lb(c.a),m.Lb(di.a),m.Lb(b.a),m.Lb(r.a),m.Lb(l.a),m.Lb(ui.d),m.Lb(u.a))},po.\u0275cmp=m.Fb({type:po,selectors:[["app-estado-pedido"]],decls:6,vars:2,consts:[[1,"animated","fadeIn"],[4,"ngIf","ngIfElse"],["templateDelivery",""],[1,"row","xboder-abajo","m-0","p-2"],[1,"col-4","text-center","xboder-derecha"],["elseTemplate",""],["class","col-8 xcontainer-center text-right",4,"ngIf"],[1,"row","xboder-abajo","m-0","p-2","xcontainer-center"],[1,"col-6","pb-3","pt-3"],[1,"fs-13"],["elseTemplateCuenta",""],[1,"col-6","text-right"],[1,"fs-25"],[1,"row","xboder-abajo","m-0","p-2","pt-3","pb-3","xcontainer-center"],[1,"col-8"],["src","./assets/images/001-visa.png","alt","visa-card",1,"pr-2"],["src","./assets/images/002-mastercard.png","alt","maestro-card",1,"pr-2"],["src","./assets/images/002-american-express.png","alt","american-express"],[1,"col-4","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["class","row xboder-abajo m-0 p-2 xcontainer-center","matRipple","",3,"matRippleColor","click",4,"ngIf"],[1,"col-12","pb-3","pt-3"],[1,"col-8","xcontainer-center","text-right"],[4,"ngIf"],[1,"text-danger"],[1,"text-info","xCursor",3,"click"],["matRipple","",1,"row","xboder-abajo","m-0","p-2","xcontainer-center",3,"matRippleColor","click"],[1,"col-8","pb-3","pt-3"],[1,"fs-13","text-info","pl-2","animated","flash",3,"hidden"],["src","./assets/images/solicitar-atencion.png","alt","solicitar-atencion"],["matRipple","",1,"border-bottom","m-0","p-3",3,"matRippleColor"],[1,"fw-100","fs-12","text-secondary"],[1,"m-0"],[1,"fa","fa-clock-o"],[1,"w-100"],["type","number","matInput","","placeholder","Telefono"],[1,"row","border-bottom"]],template:function(e,i){if(1&e&&(m.Rb(0,"div",0),m.Ec(1,bo,36,15,"ng-container",1),m.Ec(2,mo,16,4,"ng-template",null,2,m.Fc),m.Mb(4,"br"),m.Mb(5,"br"),m.Qb()),2&e){var t=m.uc(3);m.zb(1),m.lc("ngIf",!i.isDeliveryCliente)("ngIfElse",t)}},directives:[o.t,y.b,T.n,I.c,ke.a],pipes:[o.g],styles:[""]}),po);function ho(e,i){1&e&&(m.Rb(0,"div",19),m.Rb(1,"div",20),m.Mb(2,"mat-progress-bar",21),m.Rb(3,"span",22),m.Gc(4,"Enviando pedido..."),m.Qb(),m.Qb(),m.Qb())}function go(e,i){1&e&&(m.Rb(0,"div",19),m.Rb(1,"div",20),m.Mb(2,"mat-progress-bar",21),m.Rb(3,"span",22),m.Gc(4,"Obteniendo productos..."),m.Qb(),m.Qb(),m.Qb())}var vo=function(e,i){return{fadeInUp:e,fadeOutDown:i}};function Co(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",23),m.Rb(1,"div",24),m.Zb("click",(function(){return m.xc(t),m.dc().goListaProductos()})),m.Rb(2,"p",25),m.Gc(3),m.Qb(),m.Rb(4,"p"),m.Gc(5,"Ver pedido"),m.Qb(),m.Rb(6,"p"),m.Gc(7),m.ec(8,"number"),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc();m.lc("ngClass",m.rc(6,vo,o.countTotalItems>0,o.countTotalItems<=0)),m.zb(3),m.Hc(o.countTotalItems),m.zb(4),m.Ic("S/. ",m.gc(8,3,o.importeTotalProductos,".2"),"")}}function So(e,i){if(1&e&&(m.Rb(0,"div",29),m.Gc(1),m.ec(2,"number"),m.Mb(3,"div",30),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.Ic(" ",m.gc(2,1,t.countTotalItems,"2.")," ")}}function yo(e,i){if(1&e&&(m.Rb(0,"span",26),m.Gc(1,"Mi Pedido "),m.Qb(),m.Mb(2,"i",27),m.Ec(3,So,4,4,"div",28)),2&e){var t=m.dc();m.zb(3),m.lc("ngIf",t.countTotalItems>0)}}function ko(e,i){1&e&&(m.Pb(0),m.Mb(1,"app-resumen-pedido"),m.Ob())}function xo(e,i){if(1&e){var t=m.Sb();m.Rb(0,"mat-tab",31),m.Rb(1,"div",12),m.Zb("scroll",(function(e){return m.xc(t),m.dc().onScroll(e)})),m.Mb(2,"app-estado-pedido"),m.Mb(3,"br"),m.Qb(),m.Qb()}}var _o,Ro=function(e){return{loaded:e}},Po=function(e,i){return{fadeInTool:e,fadeOutTool:i}},wo=function(e){return{"header-less-tabs pt-0":e}},Io=function(e){return{"fondo-gris":e}},Mo=((_o=function(){function e(i,t,o,n,a,s,r){_classCallCheck(this,e),this.miPedidoService=i,this.navigatorService=t,this.listenStatusService=o,this.socketService=n,this.verifyClientService=a,this.infoTokenService=s,this.establecimientoService=r,this.isVisibleToolBar=!0,this.isBusqueda=!1,this.isHayCuentaBusqueda=!1,this.countTotalItems=0,this.selectedTab=0,this.isUsuarioCliente=!1,this.isClienteDelivery=!1,this.isClienteReserva=!1,this.isPagePagarShow=!1,this.isPuntoAutoPedido=!1,this.loaderPage=!1,this.timeLoader=null,this.isSpeechVoiceAcivado=!1,this.lastValScrollTop=0,this.importeTotalProductos=0,this.isScreenIsMobile=!0}return _createClass(e,[{key:"onResize",value:function(e){this.detectScreenSize()}},{key:"detectScreenSize",value:function(){this.isScreenIsMobile=!(window.innerWidth>1049)}},{key:"ngOnInit",value:function(){var e=this;this.detectScreenSize(),this.socketService.isSocketOpenReconect=!1,this.navigatorService.setPageActive("carta"),this.infoTokenService.getInfoUs(),this.isPuntoAutoPedido=this.infoTokenService.isPuntoAutoPedido(),this.isSpeechVoiceAcivado=1===this.establecimientoService.get().speech_disabled,this.verifyClientService.verifyClient().subscribe((function(i){e.isUsuarioCliente=i?i.isCliente||!1:e.infoTokenService.infoUsToken.isCliente,e.listenStatusService.setIsUsuarioCliente(e.isUsuarioCliente),e.isClienteDelivery=null==i?void 0:i.isDelivery,e.isClienteReserva=null==i?void 0:i.isReserva,e.verifyClientService.getIsDelivery()&&e.verifyClientService.getIsQrSuccess()&&(e.socketService.isSocketOpen=!1)})),this.listenStatusService.isBusqueda$.subscribe((function(i){e.isBusqueda=i})),this.listenStatusService.hayCuentaBusqueda$.subscribe((function(i){e.isHayCuentaBusqueda=i})),this.listenStatusService.isPagePagarCuentaShow$.subscribe((function(i){e.isPagePagarShow=i})),this.navigatorService.resNavigatorSourceObserve$.subscribe((function(i){switch(i.pageActive){case"carta":e.selectedTab=0,e.resetObjCuenta();break;case"estado":e.selectedTab=2;break;case"mipedido":e.selectedTab=1}})),this.miPedidoService.countItemsObserve$.subscribe((function(i){e.countTotalItems=i,e.importeTotalProductos=e.miPedidoService.getSubTotalMiPedido()})),this.listenStatusService.isLoaderCarta$.subscribe((function(i){e.loaderPage=i,e.loaderPage?e.verificarLoaderReload():clearTimeout(e.timeLoader)}))}},{key:"verificarLoaderReload",value:function(){var e=this;this.timeLoader=setTimeout((function(){e.loaderPage&&window.location.reload()}),15e3)}},{key:"onScroll",value:function(e){var i=this,t=e.srcElement.scrollTop;this.isVisibleToolBar=!(t>=this.lastValScrollTop&&t>0),setTimeout((function(){i.lastValScrollTop=t}),100)}},{key:"clickTab",value:function(e){this.selectedTab=e.index;var i=e.tab.textLabel.toLowerCase();this.navigatorService.setPageActive(i),this.isVisibleToolBar=!0}},{key:"resetObjCuenta",value:function(){this.isHayCuentaBusqueda&&(this.miPedidoService.resetObjMiPedido(),this.listenStatusService.setHayCuentaBuesqueda(!1))}},{key:"goListaProductos",value:function(){this.clickTab({index:1,tab:{isActive:!0,origin:1,position:0,textLabel:"MiPedido"}})}}]),e}()).\u0275fac=function(e){return new(e||_o)(m.Lb(s.a),m.Lb(r.a),m.Lb(c.a),m.Lb(l.a),m.Lb(d.a),m.Lb(b.a),m.Lb(u.a))},_o.\u0275cmp=m.Fb({type:_o,selectors:[["app-main"]],hostBindings:function(e,i){1&e&&m.Zb("resize",(function(e){return i.onResize(e)}),!1,m.wc)},decls:32,vars:29,consts:[[3,"ngClass"],[1,"wrapper"],["id","loader-wrapper"],["id","loader"],[1,"loader-msj"],[1,"loader-section","section-left"],[1,"loader-section","section-right"],["class","animated fadeIn div-loader-2",4,"ngIf"],[1,"h-100","overflow-hidden"],[1,"toolbar-main",3,"ngClass"],["backgroundColor","primary","color","accent",1,"main-contemt","transicion","xanimated","xfadeIn",3,"selectedIndex","ngClass","selectedTabChange"],["label","Carta"],[1,"x100-toolbar-hidden",3,"scroll"],["class","footer-btn-go-lista animated fadeIn",3,"ngClass",4,"ngIf"],["label","MiPedido",3,"disabled"],["matTabLabel",""],[1,"x100-toolbar-hidden",3,"ngClass","scroll"],[4,"ngIf"],["label","Estado",4,"ngIf"],[1,"animated","fadeIn","div-loader-2"],[1,"loader"],["mode","indeterminate"],[1,"pt-2"],[1,"footer-btn-go-lista","animated","fadeIn",3,"ngClass"],[1,"content",3,"click"],[1,"badge","badge-light"],[1,"fs-11"],["aria-hidden","true",1,"fa","fa-shopping-basket","pl-2"],["class","countItem countTotal animated fadeInUp d-flex",4,"ngIf"],[1,"countItem","countTotal","animated","fadeInUp","d-flex"],[1,"div-spinner"],["label","Estado"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.ec(1,"async"),m.Rb(2,"div",1),m.Rb(3,"div",2),m.Mb(4,"div",3),m.Rb(5,"div",4),m.Gc(6),m.ec(7,"async"),m.Qb(),m.Mb(8,"div",5),m.Mb(9,"div",6),m.Qb(),m.Qb(),m.Qb(),m.Ec(10,ho,5,0,"div",7),m.ec(11,"async"),m.Ec(12,go,5,0,"div",7),m.ec(13,"async"),m.Rb(14,"div",8),m.Mb(15,"app-progress-time-limit"),m.Rb(16,"div",9),m.Mb(17,"app-tool-bar"),m.Qb(),m.Rb(18,"div"),m.Rb(19,"mat-tab-group",10),m.Zb("selectedTabChange",(function(e){return i.clickTab(e)})),m.Rb(20,"mat-tab",11),m.Rb(21,"div",12),m.Zb("scroll",(function(e){return i.onScroll(e)})),m.Mb(22,"app-carta"),m.Mb(23,"br"),m.Ec(24,Co,9,9,"div",13),m.Qb(),m.Qb(),m.Rb(25,"mat-tab",14),m.Ec(26,yo,4,1,"ng-template",15),m.Rb(27,"div",16),m.Zb("scroll",(function(e){return i.onScroll(e)})),m.Ec(28,ko,2,0,"ng-container",17),m.Mb(29,"br"),m.Qb(),m.Qb(),m.Ec(30,xo,4,0,"mat-tab",18),m.Qb(),m.Qb(),m.Mb(31,"app-mozo-show-traduce-text"),m.Qb()),2&e&&(m.lc("ngClass",m.qc(20,Ro,m.fc(1,12,i.socketService.isSocketOpen$))),m.zb(6),m.Hc(m.fc(7,14,i.socketService.msjConex$)),m.zb(4),m.lc("ngIf",m.fc(11,16,i.listenStatusService.isLoaderSendPedido$)),m.zb(2),m.lc("ngIf",m.fc(13,18,i.listenStatusService.isLoaderCarta$)),m.zb(4),m.lc("ngClass",m.rc(22,Po,i.isVisibleToolBar,!i.isVisibleToolBar)),m.zb(3),m.lc("selectedIndex",i.selectedTab)("ngClass",m.qc(25,wo,i.isBusqueda)),m.zb(5),m.lc("ngIf",(i.isUsuarioCliente||i.isPuntoAutoPedido)&&i.isScreenIsMobile),m.zb(1),m.lc("disabled",!i.isScreenIsMobile),m.zb(2),m.lc("ngClass",m.qc(27,Io,i.isUsuarioCliente)),m.zb(1),m.lc("ngIf",i.isScreenIsMobile),m.zb(2),m.lc("ngIf",i.isUsuarioCliente&&!i.isClienteDelivery&&!i.isClienteReserva))},directives:[o.q,o.t,C,pe,fe.c,fe.a,Kt,fe.d,to,f.a,st,fo],pipes:[o.b,o.g],styles:[".main-contemt[_ngcontent-%COMP%]{overflow:hidden!important}.x100[_ngcontent-%COMP%]{height:100vh;overflow:auto}.toolbar-main[_ngcontent-%COMP%]{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}@keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}.toolbar-main.fadeOutTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeOutTool;animation-name:fadeOutTool}@-webkit-keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}@keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}.toolbar-main.fadeInTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeInTool;animation-name:fadeInTool}.x100-toolbar-visible[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 105px);height:calc(100vh - 105px);overflow:auto}.x100-toolbar-hidden[_ngcontent-%COMP%]{position:relative;height:-webkit-calc(100vh - 49px);height:calc(100vh - 49px);overflow:auto}.countItem[_ngcontent-%COMP%]{padding:2px 6px 2px 3px;border-radius:50%;line-height:18px;font-size:12px;margin-bottom:15px;text-align:center}.countTotal[_ngcontent-%COMP%]{float:right;background:#f44336;color:#eee}.footer-btn-go-lista[_ngcontent-%COMP%]{position:fixed;bottom:-15px;width:100%;text-align:center;background:#e0e0e0;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.footer-btn-go-lista[_ngcontent-%COMP%], .footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;width:85%;font-size:14px;border-radius:5px 5px 0 0;padding:10px;font-weight:100;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.fondo-gris[_ngcontent-%COMP%]{background:#eee} .header-less-tabs.mat-tab-group .mat-tab-header{display:none}"]}),_o);function To(e,i){if(1&e&&(m.Rb(0,"div",7),m.Gc(1),m.ec(2,"number"),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.Ic(" ",m.gc(2,1,t.countTotalItems,"2."),"")}}function Oo(e,i){if(1&e&&(m.Rb(0,"span"),m.Gc(1,"Mi Pedido"),m.Qb(),m.Ec(2,To,3,4,"div",6)),2&e){var t=m.dc();m.zb(2),m.lc("ngIf",t.countTotalItems>0)}}var Qo,Do,zo,Eo=function(e,i){return{fadeInTool:e,fadeOutTool:i}},Fo=((Do=function(){function e(i,t){_classCallCheck(this,e),this.miPedidoService=i,this.router=t,this.isVisibleToolBar=!0,this.countTotalItems=0,this.lastValScrollTop=0,t.events.pipe(Object(x.a)((function(e){return e instanceof ui.b}))).subscribe((function(e){console.log("navigation",e)}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.miPedidoService.countItemsObserve$.subscribe((function(i){e.countTotalItems=i}))}},{key:"onScroll",value:function(e){var i=this,t=e.srcElement.scrollTop;this.isVisibleToolBar=!(t>=this.lastValScrollTop&&t>54),setTimeout((function(){i.lastValScrollTop=t}),100)}},{key:"addLink",value:function(e){this.router.navigate(["../../",{id:e}])}}]),e}()).\u0275fac=function(e){return new(e||Do)(m.Lb(s.a),m.Lb(ui.d))},Do.\u0275cmp=m.Fb({type:Do,selectors:[["app-inicio"]],decls:14,vars:4,consts:[[1,"h-100","overflow-hidden"],[1,"toolbar-main",3,"ngClass"],["backgroundColor","primary","color","accent",1,"main-contemt","transicion"],["label","Carta"],[1,"x100-toolbar-hidden",3,"scroll"],["matTabLabel",""],["class","countItem countTotal animated fadeInUp",4,"ngIf"],[1,"countItem","countTotal","animated","fadeInUp"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Rb(1,"div",1),m.Mb(2,"app-tool-bar"),m.Qb(),m.Rb(3,"div"),m.Rb(4,"mat-tab-group",2),m.Rb(5,"mat-tab",3),m.Rb(6,"div",4),m.Zb("scroll",(function(e){return i.onScroll(e)})),m.Mb(7,"app-carta"),m.Mb(8,"br"),m.Qb(),m.Qb(),m.Rb(9,"mat-tab"),m.Ec(10,Oo,3,1,"ng-template",5),m.Rb(11,"div",4),m.Zb("scroll",(function(e){return i.onScroll(e)})),m.Mb(12,"app-resumen-pedido"),m.Mb(13,"br"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()),2&e&&(m.zb(1),m.lc("ngClass",m.rc(1,Eo,i.isVisibleToolBar,!i.isVisibleToolBar)))},directives:[o.q,pe,fe.c,fe.a,Kt,fe.d,st,o.t],pipes:[o.g],styles:[".main-contemt[_ngcontent-%COMP%]{overflow:hidden!important}.x100[_ngcontent-%COMP%]{height:100vh;overflow:auto}.toolbar-main[_ngcontent-%COMP%]{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}@keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}.toolbar-main.fadeOutTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeOutTool;animation-name:fadeOutTool}@-webkit-keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}@keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}.toolbar-main.fadeInTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeInTool;animation-name:fadeInTool}.x100-toolbar-visible[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 105px);height:calc(100vh - 105px);overflow:auto}.x100-toolbar-hidden[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 49px);height:calc(100vh - 49px);overflow:auto}.countItem[_ngcontent-%COMP%]{padding:2px 6px 2px 3px;border-radius:50%;line-height:18px;font-size:12px;margin-bottom:15px;text-align:center}.countTotal[_ngcontent-%COMP%]{float:right;background:#f44336;color:#eee}"]}),Do),Lo=((Qo=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Qo)},Qo.\u0275cmp=m.Fb({type:Qo,selectors:[["app-buscar-item"]],decls:2,vars:0,template:function(e,i){1&e&&(m.Rb(0,"p"),m.Gc(1,"buscar-item works!"),m.Qb())},styles:[""]}),Qo),jo=[{path:"",component:Mo,data:{titulo:"Pedido"},children:[{path:"lacarta/:id",component:Kt,data:{titulo:"Carta"}}]}],Go=((zo=function e(){_classCallCheck(this,e)}).\u0275mod=m.Jb({type:zo}),zo.\u0275inj=m.Ib({factory:function(e){return new(e||zo)},imports:[[ui.h.forChild(jo)],ui.h]}),zo),Vo=t("pKmL"),Ao=function(e){return{"li-tachado":e}},Bo=function(e){return{"xanimated xwobble":e}};function qo(e,i){if(1&e){var t=m.Sb();m.Rb(0,"li"),m.Rb(1,"div"),m.Rb(2,"div",2),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc().selectedItemBusq(e)})),m.Rb(3,"div",3),m.Rb(4,"span"),m.Gc(5),m.Qb(),m.Qb(),m.Rb(6,"div",4),m.Rb(7,"div"),m.Rb(8,"div",5),m.Rb(9,"span",6),m.Gc(10,"Stock"),m.Qb(),m.Mb(11,"br"),m.Rb(12,"span",7),m.Gc(13),m.Qb(),m.Qb(),m.Qb(),m.Rb(14,"span"),m.Gc(15),m.ec(16,"number"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.dc();m.zb(1),m.Bb("xcontent border-left-item-",n.getEstadoStockItem(o.cantidad),""),m.zb(1),m.lc("matRippleColor",n.rippleColor)("ngClass",m.qc(15,Ao,"0"===o.cantidad)),m.zb(3),m.Hc(o.des),m.zb(2),m.Bb("flag-stock text-center estado-color-",n.getEstadoStockItem(o.cantidad),""),m.zb(1),m.lc("ngClass",m.qc(17,Bo,0===o.cantidad)),m.zb(5),m.Hc(o.cantidad),m.zb(2),m.Hc(m.gc(16,12,o.precio,"0.2"))}}var No,Ho=((No=function(){function e(i,t,o){_classCallCheck(this,e),this.socketService=i,this.miPedidoService=t,this.dialog=o,this.objCartaBus=[],this.objNewItemTiposConsumo=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"loadItemsBusqueda",value:function(){var e,i=this;this.miPedidoService.getObjCartaLibery().carta.map((function(t){t.secciones.map((function(t){t.items.map((function(o){(e=o).seccion=t.des,e.selected=!1,i.objCartaBus.push(e)}))}))})),this.objNewItemTiposConsumo=this.socketService.getDataTipoConsumo()}},{key:"selectedItemBusq",value:function(e){this.objCartaBus.map((function(e){return e.selected=!1})),e.selected=!0,this.itemSelected=e;var i=JSON.parse(JSON.stringify(this.objNewItemTiposConsumo));this.objItemTipoConsumoSelected=e.itemtiposconsumo?e.itemtiposconsumo:i,e.itemtiposconsumo||(e.itemtiposconsumo=this.objItemTipoConsumoSelected),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),this.openDlgItemBusq(e)}},{key:"openDlgItemBusq",value:function(e){var i=new S.e,t=this.miPedidoService.findItemCarta(e);i.autoFocus=!1,i.data={idTpcItemResumenSelect:null,item:t,objItemTipoConsumoSelected:this.itemSelected.itemtiposconsumo},this.dialog.open(He,i).afterClosed().subscribe((function(e){}))}},{key:"getEstadoStockItem",value:function(e){if("ND"===e)return"verde";var i=parseInt(e,0);return i>10?"verde":i>5?"amarillo":"rojo"}}]),e}()).\u0275fac=function(e){return new(e||No)(m.Lb(l.a),m.Lb(s.a),m.Lb(S.b))},No.\u0275cmp=m.Fb({type:No,selectors:[["app-busqueda"]],decls:7,vars:1,consts:[[1,"xtransicion","m-main-pt-40","color-fondo-ul"],[4,"ngFor","ngForOf"],["matRipple","",1,"m1","d-flex","xtitulo",3,"matRippleColor","ngClass","click"],[1,"w-100"],[1,"text-right","d-flex"],[3,"ngClass"],[1,"fs-9"],[1,"fs-15"]],template:function(e,i){1&e&&(m.Rb(0,"p"),m.Gc(1,"busqueda works!"),m.Qb(),m.Rb(2,"div",0),m.Pb(3),m.Rb(4,"ul"),m.Ec(5,qo,17,19,"li",1),m.Qb(),m.Ob(),m.Qb(),m.Mb(6,"br")),2&e&&(m.zb(5),m.lc("ngForOf",i.objCartaBus))},directives:[o.s,T.n,o.q],pipes:[o.g],styles:["",".m1[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{background:#fff;padding:8px 15px}.m1.seccion[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.border-bottom-li[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.img[_ngcontent-%COMP%]{border:1px solid #bdbdbd;text-align:center;border-radius:50px;width:50px;line-height:10px;padding:8px;float:left;margin-right:10px;max-height:52px}.estado-color-verde[_ngcontent-%COMP%]{background:#43a047;color:#e0e0e0}.estado-color-amarillo[_ngcontent-%COMP%]{background:#ffb300;color:#424242}.estado-color-rojo[_ngcontent-%COMP%]{background:#d81b60;color:#e0e0e0}.trasicion-border[_ngcontent-%COMP%]{-webkit-transition:border-left .3s ease-out;transition:border-left .3s ease-out}.border-left-item-verde[_ngcontent-%COMP%]{border-left:5px solid #43a047}.border-left-item-rojo[_ngcontent-%COMP%]{border-left:5px solid #d81b60}.border-left-item-amarillo[_ngcontent-%COMP%]{border-left:5px solid #ffb300}.m1-selected[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.margin-input[_ngcontent-%COMP%]{margin-bottom:-20px;margin-top:-20px}.color-fondo-ul[_ngcontent-%COMP%]{background:#616161}.li-padding-selected[_ngcontent-%COMP%]{padding:12px}.li-padding-selected[_ngcontent-%COMP%]   .xcontent[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.p-titulo-item-sin-detalle[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.p-titulo-item-select[_ngcontent-%COMP%]{padding:8px 15px}.content-titulo-item[_ngcontent-%COMP%]{font-size:14px}.content-titulo-item[_ngcontent-%COMP%]   .titlo-detalle[_ngcontent-%COMP%]{font-size:13px;font-family:Ubuntu-Light;color:#616161;display:-webkit-box;max-width:100%;max-height:40px;margin:0 auto;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;text-transform:lowercase}.titulo-detalle-seccion[_ngcontent-%COMP%]{width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.li-padding-selected[_ngcontent-%COMP%]   .xtitulo[_ngcontent-%COMP%]{background:#e0e0e0}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock[_ngcontent-%COMP%]{display:inline-block}.tb-tpc[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px dashed #e0e0e0}.btn-tbl[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:5px 15px;font-size:15px}.flag-stock[_ngcontent-%COMP%]{position:absolute;float:right;margin-top:-9px;margin-right:50px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1;display:none}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock-dialog[_ngcontent-%COMP%]{display:inline-block}.li-tachado[_ngcontent-%COMP%]{text-decoration:line-through;color:red}.flag-stock-dialog[_ngcontent-%COMP%]{float:right;margin-top:-9px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1}.mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.m-toolbar-seccion[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:1}.m-main-pt-40[_ngcontent-%COMP%]{padding-top:40px}.titulo-num-mesa[_ngcontent-%COMP%]{background:#757575;color:#000}.subitem-content[_ngcontent-%COMP%]{width:100%;background:#fafad2;padding:5px;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-top:20px;margin-bottom:20px;border-top:1px solid #bdbdbd;border-bottom:1px solid #bdbdbd}.subitem-content[_ngcontent-%COMP%], .subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{padding-right:8px;min-width:150px}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]   .agotado[_ngcontent-%COMP%]{text-decoration:line-through;color:#db7093}.item-titulo[_ngcontent-%COMP%]{color:#424242}.icon-div-carta[_ngcontent-%COMP%]{border:1px solid #bdbdbd}.icon-item-carta[_ngcontent-%COMP%]{height:60px;-o-object-fit:cover;object-fit:cover;-webkit-transition:all .1s;transition:all .1s;width:60px;border-radius:5px}.li-seccion[_ngcontent-%COMP%]{cursor:pointer}"]}),No);function $o(e,i){1&e&&(m.Pb(0),m.Rb(1,"span"),m.Mb(2,"i",4),m.Gc(3,"Enviando ..."),m.Qb(),m.Ob())}function Uo(e,i){1&e&&(m.Rb(0,"span",5),m.Mb(1,"i",6),m.Gc(2,"Envio correcto"),m.Qb())}var Zo,Jo,Wo=((Zo=function(){function e(i){_classCallCheck(this,e),this.dialogRef=i,this.isSusccess=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;setTimeout((function(){e.isSusccess=!0,setTimeout((function(){e.dialogRef.close()}),1500)}),1500)}}]),e}()).\u0275fac=function(e){return new(e||Zo)(m.Lb(S.i))},Zo.\u0275cmp=m.Fb({type:Zo,selectors:[["app-dialog-loading"]],decls:5,vars:2,consts:[[1,"text-center","p-3"],[1,"fw-100","fs-18"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"fa","fa-spinner","fa-spin","fa-2x","fa-fw","pr-1"],[1,"animated","fadeInLeft"],["aria-hidden","true",1,"fa","fa-check","text-success","pr-1"]],template:function(e,i){if(1&e&&(m.Rb(0,"div",0),m.Rb(1,"div",1),m.Ec(2,$o,4,0,"ng-container",2),m.Ec(3,Uo,3,0,"ng-template",null,3,m.Fc),m.Qb(),m.Qb()),2&e){var t=m.uc(4);m.zb(2),m.lc("ngIf",!i.isSusccess)("ngIfElse",t)}},directives:[o.t],styles:[".img-success[_ngcontent-%COMP%]{width:150px}"]}),Zo),Ko=t("cH1L"),Yo=t("NFeN"),Xo=t("ihCf"),en=t("dNgK"),tn=t("xHqg"),on=t("7EHt"),nn=t("Wp6s"),an=t("QibW"),sn=t("vxfF"),rn=t("XhcP"),cn=t("/1cH"),ln=t("MutI"),dn=t("f0Cb"),un=t("1jcm"),bn=t("Pg/a"),mn=t("N6vS"),pn=t("Ln/Y"),fn=t("RmLz"),hn=t("q3Kh"),gn=t("MWJo"),vn=t("/Qaf"),Cn=t("eIep"),Sn=t("EY2u"),yn=((Jo=function(){function e(i){_classCallCheck(this,e),this.crudService=i}return _createClass(e,[{key:"serchClienteByDni",value:function(e){var i=this;return new ve.Observable((function(t){i.crudService.getConsultaRucDni("dni",e).subscribe((function(e){t.next(e.success?e.data:null)}))}))}}]),e}()).\u0275fac=function(e){return new(e||Jo)(m.Vb(P.a))},Jo.\u0275prov=m.Hb({token:Jo,factory:Jo.\u0275fac,providedIn:"root"}),Jo),kn=["search"];function xn(e,i){1&e&&(m.Rb(0,"div",33),m.Rb(1,"span",34),m.Gc(2," Documento no encontrado "),m.Qb(),m.Qb())}function _n(e,i){1&e&&(m.Rb(0,"mat-form-field",16),m.Mb(1,"input",35),m.Qb())}function Rn(e,i){if(1&e&&(m.Rb(0,"mat-option",41),m.Rb(1,"span",42),m.Gc(2),m.Qb(),m.Qb()),2&e){var t=i.$implicit;m.lc("value",t),m.zb(2),m.Ic(" ",t.nombres," ")}}function Pn(e,i){if(1&e){var t=m.Sb();m.Rb(0,"mat-form-field",16),m.Rb(1,"input",36,37),m.Zb("keyup",(function(){m.xc(t);var e=m.uc(2);return m.dc().setNombreControl(e.value)})),m.Qb(),m.Rb(3,"mat-autocomplete",38,39),m.Zb("optionSelected",(function(e){return m.xc(t),m.dc().changeCliente(e)})),m.Ec(5,Rn,3,2,"mat-option",40),m.ec(6,"async"),m.Qb(),m.Qb()}if(2&e){var o=m.uc(4),n=m.dc();m.zb(1),m.lc("formControl",n.myControl)("matAutocomplete",o),m.zb(2),m.lc("displayWith",n.displayFn),m.zb(2),m.lc("ngForOf",m.fc(6,4,n.filteredOptions))}}function wn(e,i){if(1&e&&(m.Rb(0,"mat-form-field",16),m.Mb(1,"input",43),m.Qb()),2&e){var t=m.dc();m.zb(1),m.lc("required",!t.isRecojoLocalCheked)}}function In(e,i){if(1&e&&(m.Rb(0,"span",50),m.Gc(1),m.Qb()),2&e){var t=m.dc(3);m.zb(1),m.Ic(" ",t.dirEstablecimiento.distancia_km," km ")}}var Mn=function(e){return{"text-danger":e}};function Tn(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",45),m.Zb("click",(function(){return m.xc(t),m.dc(2).openDialogDireccion()})),m.Rb(1,"div"),m.Rb(2,"span",46),m.Gc(3,"Direccion de entrega:"),m.Qb(),m.Rb(4,"p",47),m.Rb(5,"strong",48),m.Gc(6),m.Qb(),m.Ec(7,In,2,1,"span",49),m.Mb(8,"br"),m.Gc(9),m.Qb(),m.Qb(),m.Rb(10,"div"),m.Mb(11,"i",28),m.Qb(),m.Qb()}if(2&e){var o=m.dc(2);m.lc("matRippleColor",o.rippleColor),m.zb(5),m.lc("ngClass",m.qc(5,Mn,""===o.direccionCliente.direccion)),m.zb(1),m.Hc(o.direccionCliente.titulo),m.zb(1),m.lc("ngIf",""!=o.direccionCliente.direccion),m.zb(2),m.Ic(" ",o.direccionCliente.direccion," ")}}function On(e,i){if(1&e&&(m.Pb(0),m.Ec(1,Tn,12,7,"div",44),m.Ob()),2&e){var t=m.dc();m.zb(1),m.lc("ngIf",!t.isRecojoLocalCheked)}}function Qn(e,i){if(1&e){var t=m.Sb();m.Rb(0,"mat-form-field",16),m.Rb(1,"input",51,52),m.Zb("keyup",(function(){m.xc(t);var e=m.uc(2);return m.dc().setTextDirClienteNoMapa(e.value)})),m.Qb(),m.Qb(),m.Mb(3,"span")}if(2&e){var o=m.dc();m.zb(1),m.lc("required",!o.isShowAddDireccionMapa)}}function Dn(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",53),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogMetodoPago()})),m.Rb(1,"p",47),m.Gc(2,"Metodo de pago: "),m.Rb(3,"strong"),m.Gc(4),m.Qb(),m.Qb(),m.Mb(5,"i",28),m.Qb()}if(2&e){var o=m.dc();m.lc("matRippleColor",o.rippleColor),m.zb(4),m.Hc(o.metodoPagoSelected.descripcion)}}function zn(e,i){if(1&e&&(m.Rb(0,"li",54),m.Rb(1,"div",55),m.Gc(2),m.ec(3,"titlecase"),m.Qb(),m.Rb(4,"div",56),m.Gc(5),m.ec(6,"number"),m.Qb(),m.Qb()),2&e){var t=i.$implicit,o=m.dc();m.lc("matRippleColor",o.rippleColor),m.zb(2),m.Hc(m.fc(3,3,t.descripcion)),m.zb(3),m.Hc(m.gc(6,5,t.importe,"0.2"))}}var En,Fn=function(e){return{"fw-600":e}},Ln=((En=function(){function e(i,t,o,a,s,r,c,l,d,u,b){_classCallCheck(this,e),this.fb=i,this.crudService=t,this.dialogDireccion=o,this.infoTokenService=a,this.miPedidoService=s,this.dialog=r,this.establecimientoService=c,this.calcDistanceService=l,this.dialogTipoComprobante=d,this.utilService=u,this.clienteService=b,this.changeStatus=new m.n,this.isDataFromDNI=!1,this.errorDni=!1,this.isValid=!1,this.loadConsulta=!1,this.isNuevoCliente=!1,this.direccionCliente={},this.isRecojoLocalCheked=!1,this.isAceptaRecojoLocal=!0,this.dataListClientes=[],this.myControl=new n.f,this.rippleColor="rgb(255,238,88, 0.3)",this.resData={idcliente:"",dni:"",nombre:"",f_nac:"",direccion:"",telefono:"",paga_con:"",dato_adicional:"",referencia:"",tipoComprobante:{},importeTotal:0,metodoPago:{},propina:{},direccionEnvioSelected:{},establecimiento:{},subTotales:{},pasoRecoger:!1,buscarRepartidor:!0,isFromComercio:1,costoTotalDelivery:0,tiempoEntregaProgamado:{},num_verificador:"",solicitaCubiertos:0},this.importeTota=0,this.isShowAddDireccionMapa=!0,this.isCubierto=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.direccionCliente={titulo:"Seleccione una direccion *",direccion:"",referencia:""},this.tiempoEntregaSelected=new gn.a,this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.infoTokenService.setIniMetodoPago("Efectivo"),this.metodoPagoSelected=this.infoTokenService.infoUsToken.metodoPago,this.dirEstablecimiento=this.establecimientoService.get(),this.isAceptaRecojoLocal=1===this.establecimientoService.establecimiento.pwa_delivery_habilitar_recojo_local,this.myForm=this.fb.group({idcliente:new n.f(""),dni:new n.f(""),nombre:new n.f("",[n.D.required]),f_nac:new n.f(""),telefono:new n.f(""),dato_adicional:new n.f(""),num_verificador:new n.f("")}),this.myForm.statusChanges.subscribe((function(i){e.isValid="VALID"===i,e.setearData()})),this.infoEstablecimiento=this.establecimientoService.get(),this.isShowAddDireccionMapa=1===this.infoEstablecimiento.pwa_habilitar_busqueda_mapa,this.filteredOptions=this.myControl.valueChanges.pipe(Object(fn.startWith)(""),Object(Cn.a)((function(i){return e._filter(i)})),Object(hn.map)((function(i){return e.dataListClientes=i})))}},{key:"setTextDirClienteNoMapa",value:function(e){this.direccionCliente.direccion=this.utilService.addslashes(e),this.setearData()}},{key:"setearData",value:function(){this.isValid="VALID"===this.myForm.status,this.resData.idcliente=this.myForm.controls.idcliente.value||null,this.resData.dni=this.myForm.controls.dni.value,this.resData.nombre=this.myForm.controls.nombre.value,this.resData.f_nac=this.myForm.controls.f_nac.value,this.resData.num_verificador=this.myForm.controls.num_verificador.value,this.resData.telefono=this.myForm.controls.telefono.value,this.resData.importeTotal=this.getTotalPedido(),this.resData.paga_con=this.metodoPagoSelected.descripcion+"  "+this.metodoPagoSelected.importe||"",this.resData.dato_adicional=this.myForm.controls.dato_adicional.value,this.resData.metodoPago=this.metodoPagoSelected,this.resData.tipoComprobante=this.infoTokenService.getInfoUs().tipoComprobante,this.resData.direccionEnvioSelected=this.direccionCliente,this.resData.tiempoEntregaProgamado=this.tiempoEntregaSelected,this.resData.establecimiento=this.infoEstablecimiento,this.resData.referencia=""===this.direccionCliente.referencia?this.resData.nombre:this.utilService.addslashes(this.direccionCliente.referencia),this.resData.direccion=this.direccionCliente.direccion,this.resData.subTotales=this._listSubtotales,this.resData.propina=this.infoTokenService.getInfoUs().propina,this.resData.pasoRecoger=this.isRecojoLocalCheked,this.resData.buscarRepartidor=0===this.establecimientoService.establecimiento.pwa_delivery_servicio_propio,this.resData.costoTotalDelivery=this.infoEstablecimiento.c_servicio,this.resData.solicitaCubiertos=this.isCubierto?1:0,this.isShowAddDireccionMapa&&(this.direccionCliente.ciudad||this.isRecojoLocalCheked||(this.isValid=!1)),this.changeStatus.emit({formIsValid:this.isValid,isNuevoCliente:this.isNuevoCliente,formData:this.resData,direccionMapsSave:this.direccionCliente})}},{key:"buscarDNI",value:function(){var e=this;if(this.errorDni=!1,this.myForm.controls.dni.value.length<8)this.errorDni=!0;else{var i={documento:this.myForm.controls.dni.value};this.loadConsulta=!0,this.isNuevoCliente=!1,this.limpiarForm(i.documento),this.isDataFromDNI=!0,this.crudService.postFree(i,"service","consulta-dni-ruc",!0).subscribe((function(t){var o=t.data;t.success&&o.length>0?(e.myForm.controls.idcliente.patchValue(o[0].idcliente),e.myForm.controls.nombre.patchValue(o[0].nombres),e.myForm.controls.f_nac.patchValue(o[0].f_nac),e.myForm.controls.num_verificador.patchValue(""),e.myControl.patchValue(o[0].nombres),e.myForm.controls.telefono.patchValue(o[0].telefono),e.loadConsulta=!1,e.isNuevoCliente=!1,e.errorDni=!1,null==o[0].dni_num_verificador&&e.clienteService.serchClienteByDni(i.documento).subscribe((function(i){e.myForm.controls.f_nac.patchValue(i.date_of_birthday),e.myForm.controls.num_verificador.patchValue(i.verification_code)}))):e.crudService.getConsultaRucDni("dni",i.documento).subscribe((function(t){if(t.success){var o=t.data,n="".concat(o.name," ").concat(o.first_name," ").concat(o.last_name);e.myForm.controls.idcliente.patchValue(0),e.myForm.controls.nombre.patchValue(n),e.myForm.controls.f_nac.patchValue(o.date_of_birthday),e.myForm.controls.num_verificador.patchValue(o.verification_code),e.isNuevoCliente=!0,e.errorDni=!1}else e.limpiarForm(i.documento),e.isDataFromDNI=!1,e.errorDni=!0;e.loadConsulta=!1,e.resData.idcliente="0"}))}))}}},{key:"limpiarForm",value:function(e){this.myForm.reset(),this.myForm.controls.dni.patchValue(e)}},{key:"openDialogDireccion",value:function(){var e=this;this.resData.idcliente=""!==this.resData.idcliente?this.resData.idcliente:this.clienteSelectBusqueda?this.clienteSelectBusqueda.idcliente:"";var i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0,idClienteBuscar:this.resData.idcliente},this.dialogDireccion.open(mn.a,i).afterClosed().subscribe((function(i){if(i){e.direccionCliente=i,e.direccionCliente.idcliente_pwa_direccion=null===e.direccionCliente.idcliente_pwa_direccion?0:e.direccionCliente.idcliente_pwa_direccion;var t=e.calcDistanceService.calculateRoute(i,e.dirEstablecimiento,!1);setTimeout((function(){t=e.dirEstablecimiento.c_servicio,e.establecimientoService.set(e.dirEstablecimiento),e.infoEstablecimiento.c_servicio=t,e.resData.costoTotalDelivery=t;var i=e.miPedidoService.getArrSubTotales(e.dirEstablecimiento.rulesSubTotales);localStorage.setItem("sys::st",btoa(JSON.stringify(i))),e._listSubtotales=i,e.setearData()}),800)}}))}},{key:"recalcularTotales",value:function(){if(this.isRecojoLocalCheked){this._listSubtotalesTmp=JSON.parse(JSON.stringify(this._listSubtotales));var e=this._listSubtotales[this._listSubtotales.length-1];this._listSubtotales=this._listSubtotales.filter((function(e){return e.id>=0&&"TOTAL"!==e.descripcion}));var i=this._listSubtotales.map((function(e){return parseFloat(e.importe)})).reduce((function(e,i){return e+i}),0);e.importe=i,this._listSubtotales.push(e),this.myForm.controls.telefono.setValidators(null)}else this.myForm.controls.telefono.setValidators([n.D.required]),this._listSubtotales=this._listSubtotalesTmp;localStorage.setItem("sys::st",btoa(JSON.stringify(this._listSubtotales))),this.infoTokenService.setPasoRecoger(this.isRecojoLocalCheked),this.setearData()}},{key:"openDialogMetodoPago",value:function(){var e=this,i=new S.e;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={importeTotalPagar:this._listSubtotales[this._listSubtotales.length-1].importe,excluirId:2},this.dialog.open(pn.a,i).afterClosed().subscribe((function(i){e.metodoPagoSelected=i,e.setearData()}))}},{key:"getTotalPedido",value:function(){return this._listSubtotales[this._listSubtotales.length-1].importe}},{key:"_filter",value:function(e){return this.isDataFromDNI||e.length<5?Sn.a:"object"==typeof e?(this.selectedClienteBusqueda(e),Sn.a):(this.limpiarForm(""),this.establecimientoService.getClienteAutocomplete(e))}},{key:"changeCliente",value:function(e){}},{key:"displayFn",value:function(e){return e?e.nombres:""}},{key:"selectedClienteBusqueda",value:function(e){this.clienteSelectBusqueda=e,this.myForm.controls.idcliente.patchValue(e.idcliente),this.myForm.controls.nombre.patchValue(e.nombres),this.myForm.controls.dni.patchValue(e.ruc),this.myForm.controls.telefono.patchValue(e.telefono)}},{key:"setNombreControl",value:function(e){this.myForm.controls.nombre.patchValue(e)}},{key:"openDialogTiempoEntrega",value:function(){var e=this,i=new S.e;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTipoComprobante.open(vn.a,i).afterClosed().subscribe((function(i){i&&(e.tiempoEntregaSelected=i,e.setearData())}))}},{key:"listSubtotales",set:function(e){this._listSubtotales=e}}]),e}()).\u0275fac=function(e){return new(e||En)(m.Lb(n.e),m.Lb(P.a),m.Lb(S.b),m.Lb(b.a),m.Lb(s.a),m.Lb(S.b),m.Lb(u.a),m.Lb(Ue.a),m.Lb(S.b),m.Lb(_.a),m.Lb(yn))},En.\u0275cmp=m.Fb({type:En,selectors:[["app-datos-delivery"]],viewQuery:function(e,i){var t;1&e&&m.Mc(kn,!0),2&e&&m.tc(t=m.ac())&&(i.searchElementRef=t.first)},inputs:{listSubtotales:"listSubtotales"},outputs:{changeStatus:"changeStatus"},decls:52,vars:21,consts:[[1,"text-center"],[1,"fw-100","fs-20"],[1,"border-bottom","m-0"],[1,"d-flex","justify-content-between","p-2",2,"background","beige"],[1,"text-left"],[1,"fw-600","fs-14"],[1,"fa","fa-cutlery"],[1,"fw-100","fs-12","text-secondary","p-0","m-0"],["name","isCubierto",3,"ngModel","ngModelChange"],["matRipple","",1,"border-bottom","m-0","text-left",3,"hidden"],["labelPosition","before",3,"ngModel","ngModelChange","change"],["aria-hidden","true",1,"fa","fa-home","pr-2"],[1,"mr-1",3,"ngClass"],[3,"formGroup"],[1,"w-100","pt-2"],[1,"text-info","fs-11"],[1,"w-100"],["matInput","","placeholder","DNI","type","text","formControlName","dni",3,"keyup.enter"],["mat-icon-button","","matSuffix","",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["class","text-left span-input-alert",4,"ngIf"],["mode","indeterminate",2,"bottom","20px",3,"hidden"],["class","w-100",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplateNoMapa",""],["matRipple","",1,"border-bottom","m-0","pl-0","pr-2","pt-3","pb-3","d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14"],["aria-hidden","true",1,"fa","fa-caret-down"],["class","border-bottom m-0 pl-0 pr-2 pt-3 pb-4 d-flex justify-content-between","matRipple","",3,"matRippleColor","click",4,"ngIf"],[1,"div-total","border-0","w-100"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],[1,"text-left","span-input-alert"],[1,"fw-100","text-danger","fs-11"],["matInput","","placeholder","Nombre y apellidos","formControlName","nombre","readonly",""],["type","text","placeholder","Nombre y apellidos del cliente","aria-label","Cliene","matInput","",3,"formControl","matAutocomplete","keyup"],["valNom",""],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"fs-12"],["matInput","","placeholder","Telefono","formControlName","telefono",3,"required"],["class","border-bottom m-0 pl-0 pr-2 pt-3 pb-3 text-left d-flex justify-content-between align-items-center","matRipple","",3,"matRippleColor","click",4,"ngIf"],["matRipple","",1,"border-bottom","m-0","pl-0","pr-2","pt-3","pb-3","text-left","d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"fw-100","fs-12","text-secondary"],[1,"m-0","fs-14"],[3,"ngClass"],["class","fw-100 text-info pl-2",4,"ngIf"],[1,"fw-100","text-info","pl-2"],["matInput","","placeholder","Direccion",3,"required","keyup"],["text_dir_solo",""],["matRipple","",1,"border-bottom","m-0","pl-0","pr-2","pt-3","pb-4","d-flex","justify-content-between",3,"matRippleColor","click"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"],[1,"w-100","text-left"],[1,"text-right"]],template:function(e,i){if(1&e&&(m.Rb(0,"div"),m.Rb(1,"div",0),m.Rb(2,"p",1),m.Gc(3,"Datos del Delivery"),m.Qb(),m.Qb(),m.Rb(4,"div",2),m.Rb(5,"div",3),m.Rb(6,"div",4),m.Rb(7,"span",5),m.Gc(8,"Cubiertos "),m.Mb(9,"i",6),m.Qb(),m.Rb(10,"p",7),m.Gc(11,"Incluir cubiertos."),m.Qb(),m.Qb(),m.Rb(12,"mat-slide-toggle",8),m.Zb("ngModelChange",(function(e){return i.isCubierto=e})),m.Qb(),m.Qb(),m.Qb(),m.Mb(13,"br"),m.Rb(14,"div",9),m.Rb(15,"mat-checkbox",10),m.Zb("ngModelChange",(function(e){return i.isRecojoLocalCheked=e}))("change",(function(){return i.recalcularTotales()})),m.Mb(16,"i",11),m.Rb(17,"span",12),m.Gc(18,"Cliente pasa a recoger en el Local"),m.Qb(),m.Qb(),m.Qb(),m.Rb(19,"form",13),m.Rb(20,"div",14),m.Rb(21,"div",4),m.Rb(22,"span",15),m.Gc(23,"(Opcional) Ingrese DNI del cliente para llevar un registro. \xd3 busque por el nombre."),m.Qb(),m.Qb(),m.Rb(24,"mat-form-field",16),m.Rb(25,"input",17),m.Zb("keyup.enter",(function(){return i.buscarDNI()})),m.Qb(),m.Rb(26,"button",18),m.Zb("click",(function(){return i.buscarDNI()})),m.Mb(27,"i",19),m.Qb(),m.Qb(),m.Ec(28,xn,3,0,"div",20),m.Rb(29,"div",16),m.Mb(30,"mat-progress-bar",21),m.Qb(),m.Ec(31,_n,2,0,"mat-form-field",22),m.Ec(32,Pn,7,6,"mat-form-field",22),m.Ec(33,wn,2,1,"mat-form-field",22),m.Ec(34,On,2,1,"ng-container",23),m.Ec(35,Qn,4,1,"ng-template",null,24,m.Fc),m.Rb(37,"div",25),m.Zb("click",(function(){return i.openDialogTiempoEntrega()})),m.Rb(38,"div"),m.Rb(39,"p",26),m.Rb(40,"span",27),m.Gc(41),m.Rb(42,"strong"),m.Gc(43),m.ec(44,"titlecase"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(45,"div"),m.Mb(46,"i",28),m.Qb(),m.Qb(),m.Ec(47,Dn,6,2,"div",29),m.Qb(),m.Qb(),m.Rb(48,"div",26),m.Rb(49,"div",30),m.Rb(50,"ul",31),m.Ec(51,zn,7,8,"li",32),m.Qb(),m.Qb(),m.Qb(),m.Qb()),2&e){var t=m.uc(36);m.zb(12),m.lc("ngModel",i.isCubierto),m.zb(2),m.lc("hidden",!i.isAceptaRecojoLocal),m.zb(1),m.lc("ngModel",i.isRecojoLocalCheked),m.zb(2),m.lc("ngClass",m.qc(19,Fn,i.isRecojoLocalCheked)),m.zb(2),m.lc("formGroup",i.myForm),m.zb(9),m.lc("ngIf",!i.loadConsulta&&i.errorDni),m.zb(2),m.lc("hidden",!i.loadConsulta),m.zb(1),m.lc("ngIf",i.isDataFromDNI),m.zb(1),m.lc("ngIf",!i.isDataFromDNI),m.zb(1),m.lc("ngIf",!i.isRecojoLocalCheked),m.zb(1),m.lc("ngIf",i.isShowAddDireccionMapa)("ngIfElse",t),m.zb(3),m.lc("matRippleColor",i.rippleColor),m.zb(4),m.Ic(" ",i.tiempoEntregaSelected.descripcion,": "),m.zb(2),m.Ic("",m.fc(44,17,i.tiempoEntregaSelected.value)," "),m.zb(4),m.lc("ngIf",!i.isRecojoLocalCheked),m.zb(4),m.lc("ngForOf",i._listSubtotales)}},directives:[un.a,n.p,n.s,T.n,w.a,o.q,n.F,n.q,n.i,I.c,ke.a,n.c,n.h,y.b,I.j,o.t,f.a,o.s,cn.d,n.g,cn.a,T.i,n.A],pipes:[o.F,o.b,o.g],styles:[".div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.mat-option[_ngcontent-%COMP%]{height:20px!important}.span-input-alert[_ngcontent-%COMP%]{bottom:20px;position:relative}"]}),En),jn=t("3jVI"),Gn=t("7jE7"),Vn=t("lkOP"),An=t("2dOp"),Bn=t("e9Tq");function qn(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",9),m.Rb(1,"mat-checkbox",10),m.Zb("change",(function(){m.xc(t);var e=i.$implicit;return m.dc().chageItem(e)}))("ngModelChange",(function(e){return m.xc(t),i.$implicit.checked=e})),m.Rb(2,"div",11),m.Rb(3,"span"),m.Gc(4),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit;m.zb(1),m.lc("ngModel",o.checked),m.zb(3),m.Ic("",o.descripcion," ")}}var Nn,Hn=((Nn=function(){function e(i,t,o){_classCallCheck(this,e),this.dialogRef=i,this.infoTokenService=t,this.utilService=o,this.datosComprobante={dni:"",otro:""}}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadTipoComprobante(),this.itemSelected=this.infoTokenService.infoUsToken.tipoComprobante,this.datosComprobante.dni=this.itemSelected.dni,this.datosComprobante.otro=this.itemSelected.otro_dato,this.verificarComprobanteInit()}},{key:"loadTipoComprobante",value:function(){this.listTipoComprobante=[],this.listTipoComprobante.push({idtipo_comprobante:1,descripcion:"Boleta",checked:!0}),this.listTipoComprobante.push({idtipo_comprobante:2,descripcion:"Factura",checked:!1})}},{key:"verificarComprobanteInit",value:function(){var e=this;this.listTipoComprobante.map((function(i){i.checked=i.idtipo_comprobante===e.itemSelected.idtipo_comprobante}))}},{key:"chageItem",value:function(e){this.listTipoComprobante.map((function(e){return e.checked=!1})),e.checked=!0,this.itemSelected=e}},{key:"cerrarDlg",value:function(){this.itemSelected.dni=this.datosComprobante.dni,this.itemSelected.otro_dato=this.utilService.addslashes(this.datosComprobante.otro),this.infoTokenService.setTipoComprobante(this.itemSelected),this.dialogRef.close(this.itemSelected)}}]),e}()).\u0275fac=function(e){return new(e||Nn)(m.Lb(S.i),m.Lb(b.a),m.Lb(_.a))},Nn.\u0275cmp=m.Fb({type:Nn,selectors:[["app-dialog-tipo-comprobante"]],decls:16,vars:3,consts:[[1,"p-4"],[1,"fs-18","fw-600"],["class","xoption w-100","matRipple","",4,"ngFor","ngForOf"],[1,"w-100"],["type","number","matInput","","placeholder","DNI / RUC",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Indicacion adicional",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"fs-12","fw-100","text-info"],["mat-flat-button","","color","primary",3,"click"],["matRipple","",1,"xoption","w-100"],[1,"w-100",3,"ngModel","change","ngModelChange"],[1,"w-100","d-flex"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Rb(1,"p",1),m.Gc(2,"Tipo de Comprobante"),m.Qb(),m.Mb(3,"hr"),m.Ec(4,qn,5,2,"div",2),m.Pb(5),m.Rb(6,"mat-form-field",3),m.Rb(7,"input",4),m.Zb("ngModelChange",(function(e){return i.datosComprobante.dni=e})),m.Qb(),m.Qb(),m.Rb(8,"mat-form-field",3),m.Rb(9,"input",5),m.Zb("ngModelChange",(function(e){return i.datosComprobante.otro=e})),m.Qb(),m.Qb(),m.Ob(),m.Rb(10,"div",6),m.Rb(11,"span",7),m.Gc(12,"Verifique que los datos sean correctos."),m.Qb(),m.Mb(13,"br"),m.Rb(14,"button",8),m.Zb("click",(function(){return i.cerrarDlg()})),m.Gc(15,"Listo"),m.Qb(),m.Qb(),m.Qb()),2&e&&(m.zb(4),m.lc("ngForOf",i.listTipoComprobante),m.zb(3),m.lc("ngModel",i.datosComprobante.dni),m.zb(2),m.lc("ngModel",i.datosComprobante.otro))},directives:[o.s,I.c,n.v,ke.a,n.c,n.p,n.s,y.b,T.n,w.a],styles:[""]}),Nn),$n=t("+OL8");function Un(e,i){1&e&&(m.Rb(0,"p",5),m.Gc(1,"Indique su Nombre."),m.Qb())}var Zn,Jn=function(e){return{"text-nom-cliente":e}},Wn=((Zn=function(){function e(i){_classCallCheck(this,e),this.infoTokenService=i,this.isNombreValid=new m.n,this.isValidNombre=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.infoCliente=this.infoTokenService.getInfoUs(),this.nombreCliente=this.infoCliente.nombres,this.saveNomCliente(this.nombreCliente)}},{key:"saveNomCliente",value:function(e){e=e.toLocaleLowerCase().indexOf("invitado")>-1?"":e,this.infoTokenService.setNombres(e),this.infoCliente=this.infoTokenService.getInfoUs(),this.nombreCliente=this.infoCliente.nombres,this.isValidNombre=""!==this.nombreCliente,this.isNombreValid.emit(this.isValidNombre)}}]),e}()).\u0275fac=function(e){return new(e||Zn)(m.Lb(b.a))},Zn.\u0275cmp=m.Fb({type:Zn,selectors:[["app-text-nom-cliente"]],inputs:{sizeTextBg:"sizeTextBg"},outputs:{isNombreValid:"isNombreValid"},decls:5,vars:5,consts:[[1,"div-text-nombre"],["class","text-danger fw-600",4,"ngIf"],[1,"w-100"],["autocomplete","off","matInput","","placeholder","Nombre","name","nombreCliente",3,"ngClass","ngModel","ngModelChange","keyup"],["nomCliente",""],[1,"text-danger","fw-600"]],template:function(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",0),m.Ec(1,Un,2,0,"p",1),m.Rb(2,"mat-form-field",2),m.Rb(3,"input",3,4),m.Zb("ngModelChange",(function(e){return i.nombreCliente=e}))("keyup",(function(){m.xc(t);var e=m.uc(4);return i.saveNomCliente(e.value)})),m.Qb(),m.Qb(),m.Qb()}2&e&&(m.zb(1),m.lc("ngIf",!i.isValidNombre),m.zb(2),m.lc("ngClass",m.qc(3,Jn,i.sizeTextBg))("ngModel",i.nombreCliente))},directives:[o.t,I.c,ke.a,n.c,o.q,n.p,n.s],styles:[".text-nom-cliente[_ngcontent-%COMP%]{font-size:20px;text-align:center}.div-text-nombre[_ngcontent-%COMP%]{background:#cce8ff;border-radius:5px;padding:10px}"]}),Zn),Kn=function(e){return{"propina-selected":e}};function Yn(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",2),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc().itemCheck(e)})),m.Gc(1),m.Qb()}if(2&e){var o=i.$implicit;m.lc("ngClass",m.qc(2,Kn,o.checked)),m.zb(1),m.Hc(o.descripcion)}}var Xn,ea=((Xn=function(){function e(i,t){_classCallCheck(this,e),this.infoTokenService=i,this.establecimientoService=t,this.selectedPropina=new m.n}return _createClass(e,[{key:"ngOnInit",value:function(){this.propinaSelected=this.infoTokenService.infoUsToken.propina,this.simbolo_moneda=this.establecimientoService.getSimboloMoneda(),this.loadPropina()}},{key:"loadPropina",value:function(){this.listPropina=[],this.listPropina.push({idpropina:1,value:0,descripcion:this.simbolo_moneda+" 0",checked:!0}),this.listPropina.push({idpropina:2,value:1,descripcion:this.simbolo_moneda+" 1",checked:!1}),this.listPropina.push({idpropina:3,value:2,descripcion:this.simbolo_moneda+" 2",checked:!1}),this.listPropina.push({idpropina:4,value:3,descripcion:this.simbolo_moneda+" 3",checked:!1}),this.listPropina.push({idpropina:5,value:5,descripcion:this.simbolo_moneda+" 5",checked:!1}),this.selectedPropina.emit(this.propinaSelected)}},{key:"itemCheck",value:function(e){this.listPropina.map((function(e){return e.checked=!1})),e.checked=!0,this.propinaSelected=e,this.infoTokenService.setPropina(e);var i=this._listSubtotales[this._listSubtotales.length-1],t=this._listSubtotales.filter((function(e){return-3===e.id}))[0];t?(t.importe=parseFloat(e.value.toString()).toFixed(2),i.importe=this.getTotalSubtotales()):((t={}).id=-3,t.descripcion="Propina",t.esImpuesto=0,t.visible=!1,t.quitar=!1,t.tachado=!1,t.visible_cpe=!1,t.importe=parseFloat(e.value.toString()).toFixed(2),this._listSubtotales.pop(),this._listSubtotales.push(t),i.importe=this.getTotalSubtotales(),this._listSubtotales.push(i)),localStorage.setItem("sys::st",btoa(JSON.stringify(this._listSubtotales))),this.infoTokenService.setPropina(e),this.selectedPropina.emit(e)}},{key:"getTotalSubtotales",value:function(){return this._listSubtotales.filter((function(e){return"TOTAL"!==e.descripcion})).map((function(e){return parseFloat(e.importe)})).reduce((function(e,i){return e+i}),0)}},{key:"listSubtotales",set:function(e){this._listSubtotales=e}}]),e}()).\u0275fac=function(e){return new(e||Xn)(m.Lb(b.a),m.Lb(u.a))},Xn.\u0275cmp=m.Fb({type:Xn,selectors:[["app-comp-propina-delivery"]],inputs:{listSubtotales:"listSubtotales"},outputs:{selectedPropina:"selectedPropina"},decls:2,vars:1,consts:[[1,"d-flex","content-propina"],["matRipple","","class","item-propina",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-propina",3,"ngClass","click"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Ec(1,Yn,2,4,"div",1),m.Qb()),2&e&&(m.zb(1),m.lc("ngForOf",i.listPropina))},directives:[o.s,T.n,o.q],styles:[".item-propina[_ngcontent-%COMP%]{padding:5px;border:1px solid;border-radius:5px;font-size:12px;background-color:#fff;margin-left:5px}.propina-selected[_ngcontent-%COMP%]{background-color:#000;color:#fff}"]}),Xn);function ia(e,i){1&e&&(m.Pb(0),m.Rb(1,"div",30),m.Rb(2,"div",31),m.Mb(3,"i",32),m.Rb(4,"span",33),m.Gc(5,"Comercio cuenta con su propio reparto."),m.Qb(),m.Qb(),m.Qb(),m.Ob())}function ta(e,i){1&e&&(m.Pb(0),m.Rb(1,"p",10),m.Gc(2,"El comercio incluir\xe1 cubierto en tu pedido."),m.Qb(),m.Ob())}function oa(e,i){1&e&&(m.Rb(0,"p",10),m.Gc(1,"Ay\xfadanos a reducir el desperdicio de pl\xe1stico. Solicita cubiertos solo cuando lo necesites."),m.Qb())}function na(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",30),m.Rb(1,"div",17),m.Rb(2,"div"),m.Rb(3,"span",34),m.Gc(4,"Cubiertos "),m.Mb(5,"i",35),m.Qb(),m.Ec(6,ta,3,0,"ng-container",36),m.Ec(7,oa,2,0,"ng-template",null,37,m.Fc),m.Qb(),m.Rb(9,"mat-slide-toggle",38),m.Zb("ngModelChange",(function(e){return m.xc(t),m.dc().isCubierto=e})),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.uc(8),n=m.dc();m.zb(6),m.lc("ngIf",n.isCubierto)("ngIfElse",o),m.zb(3),m.lc("ngModel",n.isCubierto)}}function aa(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",39),m.Rb(1,"app-text-nom-cliente",40),m.Zb("isNombreValid",(function(e){m.xc(t);var i=m.dc();return i.nombreClienteValido=e,i.verificarFormValid()})),m.Qb(),m.Qb()}if(2&e){var o=m.dc();m.lc("matRippleColor",o.rippleColor),m.zb(1),m.lc("sizeTextBg",!1)}}function sa(e,i){if(1&e&&(m.Rb(0,"span",44),m.Gc(1),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.Ic(" ",t.dirEstablecimiento.distancia_km," km ")}}function ra(e,i){if(1&e&&(m.Rb(0,"p",45),m.Gc(1),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.Ic(" ",t.msjErrorDir," ")}}var ca=function(e){return{"text-danger":e}};function la(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",9),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogDireccion()})),m.Rb(1,"div"),m.Rb(2,"span",10),m.Gc(3,"Direccion de entrega:"),m.Qb(),m.Rb(4,"p",19),m.Rb(5,"strong",41),m.Gc(6),m.Qb(),m.Ec(7,sa,2,1,"span",42),m.Mb(8,"br"),m.Gc(9),m.Qb(),m.Ec(10,ra,2,1,"p",43),m.Qb(),m.Rb(11,"div"),m.Rb(12,"button",14),m.Rb(13,"span",15),m.Gc(14,"Cambiar"),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc();m.lc("matRippleColor",o.rippleColor),m.zb(5),m.lc("ngClass",m.qc(6,ca,""===o.direccionCliente.direccion)),m.zb(1),m.Hc(o.direccionCliente.titulo),m.zb(1),m.lc("ngIf",""!=o.direccionCliente.direccion),m.zb(2),m.Ic(" ",o.direccionCliente.direccion," "),m.zb(1),m.lc("ngIf",o.msjErrorDir.length>0)}}function da(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",46),m.Rb(1,"span",19),m.Gc(2,"Propina: "),m.Rb(3,"i",47,48),m.Zb("click",(function(){return m.xc(t),m.uc(4).toggle()})),m.Qb(),m.Qb(),m.Rb(5,"app-comp-propina-delivery",49),m.Zb("selectedPropina",(function(e){return m.xc(t),m.dc().selectedPropinaRepartidor(e)})),m.Qb(),m.Qb()}if(2&e){var o=m.dc();m.zb(5),m.lc("listSubtotales",o._listSubtotales)}}function ua(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",50),m.Rb(1,"span",51),m.Gc(2,"Importante: especifique persona o datos de contacto."),m.Qb(),m.Rb(3,"mat-form-field",52),m.Rb(4,"input",53),m.Zb("ngModelChange",(function(e){return m.xc(t),m.dc().valInputDatoAdicianal=e})),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=m.dc();m.zb(4),m.lc("placeholder",o.titleInputDatoAdicional)("required",o.isComercioSolidaridad)("ngModel",o.valInputDatoAdicianal)}}function ba(e,i){if(1&e&&m.Mb(0,"img",61),2&e){var t=m.dc().$implicit;m.nc("src","../assets/images/",t.icon,"",m.yc),m.mc("matTooltip",t.motivo)}}function ma(e,i){if(1&e&&(m.Rb(0,"div",59),m.Ec(1,ba,1,2,"img",60),m.Qb()),2&e){var t=i.$implicit;m.zb(1),m.lc("ngIf",t.visible)}}function pa(e,i){1&e&&m.Mb(0,"i",62)}function fa(e,i){if(1&e&&(m.Pb(0,56),m.Ec(1,ma,2,1,"div",57),m.Ec(2,pa,1,0,"i",58),m.Ob()),2&e){var t=m.dc(2);m.zb(1),m.lc("ngForOf",t.listIconsEntrega),m.zb(1),m.lc("ngIf",t.isCalculandoDistanciaA)}}function ha(e,i){if(1&e&&(m.Rb(0,"li",54),m.Rb(1,"div",52),m.Gc(2),m.ec(3,"titlecase"),m.Ec(4,fa,3,2,"ng-container",55),m.Qb(),m.Rb(5,"div"),m.Gc(6),m.ec(7,"number"),m.Qb(),m.Qb()),2&e){var t=i.$implicit,o=m.dc();m.lc("matRippleColor",o.rippleColor),m.zb(2),m.Ic(" ",m.fc(3,4,t.descripcion)," "),m.zb(2),m.lc("ngIf",t.isDeliveryApp),m.zb(2),m.Ic(" ",m.gc(7,6,t.importe,"0.2"),"")}}function ga(e,i){if(1&e&&(m.Rb(0,"span"),m.Gc(1),m.ec(2,"number"),m.Qb()),2&e){var t=m.dc();m.zb(1),m.Ic(" Importe minimo S/. ",m.gc(2,1,t.montoMinimoPedido,".2")," ")}}function va(e,i){1&e&&(m.Rb(0,"p",63),m.Gc(1,"Costo de entrega y propina es 100% para el repartidor."),m.Qb())}var Ca,Sa=function(e){return{"fw-600":e}},ya=((Ca=function(){function e(i,t,o,n,a,s,r,c,l,d,u,b){_classCallCheck(this,e),this.miPedidoService=i,this.infoTokenService=t,this.verifyClientService=o,this.establecimientoService=n,this.calcDistanceService=a,this.dialog=s,this.dialogTelefono=r,this.dialogTipoComprobante=c,this.dialogDireccion=l,this.dialogTiempoEntrega=d,this.utilService=u,this.dialogDireccionClienteDelivery=b,this.isComercioCerrado=!1,this.isComercioAceptaPedidoProgramado=!1,this.isComercioRepartidoresPropios=!1,this.isComercioPapayaSoloPedidosApp=!1,this.isRecojoLocalCheked=!1,this.isAceptaRecojoLocal=!0,this.isValidForm=!1,this.isTiempoEntregaValid=!1,this.msjErrorDir="",this.rippleColor="rgb(255,238,88, 0.3)",this.montoMinimoPedido=10,this.resData={idcliente:"",dni:"",nombre:"",f_nac:"",direccion:"",telefono:"",paga_con:"",dato_adicional:"",referencia:"",tipoComprobante:{},importeTotal:0,metodoPago:{},propina:{},direccionEnvioSelected:{},establecimiento:{},subTotales:{},pasoRecoger:!1,costoTotalDelivery:0,tiempoEntregaProgamado:{},solicitaCubiertos:0},this.isComercioSolidaridad=!1,this.titleInputDatoAdicional="Dato importante",this.valInputDatoAdicianal="",this.isHabilitadoTarjeta=!0,this.isRain=!1,this.listIconsEntrega=[],this.isCalculandoDistanciaA=!1,this.isRestaurante=!1,this.isCubierto=!1,this.isReady=new m.n,this.dataDelivery=new m.n,this.nombreClienteValido=!1,this.isShowNombreClienteLoginInvitado=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadData();var e=this.establecimientoService.get();if(this.montoMinimoPedido=e.pwa_delivery_importe_min,this.tipoComprobanteSelected=this.infoTokenService.infoUsToken.tipoComprobante,this.propinaSelected=this.infoTokenService.infoUsToken.propina,this.isShowNombreClienteLoginInvitado=this.verifyClientService.getDataClient().isLoginByInvitado||!1,this.isShowNombreClienteLoginInvitado){var i=this.infoTokenService.infoUsToken.nombres;i=i.toLocaleLowerCase().indexOf("invitado")>-1?"":i,this.isShowNombreClienteLoginInvitado=""===i,this.nombreClienteValido=!this.isShowNombreClienteLoginInvitado}else{var t=this.infoTokenService.infoUsToken.nombres;t=t.toLocaleLowerCase().indexOf("invitado")>-1?"":t,this.nombreClienteValido=""!==t}this.isComercioSolidaridad=1===e.pwa_delivery_comercio_solidaridad,this.titleInputDatoAdicional=this.isComercioSolidaridad?"Contacto":"Alg\xfan dato importante?",this.isComercioRepartidoresPropios=1===e.pwa_delivery_servicio_propio,this.isComercioPapayaSoloPedidosApp=1===e.pwa_delivery_reparto_solo_app;try{this.listIconsEntrega=JSON.parse(JSON.stringify(e.icons_entrega))}catch(o){this.listIconsEntrega=[]}this.dirEstablecimiento.distancia_km||this.calcularCostoEntrega(this.direccionCliente),this.simbolo_moneda=this.establecimientoService.getSimboloMoneda()}},{key:"getTiempoEntrega",value:function(){return this.tiempoEntregaSelected=new gn.a,this.infoTokenService.infoUsToken.tiempoEntrega?(this.tiempoEntregaSelected=this.infoTokenService.infoUsToken.tiempoEntrega,void(this.isTiempoEntregaValid=this.tiempoEntregaSelected.valid)):this.isComercioCerrado?(this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.tiempoEntregaSelected.iddia=(new Date).getDay(),void(this.infoTokenService.infoUsToken.tiempoEntrega=this.tiempoEntregaSelected)):(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value=this.infoEstablecimiento.tiempo_aprox_entrega,this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,void(this.isTiempoEntregaValid=!0))}},{key:"loadData",value:function(){var e=this;this.dirEstablecimiento=this.establecimientoService.get(),this.isComercioCerrado=1===this.dirEstablecimiento.cerrado,this.isComercioAceptaPedidoProgramado=1===this.dirEstablecimiento.pwa_delivery_habilitar_pedido_programado,this.direccionClienteIni=new An.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.isHabilitadoTarjeta=1===this.establecimientoService.get().pwa_delivery_acepta_tarjeta,this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(this.isHabilitadoTarjeta),this.infoToken=this.infoTokenService.getInfoUs(),this.direccionCliente=this.infoToken.direccionEnvioSelected?this.infoToken.direccionEnvioSelected:this.direccionClienteIni,this.infoEstablecimiento=this.establecimientoService.get(),this.getTiempoEntrega(),this.isRestaurante=1===this.infoEstablecimiento.idsede_categoria,this.isAceptaRecojoLocal=1===this.infoEstablecimiento.pwa_delivery_habilitar_recojo_local,this.resData.telefono=this.infoToken.telefono,this.isValidForm=!!this.infoToken.telefono&&this.infoToken.telefono.length>=5,this.isValidForm=!!this.metodoPagoSelected.idtipo_pago&&this.isValidForm,this.isValidForm&&setTimeout((function(){e.verificarNum(e.infoToken.telefono)}),500)}},{key:"verificarNum",value:function(e){var i,t;this.resData.telefono=e,this.verificarFormValid(),this.propinaSelected=this.infoTokenService.infoUsToken.propina;var o=this._listSubtotales[this._listSubtotales.length-1].importe,n=this.metodoPagoSelected.importe?this.metodoPagoSelected.importe:"";this.isValidForm&&(this.resData.nombre=this.infoToken.nombres,this.resData.direccion=null===(i=this.infoToken.direccionEnvioSelected)||void 0===i?void 0:i.direccion,this.resData.referencia=this.utilService.addslashes(null===(t=this.infoToken.direccionEnvioSelected)||void 0===t?void 0:t.referencia),this.resData.direccionEnvioSelected=this.infoToken.direccionEnvioSelected,this.resData.idcliente=this.infoToken.idcliente.toString(),this.resData.paga_con=this.metodoPagoSelected.descripcion+"  "+n,this.resData.telefono=e,this.resData.metodoPago=this.metodoPagoSelected,this.resData.tipoComprobante=this.tipoComprobanteSelected,this.resData.tiempoEntregaProgamado=this.tiempoEntregaSelected,this.resData.establecimiento=this.infoEstablecimiento,this.resData.importeTotal=o,this.resData.subTotales=this._listSubtotales,this.resData.propina=this.propinaSelected,this.infoToken.telefono=e,this.infoTokenService.setTelefono(e),this.resData.pasoRecoger=this.isRecojoLocalCheked,this.resData.dato_adicional=this.valInputDatoAdicianal,this.resData.costoTotalDelivery=this.infoEstablecimiento.costo_total_servicio_delivery,this.resData.solicitaCubiertos=this.isCubierto?1:0,this.dataDelivery.emit(this.resData)),this.verificarMontoMinimo()}},{key:"verificarMontoMinimo",value:function(){var e,i,t=this._listSubtotales[this._listSubtotales.length-1].importe;this.resData.importeTotal=t,this.verificarFormValid(),this.propinaSelected=this.infoTokenService.infoUsToken.propina;var o=this.metodoPagoSelected.importe?this.metodoPagoSelected.importe:"";this.isValidForm&&(this.resData.nombre=this.infoToken.nombres,this.resData.direccion=null===(e=this.infoToken.direccionEnvioSelected)||void 0===e?void 0:e.direccion,this.resData.referencia=this.utilService.addslashes(null===(i=this.infoToken.direccionEnvioSelected)||void 0===i?void 0:i.referencia),this.resData.direccionEnvioSelected=this.infoToken.direccionEnvioSelected,this.resData.idcliente=this.infoToken.idcliente.toString(),this.resData.paga_con=this.metodoPagoSelected.descripcion+"  "+o,this.resData.telefono=this.infoToken.telefono,this.resData.metodoPago=this.metodoPagoSelected,this.resData.tiempoEntregaProgamado=this.tiempoEntregaSelected,this.resData.tipoComprobante=this.tipoComprobanteSelected,this.resData.establecimiento=this.infoEstablecimiento,this.resData.propina=this.propinaSelected,this.resData.importeTotal=t,this.resData.subTotales=this._listSubtotales,this.resData.pasoRecoger=this.isRecojoLocalCheked,this.resData.dato_adicional=this.valInputDatoAdicianal,this.resData.costoTotalDelivery=this.infoEstablecimiento.costo_total_servicio_delivery,this.resData.solicitaCubiertos=this.isCubierto?1:0,this.infoTokenService.set(),this.dataDelivery.emit(this.resData))}},{key:"verificarFormValid",value:function(){this.isValidForm=this.isTiempoEntregaValid,this.isValidForm=!!(this.resData.importeTotal>=this.montoMinimoPedido&&this.isValidForm),this.isValidForm=!!this.metodoPagoSelected.idtipo_pago&&this.isValidForm,this.isValidForm=!(!this.direccionCliente.ciudad&&!this.isRecojoLocalCheked)&&this.isValidForm,this.isValidForm=this.resData.telefono.trim().length>=5&&this.isValidForm,this.isValidForm=this.isValidForm&&!this.isCalculandoDistanciaA,this.isValidForm=this.isValidForm&&this.nombreClienteValido,this.isReady.emit(this.isValidForm)}},{key:"openDialogMetodoPago",value:function(){var e=this,i=new S.e;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={importeTotalPagar:this._listSubtotales[this._listSubtotales.length-1].importe},this.dialog.open(pn.a,i).afterClosed().subscribe((function(i){e.metodoPagoSelected=i,localStorage.setItem("sys:mps",btoa(JSON.stringify(i))),e.verificarFormValid(),e.verificarMontoMinimo()}))}},{key:"openDialogTipoComprobnate",value:function(){var e=this,i=new S.e;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,this.dialogTipoComprobante.open(Hn,i).afterClosed().subscribe((function(i){e.tipoComprobanteSelected=i}))}},{key:"openDialogsendSMS",value:function(){var e=this,i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open(Bn.a,i).afterClosed().subscribe((function(i){e.isValidForm=i.verificado,i.verificado&&(e.infoToken.telefono=i.numberphone,e.infoTokenService.setTelefono(i.numberphone),e.verifyClientService.setTelefono(i.numberphone),e.resData.telefono=e.infoToken.telefono),e.verificarMontoMinimo()}))}},{key:"recalcularTotales",value:function(){if(this.isRecojoLocalCheked){this.propinaSelected={idpropina:1,value:0,descripcion:this.simbolo_moneda+" 0",checked:!0},this.infoTokenService.setPropina(this.propinaSelected),this._listSubtotalesTmp=JSON.parse(JSON.stringify(this._listSubtotales));var e=this._listSubtotales[this._listSubtotales.length-1];this._listSubtotales=this._listSubtotales.filter((function(e){if((isNaN(parseInt(e.id,0))?1:e.id)>=0&&"TOTAL"!==e.descripcion&&"ENTREGA"!==e.descripcion.toUpperCase())return e}));var i=this._listSubtotales.map((function(e){return parseFloat(e.importe)})).reduce((function(e,i){return e+i}),0);e.importe=i,this._listSubtotales.push(e)}else this._listSubtotales=this._listSubtotalesTmp;localStorage.setItem("sys::st",btoa(JSON.stringify(this._listSubtotales))),this.infoTokenService.setPasoRecoger(this.isRecojoLocalCheked),this.verificarMontoMinimo()}},{key:"selectedPropinaRepartidor",value:function(e){this.propinaSelected=e,this.resData.propina=e}},{key:"openDialogDireccion",value:function(){var e=this,i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={idcliente:this.infoTokenService.infoUsToken.idcliente},this.dialogDireccionClienteDelivery.open($n.a,i).afterClosed().subscribe((function(i){if(i){if(e.msjErrorDir="",e.direccionCliente=i,e.direccionCliente.ciudad.toLocaleLowerCase()!==e.infoEstablecimiento.ciudad.toLocaleLowerCase())return e.direccionCliente.codigo=null,e.msjErrorDir="Servicio no disponible en esta direcci\xf3n.",void e.verificarMontoMinimo();e.infoToken.direccionEnvioSelected=e.direccionCliente,e.direccionCliente.idcliente_pwa_direccion=null===e.direccionCliente.idcliente_pwa_direccion?0:e.direccionCliente.idcliente_pwa_direccion,e.calcularCostoEntrega(e.direccionCliente)}}))}},{key:"openDialogDireccion_anterior",value:function(){var e=this,i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0,idClienteBuscar:this.infoTokenService.infoUsToken.idcliente},this.dialogDireccion.open(mn.a,i).afterClosed().subscribe((function(i){if(i){if(e.msjErrorDir="",e.direccionCliente=i,e.direccionCliente.ciudad.toLocaleLowerCase()!==e.infoEstablecimiento.ciudad.toLocaleLowerCase())return e.direccionCliente.codigo=null,e.msjErrorDir="Servicio no disponible en esta direcci\xf3n.",void e.verificarMontoMinimo();e.infoToken.direccionEnvioSelected=e.direccionCliente,e.direccionCliente.idcliente_pwa_direccion=null===e.direccionCliente.idcliente_pwa_direccion?0:e.direccionCliente.idcliente_pwa_direccion,e.calcularCostoEntrega(e.direccionCliente)}}))}},{key:"calcularCostoEntrega",value:function(e){var i=this;this.isReady.emit(!1),this.isCalculandoDistanciaA=!0,this.calcDistanceService.calculateRoute(e,this.dirEstablecimiento,!1),setTimeout((function(){i.establecimientoService.set(i.dirEstablecimiento),i.infoEstablecimiento.c_servicio=i.dirEstablecimiento.c_servicio,i.resData.costoTotalDelivery=i.dirEstablecimiento.c_servicio;var e=i.miPedidoService.getArrSubTotales(i.dirEstablecimiento.rulesSubTotales);localStorage.setItem("sys::st",btoa(JSON.stringify(e))),i._listSubtotales=e,i.isCalculandoDistanciaA=!1,i.verificarMontoMinimo()}),1500)}},{key:"openDialogTiempoEntrega",value:function(){var e=this,i=new S.e;i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTipoComprobante.open(vn.a,i).afterClosed().subscribe((function(i){i&&(e.infoTokenService.setTiempoEntrega(i),e.tiempoEntregaSelected=i,e.isTiempoEntregaValid=!0,e.verificarMontoMinimo())}))}},{key:"listSubtotales",set:function(e){this._listSubtotales=e,this.loadData()}}]),e}()).\u0275fac=function(e){return new(e||Ca)(m.Lb(s.a),m.Lb(b.a),m.Lb(d.a),m.Lb(u.a),m.Lb(Ue.a),m.Lb(S.b),m.Lb(S.b),m.Lb(S.b),m.Lb(S.b),m.Lb(S.b),m.Lb(_.a),m.Lb(S.b))},Ca.\u0275cmp=m.Fb({type:Ca,selectors:[["app-confirmar-delivery"]],inputs:{listSubtotales:"listSubtotales"},outputs:{isReady:"isReady",dataDelivery:"dataDelivery"},decls:72,vars:33,consts:[[1,"text-left","h-100"],[4,"ngIf"],["class","border-bottom m-0 p-3",4,"ngIf"],["matRipple","",1,"border-bottom","m-0","p-3",3,"hidden","matRippleColor"],["labelPosition","before",3,"ngModel","ngModelChange","change"],["aria-hidden","true",1,"fa","fa-home","pr-2"],[1,"mr-1",3,"ngClass"],["class","border-bottom m-0 p-3","matRipple","",3,"matRippleColor",4,"ngIf"],["class","border-bottom m-0 p-3 d-flex justify-content-between align-items-center","matRipple","",3,"matRippleColor","click",4,"ngIf"],["matRipple","",1,"border-bottom","m-0","p-3","d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"fw-100","fs-12","text-secondary"],[1,"fa","fa-clock-o","pl-2"],[1,"m-0"],[1,"fs-14",3,"ngClass"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],["matRipple","",1,"border-bottom","m-0","p-3",3,"matRippleColor","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"m-0","fs-14"],[1,"fw-100","fs-12","text-danger",3,"hidden"],["matRipple","",1,"border-bottom","m-0","p-3","div-metodo-pago",3,"matRippleColor","click"],["class","m-0 p-3 d-flex justify-content-between",4,"ngIf"],["class","p-3",4,"ngIf"],[1,"m-0","p-3"],[1,"div-total","w-100"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],[1,"pb-2","text-right"],["class","fs-11 text-info fw-100",4,"ngIf"],[1,"border-bottom","m-0","p-3"],[1,"div-info"],["aria-hidden","true",1,"fa","fa-motorcycle","pr-1"],[1,"fs-11"],[1,"fw-600","fs-14"],[1,"fa","fa-cutlery"],[4,"ngIf","ngIfElse"],["elseTemplateCubierto",""],["name","isCubierto",3,"ngModel","ngModelChange"],["matRipple","",1,"border-bottom","m-0","p-3",3,"matRippleColor"],[3,"sizeTextBg","isNombreValid"],[3,"ngClass"],["class","fw-100 text-info pl-2",4,"ngIf"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],[1,"fw-100","text-info","pl-2"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"m-0","p-3","d-flex","justify-content-between"],["matTooltip","El 100% va para el repartidor","matTooltipPosition","above","aria-label","Button that shows a tooltip",1,"fa","fa-question-circle",3,"click"],["tooltip","matTooltip"],[3,"listSubtotales","selectedPropina"],[1,"p-3"],[1,"text-info"],[1,"w-100"],["matInput","",3,"placeholder","required","ngModel","ngModelChange"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"],["class","d-flex",4,"ngIf"],[1,"d-flex"],["class","d-inline",4,"ngFor","ngForOf"],["class","fa fa-spinner fa-spin fa-fw ml-3",4,"ngIf"],[1,"d-inline"],["class","img-ico-entrega pl-2 text-secondary","alt","itemIcon.motivo",3,"src","matTooltip",4,"ngIf"],["alt","itemIcon.motivo",1,"img-ico-entrega","pl-2","text-secondary",3,"src","matTooltip"],[1,"fa","fa-spinner","fa-spin","fa-fw","ml-3"],[1,"fs-11","text-info","fw-100"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Ec(1,ia,6,0,"ng-container",1),m.Ec(2,na,10,3,"div",2),m.Rb(3,"div",3),m.Rb(4,"mat-checkbox",4),m.Zb("ngModelChange",(function(e){return i.isRecojoLocalCheked=e}))("change",(function(){return i.recalcularTotales()})),m.Mb(5,"i",5),m.Rb(6,"span",6),m.Gc(7,"Paso a recoger en el Local"),m.Qb(),m.Qb(),m.Qb(),m.Ec(8,aa,2,2,"div",7),m.Ec(9,la,15,8,"div",8),m.Rb(10,"div",9),m.Zb("click",(function(){return i.openDialogTiempoEntrega()})),m.Rb(11,"div"),m.Rb(12,"span",10),m.Gc(13," Entgrega:"),m.Qb(),m.Mb(14,"i",11),m.Rb(15,"p",12),m.Rb(16,"span",13),m.Gc(17),m.Rb(18,"strong"),m.Gc(19),m.ec(20,"titlecase"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(21,"div"),m.Rb(22,"button",14),m.Rb(23,"span",15),m.Gc(24,"Cambiar"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(25,"div",16),m.Zb("click",(function(){return i.openDialogsendSMS()})),m.Rb(26,"div",17),m.Rb(27,"div"),m.Rb(28,"span",18),m.Gc(29,"Es necesario el numero de su telefono"),m.Qb(),m.Rb(30,"p",19),m.Gc(31,"Telefono: "),m.Rb(32,"strong"),m.Gc(33),m.Qb(),m.Qb(),m.Rb(34,"span",20),m.Gc(35,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),m.Qb(),m.Qb(),m.Rb(36,"button",14),m.Rb(37,"span",15),m.Gc(38,"Cambiar"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(39,"div",9),m.Zb("click",(function(){return i.openDialogTipoComprobnate()})),m.Rb(40,"p",19),m.Gc(41,"Comprobante: "),m.Rb(42,"strong"),m.Gc(43),m.Qb(),m.Qb(),m.Rb(44,"button",14),m.Rb(45,"span",15),m.Gc(46,"Cambiar"),m.Qb(),m.Qb(),m.Qb(),m.Rb(47,"div",21),m.Zb("click",(function(){return i.openDialogMetodoPago()})),m.Rb(48,"div",17),m.Rb(49,"p",19),m.Gc(50,"Metodo de pago: "),m.Rb(51,"strong"),m.Gc(52),m.Qb(),m.Qb(),m.Rb(53,"button",14),m.Rb(54,"span",15),m.Gc(55,"Cambiar"),m.Qb(),m.Qb(),m.Qb(),m.Rb(56,"span",20),m.Gc(57,"Especifique un metodo de pago."),m.Qb(),m.Qb(),m.Ec(58,da,6,1,"div",22),m.Ec(59,ua,5,3,"div",23),m.Mb(60,"br"),m.Rb(61,"div",24),m.Rb(62,"div",25),m.Rb(63,"ul",26),m.Ec(64,ha,8,9,"li",27),m.Qb(),m.Qb(),m.Rb(65,"div",28),m.Rb(66,"span",18),m.Ec(67,ga,3,4,"span",1),m.Qb(),m.Ec(68,va,2,0,"p",29),m.Qb(),m.Mb(69,"br"),m.Qb(),m.Mb(70,"br"),m.Mb(71,"br"),m.Qb()),2&e&&(m.zb(1),m.lc("ngIf",i.isComercioRepartidoresPropios&&!i.isComercioPapayaSoloPedidosApp),m.zb(1),m.lc("ngIf",i.isRestaurante),m.zb(1),m.lc("hidden",!i.isAceptaRecojoLocal)("matRippleColor",i.rippleColor),m.zb(1),m.lc("ngModel",i.isRecojoLocalCheked),m.zb(2),m.lc("ngClass",m.qc(29,Sa,i.isRecojoLocalCheked)),m.zb(2),m.lc("ngIf",i.isShowNombreClienteLoginInvitado),m.zb(1),m.lc("ngIf",!i.isRecojoLocalCheked),m.zb(1),m.lc("matRippleColor",i.rippleColor),m.zb(6),m.lc("ngClass",m.qc(31,ca,!i.isTiempoEntregaValid)),m.zb(1),m.Ic(" ",i.tiempoEntregaSelected.descripcion,": "),m.zb(2),m.Ic("",m.fc(20,27,i.tiempoEntregaSelected.value)," "),m.zb(6),m.lc("matRippleColor",i.rippleColor),m.zb(3),m.lc("hidden",i.infoToken.telefono.length>=5),m.zb(5),m.Hc(i.infoToken.telefono),m.zb(1),m.lc("hidden",i.infoToken.telefono.length>=5),m.zb(5),m.lc("matRippleColor",i.rippleColor),m.zb(4),m.Hc(i.tipoComprobanteSelected.descripcion),m.zb(4),m.lc("matRippleColor",i.rippleColor),m.zb(5),m.Hc(i.metodoPagoSelected.descripcion),m.zb(4),m.lc("hidden",i.metodoPagoSelected.idtipo_pago),m.zb(2),m.lc("ngIf",!i.isRecojoLocalCheked),m.zb(1),m.lc("ngIf",i.isComercioSolidaridad),m.zb(5),m.lc("ngForOf",i._listSubtotales),m.zb(2),m.lc("hidden",i.isValidForm),m.zb(1),m.lc("ngIf",i.resData.importeTotal<i.montoMinimoPedido),m.zb(1),m.lc("ngIf",!i.isComercioRepartidoresPropios||i.isComercioPapayaSoloPedidosApp))},directives:[o.t,T.n,w.a,n.p,n.s,o.q,o.s,un.a,Wn,R.b,ea,I.c,ke.a,n.c,n.A],pipes:[o.F,o.g],styles:[".div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.img-ico-entrega[_ngcontent-%COMP%]{height:22px}.div-info[_ngcontent-%COMP%]{background:#faebd7;padding:5px;border-radius:5px}.div-metodo-pago[_ngcontent-%COMP%]{background:#d0f1ff}"]}),Ca),ka=t("08dK"),xa=t("x9WS"),_a=t("eiAt"),Ra=t("9jt1"),Pa=t("Bzl0"),wa=t("LW3Q"),Ia=t("kash"),Ma=t("22RU"),Ta=function(e){return{"propina-selected":e}};function Oa(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",3),m.Zb("click",(function(){m.xc(t);var e=i.$implicit;return m.dc(2).selectedItem(e)})),m.Mb(1,"img",4),m.Rb(2,"p"),m.Gc(3),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit;m.lc("ngClass",m.qc(3,Ta,o.selected)),m.zb(1),m.nc("src","./assets/images/icon-app/",o.img,"",m.yc),m.zb(2),m.Hc(o.descripcion)}}function Qa(e,i){if(1&e&&(m.Rb(0,"div",1),m.Ec(1,Oa,4,5,"div",2),m.Qb()),2&e){var t=m.dc();m.zb(1),m.lc("ngForOf",t.listVehiculo)}}var Da,za=((Da=function(){function e(i){_classCallCheck(this,e),this.crudService=i,this.optionSelected=new m.n,this.listVehiculo=null}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedFirst=!this.selectedFirst||this.selectedFirst,this.loadTipoVehiculo()}},{key:"loadTipoVehiculo",value:function(){var e=this;this.crudService.getAll("delivery","get-tipo-vehiculo",!1,!1,!1).subscribe((function(i){e.listVehiculo=i.data,e.selectedFirst&&e.selectedItem(e.listVehiculo[0])}))}},{key:"selectedItem",value:function(e){this.listVehiculo.map((function(e){return e.selected=!1})),e.selected=!0,this.itemSelected=e,this.optionSelected.emit(this.itemSelected)}}]),e}()).\u0275fac=function(e){return new(e||Da)(m.Lb(P.a))},Da.\u0275cmp=m.Fb({type:Da,selectors:[["app-tipo-vehiculo"]],inputs:{selectedFirst:"selectedFirst"},outputs:{optionSelected:"optionSelected"},decls:1,vars:1,consts:[["class","content-op",4,"ngIf"],[1,"content-op"],["matRipple","","class","item-propina",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-propina",3,"ngClass","click"],["alt","",3,"src"]],template:function(e,i){1&e&&m.Ec(0,Qa,2,1,"div",0),2&e&&m.lc("ngIf",i.listVehiculo)},directives:[o.t,o.s,T.n,o.q],styles:["p[_ngcontent-%COMP%]{margin:0}.content-op[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:15px}.item-propina[_ngcontent-%COMP%]{text-align:center;padding:10px;border:1px solid #9e9e9e;border-radius:5px;font-size:12px;background-color:#fff;margin-left:5px;min-width:90px;-webkit-transition:all .3s;transition:all .3s}.propina-selected[_ngcontent-%COMP%]{background-color:#708090;color:#fff}"]}),Da);function Ea(e,i){if(1&e&&(m.Rb(0,"p",39),m.Gc(1),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.Ic(" ",t.msjErrorDir," ")}}function Fa(e,i){1&e&&m.Mb(0,"i",40)}function La(e,i){1&e&&m.Mb(0,"i",41)}var ja=function(e){return{fadeInRight:e}},Ga=function(e){return{"text-danger":e}};function Va(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",2),m.Rb(2,"div",3),m.Rb(3,"p",4),m.Gc(4,"Pide lo que quieras."),m.Qb(),m.Rb(5,"p",5),m.Gc(6,"Buscaremos en su ciudad para llevarte lo que necesitas. "),m.Qb(),m.Mb(7,"hr"),m.Rb(8,"div"),m.Rb(9,"p",6),m.Gc(10,"Tipo de movilidad que requiere."),m.Qb(),m.Rb(11,"app-tipo-vehiculo",7),m.Zb("optionSelected",(function(e){return m.xc(t),m.dc().vehiculoSelected(e)})),m.Qb(),m.Qb(),m.Mb(12,"hr"),m.Rb(13,"div",8),m.Rb(14,"p",9),m.Gc(15,"Que compraremos?."),m.Qb(),m.Rb(16,"app-comp-caja-texto",10),m.Zb("textChanged",(function(e){return m.xc(t),m.dc().textChanged(e)})),m.Qb(),m.Mb(17,"hr"),m.Rb(18,"p",9),m.Gc(19,"Costo estimado de la compra."),m.Qb(),m.Rb(20,"app-comp-op-costo-estimado",7),m.Zb("optionSelected",(function(e){return m.xc(t),m.dc().costoSelected(e)})),m.Qb(),m.Mb(21,"hr"),m.Rb(22,"div",11),m.Rb(23,"button",12),m.Zb("click",(function(){return m.xc(t),m.dc().goNext()})),m.Gc(24,"Listo, continuar"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(25,"div",13),m.Rb(26,"p"),m.Rb(27,"i",14),m.Zb("click",(function(){return m.xc(t),m.dc().goNext()})),m.Qb(),m.Gc(28," Pide lo que quieras"),m.Qb(),m.Mb(29,"hr"),m.Rb(30,"div"),m.Rb(31,"p",9),m.Gc(32,"De d\xf3nde lo compramos? "),m.Rb(33,"span",15),m.Gc(34,"(Opcional)"),m.Qb(),m.Qb(),m.Rb(35,"mat-form-field",16),m.Rb(36,"input",17),m.Zb("ngModelChange",(function(e){return m.xc(t),m.dc().datosFormUno.donde_compramos=e})),m.Qb(),m.Qb(),m.Qb(),m.Rb(37,"p",9),m.Gc(38,"A d\xf3nde lo llevamos?"),m.Qb(),m.Rb(39,"div",18),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogDireccion()})),m.Rb(40,"p",19),m.Rb(41,"strong",20),m.Gc(42),m.Qb(),m.Mb(43,"br"),m.Gc(44),m.Qb(),m.Rb(45,"p",21),m.Gc(46),m.Qb(),m.Ec(47,Ea,2,1,"p",22),m.Qb(),m.Mb(48,"hr"),m.Rb(49,"div",23),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogTiempoEntrega()})),m.Rb(50,"div"),m.Rb(51,"p",9),m.Gc(52,"Cuando lo entregamos?"),m.Qb(),m.Rb(53,"p",24),m.Rb(54,"span",25),m.Gc(55),m.Rb(56,"strong"),m.Gc(57),m.ec(58,"titlecase"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(59,"div"),m.Mb(60,"i",26),m.Qb(),m.Qb(),m.Mb(61,"hr"),m.Rb(62,"div",18),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogMetodoPago()})),m.Rb(63,"div",27),m.Rb(64,"p",28),m.Gc(65,"Metodo de pago: "),m.Rb(66,"strong"),m.Gc(67),m.Qb(),m.Qb(),m.Rb(68,"button",29),m.Rb(69,"span",30),m.Gc(70,"Cambiar"),m.Qb(),m.Qb(),m.Qb(),m.Rb(71,"span",31),m.Gc(72,"Especifique un metodo de pago."),m.Qb(),m.Qb(),m.Mb(73,"hr"),m.Rb(74,"div",18),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogsendSMS()})),m.Rb(75,"span",32),m.Gc(76,"Es necesario el numero de su telefono"),m.Qb(),m.Rb(77,"p",28),m.Gc(78,"Telefono contacto: "),m.Rb(79,"strong"),m.Gc(80),m.Qb(),m.Qb(),m.Rb(81,"span",31),m.Gc(82,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),m.Qb(),m.Qb(),m.Mb(83,"hr"),m.Mb(84,"br"),m.Rb(85,"div",33),m.Rb(86,"div",34),m.Gc(87,"Costo de entrega"),m.Qb(),m.Rb(88,"div",35),m.Ec(89,Fa,1,0,"i",36),m.Gc(90),m.ec(91,"number"),m.Qb(),m.Qb(),m.Rb(92,"p",37),m.Gc(93,"Entrega sin contacto: cuando sea posible, seleccione pagar con Yape."),m.Qb(),m.Mb(94,"br"),m.Mb(95,"hr"),m.Rb(96,"div",11),m.Rb(97,"button",12),m.Zb("click",(function(){return m.xc(t),m.dc().enviarPedidoLoQ()})),m.Ec(98,La,1,0,"i",38),m.Gc(99," Listo, Enviar. "),m.Qb(),m.Qb(),m.Mb(100,"br"),m.Mb(101,"br"),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc();m.zb(2),m.lc("hidden",o.isShowFinalize),m.zb(21),m.lc("disabled",!o.isFormValid),m.zb(2),m.lc("hidden",!o.isShowFinalize)("ngClass",m.qc(31,ja,o.isShowFinalize)),m.zb(11),m.lc("ngModel",o.datosFormUno.donde_compramos),m.zb(3),m.lc("matRippleColor",o.rippleColor),m.zb(2),m.lc("ngClass",m.qc(33,Ga,""===o.direccionCliente.direccion)),m.zb(1),m.Hc(o.direccionCliente.titulo),m.zb(2),m.Ic(" ",o.direccionCliente.direccion,""),m.zb(2),m.Ic(" ",o.direccionCliente.referencia," "),m.zb(1),m.lc("ngIf",o.msjErrorDir.length>0),m.zb(2),m.lc("matRippleColor",o.rippleColor),m.zb(5),m.lc("ngClass",m.qc(35,Ga,!o.isTiempoEntregaValid)),m.zb(1),m.Ic(" ",o.tiempoEntregaSelected.descripcion,": "),m.zb(2),m.Ic("",m.fc(58,26,o.tiempoEntregaSelected.value)," "),m.zb(5),m.lc("matRippleColor",o.rippleColor),m.zb(5),m.Hc(o.metodoPagoSelected.descripcion),m.zb(4),m.lc("hidden",o.metodoPagoSelected.idtipo_pago),m.zb(3),m.lc("matRippleColor",o.rippleColor),m.zb(1),m.lc("hidden",o.infoToken.telefono.length>=5),m.zb(5),m.Hc(o.infoToken.telefono),m.zb(1),m.lc("hidden",o.infoToken.telefono.length>=5),m.zb(8),m.lc("ngIf",o.isCalculandoDistanciaA),m.zb(1),m.Ic(" S/. ",m.gc(91,28,o.importe_pagar,".2"),""),m.zb(7),m.lc("disabled",!o.isFormValidDos||o.isLoading),m.zb(1),m.lc("ngIf",o.isLoading)}}function Aa(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",42),m.Rb(1,"div",43),m.Mb(2,"i",44),m.Mb(3,"br"),m.Rb(4,"p",4),m.Gc(5," Pedido enviado. "),m.Qb(),m.Rb(6,"p",45),m.Gc(7,"Atenderemos su pedido lo mas pronto posible. En breve un repartidor se comunicara con usted para cumplir con su pedido."),m.Qb(),m.Mb(8,"hr"),m.Rb(9,"button",46),m.Zb("click",(function(){return m.xc(t),m.dc().goZona()})),m.Gc(10,"Listo"),m.Qb(),m.Qb(),m.Qb()}}var Ba,qa=((Ba=function(){function e(i,t,o,n,a,s,r,c,l,d,u){_classCallCheck(this,e),this.infoTokenService=i,this.plazaDelivery=t,this.calcDistanceService=o,this.crudService=n,this.dialogDireccion=a,this.dialogTelefono=s,this.dialogTiempoEntrega=r,this.dialog=c,this.router=l,this.utilService=d,this.establecimientoService=u,this.lasCiudad="",this.importe_pagar=4,this.isLoading=!1,this.isEnviado=!1,this.isExpress=!1,this.isCalculandoDistanciaA=!1,this.isShowFinalize=!1,this.systemOS="",this.msjErrorDir="",this.isFormValid=!1,this.isFormValidDos=!1,this.isTiempoEntregaValid=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.systemOS=this.utilService.getOS(),this.msjErrorDir="",this.infoToken=this.infoTokenService.getInfoUs(),this.direccionClienteIni=new An.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.tiempoEntregaSelected=new gn.a,this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(!1),this.datosFormUno={},this.datosFormUno.que_compramos="",this.datosFormUno.telefono=this.infoToken.telefono,this.direccionCliente=this.infoToken.direccionEnvioSelected?this.infoToken.direccionEnvioSelected:this.direccionClienteIni,this.scrollTopInit(),this.getDatosSede()}},{key:"getTiempoEntrega",value:function(){var e=(new Date).getHours();if(this.laPlazaDelivery.options.s_hfin){var i=this.laPlazaDelivery.options.s_hfin.split(":")[0];this.isTiempoEntregaValid=e<=parseInt(i,0)}this.tiempoEntregaSelected.modificado?this.isTiempoEntregaValid=!0:this.isTiempoEntregaValid?(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value="10 a 15 Minutos",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0):(this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0)}},{key:"getDatosSede",value:function(){var e=this;if(this.direccionCliente.ciudad)return this.direccionCliente.ciudad===this.lasCiudad?(this.getTiempoEntrega(),this.calcularDistanciaEntrega(),void this.setDiasHoraEstablecimineto()):void this.plazaDelivery.loadDatosPlazaByCiudad(this.direccionCliente.ciudad).subscribe((function(i){e.laPlazaDelivery=i,e.lasCiudad=e.laPlazaDelivery.ciudad,e.laPlazaDelivery.latitude=e.laPlazaDelivery.centro.lat,e.laPlazaDelivery.longitude=e.laPlazaDelivery.centro.lon,e.calcularDistanciaEntrega(),e.setDiasHoraEstablecimineto(),e.getTiempoEntrega()}))}},{key:"vehiculoSelected",value:function(e){this.datosFormUno.vehiculo=e,this.validFormUno(),this.calcCostoServicio()}},{key:"costoSelected",value:function(e){this.datosFormUno.costo_producto=e,this.validFormUno()}},{key:"textChanged",value:function(e){this.datosFormUno.que_compramos=e,this.validFormUno()}},{key:"validFormUno",value:function(){this.isFormValid=this.datosFormUno.vehiculo&&this.datosFormUno.costo_producto&&""!==this.datosFormUno.que_compramos}},{key:"validFormDos",value:function(){this.isFormValidDos=this.isFormValid,this.isFormValidDos=!!this.metodoPagoSelected.idtipo_pago&&this.isFormValidDos,this.isFormValidDos=!!this.direccionCliente.ciudad&&this.isFormValidDos,this.isFormValidDos=this.datosFormUno.telefono.trim().length>=5&&this.isFormValidDos,this.isFormValidDos=this.isFormValidDos&&!this.isCalculandoDistanciaA}},{key:"openDialogMetodoPago",value:function(){var e=this,i=new S.e;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={importeTotalPagar:3},this.dialog.open(pn.a,i).afterClosed().subscribe((function(i){e.metodoPagoSelected=i,e.validFormDos()}))}},{key:"openDialogTiempoEntrega",value:function(){var e=this,i=new S.e;i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTiempoEntrega.open(vn.a,i).afterClosed().subscribe((function(i){i&&(e.infoTokenService.setTiempoEntrega(i),e.tiempoEntregaSelected=i,e.isTiempoEntregaValid=!0)}))}},{key:"openDialogsendSMS",value:function(){var e=this,i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open(Bn.a,i).afterClosed().subscribe((function(i){i.verificado&&(e.infoToken.telefono=i.numberphone,e.infoTokenService.setTelefono(i.numberphone),e.datosFormUno.telefono=e.infoToken.telefono,e.validFormDos())}))}},{key:"openDialogDireccion",value:function(){var e=this,i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0},this.dialogDireccion.open(mn.a,i).afterClosed().subscribe((function(i){i&&(e.msjErrorDir="",e.direccionCliente=i,e.getDatosSede(),e.validFormDos())}))}},{key:"calcularDistanciaEntrega",value:function(){var e=this;if(this.isCalculandoDistanciaA=!0,this.direccionCliente.ciudad.toLocaleLowerCase()!==this.laPlazaDelivery.ciudad.toLocaleLowerCase())return this.direccionCliente.codigo=null,void(this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.");this.calcDistanceService.calculateRoute(this.direccionCliente,this.laPlazaDelivery,!1),setTimeout((function(){e.isCalculandoDistanciaA=!1,e.laPlazaDelivery=e.laPlazaDelivery,e.validFormDos(),e.calcCostoServicio()}),1600)}},{key:"calcCostoServicio",value:function(){this.laPlazaDelivery&&(this.importe_pagar=this.laPlazaDelivery.options.costo_mandado+(this.laPlazaDelivery.c_servicio-this.laPlazaDelivery.c_minimo)+this.datosFormUno.vehiculo.costo_adicional)}},{key:"enviarPedidoLoQ",value:function(){var e=this;try{this.isLoading=!0,this.isEnviado=!1,this.datosFormUno.importe_pagar=this.importe_pagar,this.datosFormUno.idcliente=this.infoToken.idcliente,this.datosFormUno.direccionCliente=this.direccionCliente,this.datosFormUno.metodoPago=this.metodoPagoSelected,this.datosFormUno.ciudad=this.laPlazaDelivery.ciudad,this.datosFormUno.tiempoEntrega=this.tiempoEntregaSelected,this.datosFormUno.distancia_km=this.laPlazaDelivery.distancia_km,this.datosFormUno.distancia_mt=this.laPlazaDelivery.distancia_mt,this.datosFormUno.systemOS=this.systemOS,this.datosFormUno.is_express=0}catch(i){console.log(i)}this.crudService.postFree({dataInfo:this.datosFormUno},"delivery","set-pedido-mandado",!1).subscribe((function(i){setTimeout((function(){e.isLoading=!1,e.isEnviado=!0}),1500)}))}},{key:"goZona",value:function(){this.router.navigate(["./zona-delivery/establecimientos"])}},{key:"goNext",value:function(){this.isShowFinalize=!this.isShowFinalize,this.scrollTopInit()}},{key:"scrollTopInit",value:function(){try{document.getElementById("contentmaster").scrollTop=0}catch(e){}}},{key:"setDiasHoraEstablecimineto",value:function(){this.laPlazaDelivery.hora_ini=this.laPlazaDelivery.options.s_hini,this.laPlazaDelivery.hora_fin=this.laPlazaDelivery.options.s_hfin,this.laPlazaDelivery.dias_atienden=this.laPlazaDelivery.options.s_dias,this.laPlazaDelivery.pwa_delivery_habilitar_pedido_programado=1,this.laPlazaDelivery.tiempo_aprox_entrega=this.laPlazaDelivery.options.s_tiempo_aprox,this.establecimientoService.set(this.laPlazaDelivery)}}]),e}()).\u0275fac=function(e){return new(e||Ba)(m.Lb(b.a),m.Lb(Ma.a),m.Lb(Ue.a),m.Lb(P.a),m.Lb(S.b),m.Lb(S.b),m.Lb(S.b),m.Lb(S.b),m.Lb(ui.d),m.Lb(_.a),m.Lb(u.a))},Ba.\u0275cmp=m.Fb({type:Ba,selectors:[["app-comp-pide-lo-que-quieras"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["pedidoEnviado",""],["id","divcontent",1,"p-4","div-content"],[1,"animated","fadeInUp",3,"hidden"],[1,"fs-18"],[1,"fw-100","fs-14"],[1,"fs-16"],[3,"optionSelected"],["id","div-1"],[1,"fs-16","pb-2"],["placeholder_txt","Lista del mercado, medicinas, ferreteria, alg\xfan antojo, etc...",3,"textChanged"],[1,"text-center","w-100"],["mat-raised-button","","color","primary",1,"w-50",3,"disabled","click"],["id","div-2 animated fadeIn",3,"hidden","ngClass"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"fw-600","fs-12"],[1,"w-100"],["matInput","","placeholder","Bodega, supermercado, farmacia... ",3,"ngModel","ngModelChange"],["matRipple","",1,"m-0",3,"matRippleColor","click"],[1,"fs-13"],[3,"ngClass"],[1,"fs-12","text-secondary","fw-600"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],["matRipple","",1,"d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14",3,"ngClass"],["aria-hidden","true",1,"fa","fa-caret-down"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-0","fs-16"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],[1,"fw-100","fs-12","text-danger",3,"hidden"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"d-flex","justify-content-between"],[1,"fs-17","fw-600"],[1,"fs-18","fw-600","text-right"],["class","fa fa-spinner fa-spin fa-fw",4,"ngIf"],[1,"fs-12","fw-100","text-secondary"],["class","fa fa-spinner fa-spin fa-fw mr-2",4,"ngIf"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-spinner","fa-spin","fa-fw","mr-2"],[1,"p-3","m-0","d-flex","align-items-center","div-enviado"],[1,"div-listo"],[1,"fa","fa-check","fa-3x","text-success"],[1,"fs-12","text-secondary"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,i){if(1&e&&(m.Ec(0,Va,102,37,"ng-container",0),m.Ec(1,Aa,11,0,"ng-template",null,1,m.Fc)),2&e){var t=m.uc(2);m.lc("ngIf",!i.isEnviado)("ngIfElse",t)}},directives:[o.t,za,Ia.a,wa.a,y.b,o.q,I.c,ke.a,n.c,n.p,n.s,T.n],pipes:[o.F,o.g],styles:["p[_ngcontent-%COMP%]{margin:0}.div-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.div-enviado[_ngcontent-%COMP%]{text-align:center;height:80vh;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.div-listo[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:5px}"]}),Ba);function Na(e,i){if(1&e&&(m.Rb(0,"p",37),m.Gc(1),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.Ic(" ",t.msjErrorDir," ")}}function Ha(e,i){if(1&e&&(m.Rb(0,"p",37),m.Gc(1),m.Qb()),2&e){var t=m.dc(2);m.zb(1),m.Ic(" ",t.msjErrorDir," ")}}function $a(e,i){1&e&&m.Mb(0,"i",38)}function Ua(e,i){1&e&&m.Mb(0,"i",39)}var Za=function(e){return{"text-danger":e}};function Ja(e,i){if(1&e){var t=m.Sb();m.Pb(0),m.Rb(1,"div",2),m.Rb(2,"div",3),m.Rb(3,"p",4),m.Gc(4,"Envios Express."),m.Qb(),m.Rb(5,"p",5),m.Gc(6,"Llevaremos cualquier art\xedculo o paquete de un lugar a otro de la ciudad. "),m.Rb(7,"span",6),m.Gc(8,'Si deseas que compremos algo por ti, utiliza la opcion "Lo que quieras" \xf3 en los comercios afiliados.'),m.Qb(),m.Qb(),m.Mb(9,"hr"),m.Rb(10,"div"),m.Rb(11,"p",7),m.Gc(12,"Tipo de movilidad que requiere."),m.Qb(),m.Rb(13,"app-tipo-vehiculo",8),m.Zb("optionSelected",(function(e){return m.xc(t),m.dc().vehiculoSelected(e)})),m.Qb(),m.Qb(),m.Mb(14,"hr"),m.Rb(15,"div",9),m.Rb(16,"p",10),m.Gc(17,"Articulo o paquete."),m.Qb(),m.Rb(18,"app-comp-caja-texto",11),m.Zb("textChanged",(function(e){return m.xc(t),m.dc().textChanged(e)})),m.Qb(),m.Mb(19,"hr"),m.Rb(20,"div",12),m.Rb(21,"button",13),m.Zb("click",(function(){return m.xc(t),m.dc().goNext()})),m.Gc(22,"Listo, continuar"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(23,"div",14),m.Rb(24,"p"),m.Rb(25,"i",15),m.Zb("click",(function(){return m.xc(t),m.dc().goNext()})),m.Qb(),m.Gc(26," Envios Express"),m.Qb(),m.Mb(27,"hr"),m.Rb(28,"p",10),m.Gc(29,"De d\xf3nde lo recogemos?"),m.Qb(),m.Rb(30,"div",16),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogDireccion(0)})),m.Rb(31,"p",17),m.Rb(32,"strong",18),m.Gc(33),m.Qb(),m.Mb(34,"br"),m.Gc(35),m.Qb(),m.Rb(36,"p",19),m.Gc(37),m.Qb(),m.Ec(38,Na,2,1,"p",20),m.Qb(),m.Mb(39,"hr"),m.Rb(40,"p",10),m.Gc(41,"A d\xf3nde lo llevamos?"),m.Qb(),m.Rb(42,"div",16),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogDireccion(1)})),m.Rb(43,"p",17),m.Rb(44,"strong",18),m.Gc(45),m.Qb(),m.Mb(46,"br"),m.Gc(47),m.Qb(),m.Rb(48,"p",19),m.Gc(49),m.Qb(),m.Ec(50,Ha,2,1,"p",20),m.Qb(),m.Mb(51,"hr"),m.Rb(52,"div",21),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogTiempoEntrega()})),m.Rb(53,"div"),m.Rb(54,"p",10),m.Gc(55,"Cuando lo entregamos?"),m.Qb(),m.Rb(56,"p",22),m.Rb(57,"span",23),m.Gc(58),m.Rb(59,"strong"),m.Gc(60),m.ec(61,"titlecase"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(62,"div"),m.Mb(63,"i",24),m.Qb(),m.Qb(),m.Mb(64,"hr"),m.Rb(65,"div",16),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogMetodoPago()})),m.Rb(66,"div",25),m.Rb(67,"p",26),m.Gc(68,"Metodo de pago: "),m.Rb(69,"strong"),m.Gc(70),m.Qb(),m.Qb(),m.Rb(71,"button",27),m.Rb(72,"span",28),m.Gc(73,"Cambiar"),m.Qb(),m.Qb(),m.Qb(),m.Rb(74,"span",29),m.Gc(75,"Especifique un metodo de pago."),m.Qb(),m.Qb(),m.Mb(76,"hr"),m.Rb(77,"div",16),m.Zb("click",(function(){return m.xc(t),m.dc().openDialogsendSMS()})),m.Rb(78,"span",30),m.Gc(79,"Es necesario el numero de su telefono"),m.Qb(),m.Rb(80,"p",26),m.Gc(81,"Telefono contacto: "),m.Rb(82,"strong"),m.Gc(83),m.Qb(),m.Qb(),m.Rb(84,"span",29),m.Gc(85,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),m.Qb(),m.Qb(),m.Mb(86,"hr"),m.Mb(87,"br"),m.Rb(88,"div",31),m.Rb(89,"div",32),m.Gc(90,"Costo de entrega"),m.Qb(),m.Rb(91,"div",33),m.Ec(92,$a,1,0,"i",34),m.Gc(93),m.ec(94,"number"),m.Qb(),m.Qb(),m.Rb(95,"p",35),m.Gc(96,"Entrega sin contacto: cuando sea posible, seleccione pagar con Yape."),m.Qb(),m.Mb(97,"br"),m.Mb(98,"hr"),m.Rb(99,"div",12),m.Rb(100,"button",13),m.Zb("click",(function(){return m.xc(t),m.dc().enviarPedidoExpress()})),m.Ec(101,Ua,1,0,"i",36),m.Gc(102," Listo, Enviar. "),m.Qb(),m.Qb(),m.Mb(103,"br"),m.Mb(104,"br"),m.Qb(),m.Qb(),m.Ob()}if(2&e){var o=m.dc();m.zb(2),m.lc("hidden",o.isShowFinalize),m.zb(19),m.lc("disabled",!o.isFormValid),m.zb(2),m.lc("hidden",!o.isShowFinalize),m.zb(7),m.lc("matRippleColor",o.rippleColor),m.zb(2),m.lc("ngClass",m.qc(35,Za,""===o.direccionA.direccion)),m.zb(1),m.Hc(o.direccionA.titulo),m.zb(2),m.Ic(" ",o.direccionA.direccion,""),m.zb(2),m.Ic(" ",o.direccionA.referencia," "),m.zb(1),m.lc("ngIf",o.msjErrorDir.length>0),m.zb(4),m.lc("matRippleColor",o.rippleColor),m.zb(2),m.lc("ngClass",m.qc(37,Za,""===o.direccionB.direccion)),m.zb(1),m.Hc(o.direccionB.titulo),m.zb(2),m.Ic(" ",o.direccionB.direccion,""),m.zb(2),m.Ic(" ",o.direccionB.referencia," "),m.zb(1),m.lc("ngIf",o.msjErrorDir.length>0),m.zb(2),m.lc("matRippleColor",o.rippleColor),m.zb(5),m.lc("ngClass",m.qc(39,Za,!o.isTiempoEntregaValid)),m.zb(1),m.Ic(" ",o.tiempoEntregaSelected.descripcion,": "),m.zb(2),m.Ic("",m.fc(61,30,o.tiempoEntregaSelected.value)," "),m.zb(5),m.lc("matRippleColor",o.rippleColor),m.zb(5),m.Hc(o.metodoPagoSelected.descripcion),m.zb(4),m.lc("hidden",o.metodoPagoSelected.idtipo_pago),m.zb(3),m.lc("matRippleColor",o.rippleColor),m.zb(1),m.lc("hidden",o.infoToken.telefono.length>=5),m.zb(5),m.Hc(o.infoToken.telefono),m.zb(1),m.lc("hidden",o.infoToken.telefono.length>=5),m.zb(8),m.lc("ngIf",o.isCalculandoDistancia),m.zb(1),m.Ic(" S/. ",m.gc(94,32,o.importe_pagar,".2"),""),m.zb(7),m.lc("disabled",!o.isFormValidDos||o.isLoading),m.zb(1),m.lc("ngIf",o.isLoading)}}function Wa(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",40),m.Rb(1,"div",41),m.Mb(2,"i",42),m.Mb(3,"br"),m.Rb(4,"p",4),m.Gc(5," Pedido enviado. "),m.Qb(),m.Rb(6,"p",43),m.Gc(7,"Atenderemos su pedido lo mas pronto posible. Un repartidor se comunicara con usted para cumplir con su pedido."),m.Qb(),m.Mb(8,"hr"),m.Rb(9,"button",44),m.Zb("click",(function(){return m.xc(t),m.dc().goZona()})),m.Gc(10,"Listo"),m.Qb(),m.Qb(),m.Qb()}}var Ka,Ya=((Ka=function(){function e(i,t,o,n,a,s,r,c,l,d,u){_classCallCheck(this,e),this.infoTokenService=i,this.plazaDelivery=t,this.calcDistanceService=o,this.crudService=n,this.dialogDireccion=a,this.dialogTelefono=s,this.dialogTiempoEntrega=r,this.dialog=c,this.router=l,this.utilService=d,this.establecimientoService=u,this.lasCiudad="",this.importe_pagar=3,this.isLoading=!1,this.isEnviado=!1,this.isCalculandoDistancia=!1,this.isShowFinalize=!1,this.isTiempoEntregaValid=!0,this.systemOS="",this.msjErrorDir="",this.isFormValid=!1,this.isFormValidDos=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.systemOS=this.utilService.getOS(),this.msjErrorDir="",this.infoToken=this.infoTokenService.getInfoUs(),this.direccionClienteIni=new An.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(!1),this.datosFormUno={},this.datosFormUno.descripcion_paquete="",this.datosFormUno.telefono=this.infoToken.telefono,this.direccionA=this.direccionClienteIni,this.direccionB=this.direccionClienteIni,this.tiempoEntregaSelected=new gn.a,this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.getDatosSede()}},{key:"getTiempoEntrega",value:function(){var e=(new Date).getHours();if(this.laPlazaDelivery.options.s_hfin){var i=this.laPlazaDelivery.options.s_hfin.split(":")[0];this.isTiempoEntregaValid=e<=parseInt(i,0)}this.tiempoEntregaSelected.modificado?this.isTiempoEntregaValid=!0:this.isTiempoEntregaValid?(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value="10 a 15 Minutos",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,this.isTiempoEntregaValid=!0):(this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,this.isTiempoEntregaValid=!1)}},{key:"getDatosSede",value:function(){var e=this;if(this.direccionA.ciudad)return this.direccionA.ciudad===this.lasCiudad?(this.calcularDistanciaEntrega(),this.setDiasHoraEstablecimineto(),void this.getTiempoEntrega()):void this.plazaDelivery.loadDatosPlazaByCiudad(this.direccionA.ciudad).subscribe((function(i){e.laPlazaDelivery=i,e.lasCiudad=e.laPlazaDelivery.ciudad,e.laPlazaDelivery.latitude=e.laPlazaDelivery.centro.lat,e.laPlazaDelivery.longitude=e.laPlazaDelivery.centro.lon,e.calcularDistanciaEntrega(),e.setDiasHoraEstablecimineto(),e.getTiempoEntrega()}))}},{key:"setDiasHoraEstablecimineto",value:function(){this.laPlazaDelivery.hora_ini=this.laPlazaDelivery.options.s_hini,this.laPlazaDelivery.hora_fin=this.laPlazaDelivery.options.s_hfin,this.laPlazaDelivery.dias_atienden=this.laPlazaDelivery.options.s_dias,this.laPlazaDelivery.pwa_delivery_habilitar_pedido_programado=1,this.laPlazaDelivery.tiempo_aprox_entrega=this.laPlazaDelivery.options.s_tiempo_aprox,this.establecimientoService.set(this.laPlazaDelivery)}},{key:"vehiculoSelected",value:function(e){this.datosFormUno.vehiculo=e,this.validFormUno(),this.calcCostoServicio()}},{key:"textChanged",value:function(e){this.datosFormUno.descripcion_paquete=e,this.validFormUno()}},{key:"validFormUno",value:function(){this.isFormValid=this.datosFormUno.vehiculo&&""!==this.datosFormUno.descripcion_paquete}},{key:"validFormDos",value:function(){this.isFormValidDos=this.isFormValid,this.isFormValidDos=!!this.metodoPagoSelected.idtipo_pago&&this.isFormValidDos,this.isFormValidDos=!!this.direccionA.ciudad&&this.isFormValidDos,this.isFormValidDos=!!this.direccionB.ciudad&&this.isFormValidDos,this.isFormValidDos=this.datosFormUno.telefono.trim().length>=5&&this.isFormValidDos,this.isFormValidDos=this.isFormValidDos&&!this.isCalculandoDistancia}},{key:"openDialogMetodoPago",value:function(){var e=this,i=new S.e;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={importeTotalPagar:3},this.dialog.open(pn.a,i).afterClosed().subscribe((function(i){e.metodoPagoSelected=i,e.validFormDos()}))}},{key:"openDialogsendSMS",value:function(){var e=this,i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open(Bn.a,i).afterClosed().subscribe((function(i){i.verificado&&(e.infoToken.telefono=i.numberphone,e.infoTokenService.setTelefono(i.numberphone),e.datosFormUno.telefono=e.infoToken.telefono,e.validFormDos())}))}},{key:"openDialogTiempoEntrega",value:function(){var e=this,i=new S.e;i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTiempoEntrega.open(vn.a,i).afterClosed().subscribe((function(i){i&&(e.infoTokenService.setTiempoEntrega(i),e.tiempoEntregaSelected=i,e.isTiempoEntregaValid=!0)}))}},{key:"openDialogDireccion",value:function(e){var i=this,t=new S.e;t.disableClose=!0,t.hasBackdrop=!0,t.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],t.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0},this.dialogDireccion.open(mn.a,t).afterClosed().subscribe((function(t){t&&(i.msjErrorDir="",0===e?i.direccionA=t:i.direccionB=t,i.getDatosSede(),i.validFormDos())}))}},{key:"calcularDistanciaEntrega",value:function(){var e=this;if(this.direccionA.ciudad&&this.direccionB.ciudad){if(this.direccionA.ciudad.toLocaleLowerCase()!==this.direccionB.ciudad.toLocaleLowerCase())return this.direccionA.codigo=null,void(this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.");var i=this.laPlazaDelivery;i.latitude=this.direccionB.latitude,i.longitude=this.direccionB.longitude,this.isCalculandoDistancia=!0,this.validFormDos(),this.calcDistanceService.calculateRoute(this.direccionA,i,!1),setTimeout((function(){e.laPlazaDelivery=i,e.isCalculandoDistancia=!1,e.setDiasHoraEstablecimineto(),e.validFormDos(),e.calcCostoServicio()}),1600)}}},{key:"calcCostoServicio",value:function(){this.laPlazaDelivery&&(this.importe_pagar=this.laPlazaDelivery.options.costo_express+(this.laPlazaDelivery.c_servicio-this.laPlazaDelivery.c_minimo)+this.datosFormUno.vehiculo.costo_adicional)}},{key:"enviarPedidoExpress",value:function(){var e=this;try{this.isLoading=!0,this.isEnviado=!1,this.datosFormUno.importe_pagar=this.importe_pagar,this.datosFormUno.idcliente=this.infoToken.idcliente,this.datosFormUno.direccionA=this.direccionA,this.datosFormUno.direccionB=this.direccionB,this.datosFormUno.metodoPago=this.metodoPagoSelected,this.datosFormUno.tiempoEntrega=this.tiempoEntregaSelected,this.datosFormUno.ciudad=this.laPlazaDelivery.ciudad,this.datosFormUno.distancia_km=this.laPlazaDelivery.distancia_km,this.datosFormUno.distancia_mt=this.laPlazaDelivery.distancia_mt,this.datosFormUno.systemOS=this.systemOS,this.datosFormUno.is_express=1}catch(i){console.log(i)}this.crudService.postFree({dataInfo:this.datosFormUno},"delivery","set-pedido-mandado",!1).subscribe((function(i){setTimeout((function(){e.isLoading=!1,e.isEnviado=!0}),1500)}))}},{key:"goZona",value:function(){this.router.navigate(["./zona-delivery/establecimientos"])}},{key:"goNext",value:function(){this.isShowFinalize=!this.isShowFinalize,document.getElementById("contentmaster").scrollTop=0}}]),e}()).\u0275fac=function(e){return new(e||Ka)(m.Lb(b.a),m.Lb(Ma.a),m.Lb(Ue.a),m.Lb(P.a),m.Lb(S.b),m.Lb(S.b),m.Lb(S.b),m.Lb(S.b),m.Lb(ui.d),m.Lb(_.a),m.Lb(u.a))},Ka.\u0275cmp=m.Fb({type:Ka,selectors:[["app-comp-pide-express"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["pedidoEnviado",""],[1,"p-4","div-content"],[1,"animated","fadeInUp",3,"hidden"],[1,"fs-18"],[1,"fw-100","fs-14"],[1,"text-secondary","fs-12"],[1,"fs-16"],[3,"optionSelected"],["id","div-1"],[1,"fs-16","pb-2"],["placeholder_txt","Que articulo o paquete te gustaria enviar?",3,"textChanged"],[1,"text-center","w-100"],["mat-raised-button","","color","primary",1,"w-50",3,"disabled","click"],["id","div-2 animated fadeIn",3,"hidden"],[1,"fa","fa-arrow-left","pr-2",3,"click"],["matRipple","",1,"m-0",3,"matRippleColor","click"],[1,"fs-13"],[3,"ngClass"],[1,"fs-12","text-secondary","fw-600"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],["matRipple","",1,"d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14",3,"ngClass"],["aria-hidden","true",1,"fa","fa-caret-down"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-0","fs-16"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],[1,"fw-100","fs-12","text-danger",3,"hidden"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"d-flex","justify-content-between"],[1,"fs-17","fw-600"],[1,"fs-18","fw-600","text-right"],["class","fa fa-spinner fa-spin fa-fw",4,"ngIf"],[1,"fs-12","fw-100","text-secondary"],["class","fa fa-spinner fa-spin fa-fw mr-2",4,"ngIf"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-spinner","fa-spin","fa-fw","mr-2"],[1,"p-3","m-0","d-flex","align-items-center","div-enviado"],[1,"div-listo"],[1,"fa","fa-check","fa-3x","text-success"],[1,"fs-12","text-secondary"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,i){if(1&e&&(m.Ec(0,Ja,105,41,"ng-container",0),m.Ec(1,Wa,11,0,"ng-template",null,1,m.Fc)),2&e){var t=m.uc(2);m.lc("ngIf",!i.isEnviado)("ngIfElse",t)}},directives:[o.t,za,Ia.a,y.b,T.n,o.q],pipes:[o.F,o.g],styles:["p[_ngcontent-%COMP%]{margin:0}.div-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.div-enviado[_ngcontent-%COMP%]{text-align:center;height:80vh;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.div-listo[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:5px}"]}),Ka),Xa=t("DXvS"),es=t("DYek"),is=t("Bq5b"),ts=t("qmRn"),os=function e(){_classCallCheck(this,e)};function ns(e,i){if(1&e&&(m.Rb(0,"span",11),m.Gc(1),m.Qb()),2&e){var t=m.dc();m.zb(1),m.Ic(" M\xe1ximo hasta las ",t.parametros.hora_max," ")}}var as,ss,rs=function(e){return{"text-danger":e}},cs=((ss=function(){function e(){_classCallCheck(this,e),this.changeHora=new m.n,this.isHourValid=!1,this.setHoraControl={h:0,m:0,ap:"AM"},this.hora=new Date,this.hora_show="",this.hora_min="00:00 am",this.hora_max="23:59 pm",this.selectedAP="AM"}return _createClass(e,[{key:"ngOnInit",value:function(){this.hora_min=this.getHoraShow(0),this.hora_show=this.getHoraShow(this.parametros.addMin),this.parametros.showHoraMinMax&&(this.hora_min=this.parametros.hora_min),this.setearHoraControl(this.hora_show),this.responseHora()}},{key:"getHoraShow",value:function(e){this.hora.setMinutes(this.hora.getHours()+e);var i=this.hora.getHours()>=12?"PM":"AM";return"".concat(this.hora.getHours(),":").concat(this.hora.getMinutes()," ").concat(i)}},{key:"setearHoraControl",value:function(e){var i=e.split(":"),t=i[1].split(" ");this.setHoraControl.h=i[0],this.setHoraControl.m=t[0],this.setHoraControl.ap=t[1]}},{key:"getAmPm",value:function(e){var i=parseInt(e.split(":")[0],0);return"".concat(e," ").concat(i>=12?"PM":"AM")}},{key:"responseHora",value:function(){console.log("aa");var e=this.setHoraControl.h;"pm"===this.setHoraControl.ap.toLocaleLowerCase()&&(e=e<12?12+e:e);var i="".concat(this.setHoraControl.h,":").concat(this.setHoraControl.m," ").concat(this.setHoraControl.ap);this.isHourValid=this.getHourSelectedIsValid("".concat(e,":").concat(this.setHoraControl.m," ").concat(this.setHoraControl.ap)),i=this.isHourValid?i:"",this.changeHora.emit(i)}},{key:"changeAm",value:function(e){}},{key:"getHoraPmFormat12",value:function(e){var i=e.split(":")[0];this.hora_show=i+":00 PM"}},{key:"getHourSelectedIsValid",value:function(e){return""!==e&&parseInt(this.parametros.hora_max.split(":")[0],0)>parseInt(e.split(":")[0],0)}}]),e}()).\u0275fac=function(e){return new(e||ss)},ss.\u0275cmp=m.Fb({type:ss,selectors:[["app-comp-get-hora"]],inputs:{parametros:"parametros"},outputs:{changeHora:"changeHora"},decls:16,vars:8,consts:[["matRipple",""],[1,"text-secondary",3,"ngClass"],[1,"d-flex"],[1,"text-center","DivHora"],["type","number","matInput","","placeholder","Hora","max","12","maxlength","2","name","h",3,"ngModel","ngModelChange","keyup"],["type","number","matInput","","placeholder","Min","max","60","maxlength","2","name","m",3,"ngModel","ngModelChange","keyup"],[1,"DivHora","text-center"],["name","ap",3,"ngModel","ngModelChange","selectionChange"],["value","AM"],["value","PM"],["class","text-info fs-12 fw-100",4,"ngIf"],[1,"text-info","fs-12","fw-100"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Rb(1,"p",1),m.Gc(2),m.Qb(),m.Rb(3,"div",2),m.Rb(4,"mat-form-field",3),m.Rb(5,"input",4),m.Zb("ngModelChange",(function(e){return i.setHoraControl.h=e}))("keyup",(function(){return i.responseHora()})),m.Qb(),m.Qb(),m.Rb(6,"mat-form-field",3),m.Rb(7,"input",5),m.Zb("ngModelChange",(function(e){return i.setHoraControl.m=e}))("keyup",(function(){return i.responseHora()})),m.Qb(),m.Qb(),m.Rb(8,"mat-form-field",6),m.Rb(9,"mat-select",7),m.Zb("ngModelChange",(function(e){return i.setHoraControl.ap=e}))("selectionChange",(function(){return i.responseHora()})),m.Rb(10,"mat-option",8),m.Gc(11,"AM"),m.Qb(),m.Rb(12,"mat-option",9),m.Gc(13,"PM"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Ec(14,ns,2,1,"span",10),m.Mb(15,"br"),m.Qb()),2&e&&(m.zb(1),m.lc("ngClass",m.qc(6,rs,!i.isHourValid)),m.zb(1),m.Hc(i.parametros.titulo),m.zb(3),m.lc("ngModel",i.setHoraControl.h),m.zb(2),m.lc("ngModel",i.setHoraControl.m),m.zb(2),m.lc("ngModel",i.setHoraControl.ap),m.zb(5),m.lc("ngIf",i.parametros.showHoraMinMax&&!i.isHourValid))},directives:[T.n,o.q,I.c,n.v,ke.a,n.c,n.k,n.p,n.s,M.a,T.i,o.t],styles:["p[_ngcontent-%COMP%]{margin:0}.DivHora[_ngcontent-%COMP%]{max-width:60px}.top-1[_ngcontent-%COMP%]{top:-1px}"]}),ss),ls=((as=function(){function e(i,t,o){_classCallCheck(this,e),this.infoToken=i,this.miPedidoService=t,this.establecimientoService=o,this.dataReserva=new m.n,this.isReady=new m.n,this.frmConfirma={},this.opcionesFrmCliente=new ts.a,this.compHoraParams=new os,this.isFormValid=!1,this.countTotalItemsPedido=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.infoEstablecimineto=this.establecimientoService.get(),this.opcionesFrmCliente.showDirreccionA=!1,this.opcionesFrmCliente.telefono=!0,this.opcionesFrmCliente.calDistanciaCentro=!1,this.opcionesFrmCliente.tituloDirA="",this.compHoraParams.titulo="Hora de llegada",this.compHoraParams.tituloHora="Indique aqui la hora",this.compHoraParams.addMin=30,this.compHoraParams.hora_min=this.infoEstablecimineto.hora_ini,this.compHoraParams.hora_max=this.infoEstablecimineto.hora_fin,this.compHoraParams.showHoraMinMax=!0,this.isFormValid=!!this.infoToken.infoUsToken.telefono,this.frmConfirma={nombre_reserva:this.infoToken.infoUsToken.nombres,empresa:"",referencia:"",telefono:this.infoToken.infoUsToken.telefono,hora_reserva:"",num_personas:0,reserva:!0,solo_llevar:!1,delivery:!1},this.miPedidoService.countItemsObserve$.subscribe((function(i){e.countTotalItemsPedido=i,e.frmConfirma.num_personas=e.countTotalItemsPedido,e.emitData()}))}},{key:"frmClienteResponse",value:function(e){this.frmConfirma.telefono=e.telefono,this.isFormValid=!!e.telefono,this.emitData()}},{key:"setHora",value:function(e){this.isFormValid=""!==e,this.frmConfirma.hora_reserva=e,this.emitData()}},{key:"emitData",value:function(){this.dataReserva.emit({formIsValid:this.isFormValid,formData:this.frmConfirma,fromReserva:!0}),this.isReady.emit(this.isFormValid)}}]),e}()).\u0275fac=function(e){return new(e||as)(m.Lb(b.a),m.Lb(s.a),m.Lb(u.a))},as.\u0275cmp=m.Fb({type:as,selectors:[["app-comp-datos-reserva"]],outputs:{dataReserva:"dataReserva",isReady:"isReady"},decls:18,vars:5,consts:[[1,"w-100"],[1,"w-100","text-center"],["readonly","","matInput","","placeholder","Reserva a nombre de:","name","nombre_reserva",3,"ngModel","ngModelChange"],["matInput","","placeholder","(Opcional) Empresa o Institucion:","name","empresa",3,"ngModel","ngModelChange","keyup"],["type","number","matInput","","placeholder","Numero de personas:","name","num_personas",3,"ngModel","ngModelChange","keyup"],[1,"w-100","d-flex","justify-content-center"],[3,"parametros","changeHora"],[1,"fs-12",3,"opciones","frmResponse"]],template:function(e,i){1&e&&(m.Rb(0,"div"),m.Rb(1,"h5"),m.Gc(2,"Datos de la Reserva"),m.Qb(),m.Mb(3,"hr"),m.Rb(4,"div",0),m.Rb(5,"mat-form-field",1),m.Rb(6,"input",2),m.Zb("ngModelChange",(function(e){return i.frmConfirma.nombre_reserva=e})),m.Qb(),m.Qb(),m.Qb(),m.Rb(7,"div",0),m.Rb(8,"mat-form-field",1),m.Rb(9,"input",3),m.Zb("ngModelChange",(function(e){return i.frmConfirma.empresa=e}))("keyup",(function(){return i.emitData()})),m.Qb(),m.Qb(),m.Qb(),m.Rb(10,"div",0),m.Rb(11,"mat-form-field",1),m.Rb(12,"input",4),m.Zb("ngModelChange",(function(e){return i.frmConfirma.num_personas=e}))("keyup",(function(){return i.emitData()})),m.Qb(),m.Qb(),m.Qb(),m.Rb(13,"div",5),m.Rb(14,"app-comp-get-hora",6),m.Zb("changeHora",(function(e){return i.setHora(e)})),m.Qb(),m.Qb(),m.Mb(15,"hr"),m.Rb(16,"app-comp-get-datos-cliente",7),m.Zb("frmResponse",(function(e){return i.frmClienteResponse(e)})),m.Qb(),m.Mb(17,"hr"),m.Qb()),2&e&&(m.zb(6),m.lc("ngModel",i.frmConfirma.nombre_reserva),m.zb(3),m.lc("ngModel",i.frmConfirma.empresa),m.zb(3),m.lc("ngModel",i.frmConfirma.num_personas),m.zb(2),m.lc("parametros",i.compHoraParams),m.zb(2),m.lc("opciones",i.opcionesFrmCliente))},directives:[I.c,ke.a,n.c,n.p,n.s,n.v,cs,Xa.a],styles:[""]}),as);function ds(e,i){if(1&e&&(m.Rb(0,"div",11),m.Rb(1,"span",12),m.Gc(2),m.Qb(),m.Rb(3,"span",12),m.Gc(4),m.Qb(),m.Qb()),2&e){var t=m.dc().$implicit,o=m.dc();m.zb(1),m.lc("hidden",o.isDeliveryCliente),m.zb(1),m.Hc(t.descripcion),m.zb(1),m.lc("hidden",!o.isDeliveryCliente),m.zb(1),m.Hc(t.descripcion)}}var us=function(e){return{"pl-4":e}};function bs(e,i){if(1&e&&(m.Rb(0,"li",26),m.Rb(1,"div",27),m.Rb(2,"span",28),m.Gc(3),m.ec(4,"number"),m.Qb(),m.Gc(5),m.Qb(),m.Qb()),2&e){var t=i.$implicit,o=m.dc(6);m.lc("matRippleColor",o.rippleColorSubItem),m.zb(1),m.lc("ngClass",m.qc(7,us,o.isHayCuentaBusqueda)),m.zb(2),m.Hc(m.gc(4,4,t.cantidad_seleccionada,"2.")),m.zb(2),m.Ic(" ",t.des," ")}}function ms(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"div"),m.Rb(2,"ul",24),m.Ec(3,bs,6,9,"li",25),m.Qb(),m.Qb(),m.Ob()),2&e){var t=m.dc().$implicit;m.zb(3),m.lc("ngForOf",t.subitems_view)}}function ps(e,i){if(1&e){var t=m.Sb();m.Rb(0,"div",18),m.Rb(1,"div",19),m.Rb(2,"div",20),m.Zb("click",(function(){m.xc(t);var e=i.$implicit,o=m.dc(2).$implicit;return m.dc(2).openDlgItemToResumen(o,e)})),m.Rb(3,"p",21),m.Gc(4),m.ec(5,"titlecase"),m.Rb(6,"span",12),m.Gc(7),m.Qb(),m.Qb(),m.Ec(8,ms,4,1,"ng-container",14),m.Rb(9,"p",22),m.Gc(10),m.ec(11,"number"),m.Qb(),m.Qb(),m.Rb(12,"div"),m.Rb(13,"app-comp-ctrl-add-fast",23),m.Zb("objResponse",(function(e){m.xc(t);var i=m.dc(2).$implicit,o=m.dc().$implicit;return m.dc().resultCantItemMercado(e,o,i)})),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var o=i.$implicit,n=m.dc(4);m.zb(4),m.Ic(" ",m.fc(5,10,o.des)," "),m.zb(2),m.lc("hidden",!o.indicaciones),m.zb(1),m.Ic("( ",o.indicaciones," )"),m.zb(1),m.lc("ngIf",o.subitems_view),m.zb(2),m.Jc("",n.simbolo_moneda," ",m.gc(11,12,o.precio_print,"0.2"),""),m.zb(3),m.lc("objItem",o)("cantidad_show",o.cantidad_seleccionada)("comprimir",!1)("limitAdd",o.cantidad)}}function fs(e,i){if(1&e&&(m.Pb(0),m.Rb(1,"div",15),m.Rb(2,"span",16),m.Gc(3),m.ec(4,"titlecase"),m.Qb(),m.Qb(),m.Ec(5,ps,14,15,"div",17),m.Ob()),2&e){var t=m.dc().$implicit;m.zb(3),m.Hc(m.fc(4,2,t.des)),m.zb(2),m.lc("ngForOf",t.items)}}function hs(e,i){if(1&e&&(m.Rb(0,"div",13),m.Ec(1,fs,6,4,"ng-container",14),m.Qb()),2&e){var t=i.$implicit;m.zb(1),m.lc("ngIf",t.count_items>0)}}function gs(e,i){if(1&e&&(m.Rb(0,"div"),m.Rb(1,"div",8),m.Ec(2,ds,5,4,"div",9),m.Ec(3,hs,2,1,"div",10),m.Qb(),m.Qb()),2&e){var t=i.$implicit,o=m.dc();m.zb(2),m.lc("ngIf",!o.isDeliveryCliente),m.zb(1),m.lc("ngForOf",t.secciones)}}function vs(e,i){if(1&e&&m.Mb(0,"img",36),2&e){var t=m.dc().$implicit;m.nc("src","../assets/images/",t.icon,"",m.yc),m.mc("matTooltip",t.motivo)}}function Cs(e,i){if(1&e&&(m.Rb(0,"div",34),m.Ec(1,vs,1,2,"img",35),m.Qb()),2&e){var t=i.$implicit;m.zb(1),m.lc("ngIf",t.visible)}}function Ss(e,i){if(1&e&&(m.Pb(0,32),m.Ec(1,Cs,2,1,"div",33),m.Ob()),2&e){var t=m.dc(2);m.zb(1),m.lc("ngForOf",t.listIconsEntrega)}}function ys(e,i){if(1&e&&(m.Rb(0,"li",29),m.Rb(1,"div",30),m.Gc(2),m.ec(3,"titlecase"),m.Ec(4,Ss,2,1,"ng-container",31),m.Qb(),m.Rb(5,"div"),m.Gc(6),m.ec(7,"number"),m.Qb(),m.Qb()),2&e){var t=i.$implicit;m.zb(2),m.Ic(" ",m.fc(3,3,t.descripcion)," "),m.zb(2),m.lc("ngIf",t.isDeliveryApp),m.zb(2),m.Hc(m.gc(7,5,t.importe,"0.2"))}}var ks,xs,_s=((xs=function(){function e(i,t,o,n,a){_classCallCheck(this,e),this.miPedidoService=i,this.infoToken=t,this.dialog=o,this.navigatorService=n,this.establecimientoService=a,this.miPedido=new oi.a,this.objNewItemTiposConsumo=[],this.destroy$=new Se.Subject,this.listIconsEntrega=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.isDeliveryCliente=this.infoToken.isDelivery(),this.miPedido=this.miPedidoService.getMiPedido(),this.simbolo_moneda=this.establecimientoService.getSimboloMoneda();var i=this.establecimientoService.get();try{this.listIconsEntrega=JSON.parse(JSON.stringify(i.icons_entrega))}catch(t){this.listIconsEntrega=[]}this.miPedidoService.miPedidoObserver$.pipe(Object(li.a)(this.destroy$)).subscribe((function(i){e.miPedido=i}))}},{key:"ngAfterViewInit",value:function(){setTimeout((function(){}),500)}},{key:"resultCantItemMercado",value:function(e,i,t){this.objNewItemTiposConsumo=[];var o=this.miPedidoService.findItemCarta(e);this.objItemTipoConsumoSelected=o.itemtiposconsumo,this.miPedidoService.setObjSeccionSeleced(t),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),e.itemtiposconsumo=this.objItemTipoConsumoSelected;var n=this.objItemTipoConsumoSelected.filter((function(e){return e.idtipo_consumo===i.idtipo_consumo}))[0],a=e.isSuma_selected?0:1;e.cantidad=e.cantidad?e.cantidad:NaN,o.cantidad=this.getCantidadItemCarta(e),this.miPedidoService.addItem2(n,o,a)}},{key:"openDlgItemToResumen",value:function(e,i){var t=new S.e,o=this.miPedidoService.findItemCarta(i);t.autoFocus=!1,t.data={idTpcItemResumenSelect:null,seccion:e,item:o,objItemTipoConsumoSelected:o.itemtiposconsumo},t.panelClass=["my-dialog-orden-detalle","margen-0","margen-0"],this.dialog.open(He,t).afterClosed().subscribe((function(e){}))}},{key:"getCantidadItemCarta",value:function(e){return parseInt(this.miPedidoService.findItemCarta(e).cantidad.toString(),0)}},{key:"goBackCarta",value:function(){this.navigatorService.setPageActive("carta")}}]),e}()).\u0275fac=function(e){return new(e||xs)(m.Lb(s.a),m.Lb(b.a),m.Lb(S.b),m.Lb(r.a),m.Lb(u.a))},xs.\u0275cmp=m.Fb({type:xs,selectors:[["app-comp-list-item-pedido-cliente"]],inputs:{arrSubtotales:"arrSubtotales"},decls:10,vars:2,consts:[[1,"p-3","div-content-list"],[1,"d-flex","justify-content-between","mb-2"],[1,"fw-600","fs-17"],[1,"fa","fa-arrow-left","mr-2",3,"click"],[4,"ngFor","ngForOf"],[1,"div-tp-consumo","mt-3","mb-5"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item",4,"ngFor","ngForOf"],[1,"div-tp-consumo"],["class","div-plr titulo-tpc",4,"ngIf"],["let","i=index","class","secciones",4,"ngFor","ngForOf"],[1,"div-plr","titulo-tpc"],[3,"hidden"],["let","i=index",1,"secciones"],[4,"ngIf"],[1,"div-plr","titulo-seccion"],[1,"fs-13"],["class","div-seccion","matRipple","",4,"ngFor","ngForOf"],["matRipple","",1,"div-seccion"],[1,"item"],[1,"seccion-item",3,"click"],[1,"fs-14"],[1,"fw-600","fs-14"],[1,"div-control-add-fast",3,"objItem","cantidad_show","comprimir","limitAdd","objResponse"],[1,"w-100","m-0","ml-2"],["class","d-flex div-plr li-item fw-100 fs-13 text-secondary subitem-content-resumen","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"d-flex","div-plr","li-item","fw-100","fs-13","text-secondary","subitem-content-resumen",3,"matRippleColor"],[1,"d-flex","w-100","sub-item",3,"ngClass"],[1,"fw-600","mr-1"],[1,"d-flex","div-plr","li-item"],[1,"w-100"],["class","d-flex",4,"ngIf"],[1,"d-flex"],["class","d-inline",4,"ngFor","ngForOf"],[1,"d-inline"],["class","img-ico-entrega pl-2 text-secondary","alt","itemIcon.motivo",3,"src","matTooltip",4,"ngIf"],["alt","itemIcon.motivo",1,"img-ico-entrega","pl-2","text-secondary",3,"src","matTooltip"]],template:function(e,i){1&e&&(m.Rb(0,"div",0),m.Rb(1,"div",1),m.Rb(2,"div"),m.Rb(3,"span",2),m.Gc(4,"Mi Pedido"),m.Qb(),m.Qb(),m.Rb(5,"i",3),m.Zb("click",(function(){return i.goBackCarta()})),m.Qb(),m.Qb(),m.Ec(6,gs,4,2,"div",4),m.Rb(7,"div",5),m.Rb(8,"ul",6),m.Ec(9,ys,8,8,"li",7),m.Qb(),m.Qb(),m.Qb()),2&e&&(m.zb(6),m.lc("ngForOf",i.miPedido.tipoconsumo),m.zb(3),m.lc("ngForOf",i.arrSubtotales))},directives:[o.s,o.t,T.n,xe.a,o.q,R.b],pipes:[o.F,o.g],styles:[".div-content-list[_ngcontent-%COMP%]{background:#eee}.div-tp-consumo[_ngcontent-%COMP%]{border-radius:5px;background:#fff;box-shadow:0 0 5px 0 rgb(193 193 193)}.titulo-tpc[_ngcontent-%COMP%]{background:#bdbdbd;padding:5px;border-radius:5px 5px 0 0}.titulo-seccion[_ngcontent-%COMP%]{background:#d1d1d1;padding:5px}.div-border-titulo[_ngcontent-%COMP%]{border-radius:5px 5px 0 0}.div-seccion[_ngcontent-%COMP%]{padding:5px;border-bottom:1px solid #e0e0e0}.div-seccion[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.sub-item[_ngcontent-%COMP%]{padding:5px;background:#faebd7;border-radius:5px}.seccion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.ul-total[_ngcontent-%COMP%]{padding:5px;font-size:14px}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800;border-bottom:0}.img-ico-entrega[_ngcontent-%COMP%]{height:22px}"]}),xs),Rs=((ks=function e(){_classCallCheck(this,e)}).\u0275mod=m.Jb({type:ks}),ks.\u0275inj=m.Ib({factory:function(e){return new(e||ks)},imports:[[o.c,n.j,Go,Vo.a,a.a]]}),ks);m.zc(st,[o.q,o.r,o.s,o.t,o.A,o.w,o.x,o.y,o.z,o.u,o.v,n.F,n.u,n.E,n.c,n.v,n.y,n.a,n.B,n.C,n.x,n.p,n.q,n.A,n.l,n.k,n.w,n.b,n.d,n.s,n.t,n.r,ui.i,ui.e,ui.g,ui.f,ui.k,y.b,y.a,Ko.b,T.n,Yo.a,Xo.b,Xo.c,I.b,I.c,I.f,I.g,I.h,I.i,I.j,ke.a,ke.c,fe.c,fe.d,fe.a,fe.f,fe.e,fe.b,f.a,Y.a,Y.c,S.f,S.d,S.j,S.g,S.c,w.a,w.c,en.b,tn.a,tn.j,tn.b,tn.d,tn.e,tn.h,tn.i,tn.c,tn.f,on.a,on.c,on.d,on.g,on.h,on.f,on.e,nn.a,nn.f,nn.n,nn.d,nn.m,nn.l,nn.b,nn.e,nn.k,nn.i,nn.h,nn.g,nn.o,nn.c,an.b,an.a,R.b,R.d,sn.a,rn.a,rn.b,rn.c,rn.d,rn.e,rn.f,cn.a,T.i,T.h,cn.d,cn.c,M.a,M.c,ln.a,ln.h,ln.d,ln.b,T.f,ln.c,ln.g,T.l,ln.i,ln.f,dn.a,un.c,un.a,pe,C,bn.a,Ln,Re,jn.a,Gn.a,Vn.a,ya,pn.a,Bn.a,Hn,ea,ka.a,xa.a,_a.a,Ra.a,mn.a,vn.a,Pa.a,wa.a,Ia.a,qa,Ya,za,xe.a,Xa.a,es.a,is.a,ls,cs,ei,_s,Wn,V,oe,to,ht,B,Mo,Fo,Kt,st,fo,Lo,k,Wo,He,Ho],[o.b,o.G,o.p,o.k,o.E,o.g,o.C,o.F,o.d,o.f,o.i,o.j,o.l])},nzqU:function(e,i,t){"use strict";i.isScheduler=function(e){return e&&"function"==typeof e.schedule}},q3Kh:function(e,i,t){"use strict";var o,n=this&&this.__extends||(o=function(e,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])})(e,i)},function(e,i){function t(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t)}),a=t("FWf1");i.map=function(e,i){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new s(e,i))}};var s=function(){function e(e,i){this.project=e,this.thisArg=i}return e.prototype.call=function(e,i){return i.subscribe(new r(e,this.project,this.thisArg))},e}();i.MapOperator=s;var r=function(e){function i(i,t,o){var n=e.call(this,i)||this;return n.project=t,n.count=0,n.thisArg=o||n,n}return n(i,e),i.prototype._next=function(e){var i;try{i=this.project.call(this.thisArg,e,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(i)},i}(a.Subscriber)},vLqr:function(e,i,t){"use strict";var o=t("Q1FS");function n(e){e.subscriber.error(e.error)}i.throwError=function(e,i){return new o.Observable(i?function(t){return i.schedule(n,0,{error:e,subscriber:t})}:function(i){return i.error(e)})}},xKqS:function(e,i,t){"use strict";var o,n=t("aJGj"),a=t("I65S"),s=t("vLqr");i.NotificationKind=((o=i.NotificationKind||{}).NEXT="N",o.ERROR="E",o.COMPLETE="C",o),i.Notification=function(){function e(e,i,t){this.kind=e,this.value=i,this.error=t,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,i,t){switch(this.kind){case"N":return e&&e(this.value);case"E":return i&&i(this.error);case"C":return t&&t()}},e.prototype.accept=function(e,i,t){return e&&"function"==typeof e.next?this.observe(e):this.do(e,i,t)},e.prototype.toObservable=function(){switch(this.kind){case"N":return a.of(this.value);case"E":return s.throwError(this.error);case"C":return n.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(i){return void 0!==i?new e("N",i):e.undefinedValueNotification},e.createError=function(i){return new e("E",void 0,i)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},zzsZ:function(e,i,t){"use strict";var o=t("Q1FS"),n=t("OAkW"),a=t("2qMH");i.fromArray=function(e,i){return i?a.scheduleArray(e,i):new o.Observable(n.subscribeToArray(e))}}}]);