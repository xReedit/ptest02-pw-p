!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3jVI":function(t,i,r){"use strict";r.d(i,"a",(function(){return c}));var o=r("fXoL"),s=r("ofXK");function a(e,t){if(1&e){var n=o.Rb();o.Qb(0,"div"),o.Qb(1,"div",1),o.Yb("click",(function(){o.wc(n);var e=t.$implicit;return o.cc().xNextPregunta(e)})),o.Qb(2,"div",2),o.Lb(3,"img",3),o.Qb(4,"span"),o.Hc(5),o.Pb(),o.Pb(),o.Pb(),o.Pb()}if(2&e){var i=t.$implicit;o.zb(3),o.mc("src","assets/images/encuesta-img/",i.img,"",o.xc),o.zb(2),o.Ic(i.descripcion)}}var c=function(){var t=function(){function t(){e(this,t),this.NextPregunta=new o.n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"xNextPregunta",value:function(e){var t=this;setTimeout((function(){t.NextPregunta.emit(e)}),300)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Eb({type:t,selectors:[["app-encuesta-opcion"]],inputs:{ListOption:"ListOption"},outputs:{NextPregunta:"NextPregunta"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"divBtn","text-center",3,"click"],[1,"op"],["alt","btnOption",1,"btnIco",3,"src"]],template:function(e,t){1&e&&o.Fc(0,a,6,2,"div",0),2&e&&o.kc("ngForOf",t.ListOption)},directives:[s.s],styles:[".btnIco[_ngcontent-%COMP%]{opacity:.7;padding:10px;cursor:pointer;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.btnIco[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:1}.divBtn[_ngcontent-%COMP%]{display:grid}.divBtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.op[_ngcontent-%COMP%]{text-align:center;line-height:1}.op[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65px}"]}),t}()},Bq5b:function(t,i,r){"use strict";r.d(i,"a",(function(){return l}));var o=r("fXoL"),s=r("+lji"),a=r("ofXK"),c=r("FKr1");function u(e,t){if(1&e){var n=o.Rb();o.Qb(0,"div",2),o.Qb(1,"div",3),o.Yb("click",(function(){o.wc(n);var e=t.$implicit;return o.cc().selectedCiudad(e)})),o.Qb(2,"span"),o.Hc(3),o.Pb(),o.Qb(4,"span"),o.Lb(5,"i",4),o.Pb(),o.Pb(),o.Pb()}if(2&e){var i=t.$implicit;o.zb(3),o.Jc(" ",i.ciudad,"")}}var l=function(){var t=function(){function t(n){e(this,t),this.crudService=n,this.cuidadSelected=new o.n}return n(t,[{key:"ngOnInit",value:function(){this.loadCiudades()}},{key:"loadCiudades",value:function(){var e=this;this.crudService.getAll("delivery","get-ciudades-delivery",!1,!1,!1).subscribe((function(t){console.log("res",t),e.listCiudadesServicio=t.data,e.isOnlyReserva&&(e.listCiudadesServicio=e.listCiudadesServicio.filter((function(e){return 1===e.isreserva})))}))}},{key:"selectedCiudad",value:function(e){this.cuidadSelected.emit(e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Kb(s.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-select-ciudad-delivery"]],inputs:{isOnlyReserva:"isOnlyReserva"},outputs:{cuidadSelected:"cuidadSelected"},decls:2,vars:1,consts:[[1,"p-2"],["class","pb-2 border-bottom",4,"ngFor","ngForOf"],[1,"pb-2","border-bottom"],["matRipple","",1,"d-flex","justify-content-between","p-2","align-items-center",3,"click"],[1,"fa","fa-arrow-right"]],template:function(e,t){1&e&&(o.Qb(0,"div",0),o.Fc(1,u,6,1,"div",1),o.Pb()),2&e&&(o.zb(1),o.kc("ngForOf",t.listCiudadesServicio))},directives:[a.s,c.o],styles:[""]}),t}()},FDOz:function(t,i,r){"use strict";r.d(i,"a",(function(){return P})),r.d(i,"b",(function(){return p}));var o=r("fXoL"),s=r("tyNb"),a=r("EY2u"),c=[],u=function(){var t=function(){function t(n){e(this,t),this.router=n,this.trees=c}return n(t,[{key:"add",value:function(e){this.trees.push(e)}},{key:"shouldPrefetch",value:function(e){var t=this.router.parseUrl(e);return this.trees.some(l.bind(null,t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ub(s.d))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac}),t}();function l(e,t){return function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return t[n]===e[n]}))}(t.queryParams,e.queryParams)&&function e(t,n,i){if(t.segments.length>i.length)return!!d(t.segments.slice(0,i.length),i)&&!n.hasChildren();if(t.segments.length===i.length){if(!d(t.segments,i))return!1;if(!n.hasChildren())return!0;for(var r in n.children){if(!t.children[r])break;if(e(t.children[r],n.children[r],n.children[r].segments))return!0}return!1}var o=i.slice(0,t.segments.length),a=i.slice(t.segments.length);return!!d(t.segments,o)&&!!t.children[s.c]&&e(t.children[s.c],n,a)}(t.root,e.root,e.root.segments)}function d(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path||e.path.startsWith(":")||t[n].path.startsWith(":")}))}var f="undefined"!=typeof window?window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)}:function(){},h=function(){return"undefined"!=typeof window&&!!window.IntersectionObserver},v=new o.q("LinkHandler"),b=function(){var t=function(){function t(n,i,r){var o=this;e(this,t),this.loader=n,this.registry=i,this.ngZone=r,this.elementLink=new Map,this.observer=h()?new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=e.target,n=o.elementLink.get(t);if(!n||!n.urlTree)return;o.registry.add(n.urlTree),o.observer.unobserve(t),f((function(){o.loader.preload().subscribe((function(){}))}))}}))})):null}return n(t,[{key:"register",value:function(e){var t=this;this.elementLink.set(e.element,e),this.ngZone.runOutsideAngular((function(){t.observer.observe(e.element)}))}},{key:"unregister",value:function(e){this.elementLink.has(e.element)&&(this.observer.unobserve(e.element),this.elementLink.delete(e.element))}},{key:"supported",value:function(){return h()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ub(s.j),o.Ub(u),o.Ub(o.z))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac}),t}(),g=function(){var t=function(){function t(n,i){e(this,t),this.loader=n,this.registry=i}return n(t,[{key:"register",value:function(e){var t=this;this.registry.add(e.urlTree),f((function(){return t.loader.preload().subscribe((function(){}))}))}},{key:"unregister",value:function(e){}},{key:"supported",value:function(){return!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ub(s.j),o.Ub(u))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac}),t}(),p=function(){var t=function(){function t(n,i,r,o){e(this,t),this.linkHandlers=n,this.el=i,this.linkHandler=this.linkHandlers.filter((function(e){return e.supported()})).shift(),this.rl=r||o,this.element&&this.element.setAttribute&&this.element.setAttribute("ngx-ql","")}return n(t,[{key:"ngOnChanges",value:function(e){e.routerLink&&(this.linkHandler.unregister(this),this.linkHandler.register(this))}},{key:"ngOnDestroy",value:function(){this.linkHandler.unregister(this)}},{key:"element",get:function(){return this.el.nativeElement}},{key:"urlTree",get:function(){return this.rl.urlTree}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Kb(v),o.Kb(o.l),o.Kb(s.e,8),o.Kb(s.g,8))},t.\u0275dir=o.Fb({type:t,selectors:[["","routerLink",""]],inputs:{routerLink:"routerLink"},features:[o.xb]}),t}(),y=function(){var t=function(){function t(n,i){e(this,t),this.registry=n,this.router=i,this.loading=new Set}return n(t,[{key:"preload",value:function(e,t){if(this.loading.has(e))return a.a;var n="undefined"!=typeof navigator?navigator.connection:void 0;if(n&&((n.effectiveType||"").includes("2g")||n.saveData))return a.a;if(e.data&&!1===e.data.preload)return a.a;var i=m(this.router.config,e);return this.registry.shouldPrefetch(i)?(this.loading.add(e),t()):a.a}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ub(u),o.Ub(s.d))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac}),t}(),m=function(e,t){e=e.slice();for(var n=new Map,i=new Set,r=function(){var r=e.shift();if(i.add(r),r===t)return"break";var o=r.children||[],s=r._loadedConfig;s&&s.routes&&(o=o.concat(s.routes)),o.forEach((function(t){i.has(t)||(n.set(t,r),e.push(t))}))};e.length;){if("break"===r())break}for(var o="",s=t;s;)o=k(s)?"/".concat(s.path).concat(o):"/(".concat(s.outlet,":").concat(s.path).concat(o,")"),s=n.get(s);return o.replace(/\/\//,"/")};function k(e){return e.outlet===s.c||!e.outlet}var P=function(){var t=n((function t(){e(this,t)}));return t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({factory:function(e){return new(e||t)},providers:[{provide:v,useClass:b,multi:!0},{provide:v,useClass:g,multi:!0},u,y]}),t}()},OzqD:function(t,i,r){"use strict";r.d(i,"a",(function(){return d}));var o=r("A8zI"),s=r("eI2u"),a=r("+lji"),c=r("zOUh"),u=r("7RJT"),l=r("fXoL"),d=function(){var t=function(){function t(n,i,r){e(this,t),this.listenStatusService=n,this.crudService=i,this.infoTokenService=r,this.estadoPedido=new o.a,this.keyStorage="sys::status",this.timeInterval=null,this.timeNow=new Date,this.hayPedidoPendiente=!1,this.timeRestanteAproxSource=new u.BehaviorSubject(0),this.timeRestanteAprox$=this.timeRestanteAproxSource.asObservable(),this.hayCuentaClienteSource=new u.BehaviorSubject(null),this.hayCuentaCliente$=this.hayCuentaClienteSource.asObservable(),this.deserializar(),this.dataPost={idsede:this.infoTokenService.getInfoUs().idsede,idcliente:this.infoTokenService.getInfoUs().idcliente}}return n(t,[{key:"deserializar",value:function(){var e=localStorage.getItem(this.keyStorage);e="{}"===e?null:e,this.estadoPedido=e?JSON.parse(e):new o.a}},{key:"get",value:function(){this.deserializar(),this.getCuentaTotales()}},{key:"getCuentaTotales",value:function(){var e=this,t=0;return this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe((function(n){0!==n.data.length?(t=n.data[0].importe||0,e.setImporte(t),e.estadoPedido.hayPedidoCliente=!0,e.calcTimeAprox(),e.notifyChange()):e.estadoPedido.hayPedidoCliente=!1})),t}},{key:"getCuenta",value:function(){var e=this;this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente",!1).subscribe((function(t){if(0!==t.data.length)return e.estadoPedido.hayPedidoCliente=!0,e.calcTimeAprox(),e.hayCuentaClienteSource.next(t),e.notifyChange(),t;e.estadoPedido.hayPedidoCliente=!1}))}},{key:"getImporteCuenta",value:function(){var e=this;return new Promise((function(t){e.crudService.postFree(e.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe((function(e){t(e.success?e.data[0].importe:0)}))}))}},{key:"getObj",value:function(){return this.estadoPedido||this.deserializar(),this.estadoPedido}},{key:"setEstado",value:function(e){this.deserializar(),this.estadoPedido.estado=e,this.notifyChange()}},{key:"setImporte",value:function(e){this.deserializar(),this.estadoPedido.importe=e,this.notifyChange()}},{key:"setHoraInitPedido",value:function(e){this.deserializar(),this.estadoPedido.horaInt=e,this.notifyChange()}},{key:"setTimeAprox",value:function(e){this.deserializar(),this.estadoPedido.isTiempoAproxCumplido=e,this.notifyChange()}},{key:"setHayPedidoPendiente",value:function(e){this.deserializar(),this.estadoPedido.hayPedidoClientePendiente=e,this.notifyChange()}},{key:"setisPagada",value:function(e){this.deserializar(),this.estadoPedido.isPagada=e,this.notifyChange()}},{key:"setisRegisterPago",value:function(e){this.deserializar(),this.estadoPedido.isRegisterOnePago=e,this.notifyChange()}},{key:"calcTimeAprox",value:function(){var e=this;this.crudService.postFree(this.dataPost,"pedido","calc-time-despacho",!1).subscribe((function(t){e.estadoPedido.estado=0,e.estadoPedido.numMinAprox=t.data[0].rpt,e.estadoPedido.isTiempoAproxCumplido=!1,e.notifyChange(),e.getTimeAprox()}))}},{key:"getTimeAprox",value:function(){var e=this;return 0===this.estadoPedido.estado?this.timeInterval=setTimeout((function(){var t=e.calTimeMin();t<=0?(e.estadoPedido.estado=1,e.notifyChange(),e.clearTimeout(),clearTimeout(e.timeInterval),t=0):e.getTimeAprox(),e.timeRestanteAproxSource.next(t)}),2e3):this.clearTimeout(),0}},{key:"calTimeMin",value:function(){var e=(new Date).getTime()-this.estadoPedido.horaInt;return e=Math.round(e%864e5%36e5/6e4),e=this.estadoPedido.numMinAprox-e,isNaN(e)?0:e}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(this.timeInterval),this.timeInterval=null}))},{key:"notifyChange",value:function(){this.listenStatusService.setEstadoPedido(this.estadoPedido),localStorage.setItem(this.keyStorage,JSON.stringify(this.estadoPedido))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Ub(s.a),l.Ub(a.a),l.Ub(c.a))},t.\u0275prov=l.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},PCNd:function(t,i,r){"use strict";r.d(i,"a",(function(){return c}));var o=r("ofXK"),s=r("FDOz"),a=r("fXoL"),c=function(){var t=n((function t(){e(this,t)}));return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[o.c,s.a],s.a]}),t}()},W2jQ:function(t,i,r){"use strict";r.d(i,"a",(function(){return a}));var o=r("0IaG"),s=r("fXoL"),a=function(){var t=function(){function t(n,i){switch(e(this,t),this.dialogRef=n,this.msj="",this.titleBtnCancel="No",this.titleBtnSuccess="Si, por favor",i?i.idMjs:0){case 0:this.msj="Desea que se le notifique cuando su pedido este listo?";break;case 1:this.msj="Desea saber cuando tenga descuentos y/o ofertas?"}}return n(t,[{key:"ngOnInit",value:function(){}},{key:"cerrarDlg",value:function(e){this.dialogRef.close(e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Kb(o.i),s.Kb(o.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-dialog-desicion"]],decls:10,vars:3,consts:[[1,"p-3"],[1,"fw-100","fs-15"],[1,"d-flex"],[1,"btn","btn-success",3,"click"],[1,"ml-2","btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Hc(2),s.Pb(),s.Lb(3,"hr"),s.Qb(4,"div",2),s.Qb(5,"button",3),s.Yb("click",(function(){return t.cerrarDlg(!0)})),s.Hc(6),s.Pb(),s.Qb(7,"button",4),s.Yb("click",(function(){return t.cerrarDlg(!1)})),s.Hc(8),s.Pb(),s.Pb(),s.Lb(9,"br"),s.Pb()),2&e&&(s.zb(2),s.Ic(t.msj),s.zb(4),s.Ic(t.titleBtnSuccess),s.zb(2),s.Ic(t.titleBtnCancel))},styles:[""]}),t}()},dDDv:function(t,i,r){"use strict";r.d(i,"a",(function(){return l}));var o=r("+lji"),s=r("zOUh"),a=r("NEqF"),c=r("fXoL"),u=r("Jho9"),l=function(){var t=function(){function t(n,i,r){e(this,t),this.swPush=n,this.crudService=i,this.infoTokenService=r,this.swPush.notificationClicks.subscribe((function(e){alert("aaaaaaaaaaa"),console.log("clic notification",e)}))}return n(t,[{key:"getIsTienePermiso",value:function(){return"granted"===Notification.permission}},{key:"suscribirse",value:function(){console.log("llego a suscribirse estado this.swPush.isEnabled: ",this.swPush.isEnabled),this.keySuscribtion()}},{key:"keySuscribtion",value:function(){var e=this;this.swPush.requestSubscription({serverPublicKey:a.j}).then((function(t){console.log("suscrito a notificaciones push",t),e.saveSuscripcion(t)})).catch(console.error)}},{key:"saveSuscripcion",value:function(e){this.crudService.postFree({suscripcion:e,idcliente:this.infoTokenService.infoUsToken.idcliente},"push","suscripcion",!1).subscribe((function(e){return console.log(e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Ub(u.b),c.Ub(o.a),c.Ub(s.a))},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"nYx/":function(t,i,r){"use strict";r.d(i,"a",(function(){return d}));var o=r("zOUh"),s=r("+lji"),a=r("yFR0"),c=r("HDdC"),u=r("JOr0"),l=r("fXoL"),d=function(){var t=function(){function t(n,i,r,o){e(this,t),this.infoTokenService=n,this.crudService=i,this.socketService=r,this.establecimiento=o,this.infoToken=this.infoTokenService.getInfoUs()}return n(t,[{key:"getSubtotales",value:function(){this.objTotales=JSON.parse(atob(localStorage.getItem("sys::st")))}},{key:"registrarPago",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.getSubtotales();var o={idcliente:this.infoToken.idcliente,idorg:this.establecimiento.get().idorg,idsede:this.establecimiento.get().idsede,mesa:this.infoToken.numMesaLector,importe:e},s={idcliente:o.idcliente,idorg:o.idorg,idsede:o.idsede,mesa:o.mesa,importe:o.importe,isdelivery:r,objSubTotal:this.objTotales,objTransaction:t,objCliente:n,objOperacion:o};return new c.a((function(e){i.crudService.postFree(s,"transaction","registrar-pago",!1).subscribe((function(t){i.socketService.emit("notificar-pago-pwa",s),i.setIdPwaPago(t.data[0].idregistro_pago),e.next(t.data[0].idregistro_pago)}))}))}},{key:"setIdPwaPago",value:function(e){localStorage.setItem("sys::irp",e.toString())}},{key:"getIdPwaPago",value:function(){var e=parseInt(localStorage.getItem("sys::irp"),0);return e=e?0:e,localStorage.removeItem("sys::irp"),e}},{key:"getIpClient",value:function(){var e="";return this.crudService.getFree("https://api.ipify.org?format=jsonp&callback=?").subscribe((function(t){e=t.ip})),e}},{key:"getDataTrasaction",value:function(){return this.loadDataTransaction(),this.responseTransaction.isSuccess=!(this.responseTransaction&&!this.responseTransaction.error),this.responseTransaction}},{key:"setIdRegistroPagoTransaction",value:function(e){this.loadDataTransaction(),this.responseTransaction.idregistro_pago=e,this.upDataTransaction()}},{key:"loadDataTransaction",value:function(){this.responseTransaction=JSON.parse(localStorage.getItem("sys::transaction-response"))}},{key:"upDataTransaction",value:function(){localStorage.setItem("sys::transaction-response",JSON.stringify(this.responseTransaction))}},{key:"removeLocalDataTransaction",value:function(){localStorage.removeItem("sys::transaction-response"),this.responseTransaction=null}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Ub(o.a),l.Ub(s.a),l.Ub(a.a),l.Ub(u.a))},t.\u0275prov=l.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();