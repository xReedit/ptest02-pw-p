(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{nLiW:function(e,i,t){"use strict";t.r(i),t.d(i,"PedidoModule",(function(){return da}));var o=t("ofXK"),n=t("3Pt+"),s=t("lSLK"),a=t("nx09"),c=t("/sn2"),r=t("eI2u"),d=t("yFR0"),l=t("AA5P"),b=t("JOr0"),m=t("zOUh"),p=t("fXoL");function h(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",3),p.Lb(1,"i",4),p.Qb(2,"p",5),p.Hc(3),p.Pb(),p.Qb(4,"p",6),p.Hc(5,"Solicita atenci\xf3n"),p.Pb(),p.Qb(6,"button",7),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc(2).goCallClient(t)})),p.Hc(7,"Voy"),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit;p.zb(3),p.Jc("Mesa ",e,"")}}function u(e,i){if(1&e&&(p.Qb(0,"div"),p.Qb(1,"div",1),p.Fc(2,h,8,1,"div",2),p.Pb(),p.Pb()),2&e){const e=p.cc();p.zb(2),p.kc("ngForOf",e.listCallsClients)}}let f=(()=>{class e{constructor(e,i){this.infoToken=e,this.socketService=i,this.isCliente=!1,this.listCallsClients=[],this.isListenSocket=!1}ngOnInit(){this.isCliente=this.infoToken.infoUsToken.isCliente||!1,this.socketService.isSocketOpen$.subscribe(e=>{e&&(this.isListenSocket||(this.isListenSocket=!0,this.listenSocket()))})}listenSocket(){this.isCliente||(this.socketService.onLoadCallClienteLlama().subscribe(e=>{e.map(e=>this.addItemCallList(e.num_mesa))}),this.socketService.onGetClienteLlama().subscribe(e=>{this.addItemCallList(e)}),this.socketService.onRemoveClienteLlama().subscribe(e=>{this.removeItemCallList(e)}))}addItemCallList(e){this.searchItemCallList(e)||(this.playAudio(),this.listCallsClients.push(e))}removeItemCallList(e){this.listCallsClients=this.listCallsClients.filter(i=>i!==e)}searchItemCallList(e){return this.listCallsClients.filter(i=>i===e)[0]}goCallClient(e){this.socketService.emit("notificar-cliente-llamado-voy",e),this.removeItemCallList(e)}playAudio(){const e=new Audio;e.src="../assets/sound/notifica-llamado.mp3",e.load();try{e.play(),window.navigator.vibrate([100,50,100,100,100,50,50,100,50,100,100,100,50,50,100,50,100,100,100,50,50,100,50,100,100,100,50,50,100,50,100,100,100,50,50,100,50,100,100,100,50,50,100,50,100,100,100,50,50,100,50,100,100,100,50,50,100,50,100,100,100,50,50])}catch(i){}}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(m.a),p.Kb(d.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-list-call-client"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"content-call-cliente"],["class","div-call-client animated fadeInRight",4,"ngFor","ngForOf"],[1,"div-call-client","animated","fadeInRight"],["aria-hidden","true",1,"fa","fa-hand-paper-o","fa-2x","animated","infinite","wobble"],[1,"fw-600"],[1,"fw-100","fs-10"],[1,"btn","btn-sm","btn-secondary",3,"click"]],template:function(e,i){1&e&&p.Fc(0,u,3,1,"div",0),2&e&&p.kc("ngIf",!i.isCliente)},directives:[o.t,o.s],styles:[".content-call-cliente[_ngcontent-%COMP%]{position:absolute;top:8%;right:10px;z-index:100}.div-call-client[_ngcontent-%COMP%]{background:#ffeb3b;border-radius:10px;text-align:center;padding:10px;border:2px solid #bdbdbd;opacity:.9;margin-top:3px}.div-call-client[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),e})();var g=t("WF5t"),v=t("bv9b");function C(e,i){if(1&e&&(p.Ob(0),p.Lb(1,"mat-progress-bar",1),p.dc(2,"async"),p.Nb()),2&e){const e=p.cc();p.zb(1),p.kc("value",p.ec(2,1,e.timerLimitService.countdown$))}}let P=(()=>{class e{constructor(e){this.timerLimitService=e}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(g.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-progress-time-limit"]],decls:2,vars:3,consts:[[4,"ngIf"],["mode","determinate","color","accent",1,"animated","fadeInDown",3,"value"]],template:function(e,i){1&e&&(p.Fc(0,C,3,3,"ng-container",0),p.dc(1,"async")),2&e&&p.kc("ngIf",p.ec(1,1,i.timerLimitService.isPorgressVisible$))},directives:[o.t,v.a],pipes:[o.b],styles:[""]}),e})();var S=t("0IaG"),k=t("bTqV");let x=(()=>{class e{constructor(e){switch(this.msj="",e?e.idMjs:0){case 0:this.msj="Confirma que desea de borrar el pedido actual?";break;case 1:this.msj="Confirma que desea salir?";break;case 2:this.msj="Solo puede hacer un pedido por establecimiento a la vez. Confirma que desea salir?"}}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(S.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-dialog-reset"]],decls:10,vars:2,consts:[[1,"p-3"],[1,"fw-100","fs-15"],[1,"d-flex"],["mat-stroked-button","","mat-dialog-close","",1,"mr-2"],["mat-flat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"span",1),p.Hc(2),p.Pb(),p.Lb(3,"hr"),p.Qb(4,"div",2),p.Qb(5,"button",3),p.Hc(6,"Cancelar"),p.Pb(),p.Qb(7,"button",4),p.Hc(8,"Si, confirmo."),p.Pb(),p.Pb(),p.Lb(9,"br"),p.Pb()),2&e&&(p.zb(2),p.Ic(i.msj),p.zb(5),p.kc("mat-dialog-close",!0))},directives:[k.b,S.d],styles:[""]}),e})();var _=t("pLZG"),w=t("wne+"),I=t("Qu3c"),y=t("+lji"),Q=t("bSwM"),T=t("kmnG"),O=t("d3UM"),M=t("FKr1");function D(e,i){if(1&e&&(p.Qb(0,"mat-option",10),p.Hc(1),p.Pb()),2&e){const e=i.$implicit;p.kc("value",e),p.zb(1),p.Jc(" ",e.descripcion," ")}}function z(e,i){if(1&e&&(p.Qb(0,"mat-option",10),p.Hc(1),p.Pb()),2&e){const e=i.$implicit;p.kc("value",e),p.zb(1),p.Jc(" ",e.descripcion," ")}}let F=(()=>{class e{constructor(e,i,t){this.crudService=e,this.establecimientoService=i,this.infoTokenService=t}ngOnInit(){this.listImpresoras=this.establecimientoService.getImpresoras(),this.loadCanalesConsumo();const e=JSON.parse(localStorage.getItem("sys::punto"));e&&(this.isPuntoAutoPedidoCheck=e.ispunto_autopedido,this.selectedValueImpresora=e.impresora,this.isTomaPedidoRapido=e.istoma_pedido_rapido,this.selectedValueCanConsumo=e.canal_consumo,this.infoTokenService.setIsPuntoAutoPedido(this.isPuntoAutoPedidoCheck),this.infoTokenService.setIsTomaPedidoRapido(this.isTomaPedidoRapido))}setConifg(){this.isPuntoAutoPedidoCheck=!this.isTomaPedidoRapido&&this.isPuntoAutoPedidoCheck,localStorage.setItem("sys::punto",JSON.stringify({istoma_pedido_rapido:this.isTomaPedidoRapido,canal_consumo:this.selectedValueCanConsumo,ispunto_autopedido:this.isPuntoAutoPedidoCheck,impresora:this.selectedValueImpresora})),this.infoTokenService.setIsPuntoAutoPedido(this.isPuntoAutoPedidoCheck),this.infoTokenService.setIsTomaPedidoRapido(this.isTomaPedidoRapido),location.reload()}loadCanalesConsumo(){const e={idsede:this.infoTokenService.getInfoUs().idsede};this.crudService.postFree(e,"pedido","get-canales-consumo",!1).subscribe(e=>{this.listCanalConsumo=e.data})}compareById(e,i){return e&&i&&e.idimpresora===i.idimpresora}compareByIdCanal(e,i){return e&&i&&e.idtipo_consumo===i.idtipo_consumo}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(y.a),p.Kb(b.a),p.Kb(m.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-dialog-config-punto"]],decls:36,vars:10,consts:[[1,"fs-18"],[3,"ngModel","ngModelChange"],[1,"fw-600"],[1,"fs-12"],["placeholder","Canal de consumo","name","selectedValueImpresora",3,"ngModel","value","compareWith","ngModelChange","valueChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Impresora","name","selectedValueImpresora",3,"ngModel","value","compareWith","ngModelChange","valueChange"],[1,"d-flex"],["mat-raised-button","","color","primary",1,"mr-2",3,"click"],["mat-raised-button","","color","accent","mat-dialog-close",""],[3,"value"]],template:function(e,i){1&e&&(p.Qb(0,"div"),p.Qb(1,"p",0),p.Hc(2,"Configuraciones"),p.Pb(),p.Lb(3,"hr"),p.Qb(4,"mat-checkbox",1),p.Yb("ngModelChange",(function(e){return i.isTomaPedidoRapido=e})),p.Qb(5,"span",2),p.Hc(6,"Tomar pedido r\xe1pido"),p.Pb(),p.Pb(),p.Qb(7,"p",3),p.Hc(8,"Se adjuntara los items al clic, solo mostrar\xe1 el detalle en los items que tienen opciones por seleccionar. "),p.Qb(9,"strong"),p.Hc(10,"Elija un canal de consumo predertiminado."),p.Pb(),p.Pb(),p.Qb(11,"mat-form-field"),p.Qb(12,"mat-label"),p.Hc(13,"Canal consumo prederminado"),p.Pb(),p.Qb(14,"mat-select",4),p.Yb("ngModelChange",(function(e){return i.selectedValueCanConsumo=e}))("valueChange",(function(e){return i.selectedValueCanConsumo=e})),p.Fc(15,D,2,2,"mat-option",5),p.Pb(),p.Pb(),p.Lb(16,"hr"),p.Qb(17,"mat-checkbox",1),p.Yb("ngModelChange",(function(e){return i.isPuntoAutoPedidoCheck=e})),p.Qb(18,"span",2),p.Hc(19,"Punto de Autopedido"),p.Pb(),p.Pb(),p.Qb(20,"p",3),p.Hc(21,"Configurar este equipo como Punto de Autopedido, donde el cliente podra realizar por su cuenta su pedido. Vincule una impresora donde el cliente obtendr\xe1 una copia de su pedido. "),p.Qb(22,"strong"),p.Hc(23,"El canal de consumo ser\xe1: Para Llevar"),p.Pb(),p.Pb(),p.Lb(24,"br"),p.Qb(25,"mat-form-field"),p.Qb(26,"mat-label"),p.Hc(27,"Impresora Vinculada"),p.Pb(),p.Qb(28,"mat-select",6),p.Yb("ngModelChange",(function(e){return i.selectedValueImpresora=e}))("valueChange",(function(e){return i.selectedValueImpresora=e})),p.Fc(29,z,2,2,"mat-option",5),p.Pb(),p.Pb(),p.Lb(30,"hr"),p.Qb(31,"div",7),p.Qb(32,"button",8),p.Yb("click",(function(){return i.setConifg()})),p.Hc(33,"Listo Aplicar"),p.Pb(),p.Qb(34,"button",9),p.Hc(35,"Cerrar"),p.Pb(),p.Pb(),p.Pb()),2&e&&(p.zb(4),p.kc("ngModel",i.isTomaPedidoRapido),p.zb(10),p.kc("ngModel",i.selectedValueCanConsumo)("value",i.selectedValueCanConsumo)("compareWith",i.compareByIdCanal),p.zb(1),p.kc("ngForOf",i.listCanalConsumo),p.zb(2),p.kc("ngModel",i.isPuntoAutoPedidoCheck),p.zb(11),p.kc("ngModel",i.selectedValueImpresora)("value",i.selectedValueImpresora)("compareWith",i.compareById),p.zb(1),p.kc("ngForOf",i.listImpresoras))},directives:[Q.a,n.p,n.s,T.c,T.g,O.a,o.s,k.b,S.d,M.j],styles:[""]}),e})();var R=t("mrSG");let L=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(S.i))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-mozo-dialog"]],decls:12,vars:0,consts:[[1,"text-center"],["src","./assets/images/icon-app/robot_piter.gif","alt",""],[1,"fw-600","fs-13","pt-1"],[1,"fw-100","fs-13"],[1,"content-btn"],[1,"fa","fa-microphone"],["mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Lb(1,"img",1),p.Qb(2,"p",2),p.Hc(3,"Hola!, soy Piter, su mozo virtual por voz."),p.Pb(),p.Qb(4,"div"),p.Qb(5,"p",3),p.Hc(6,"Si desea que lo atienda active el microfono que esta en la parte superior."),p.Pb(),p.Qb(7,"div",4),p.Lb(8,"i",5),p.Pb(),p.Pb(),p.Lb(9,"hr"),p.Qb(10,"button",6),p.Hc(11,"Ok, Entendido."),p.Pb(),p.Pb())},directives:[k.b,S.d],styles:[".content-btn[_ngcontent-%COMP%]{border-radius:50%;background:#302855;width:30px;line-height:30px;color:#fff;text-align:center;margin:auto}"]}),e})();var E=t("7RJT"),H=t("yrbL");let j=(()=>{class e{constructor(){this.speechDataEvent=new p.n,this.ttsDataEvent=new p.n}emit(e,i){return!1}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),B=(()=>{class e{constructor(e){this.speechProviverConnet=e,this.speechTexResponseSource=new E.BehaviorSubject(null),this.speechTexResponse$=this.speechTexResponseSource.asObservable().pipe(Object(H.delay)(400)),this.listenOnTraduceSource=new E.BehaviorSubject(!1),this.listenOnTraduce$=this.listenOnTraduceSource.asObservable(),this.lastTranscript="",this.bufferSize=2048,this.audioElement=document.querySelector("audio"),this.finalWord=!1,this.removeLastSentence=!0,this.streamStreaming=!1,this.constraints={audio:!0,video:!1},this.downsampleBuffer=function(e,i,t){if(t===i)return e;if(t>i)throw new Error("downsampling rate show be smaller than original sample rate");const o=i/t,n=Math.round(e.length/o),s=new Int16Array(n);let a=0,c=0;for(;a<s.length;){const i=Math.round((a+1)*o);let t=0,n=0;for(let o=c;o<i&&o<e.length;o++)t+=e[o],n++;s[a]=32767*Math.min(1,t/n),a++,c=i}return s.buffer},this.speechProviverConnet.speechDataEvent.subscribe(e=>{this.speechData(e),this.listenOnTraduceSource.next(!0)})}startRecording(){this.initRecording()}initRecording(){this.speechProviverConnet.emit("startGoogleCloudStream",""),this.streamStreaming=!0,this.AudioContext=window.AudioContext,this.context=new AudioContext({}),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.processor.connect(this.context.destination),this.context.resume(),navigator.mediaDevices.getUserMedia(this.constraints).then(e=>{this.globalStream=e,this.input=this.context.createMediaStreamSource(e),this.input.connect(this.processor),this.processor.onaudioprocess=e=>{const i=e.inputBuffer.getChannelData(0),t=this.downsampleBuffer(i,44100,16e3);this.speechProviverConnet.emit("binaryData",t)}})}microphoneProcess(e){const i=e.inputBuffer.getChannelData(0),t=this.downsampleBuffer(i,44100,16e3);this.speechProviverConnet.emit("binaryData",t)}stopRecording(){this.streamStreaming=!1,this.speechProviverConnet.emit("endGoogleCloudStream",""),this.listenOnTraduceSource.next(!1),this.globalStream.getTracks()[0].stop(),this.input.disconnect(this.processor),this.processor.disconnect(this.context.destination),this.context.close().then(()=>{this.input=null,this.processor=null,this.context=null,this.AudioContext=null})}speechData(e){0!==e.results.length&&this.lastTranscript!==e.results[0].alternatives[0].transcript.toLowerCase()&&(this.speechTexResponseSource.next(e.results),this.lastTranscript=e.results[0].alternatives[0].transcript.toLowerCase(),this.finalWord=!0)}capitalize(e){return e.length<1?e:e.charAt(0).toUpperCase()+e.slice(1)}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(j))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class N{}var A=t("NEqF");let V=(()=>{class e{constructor(e){this.speechProviverConnet=e,this.isTalkingSource=new E.BehaviorSubject(!1),this.isTalking$=this.isTalkingSource.asObservable(),this.sendDataTTS=new N,this.speechProviverConnet.ttsDataEvent.subscribe(e=>Object(R.a)(this,void 0,void 0,(function*(){const i=new Audio(`${A.h}${e}`);i.play(),this.isTalkingSource.next(!0),i.addEventListener("ended",()=>{this.isTalkingSource.next(!1)})})))}convertTxtToVoice(e){this.speechProviverConnet.emit("tts",e)}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(j))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),q=(()=>{class e{constructor(e,i,t,o){this.establecimientoService=e,this.miPedidoService=i,this.navigatorLinkService=t,this.uttilService=o,this.commandNavegacionSeccionSource=new E.BehaviorSubject(null),this.commandNavegacionSeccion$=this.commandNavegacionSeccionSource.asObservable(),this.commandNavegacionRecomendadoSource=new E.BehaviorSubject([]),this.commandNavegacionRecomendado$=this.commandNavegacionRecomendadoSource.asObservable(),this.commandAddItemSource=new E.BehaviorSubject(null),this.commandAddItem$=this.commandAddItemSource.asObservable(),this.commandAceptadoSource=new E.BehaviorSubject(0),this.commandAceptado$=this.commandAceptadoSource.asObservable(),this.commandFinalizarPedidoSource=new E.BehaviorSubject(!1),this.commandFinalizarPedido$=this.commandFinalizarPedidoSource.asObservable(),this.commandIsShowPedidoSource=new E.BehaviorSubject(!1),this.commandIsShowPedido$=this.commandIsShowPedidoSource.asObservable(),this.isPedidoEnviadoSource=new E.BehaviorSubject(!1),this.isPedidoEnviado$=this.isPedidoEnviadoSource.asObservable()}getNameSede(){return this.establecimientoService.get().nombre}getIdSede(){return this.establecimientoService.get().idsede}getSeccionesCarta(){var e;let i="";return this.arrStringSecciones?this.arrStringSecciones:(this.getCarta(),i+=(null===(e=this.laCarta)||void 0===e?void 0:e.bodega)?this.laCarta.bodega.map(e=>e.des).join(",")||",":"",i=this.laCarta.carta.map(e=>e.secciones.map(e=>e.des)).join(","),this.arrStringSecciones=i,i)}getItemsCarta(){var e,i;let t="";return this.arrStringItems?this.arrStringItems:(this.getCarta(),t+=(null===(e=this.laCarta)||void 0===e?void 0:e.bodega)?(null===(i=this.laCarta)||void 0===i?void 0:i.bodega.map(e=>e.items.map(e=>e.des)).join(","))||",":"",t=this.laCarta.carta.map(e=>e.secciones.map(e=>e.items.map(e=>e.des))).join(","),this.arrStringItems=t,t)}getItemsSeccionSelected(e){var i;let t=!0;e=e.toLowerCase();let o=(null===(i=this.laCarta)||void 0===i?void 0:i.bodega.find(i=>i.des.toLowerCase()===e))||null;return o||(t=!1,o=this.laCarta.carta.map(i=>i.secciones.find(i=>i.des.toLowerCase()===e))),o?t?o.items.map(e=>e.des).join(","):o.map(e=>e.items.map(e=>e.des)).join(",")||"":""}getItemsSeccionSelectedStr(e){return e.items.filter(e=>"0"!==e.cantidad).map(e=>e.des).join(",")}getItemsRecomendadosStr(){return this.laCarta||this.getCarta(),this.laCarta.recomendados?this.laCarta.recomendados.map(e=>e.des).join(","):null}getISeccionSelected(e){var i,t;e=e.toLowerCase();let o=(null===(i=this.laCarta)||void 0===i?void 0:i.bodega)?null===(t=this.laCarta)||void 0===t?void 0:t.bodega.find(i=>i.des.toLowerCase()===e):null;return o||(o=this.laCarta.carta.map(i=>i.secciones.find(i=>i.des.toLowerCase()===e))[0]),o}getIItemsSelected(e){var i,t;e=e.toLowerCase();let o=(null===(i=this.laCarta)||void 0===i?void 0:i.bodega)?null===(t=this.laCarta)||void 0===t?void 0:t.bodega.map(i=>i.items.find(i=>i.des.toLowerCase()===e)).find(e=>e):null;return o||(o=this.laCarta.carta.map(i=>i.secciones.map(i=>i.items.find(i=>i.des.toLowerCase()===e)))[0].find(e=>e)),o}getCarta(){this.laCarta=this.miPedidoService.getObjCarta()}getIsPedidoValido(){return!!this.miPedidoService.getMiPedido()}goNavegacionSeccionCarta(e){this.commandNavegacionSeccionSource.next(e),this.goNavigacionShowCarta()}goNavegacionItemRecomendados(){this.commandNavegacionRecomendadoSource.next(this.laCarta.recomendados),this.goNavigacionShowCarta()}goNavigacionShowMiPedido(){this.navigatorLinkService.setPageActive("mipedido"),this.commandIsShowPedidoSource.next(!0)}goNavigacionShowCarta(){this.navigatorLinkService.setPageActive("carta")}addItemPedido(e){this.commandAddItemSource.next(e)}setIsCommandAceptado(e){this.commandAceptadoSource.next(e)}setFinalizarPedido(e){this.commandFinalizarPedidoSource.next(e)}setIsPedidoConfirmado(){this.isPedidoEnviadoSource.next(!0)}setIndicaciones(e,i){e.indicaciones=this.uttilService.addslashes(i);const t=this.miPedidoService.findOnlyItemMiPedido(e);t&&(t.indicaciones=i),this.miPedidoService.setLocalStoragePedido()}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(b.a),p.Ub(a.a),p.Ub(c.a),p.Ub(w.a))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),$=(()=>{class e{constructor(e,i,t,o,n,s,a){this.crudService=e,this.speechTTService=i,this.spechTotextService=t,this.speechDataProviderService=o,this.infoTokenService=n,this.dialog=s,this.utilitariosService=a,this.isMicrophoneOn=!1,this.lastCommnad=null,this.lastTextoRecibido="",this.lastComandOk="",this.isProcessTalking=!1,this.isTalking=!1,this.isActive=!1,this.keySotrageCommand="sys::cmdv",this.spechTotextService.speechTexResponse$.subscribe(e=>{if(!e)return;const i=e[0].alternatives[0].transcript;""!==this.lastComandOk&&this.utilitariosService.compareSimilaryText(this.lastComandOk,i)>=.79||this.cocinarComand(i)}),this.speechTTService.isTalking$.subscribe(e=>{this.isTalking=e,this.isMicrophoneOn&&(e?this.spechTotextService.stopRecording():this.spechTotextService.startRecording())}),this.speechDataProviderService.isPedidoEnviado$.subscribe(e=>{if(e){if(!this.isMicrophoneOn)return;this.isTalking=!1,this.spechTotextService.stopRecording()}})}getIsActive(){return this.isActive}setIsActive(e){this.isActive=e}getComands(){this.dataListComand||this.crudService.getAll("speech","comandos",!1,!1,!1).subscribe(e=>{this.dataListComand=e.data})}startRecording(){this.isMicrophoneOn=!0,this.spechTotextService.startRecording()}stopRecording(){this.isMicrophoneOn&&(this.isMicrophoneOn=!1,this.spechTotextService.stopRecording())}cocinarComand(e){const i=this.searchComandList(e);i&&(this.lastCommnad="inicio"!==i.seccion&&"finalizar_pedido"!==i.seccion&&"carta_recomendacion"!==i.seccion?i:null,i.texto_recibido=e.replace(this.lastTextoRecibido,""),this.analizeCommand(i))}searchComandList(e){let i=null;if(e=e.toLowerCase(),this.dataListComand)return this.dataListComand.map(t=>{const o=t.comando.split(",").find(i=>new RegExp(i).test(e));o&&(i=t,i.texto_recibido=e,i.comando_recibido=o)}),i||this.lastCommnad&&(this.lastCommnad.texto_recibido=e,i=this.lastCommnad),i}searchCommandStr(e,i){let t="";return i.map(i=>{this.utilitariosService.compareSimilaryText(e.trim(),i.trim())>.78&&(t=i)}),t}analizeCommand(e){return Object(R.a)(this,void 0,void 0,(function*(){if(this.lastComandOk.toLowerCase().trim()!==e.texto_recibido.toLowerCase().trim()&&!this.isTalking)switch(e.seccion){case"inicio":this.commandIncio(e);break;case"carta":this.commandCarta(e);break;case"carta_recomendacion":this.commandCartaRecomendacion(e);break;case"navegacion":this.commandNavegacion(e);break;case"carta_contenido":this.commandCartaContenido(e);break;case"carta_item_suma":this.commandCartaItemSuma(e);break;case"carta_item_resta":this.commandCartaItemResta(e);break;case"carta_item_resetea":this.commandCartaItemResetea(e);break;case"finalizar_pedido":this.commandFinalizarPedido(e)}}))}commandIncio(e){switch(e.comando){case"bienvenido":const i=this.speechDataProviderService.getNameSede(),t=this.getCommandStorage(e);if(t){if(!t.isTimePlay)return;e.text=e.texto_default.text2,e.text=e.text.replace("?nomcliente","")}else e.text=e.texto_default.text1,e.text=e.text.replace("?nomsede",i);e.idsede=this.speechDataProviderService.getIdSede(),this.speechVoice(e),this.dialog.open(L)}}commandCarta(e){const i=this.getSeccionCarta(e);if(i.seccion){const t=this.speechDataProviderService.getItemsSeccionSelectedStr(i.seccion);this.isCommandOk(e.texto_recibido,1),this.sendTxtToVoice(e,`De ${i.nomSeccion}, tenemos: ${t}`),this.speechDataProviderService.goNavegacionSeccionCarta(i.seccion)}this.speechDataProviderService.getCarta()}commandCartaRecomendacion(e){const i=this.speechDataProviderService.getItemsRecomendadosStr();if(!i)return this.isCommandOk(e.texto_recibido,1),void this.sendTxtToVoice(e,e.texto_default.text1);this.isCommandOk(e.texto_recibido,1),this.sendTxtToVoice(e,"Le recomendamos: "+i),this.speechDataProviderService.goNavegacionItemRecomendados()}commandCartaContenido(e){const i=this.getItemCarta(e);i.item&&(this.isCommandOk(e.texto_recibido,1),this.sendTxtToVoice(e,`${i.nomItem}:. ${i.item.detalles}`))}commandCartaItemSuma(e){let i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido);const t=this.convertTxtToNum(i);if(t){const o=(null==t?void 0:t.num)||null;i=i.replace(t.numStr||"","").trim();const n=this.getItemCarta(e,i);this.sendItemToPedido(n,o,!0,e)}}commandCartaItemResta(e){let i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido);const t=this.convertTxtToNum(i);if(!t)return;let o=(null==t?void 0:t.num)||null;i=i.replace(t.numStr||"","");const n=this.getItemCarta(e,i);n.item&&(o=o||n.item.cantidad_seleccionada,this.sendItemToPedido(n,o,!1,e))}commandCartaItemResetea(e){let i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido);const t=this.convertTxtToNum(i);if(!t)return;const o=(null==t?void 0:t.num)||null;i=i.replace(t.numStr||"","");const n=this.getItemCarta(e,i);n.item&&o&&(this.sendItemToPedido(n,n.item.cantidad_seleccionada,!1,e),this.sendItemToPedido(n,o,!0,e),this.isCommandOk(e.texto_recibido,1))}sendItemToPedido(e,i,t,o){if(e.item){this.isCommandOk(o.texto_recibido,2),e.isSuma=t;for(let t=0;t<i;t++)this.speechDataProviderService.addItemPedido(e)}}commandNavegacion(e){const i=this.getSeccionCarta(e);i.seccion?(this.speechDataProviderService.goNavegacionSeccionCarta(i.seccion),this.isCommandOk(e.texto_recibido,1)):e.texto_recibido.indexOf("pedido")>-1&&(this.speechDataProviderService.goNavigacionShowMiPedido(),this.isCommandOk(e.texto_recibido,1))}commandFinalizarPedido(e){this.speechDataProviderService.getIsPedidoValido()&&(this.isCommandOk(e.texto_recibido,1),this.speechDataProviderService.goNavigacionShowMiPedido(),this.speechDataProviderService.setFinalizarPedido(!0),""===this.infoTokenService.getInfoUs().nombres?(e.text=e.texto_default.text1,this.speechVoice(e)):(e.text=e.texto_default.text2,this.speechVoice(e)))}getSeccionCarta(e){const i=this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido),t=this.speechDataProviderService.getSeccionesCarta().toLowerCase().split(","),o=this.searchCommandStr(i,t);return{nomSeccion:o,seccion:""!==o?this.speechDataProviderService.getISeccionSelected(o):null}}getItemCarta(e,i=null){const t=i||this.replaceTextRecibidoComand(e.texto_recibido,e.comando_recibido),o=this.speechDataProviderService.getItemsCarta().toLowerCase().split(","),n=this.searchCommandStr(t,o);return{nomItem:n,item:""!==n?this.speechDataProviderService.getIItemsSelected(n):null}}convertTxtToNum(e){let i=null;const t="uno,dos,tres,cuatro,cinco,seis,siete,ocho,nueve,diez,once,doce,trece,catorce,quince,dieciseis,diecisiete,diecisiete,dieciocho,diecinueve,veinte,veintiuno,veintidos,veintitres,veinticuatro,veinticinco";let o="";const n=(e=" "+e).match(/\d+/);return i=n?n[0]:null,i||(i=t.split(",").findIndex(i=>e.match(" "+i+" "))+1,o=t.split(",")[i-1],0===i&&(i="otro,un,una".split(",").findIndex(i=>e.match(" "+i+" ")),o="otro,un,una".split(",")[i],i=i?1:null)),i?{num:i,numStr:o}:null}replaceTextRecibidoComand(e,i){const t=e.toLowerCase(),o=i.toLowerCase();return t.replace(o,"").trim()}sendTxtToVoice(e,i){this.isProcessTalking||(this.isProcessTalking=!0,e.idsede=1,e.text=i,this.speechTTService.convertTxtToVoice(e),setTimeout(()=>{this.isProcessTalking=!1},1e3))}isCommandOk(e,i){this.lastComandOk=e,this.speechDataProviderService.setIsCommandAceptado(i),setTimeout(()=>{this.lastComandOk=""},1e3)}speechVoice(e){this.speechTTService.convertTxtToVoice(e)}getCommandStorage(e){let i=null;const t=localStorage.getItem(this.keySotrageCommand),o=t?JSON.parse(t):null;if(o)if(i=o.filter(i=>i.idcomando_voz===e.idcomando_voz)[0]||null,i){const e=this.diffMinTimeComandStorage(i);i.isTimePlay=e>15,i.isTimePlay&&(i.time=(new Date).toISOString(),localStorage.setItem(this.keySotrageCommand,JSON.stringify(o)))}else this.saveCommandStorage(e);else this.saveCommandStorage(e);return i}saveCommandStorage(e){const i=localStorage.getItem(this.keySotrageCommand),t=i?JSON.parse(i):[],o={idcomando_voz:e.idcomando_voz,time:(new Date).toISOString()};t.push(o),localStorage.setItem(this.keySotrageCommand,JSON.stringify(t))}diffMinTimeComandStorage(e){const i=new Date(e.time),t=new Date,o=Math.abs(i-t);return Math.floor(o/1e3/60)}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(y.a),p.Ub(V),p.Ub(B),p.Ub(q),p.Ub(m.a),p.Ub(S.b),p.Ub(w.a))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=t("/t3+");function K(e,i){1&e&&(p.Ob(0),p.Lb(1,"i",3),p.Nb())}function Y(e,i){1&e&&p.Lb(0,"i",4)}const J=function(e){return{on:e}};let G=(()=>{class e{constructor(e,i){this.comandAnalizerService=e,this.establecimientoService=i,this.isGrabando=!1}ngOnInit(){0!==this.establecimientoService.get().speech_disabled&&this.comandAnalizerService.getComands()}goClickBtn(){this.isGrabando?this.stopRecording():this.startRecording()}startRecording(){this.comandAnalizerService.startRecording(),this.isGrabando=!0}stopRecording(){this.comandAnalizerService.stopRecording(),this.isGrabando=!1}}return e.\u0275fac=function(i){return new(i||e)(p.Kb($),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-mozo-virtual-on-speech"]],decls:4,vars:5,consts:[[1,"content-btn",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["elseTemplateNoGraba",""],["aria-hidden","true",1,"fa","fa-microphone","text-danger","animated","infinite","bounceIn"],["aria-hidden","true",1,"fa","fa-microphone-slash"]],template:function(e,i){if(1&e&&(p.Qb(0,"div",0),p.Yb("click",(function(){return i.goClickBtn()})),p.Fc(1,K,2,0,"ng-container",1),p.Fc(2,Y,1,0,"ng-template",null,2,p.Gc),p.Pb()),2&e){const e=p.tc(3);p.kc("ngClass",p.pc(3,J,i.isGrabando)),p.zb(1),p.kc("ngIf",i.isGrabando)("ngIfElse",e)}},directives:[o.q,o.t],styles:[".content-btn[_ngcontent-%COMP%]{border-radius:50%;background:#5363bf}.content-btn.on[_ngcontent-%COMP%]{background:#2a3785;font-size:20px}"]}),e})();const W=["txtBuscar"];function Z(e,i){1&e&&(p.Qb(0,"div",14),p.Lb(1,"app-mozo-virtual-on-speech"),p.Pb())}function X(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",15),p.Yb("click",(function(){return p.wc(e),p.cc(2).configPunto()})),p.Lb(1,"i",16),p.Pb()}if(2&e){const e=p.cc(2);p.kc("matRippleColor",e.rippleColor)}}function ee(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"span",3),p.Hc(2),p.dc(3,"titlecase"),p.Pb(),p.Lb(4,"span",4),p.Fc(5,Z,2,0,"div",5),p.Fc(6,X,2,1,"div",6),p.Qb(7,"div",7),p.Yb("click",(function(){return p.wc(e),p.cc().sharedCarta()})),p.Lb(8,"i",8),p.Pb(),p.Qb(9,"div",9),p.Qb(10,"div",10),p.Yb("click",(function(){return p.wc(e),p.cc().activaBusqueda()})),p.Lb(11,"i",11),p.Pb(),p.Qb(12,"div",12),p.Yb("click",(function(){return p.wc(e),p.cc().cerrarSession()})),p.Lb(13,"i",13),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc();p.zb(2),p.Ic(p.ec(3,6,e.nomSede)),p.zb(3),p.kc("ngIf",e.isActiveMozoVoz),p.zb(1),p.kc("ngIf",!e.isCliente),p.zb(1),p.kc("matRippleColor",e.rippleColor),p.zb(3),p.kc("matRippleColor",e.rippleColorBusqueda),p.zb(2),p.kc("matRippleColor",e.rippleColor)}}function ie(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",17),p.Qb(2,"div",18),p.Yb("click",(function(){return p.wc(e),p.cc().activaBusqueda()})),p.Lb(3,"i",19),p.Pb(),p.Qb(4,"input",20,21),p.Yb("keyup",(function(){p.wc(e);const i=p.tc(5);return p.cc().buscarCharAhora(i.value)})),p.Pb(),p.Qb(6,"div",22),p.Yb("click",(function(){return p.wc(e),p.cc().clearTextBuqueda()})),p.Lb(7,"i",23),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.tc(5),i=p.cc();p.zb(2),p.kc("matRippleColor",i.rippleColorPlomo),p.zb(4),p.kc("hidden",""===e.value)("matRippleColor",i.rippleColorPlomo)}}const te=function(e){return{"toolbar-busqueda":e}},oe={showDelay:500,hideDelay:1e3,touchendHideDelay:500};let ne=(()=>{class e{constructor(e,i,t,o,n,s,a,c,r,d){this.miPedidoService=e,this.navigatorService=i,this.dialog=t,this.listenStatusService=o,this.renderer=n,this.infoTokenService=s,this.utilitariosSerivce=a,this.crudService=c,this.establecimientoService=r,this.comandAnalizerService=d,this.isBusqueda=!1,this.rippleColor="rgba(238,238,238,0.2)",this.rippleColorBusqueda="rgba(238,238,238,0.9)",this.rippleColorPlomo="rgba(158,158,158,0.5)",this.isClienteDelivery=!1,this.isCliente=!1,this.isSpeechVoiceAcivado=!1,this.isActiveMozoVoz=!1,this.nomSede=""}ngOnInit(){this.isSpeechVoiceAcivado=1===this.establecimientoService.get().speech_disabled,this.listenStatusService.isBusqueda$.subscribe(e=>{this.isBusqueda=e}),this.listenStatusService.hayDatosSede$.pipe(Object(_.a)(e=>!0===e)).subscribe(e=>{this.getNomSede()}),this.isClienteDelivery=this.infoTokenService.isDelivery(),this.isCliente=this.infoTokenService.isCliente(),this.idSedeCartaVirtual=this.infoTokenService.infoUsToken.idsede,this.isActiveMozoVoz=this.isSpeechVoiceAcivado&&this.isCliente&&!this.isClienteDelivery,this.getLinkSharedCarta()}getNomSede(){this.nomSede=this.miPedidoService.objDatosSede.datossede[0].sedenombre}getLinkSharedCarta(){this.crudService.postFree({idsede:this.idSedeCartaVirtual},"delivery","get-shared-url-carta",!1).subscribe(e=>{this.urlSharedCartaVirtual=e.data[0].qr_delivery})}activaBusqueda(){this.navigatorService.setPageActive("carta"),this.navigatorService.addLink("carta-i-"),this.listenStatusService.setIsBusqueda(),setTimeout(()=>{this.txtBuscar&&(this.renderer.selectRootElement(this.txtBuscar.nativeElement).focus(),this.txtBuscar.nativeElement.value=this.getStorageBusqueda())},300)}buscarCharAhora(e){this.listenStatusService.setCharBusqueda(e),this.setStorageBusqueda(e)}setStorageBusqueda(e){window.localStorage.setItem("sys::find",e)}getStorageBusqueda(){return window.localStorage.getItem("sys::find")||""}clearTextBuqueda(){this.renderer.selectRootElement(this.txtBuscar.nativeElement).focus(),this.txtBuscar.nativeElement.value="",window.localStorage.setItem("sys::find","")}cerrarSession(){const e=new S.e;e.data={idMjs:1},this.dialog.open(x,e).afterClosed().subscribe(e=>{e&&(this.stopRecordingToolbar(),this.miPedidoService.resetAllNewPedido(),this.miPedidoService.cerrarSession(),this.infoTokenService.cerrarSession())})}goBackOutEstablecimiento(){const e=new S.e;e.data={idMjs:2},this.dialog.open(x,e).afterClosed().subscribe(e=>{e&&(this.miPedidoService.resetAllNewPedido(),this.miPedidoService.cerrarSession(),this.infoTokenService.cerrarSession())})}sharedCarta(){console.log("this.urlSharedCartaVirtual",this.urlSharedCartaVirtual),this.utilitariosSerivce.sharedNative(this.urlSharedCartaVirtual,this.nomSede)}configPunto(){const e=new S.e;e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialog.open(F,e)}stopRecordingToolbar(){this.comandAnalizerService.stopRecording()}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(a.a),p.Kb(c.a),p.Kb(S.b),p.Kb(r.a),p.Kb(p.E),p.Kb(m.a),p.Kb(w.a),p.Kb(y.a),p.Kb(b.a),p.Kb($))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-tool-bar"]],viewQuery:function(e,i){var t;1&e&&p.Mc(W,!0),2&e&&p.sc(t=p.Zb())&&(i.txtBuscar=t.first)},features:[p.yb([{provide:I.a,useValue:oe}])],decls:4,vars:5,consts:[["color","primary"],[3,"ngClass"],[4,"ngIf"],[1,"nom-comercio"],[1,"example-spacer"],["class","example-ripple-container fs-15",4,"ngIf"],["class","example-ripple-container fs-15","matRipple","","matRippleCentered","true",3,"matRippleColor","click",4,"ngIf"],["matRipple","","matRippleCentered","true","matTooltip","Enlace Copiado",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Compartir Carta","aria-hidden","true",1,"fa","fa-share-alt"],[2,"display","contents"],["matRipple","","matRippleCentered","true","matRippleUnbounded","true","matRippleRadius","290","title","Buscar",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Buscar","aria-hidden","true",1,"fa","fa-search"],["matRipple","","matRippleCentered","true","title","Cerrar Sesion",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Cerrar Sesion","aria-hidden","true",1,"fa","fa-close"],[1,"example-ripple-container","fs-15"],["matRipple","","matRippleCentered","true",1,"example-ripple-container","fs-15",3,"matRippleColor","click"],["title","Configuracion","aria-hidden","true",1,"fa","fa-wrench"],[1,"d-flex","w-100"],["matRipple","","matRippleCentered","true","title","Atras",1,"example-ripple-container","text-success","fs-15",2,"margin-left","-15px",3,"matRippleColor","click"],["title","Cerrar Sesion","aria-hidden","true",1,"fa","fa-arrow-left"],["type","text","placeholder","Buscar...","autofocus","",1,"text-busqueda","w-100",3,"keyup"],["txtBuscar",""],["matRipple","","matRippleCentered","true",1,"example-ripple-container","text-dark","fs-15",3,"hidden","matRippleColor","click"],["title","Atras","aria-hidden","true",1,"fa","fa-times"]],template:function(e,i){1&e&&(p.Qb(0,"mat-toolbar",0),p.Qb(1,"mat-toolbar-row",1),p.Fc(2,ee,14,8,"ng-container",2),p.Fc(3,ie,8,3,"ng-container",2),p.Pb(),p.Pb()),2&e&&(p.zb(1),p.kc("ngClass",p.pc(3,te,i.isBusqueda)),p.zb(1),p.kc("ngIf",!i.isBusqueda),p.zb(1),p.kc("ngIf",i.isBusqueda))},directives:[U.a,U.c,o.q,o.t,M.o,I.b,G],pipes:[o.F],styles:[".example-icon[_ngcontent-%COMP%]{padding:0 14px}.example-spacer[_ngcontent-%COMP%]{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}.example-ripple-container[_ngcontent-%COMP%]{cursor:pointer;text-align:center;width:40px;height:40px;-webkit-flex-shrink:0;flex-shrink:0;line-height:40px;border-radius:50%;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-drag:none;-webkit-tap-highlight-color:transparent}.text-busqueda[_ngcontent-%COMP%]{border:none;outline:none}.toolbar-busqueda[_ngcontent-%COMP%]{background:#fff}.nom-comercio[_ngcontent-%COMP%]{max-width:70%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"]}),e})();var se=t("wZkO"),ae=t("PGKp"),ce=t("fbMX"),re=t("Q1FS");let de=(()=>{class e{constructor(e,i){this.storageService=e,this.socketService=i,this.keyStorage="sys::rules"}loadReglasCarta(){return this.dataReglasCarta()}getObjReglasCarta(){return this.objReglasCarta}dataReglasCarta(){return new re.Observable(e=>{this.socketService.onReglasCarta().subscribe(i=>{this.objReglasCarta=i[0],this.codeObjInSotrage(),e.next(this.objReglasCarta)})})}codeObjInSotrage(){this.storageService.set(this.keyStorage,btoa(JSON.stringify(this.objReglasCarta)))}decodeObjInSotrage(){return new re.Observable(e=>{const i=this.storageService.get(this.keyStorage);try{this.objReglasCarta=JSON.parse(atob(i)),e.next(this.objReglasCarta)}catch(t){this.dataReglasCarta()}})}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(ce.a),p.Ub(d.a))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var le=t("ds6q"),be=t("qFsG"),me=t("9UHp");let pe=(()=>{class e{constructor(){this.debounceTime=300,this.debounceClick=new p.n,this.clicks=new le.Subject}ngOnInit(){this.subscription=this.clicks.pipe(Object(H.throttleTime)(this.debounceTime)).subscribe(e=>{this.debounceClick.emit(e)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}clickEvent(e){e.preventDefault(),e.stopPropagation(),this.clicks.next(e)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=p.Fb({type:e,selectors:[["","appDebounceClick",""]],hostBindings:function(e,i){1&e&&p.Yb("click",(function(e){return i.clickEvent(e)}))},inputs:{debounceTime:"debounceTime"},outputs:{debounceClick:"debounceClick"}}),e})();function he(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"div",24),p.Lb(2,"img",25),p.Pb(),p.Nb()),2&e){const e=p.cc();p.zb(2),p.nc("src","",e.url_img,"",e.item.img,"",p.xc),p.lc("alt",e.item.img)}}function ue(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"p",26),p.Hc(2),p.Pb(),p.Lb(3,"hr"),p.Nb()),2&e){const e=p.cc();p.zb(2),p.Ic(e.item.detalles)}}function fe(e,i){if(1&e&&(p.Qb(0,"div",42),p.Hc(1),p.dc(2,"number"),p.Pb()),2&e){const e=p.cc(2).$implicit;p.zb(1),p.Jc(" + ",p.fc(2,1,e.precio,"0.2")," ")}}const ge=function(e){return{"li-tachado":e}};function ve(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"mat-checkbox",37),p.Yb("change",(function(){p.wc(e);const i=p.cc().$implicit,t=p.cc().$implicit;return p.cc(2).addSubItem(t,i)}))("ngModelChange",(function(i){return p.wc(e),p.cc().$implicit.selected=i})),p.Qb(2,"div",38),p.Qb(3,"div"),p.Qb(4,"span"),p.Hc(5),p.Pb(),p.Qb(6,"span",39),p.Hc(7),p.Pb(),p.Pb(),p.Qb(8,"div",40),p.Fc(9,fe,3,4,"div",41),p.Pb(),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc().$implicit;p.zb(1),p.kc("ngModel",e.selected)("ngClass",p.pc(7,ge,e.cantidad<1))("disabled",e.cantidad<1),p.zb(4),p.Jc("",e.des," "),p.zb(1),p.kc("hidden",!e.cantidad_visible),p.zb(1),p.Jc(" | ",e.cantidad,""),p.zb(2),p.kc("ngIf",0!=e.precio)}}function Ce(e,i){if(1&e&&(p.Qb(0,"span",46),p.Hc(1),p.dc(2,"number"),p.Pb()),2&e){const e=p.cc(2).$implicit,i=p.cc(3);p.zb(1),p.Kc(" + ",i.simbolo_moneda," ",p.fc(2,2,e.precio,"0.2")," ")}}function Pe(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",43),p.Qb(1,"div"),p.Qb(2,"span"),p.Hc(3),p.Pb(),p.Qb(4,"span",39),p.Hc(5),p.Pb(),p.Fc(6,Ce,3,5,"span",44),p.Pb(),p.Qb(7,"div",40),p.Qb(8,"app-comp-ctrl-add-fast",45),p.Yb("objResponse",(function(i){p.wc(e);const t=p.cc(2).$implicit;return p.cc(2).addSubItemCtrlCantidad(t,i)})),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc().$implicit;p.kc("ngClass",p.pc(8,ge,e.cantidad<1)),p.zb(3),p.Jc("",e.des," "),p.zb(1),p.kc("hidden",!e.cantidad_visible),p.zb(1),p.Jc(" | ",e.cantidad,""),p.zb(1),p.kc("ngIf",0!=e.precio),p.zb(2),p.kc("objItem",e)("stopAdd",e.stop_add)("zoom",1.2)}}function Se(e,i){if(1&e&&(p.Qb(0,"div",34),p.Fc(1,ve,10,9,"ng-container",35),p.Fc(2,Pe,9,10,"ng-template",null,36,p.Gc),p.Pb()),2&e){const e=p.tc(3),i=p.cc().$implicit;p.zb(1),p.kc("ngIf",0===(null==i?null:i.show_cant_item))("ngIfElse",e)}}function ke(e,i){if(1&e&&(p.Qb(0,"div"),p.Qb(1,"div",28),p.Qb(2,"div"),p.Qb(3,"span",29),p.Hc(4,"Obligatorio"),p.Pb(),p.Qb(5,"div",30),p.Qb(6,"p",31),p.Hc(7),p.Pb(),p.Qb(8,"span",32),p.Hc(9),p.Pb(),p.Pb(),p.Pb(),p.Qb(10,"div"),p.Fc(11,Se,4,2,"div",33),p.Pb(),p.Pb(),p.Pb()),2&e){const e=i.$implicit,t=p.cc(2);p.zb(3),p.kc("hidden",!e.isObligatorio),p.zb(4),p.Ic(t.primerMayuscula(e.des)),p.zb(2),p.Ic(e.des_cant_select),p.zb(2),p.kc("ngForOf",e.opciones)}}function xe(e,i){if(1&e&&(p.Ob(0),p.Fc(1,ke,12,4,"div",27),p.Nb()),2&e){const e=p.cc();p.zb(1),p.kc("ngForOf",e.item.subitems)}}function _e(e,i){if(1&e){const e=p.Rb();p.Qb(0,"button",47),p.Yb("click",(function(){p.wc(e);const i=p.cc();return p.tc(22).value="",i.setIndicaciones("")})),p.Lb(1,"i",48),p.Pb()}}function we(e,i){1&e&&p.Lb(0,"i",55)}const Ie=function(e){return{"border-bottom":e}},ye=function(e){return{bounceIn:e}};function Qe(e,i){if(1&e){const e=p.Rb();p.Qb(0,"tr",49),p.Qb(1,"td"),p.Hc(2),p.Pb(),p.Qb(3,"td"),p.Qb(4,"div",50),p.Qb(5,"div",51),p.Hc(6),p.Pb(),p.Qb(7,"div",52),p.Yb("debounceClick",(function(){p.wc(e);const t=i.$implicit;return p.cc().addItemToDialogItem(t,1)}))("debounceWait",(function(){return p.wc(e),p.cc().isWaitBtnMenos})),p.Fc(8,we,1,0,"i",53),p.Hc(9," -"),p.Pb(),p.Qb(10,"div",54),p.Yb("debounceClick",(function(){p.wc(e);const t=i.$implicit;return p.cc().addItemToDialogItem(t,0)})),p.Hc(11,"+"),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.cc();p.kc("ngClass",p.pc(6,Ie,!t.isOneTipoConsumo)),p.zb(2),p.Jc(" ",e.descripcion," "),p.zb(3),p.kc("hidden",0===e.cantidad_seleccionada)("ngClass",p.pc(8,ye,e.animar_cantidad)),p.zb(1),p.Ic(e.cantidad_seleccionada),p.zb(2),p.kc("ngIf",t.isWaitBtnMenos)}}const Te=function(e){return{he2:e}},Oe=function(e){return{"div-tpc-one-option-buttom":e}},Me=function(e,i){return{"div-tpc":e,"div-tpc-one-option":i}};let De=(()=>{class e{constructor(e,i,t,o,n,s,a){this.miPedidoService=e,this.uttilService=i,this.infoToken=t,this.dialogRef=o,this.socketService=n,this.establecimientoService=a,this._subitems_selected=[],this.isOptionRequeridosComplet=!0,this.isObjSubItems=!0,this.isUsCliente=!0,this.isOneTipoConsumo=!1,this.url_img=A.d,this.isWaitBtnMenos=!1,this.destroyDlg$=new le.Subject,this.isFirstOpen=!0,this.clearSubItemOpcionesCtrlCant(s.item),this.item=s.item,this.item.cantidad=this.getCantidadItemCarta(),this.objItemTipoConsumoSelected=s.objItemTipoConsumoSelected,this.miPedidoService.setObjSeccionSeleced(s.seccion),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),this.isOneTipoConsumo=1===this.objItemTipoConsumoSelected.length,this.item.detalles=this.primerMayuscula(this.item.detalles)}ngOnInit(){this.isUsCliente=this.infoToken.getInfoUs().isCliente,this.miPedidoService.itemStockChangeObserve$.pipe(Object(H.takeUntil)(this.destroyDlg$)).subscribe(e=>{this.isFirstOpen?this.isFirstOpen=!1:this.item.iditem===e.iditem&&(this.item.cantidad=e.cantidad)}),this.item.subitems_selected=null,this.item.subitems_view=null,this.getSubItemsItemSelect(this.item),this.simbolo_moneda=this.establecimientoService.getSimboloMoneda()}ngOnDestroy(){this.destroyDlg$.next(!0),this.destroyDlg$.unsubscribe()}clearSubItemOpcionesCtrlCant(e){if(!e.cantidad_seleccionada||0===(null==e?void 0:e.cantidad_seleccionada)){if(!e.subitems)return;e.subitems.map(e=>{1===e.show_cant_item&&e.opciones.map(e=>{(null==e?void 0:e.cantidad_selected)>0&&(e.des=e.desIni,e.precio=e.precio_first.toFixed(2),e.cantidad_selected=0,e.stop_add=!1)})})}}shoFirstChartUpperOptions(e){e.subitems&&e.subitems.map(e=>{e.opciones.map(e=>{e.des=this.uttilService.primeraConMayusculas(e.des.toLowerCase())})})}getCantidadItemCarta(){return parseInt(this.miPedidoService.findItemCarta(this.item).cantidad.toString(),0)}getSubItemsItemSelect(e){if(0===e.procede)return this.isObjSubItems=!1,void(this.isOptionRequeridosComplet=!0);e.is_search_subitems?(this.shoFirstChartUpperOptions(e),this.cocinarListSubItemsView(),this.compItemSumImporte()):this.socketService.emitRes("search-subitems-del-item",e.iditem).subscribe(i=>{let t=i[0].respuesta;t="string"==typeof t?JSON.parse(t):null,e.subitems=t,e.is_search_subitems=!0,this.shoFirstChartUpperOptions(e),this.cocinarListSubItemsView(),this.compItemSumImporte()})}cocinarListSubItemsView(){this.item.subitems&&this.item.subitems.length>0?(this.item.subitems.map(e=>{e.isSoloUno=1===e.subitem_cant_select_ini,e.isObligatorio=1===e.subitem_required_select,e.subitem_cant_select=0===e.subitem_cant_select?e.opciones.length:e.subitem_cant_select,e.des_cant_select=e.isSoloUno?"Solo 1":"Hasta "+e.subitem_cant_select,e.des_cant_select=1===e.show_cant_item&&0===e.subitem_cant_select_ini?"Seleccione":e.des_cant_select,e.opciones.map(e=>{e.iditem_subitem=e.iditem_subitem,e.precio_visible=0!==e.precio,e.precio=e.precio_visible?e.precio:0,e.cantidad_visible=!isNaN(parseFloat(e.cantidad)),e.selected=!1})}),this.isObjSubItems=!0,this.item.indicaciones="",this.checkOptionObligario()):(this.isObjSubItems=!1,this.isOptionRequeridosComplet=!0)}addSubItemCtrlCantidad(e,i){if(i.selected=i.cantidad_selected>0,1===i.cantidad_selected&&(parseFloat(i.precio)>i.precio_first?i.precio_first=i.precio_first:(i.desIni=0!==i.precio_first?i.des:i.desIni,i.precio_first=parseFloat(i.precio))),i.precio=i.cantidad_selected>1?i.isSuma_selected?parseFloat(i.precio)+parseFloat(i.precio_first):parseFloat(i.precio)-parseFloat(i.precio_first):i.precio_first,i.des=i.cantidad_selected>0?`${i.cantidad_selected} ${i.desIni}`:i.desIni,i.precio=i.precio.toFixed(2),0===e.subitem_cant_select_ini)i.stop_add=!1;else{const i=e.opciones.map(e=>e.cantidad_selected||0).reduce((e,i)=>e+i,0),t=e.subitem_cant_select===i;e.opciones.map(e=>e.stop_add=t)}this.addSubItem(e,i)}addSubItem(e,i){let t=e.opciones.filter(e=>e.selected),o=t.length;t.map((t,n)=>{o>e.subitem_cant_select&&t!==i&&(t.selected=!1,o--)}),t=e.opciones.filter(e=>e.selected);const n=t.length;if(1===e.subitem_required_select)if(1===e.show_cant_item){const i=e.opciones.map(e=>e.cantidad_selected||0).reduce((e,i)=>e+i,0);e.isObligatorio=i!==e.subitem_cant_select}else e.isObligatorio=n!==e.subitem_cant_select;this._subitems_selected=[],this.item.subitems.map(e=>{e.opciones.filter(e=>e.selected).map(e=>{this._subitems_selected.push(e)})}),this.item.subitems_selected=this._subitems_selected,this.checkOptionObligario(),this.compItemSumImporte(!0)}checkOptionObligario(){let e=0;this.item.subitems&&null!==this.item.subitems?(this.item.subitems.map(i=>{e=i.isObligatorio?1:e}),this.isOptionRequeridosComplet=0===e):this.isOptionRequeridosComplet=!0}compItemSumImporte(e=!1){if(e){let e=0;this.item.subitems.map(i=>{i.opciones.filter(e=>e.selected).map(i=>{e+=parseFloat(i.precio.toString())})}),this.precioProducto=this._precioProductoIni+e}else this.precioProducto=this.getImporteTotalItem(),this._precioProductoIni=this.precioProducto}getImporteTotalItem(){let e=0;return e=this.miPedidoService.getImporteTotalItemFromMiPedido(this.item),e=0===e?parseFloat(this.item.precio):e,e}addItemToDialogItem(e,i){let t=!0;this.item.subitems_selected=this._subitems_selected,this.item.subitems_selected.map(i=>i.idtipo_consumo=e.idtipo_consumo),this.item.subitems_selected.map(e=>{"ND"===e.cantidad||0!==parseFloat(e.cantidad.toString())||(t=!1)}),t&&(this.miPedidoService.addItem2(e,this.item,i),e.animar_cantidad=!0,setTimeout(()=>{e.animar_cantidad=!1},500),this.compItemSumImporte())}setIndicaciones(e){var i;this.item.indicaciones=this.uttilService.addslashes(e);let t=!1;this.isObjSubItems&&(t=(null===(i=this.item.subitems_selected)||void 0===i?void 0:i.length)>0);const o=this.miPedidoService.findOnlyItemMiPedido(this.item);o&&!this.isObjSubItems&&(o.indicaciones=e),o&&!t&&(o.indicaciones=e),this.miPedidoService.setLocalStoragePedido()}getEstadoStockItem(e){if("ND"===e||isNaN(e))return"verde";{const i=parseInt(e,0);return i>10?"verde":i>5?"amarillo":"rojo"}}cerrarDlg(){this.dialogRef.close()}primerMayuscula(e){return this.uttilService.primeraConMayusculas(e)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(a.a),p.Kb(w.a),p.Kb(m.a),p.Kb(S.i),p.Kb(d.a),p.Kb(S.a),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-dialog-item-edit"]],decls:37,vars:32,consts:[[1,"item-content"],[1,"i-header"],[1,"d-flex"],[1,"fs-13","fw-600"],[1,"d-flex","align-items-start"],["matRipple","",1,"i-btn-exit",2,"width","30px",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"i-body","fw-100","fs-13",3,"ngClass"],[4,"ngIf"],[1,"p-3"],[1,"fs-18","text-secondary","fw-600"],[1,"mb-3",3,"ngClass"],[1,"w-100"],["matInput","","placeholder","Agregue una indicacion","name","indicaciones",3,"ngModel","ngModelChange","keyup"],["txtIdicaciones",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"p-3","w-100",3,"ngClass"],[1,"fs-12","text-danger",3,"hidden"],["id","tpc_content",1,"mb-2"],["width","100%",1,"tb-tpc"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"i-footer","d-flex","justify-content-between"],["mat-flat-button","","color","primary",3,"click"],[1,"i-precio"],[1,"text-center","border-bottom"],[1,"img-carta",3,"src","alt"],[1,"titlo-detalle"],[4,"ngFor","ngForOf"],[1,"pb-3","pt-2","mb-3"],[1,"txt-obligatorio",3,"hidden"],[1,"sub-i-titulo","mb-2"],[1,"mb-1","fw-600","fs-14"],[1,"fs-12","text-secondary"],["class","xoption w-100","matRipple","",4,"ngFor","ngForOf"],["matRipple","",1,"xoption","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"w-100",3,"ngModel","ngClass","disabled","change","ngModelChange"],[1,"w-100","d-flex","justify-content-between","fs-13"],[1,"xprecio","pl-1",3,"hidden"],[1,"xprecio","aling-derecha"],["class","fw-600 fs-12",4,"ngIf"],[1,"fw-600","fs-12"],[1,"w-100","d-flex","justify-content-between","fs-13","pt-2","pb-2",3,"ngClass"],["class","ml-2 fs-11 fw-600",4,"ngIf"],[3,"objItem","stopAdd","zoom","objResponse"],[1,"ml-2","fs-11","fw-600"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"fa","fa-close"],[3,"ngClass"],[1,"d-flex","float-right"],[1,"fs-19","pr-2","animated",3,"hidden","ngClass"],["appDebounceClick","","matRipple","",1,"btn-tbl","bg-danger","xCursor",3,"debounceClick","debounceWait"],["class","fa fa-arrow-right",4,"ngIf"],["appDebounceClick","","matRipple","",1,"btn-tbl","bg-success","xCursor",3,"debounceClick"],[1,"fa","fa-arrow-right"]],template:function(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",0),p.Qb(1,"div",1),p.Qb(2,"div",2),p.Qb(3,"div",3),p.Qb(4,"div",4),p.Qb(5,"span"),p.Hc(6),p.dc(7,"number"),p.Pb(),p.Qb(8,"span"),p.Hc(9),p.Pb(),p.Pb(),p.Pb(),p.Qb(10,"div",5),p.Yb("click",(function(){return i.cerrarDlg()})),p.Lb(11,"i",6),p.Pb(),p.Pb(),p.Pb(),p.Qb(12,"div",7),p.Fc(13,he,3,3,"ng-container",8),p.Qb(14,"div",9),p.Qb(15,"p",10),p.Hc(16),p.Pb(),p.Fc(17,ue,4,1,"ng-container",8),p.Fc(18,xe,2,1,"ng-container",8),p.Qb(19,"div",11),p.Qb(20,"mat-form-field",12),p.Qb(21,"input",13,14),p.Yb("ngModelChange",(function(e){return i.item.indicaciones=e}))("keyup",(function(){p.wc(e);const t=p.tc(22);return i.setIndicaciones(t.value)})),p.Pb(),p.Fc(23,_e,2,0,"button",15),p.Pb(),p.Pb(),p.Pb(),p.Qb(24,"div",16),p.Qb(25,"span",17),p.Hc(26,"Hay opciones obligatorias por marcar"),p.Pb(),p.Qb(27,"div",18),p.Qb(28,"table",19),p.Fc(29,Qe,12,10,"tr",20),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(30,"div",21),p.Qb(31,"div"),p.Qb(32,"button",22),p.Yb("click",(function(){return i.cerrarDlg()})),p.Hc(33,"Listo, continuar"),p.Pb(),p.Pb(),p.Qb(34,"div",23),p.Hc(35),p.dc(36,"number"),p.Pb(),p.Pb(),p.Pb()}2&e&&(p.zb(5),p.Bb("fs-12 i-stock estado-color-",i.getEstadoStockItem(i.item.cantidad),""),p.zb(1),p.Jc(" ",p.fc(7,19,i.item.cantidad,"2."),""),p.zb(3),p.Ic(i.item.des),p.zb(3),p.kc("ngClass",p.pc(25,Te,!i.isOneTipoConsumo)),p.zb(1),p.kc("ngIf",i.item.img.length>0),p.zb(3),p.Jc(" ",i.item.des," "),p.zb(1),p.kc("ngIf",i.item.detalles.length>0),p.zb(1),p.kc("ngIf",i.item.subitems),p.zb(1),p.kc("ngClass",p.pc(27,Oe,i.isOneTipoConsumo)),p.zb(2),p.kc("ngModel",i.item.indicaciones),p.zb(2),p.kc("ngIf",i.item.indicaciones),p.zb(1),p.kc("ngClass",p.qc(29,Me,i.isOneTipoConsumo,i.isOneTipoConsumo)),p.zb(1),p.kc("hidden",i.isOptionRequeridosComplet),p.zb(2),p.Ab("disabled",!i.isOptionRequeridosComplet||null),p.zb(2),p.kc("ngForOf",i.objItemTipoConsumoSelected),p.zb(6),p.Kc("",i.simbolo_moneda," ",p.fc(36,22,i.precioProducto,"0.2"),""))},directives:[M.o,o.q,o.t,T.c,be.a,n.c,n.p,n.s,o.s,k.b,Q.a,me.a,T.j,pe],pipes:[o.g],styles:[".mat-checkbox-layout{margin:0;width:100%;position:relative}  .mat-checkbox-inner-container{margin-left:0!important}  .cdk-overlay-dark-backdrop{background:rgba(0,0,0,.52)}.item-content[_ngcontent-%COMP%]{position:relative}.i-header[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #d3d3d3;background:#eee}.titlo-detalle[_ngcontent-%COMP%]{font-size:14px;font-family:Ubuntu-Light;color:#616161}.i-stock[_ngcontent-%COMP%]{border-radius:5px;text-align:center;margin-right:5px;padding:5px}.i-btn-exit[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;padding:8px;line-height:10px;background:hsla(0,0%,74.1%,.7);border-radius:4px}.li-tachado[_ngcontent-%COMP%]{text-decoration:line-through;color:red}.sub-i-titulo-content[_ngcontent-%COMP%]{padding-bottom:20px}.sub-i-titulo[_ngcontent-%COMP%]{line-height:1.2}.borde-bajo[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}.i-body[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 170px);height:calc(100vh - 170px);overflow-x:hidden;overflow-y:auto}.i-body.he2[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 110px);height:calc(100vh - 110px)}.txt-obligatorio[_ngcontent-%COMP%]{font-size:12px;background:#e0e0e0;padding:3px;margin-left:5px;border-radius:8px;position:relative;float:right}.mat-checkbox-layout[_ngcontent-%COMP%]{margin:0}.xoption[_ngcontent-%COMP%]{padding-right:8px;min-width:150px;font-size:12px;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;border-bottom:1px solid #eee;padding-bottom:2px;padding-top:2px}.xoption[_ngcontent-%COMP%]   .agotado[_ngcontent-%COMP%]{text-decoration:line-through;color:#db7093}.xoption[_ngcontent-%COMP%]   .xprecio[_ngcontent-%COMP%]{font-size:10px;color:#757575}.xprecio.aling-derecha[_ngcontent-%COMP%]{position:absolute;float:right;right:0}.i-footer[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;bottom:0;z-index:1;border-top:1px solid #d3d3d3;background:#fff;width:100%;padding:15px;background:#eee}.i-precio[_ngcontent-%COMP%]{position:absolute;right:15px;font-size:20px;font-weight:600;top:18px}.tb-tpc[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px}.tb-tpc-one[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;border:none}.btn-tbl[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:7px 16px;font-size:15px;border-radius:5px;margin-left:4px;margin-bottom:4px}#tpc_content[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.43}.estado-color-verde[_ngcontent-%COMP%]{background:#43a047;color:#e0e0e0}.estado-color-amarillo[_ngcontent-%COMP%]{background:#ffb300;color:#424242}.estado-color-rojo[_ngcontent-%COMP%]{background:#d81b60;color:#e0e0e0}.img-carta[_ngcontent-%COMP%]{max-width:100%;max-height:40vh;-o-object-fit:cover;object-fit:cover;-webkit-transition:all .1s;transition:all .1s}.div-tpc[_ngcontent-%COMP%]{bottom:50px;position:fixed;background:#fff;border-top:1px solid #bdbdbd}@media only screen and (min-width:445px){.img-carta[_ngcontent-%COMP%]{padding:10px}.i-footer[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky}.i-body[_ngcontent-%COMP%]{max-height:-webkit-calc(90vh - 110px);max-height:calc(90vh - 110px)}.i-body[_ngcontent-%COMP%], .i-body.he2[_ngcontent-%COMP%]{height:auto}.div-tpc[_ngcontent-%COMP%]{position:relative;bottom:0}.div-tpc-one-option[_ngcontent-%COMP%]{bottom:50px;position:absolute}.div-tpc-one-option-buttom[_ngcontent-%COMP%]{padding-bottom:80px}}"]}),e})();var ze=t("IW2O"),Fe=t("quSY"),Re=t("HWNa");function Le(e,i){if(1&e&&(p.Qb(0,"p",16),p.Hc(1),p.Pb()),2&e){const e=p.cc().$implicit;p.zb(1),p.Ic(e.comentario)}}const Ee=function(e,i){return{"badge-danger":e,"badge-warning":i}};function He(e,i){if(1&e&&(p.Qb(0,"div",9),p.Qb(1,"div",10),p.Qb(2,"p",11),p.Hc(3),p.Pb(),p.Qb(4,"div",12),p.Qb(5,"span",13),p.Hc(6),p.dc(7,"number"),p.Pb(),p.Qb(8,"p",14),p.Lb(9,"i",6),p.Hc(10),p.dc(11,"number"),p.Pb(),p.Pb(),p.Pb(),p.Fc(12,Le,2,1,"p",15),p.Pb()),2&e){const e=i.$implicit;p.zb(3),p.Jc("",e.nomcliente," "),p.zb(3),p.Ic(p.fc(7,5,e.numpedidos,"2.")),p.zb(2),p.kc("ngClass",p.qc(11,Ee,e.calificacion<3,e.calificacion<4)),p.zb(2),p.Jc(" ",p.fc(11,8,e.calificacion,".1"),""),p.zb(2),p.kc("ngIf",""!=e.comentario)}}let je=(()=>{class e{constructor(e){this.dataComentarios=e,this.listComentarios=this.dataComentarios.listCalificacion}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(S.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-dialog-calificacion-sede"]],decls:19,vars:9,consts:[[1,"div-content-opiniones"],[1,"d-flex","justify-content-between","align-items-center"],["mat-dialog-close","",1,"btn","btn-sm","btn-secondary"],[1,"fa","fa-close"],[1,"p-2"],[1,"badge","badge-secondary","mr-2","fs-13"],[1,"fa","fa-star"],[1,"fs-13"],["class","border-bottom pb-2 pt-2 mb-1 fs-12",4,"ngFor","ngForOf"],[1,"border-bottom","pb-2","pt-2","mb-1","fs-12"],[1,"d-flex","justify-content-between"],[1,"fw-600","text-secondary","mr-2","fs-11"],[1,"d-flex"],[1,"badge","badge-secondary","mr-2"],[1,"badge","badge-success",3,"ngClass"],["class","fw-100 text-secondary",4,"ngIf"],[1,"fw-100","text-secondary"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Qb(2,"p"),p.Hc(3,"Comentarios"),p.Pb(),p.Qb(4,"button",2),p.Lb(5,"i",3),p.Pb(),p.Pb(),p.Lb(6,"hr"),p.Qb(7,"div",4),p.Qb(8,"div"),p.Qb(9,"span",5),p.Lb(10,"i",6),p.Hc(11),p.dc(12,"number"),p.Pb(),p.Qb(13,"span",7),p.Hc(14),p.dc(15,"number"),p.Pb(),p.Pb(),p.Lb(16,"hr"),p.Qb(17,"div"),p.Fc(18,He,13,14,"div",8),p.Pb(),p.Pb(),p.Pb()),2&e&&(p.zb(11),p.Jc(" ",p.fc(12,3,i.dataComentarios.calificacion,".1"),""),p.zb(3),p.Jc("Puntuacion basada en ",p.fc(15,6,i.dataComentarios.cantidad,"2.")," opiniones de usuarios."),p.zb(4),p.kc("ngForOf",i.listComentarios))},directives:[S.d,o.s,o.q,o.t],pipes:[o.g],styles:[".mat-dialog-container{padding:0}.div-content-opiniones[_ngcontent-%COMP%]{padding:24px}p[_ngcontent-%COMP%]{margin:0}"]}),e})();var Be=t("RHa8");let Ne=(()=>{class e{constructor(e,i,t){this.pedidoService=e,this.socketService=i,this.cocinarDescuentosPromoService=t}iniReloadOpenPromo(e){this.listPromos=e,this.socketService.emit("date-now-info",null),setInterval(()=>{this.socketService.emit("date-now-info",null)},15e3),this.socketService.onGetInfoDateNow().subscribe(e=>{const i=new Date(e);this.listPromos.map(e=>{this.consultarPromoAbierto(e,i)})})}promoFilterShow(e,i){const t=[];return this.carta=this.pedidoService.getObjCarta(),e.items&&e.lista.map(e=>{if(!e.iditem)return;const o=e.iditem.toString(),n=parseFloat(e.porc_descuento),s=i.secciones.map(e=>e.items.find(e=>e.iditem.toString()===o)).find(e=>e);if(s){const i=Object.assign({},s);i.ispromo=e,e.cantidad_x||this.cocinarDescuentosPromoService.aplicarDescuentoItem(i,n),t.push(i)}}),e.productos&&e.lista.map(e=>{if(!e.idproducto_stock)return;const i=e.idproducto_stock.toString(),o=parseFloat(e.porc_descuento),n=this.carta.bodega.map(e=>e.items.find(e=>e.idcarta_lista.toString()===i)).find(e=>e);if(n){const i=Object.assign({},n);i.ispromo=e,e.cantidad_x||this.cocinarDescuentosPromoService.aplicarDescuentoItem(i,o),t.push(i)}}),e.secciones&&e.lista.map(e=>{const o=e.idseccion.toString(),n=parseFloat(e.porc_descuento),s=i.secciones.find(e=>e.idseccion.toString()===o);s&&s.items.map(i=>{const o=Object.assign({},i);o.ispromo=e,this.cocinarDescuentosPromoService.aplicarDescuentoItem(o,n),t.push(o)})}),t}getImportePedido(){return this.pedidoService.getSubTotalMiPedido()}consultarPromoAbierto(e,i){const t=i.getDay(),o=e.parametros.body.dias_semana.indexOf(t)>-1;let n=!1;const s=new Date,a=new Date,c=e.parametros.body.h_inicio.split(":"),r=e.parametros.body.h_fin.split(":");s.setHours(parseFloat(c[0])),s.setMinutes(parseFloat(c[1])),a.setHours(parseFloat(r[0])),a.setMinutes(parseFloat(r[1])),n=i.getTime()>=s.getTime()&&i.getTime()<=a.getTime(),e.abierto=o&&n?1:0}showDiasSemana(e){const i=e.split(",").filter(e=>""!==e);if(7===i.length)return"Todos los dias";let t="";return i.map(e=>{t+=this.getDiasByNum(parseInt(e,0))+", "}),t=t.slice(0,-2),t}getDiasByNum(e){return["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"][e]}addZero(e){return e<10&&(e="0"+e),e}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(a.a),p.Ub(d.a),p.Ub(Be.a))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ae=t("6NNB");let Ve=(()=>{class e{constructor(e,i){this.socketService=e,this.pedidoService=i,this.datosSede=[],this.impresoras=[]}getDataSede(){this.datosSede=this.pedidoService.objDatosSede}relationRowToPrint(e=!1){this.getDataSede();const i=this.pedidoService.getMiPedido(),t=this.pedidoService.getObjNewItemTiposConsumo(),o=[],n=[];let s=[],a=[],c=null;this.impresoras=this.datosSede.impresoras;const r=this.datosSede.datossede[0].var_size_font_tall_comanda,d=this.datosSede.datossede[0].pie_pagina,l=this.datosSede.datossede[0].pie_pagina_comprobante,b="1"===this.datosSede.datossede[0].isprint_all_delivery.toString();let m=!0,p=!1;e&&this.setFirstPrinterSeccionCliente(i,this.impresoras);let h=!1,u=t;u=u.filter(e=>0!==e.idimpresora),h=u.length>0,console.log("isTpcPrinter",h),h&&u.map(e=>{const t=e.idtipo_consumo,b=e.idimpresora;if(a=[],i.tipoconsumo.filter(e=>e.idtipo_consumo===t).map((e,i)=>{a[i]={des:e.descripcion,id:e.idtipo_consumo,titlo:e.titulo,conDatos:!1},e.secciones.map(e=>{e.items.map(t=>{m=!0,a[i].conDatos=!0,a[i][t.iditem]=t,a[i][t.iditem].des_seccion=e.des,a[i][t.iditem].sec_orden=e.sec_orden,a[i][t.iditem].cantidad=t.cantidad_seleccionada.toString().padStart(2,"0"),a[i][t.iditem].precio_print=parseFloat(t.precio_print.toString()).toFixed(2),t.subitems_view||(a[i][t.iditem].subitems_view=null),t.flag_add_tpc=!0})})}),0===a.length||!m)return;c=this.impresoras.filter(e=>e.idimpresora===b)[0],s=[];const p={};p.ip_print=c.ip,p.var_margen_iz=c.var_margen_iz,p.var_size_font=c.var_size_font,p.local=0,p.num_copias=c.num_copias,p.var_size_font_tall_comanda=r,p.copia_local=0,p.img64="",p.papel_size=c.papel_size,p.pie_pagina=d,p.pie_pagina_comprobante=l,s.push(p),o.push({arrBodyPrint:a,arrPrinters:s}),n.push(p)});const f=JSON.parse(localStorage.getItem("sys::punto"))||{};return f.ispunto_autopedido=!!f&&f.ispunto_autopedido,this.impresoras.map(t=>{if(m=!1,a=[],i.tipoconsumo.map((i,o)=>{if(a[o]={des:i.descripcion,id:i.idtipo_consumo,titlo:i.titulo,conDatos:!1},p="delivery"===i.descripcion.toLowerCase(),i.secciones.filter(e=>e.idimpresora===t.idimpresora).map(n=>{c=t,p&&b&&i.secciones.map(e=>{e.items.map(i=>{i.flag_add_tpc||(m=!0,a[o].conDatos=!0,a[o][i.iditem]=i,a[o][i.iditem].des_seccion=e.des,a[o][i.iditem].sec_orden=e.sec_orden,a[o][i.iditem].cantidad=i.cantidad_seleccionada.toString().padStart(2,"0"),a[o][i.iditem].precio_print=parseFloat(i.precio_print.toString()).toFixed(2),i.subitems_view||(a[o][i.iditem].subitems_view=null))})}),n.items.map(i=>{i.flag_add_tpc||(0!==i.imprimir_comanda||e)&&(m=!0,a[o].conDatos=!0,a[o][i.iditem]=i,a[o][i.iditem].des_seccion=n.des,a[o][i.iditem].sec_orden=n.sec_orden,a[o][i.iditem].cantidad=i.cantidad_seleccionada.toString().padStart(2,"0"),a[o][i.iditem].precio_print=parseFloat(i.precio_print.toString()).toFixed(2),i.subitems_view||(a[o][i.iditem].subitems_view=null))})}),i.secciones.filter(e=>e.idimpresora_otro===t.idimpresora).map(n=>{c=t,p&&b&&i.secciones.map(e=>{e.items.map(i=>{i.flag_add_tpc||(m=!0,a[o].conDatos=!0,a[o][i.iditem]=i,a[o][i.iditem].des_seccion=e.des,a[o][i.iditem].sec_orden=e.sec_orden,a[o][i.iditem].cantidad=i.cantidad_seleccionada.toString().padStart(2,"0"),a[o][i.iditem].precio_print=parseFloat(i.precio_print.toString()).toFixed(2),i.subitems_view||(a[o][i.iditem].subitems_view=null))})}),n.items.map(i=>{i.flag_add_tpc||(0!==i.imprimir_comanda||e)&&(m=!0,a[o].conDatos=!0,a[o][i.iditem]=i,a[o][i.iditem].des_seccion=n.des,a[o][i.iditem].sec_orden=n.sec_orden,a[o][i.iditem].cantidad=i.cantidad_seleccionada.toString().padStart(2,"0"),a[o][i.iditem].precio_print=parseFloat(i.precio_print.toString()).toFixed(2),i.subitems_view||(a[o][i.iditem].subitems_view=null))})}),f.ispunto_autopedido){if(f.impresora.ip_print=f.impresora.ip,t.idimpresora!==f.impresora.idimpresora)return;i.secciones.map(i=>{c=f.impresora,i.items.map(t=>{(0!==t.imprimir_comanda||e)&&(m=!0,a[o].conDatos=!0,a[o][t.iditem]=t,a[o][t.iditem].des_seccion=i.des,a[o][t.iditem].sec_orden=i.sec_orden,a[o][t.iditem].cantidad=t.cantidad_seleccionada.toString().padStart(2,"0"),a[o][t.iditem].precio_print=parseFloat(t.precio_print.toString()).toFixed(2),t.subitems_view||(a[o][t.iditem].subitems_view=null))})})}}),0===a.length||!m)return;s=[];const h={};h.ip_print=c.ip,h.var_margen_iz=c.var_margen_iz,h.var_size_font=c.var_size_font,h.local=0,h.num_copias=c.num_copias,h.var_size_font_tall_comanda=r,h.copia_local=0,h.img64="",h.papel_size=c.papel_size,h.pie_pagina=d,h.pie_pagina_comprobante=l,s.push(h),o.push({arrBodyPrint:a,arrPrinters:s}),n.push(h)}),o.listPrinters=n,o}GetFirstPrinter(e){let i=null;const t=e.length;return t>0&&(i=e[0]),t>1&&"caja"===i.descripcion.toLowerCase()&&(i=e[1]),i}setFirstPrinterSeccionCliente(e,i){let t={};e.tipoconsumo.map(e=>{t=e.secciones.filter(e=>0!==e.idimpresora)[0]}),t||(t=this.GetFirstPrinter(i)),t&&e.tipoconsumo.map((e,i)=>{t=e.secciones.filter(e=>0===e.idimpresora).map(e=>{e.idimpresora=t.idimpresora})})}getPrinterPrecuenta(){let e,i=[],t=[];this.getDataSede(),i=[];const o=this.datosSede.datossede[0].var_size_font_tall_comanda,n=this.datosSede.datossede[0].pie_pagina,s=this.datosSede.datossede[0].pie_pagina_comprobante,a=this.pedidoService.getMiPedido();t=[],a.tipoconsumo.map((e,i)=>{t[i]={des:e.descripcion,id:e.idtipo_consumo,titlo:e.titulo,conDatos:!1},e.secciones.map(e=>{e.items.map(o=>{t[i].conDatos=!0,t[i][o.iditem]=o,t[i][o.iditem].des_seccion=e.des,t[i][o.iditem].sec_orden=e.sec_orden,t[i][o.iditem].cantidad=o.cantidad_seleccionada.toString().padStart(2,"0"),t[i][o.iditem].precio_print_app=parseFloat(o.precio_print.toString()).toFixed(2),t[i][o.iditem].precio_print=parseFloat(o.precio_print.toString()).toFixed(2),o.subitems_view||(t[i][o.iditem].subitems_view=null)})})}),this.impresoras=this.datosSede.impresoras;const c=this.impresoras.filter(e=>e.idtipo_otro).filter(e=>e.idtipo_otro.indexOf("-2")>-1)[0];if(!c)return!1;const r={};return r.ip_print=c.ip,r.var_margen_iz=c.var_margen_iz,r.var_size_font=c.var_size_font,r.local=0,r.num_copias=0,r.var_size_font_tall_comanda=o,r.copia_local=0,r.img64="",r.papel_size=c.papel_size,r.pie_pagina=n,r.pie_pagina_comprobante=s,i.push(r),e={arrBodyPrint:t,arrPrinters:i},e}enviarMiPedido(e=!1){return this.relationRowToPrint(e)}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(d.a),p.Ub(a.a))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var qe=t("nYx/"),$e=t("Ie24"),Ue=t("Te6q"),Ke=t("3ui4"),Ye=t("1G5W"),Je=t("OzqD"),Ge=t("tyNb");const We=function(e){return[e]};function Ze(e,i){if(1&e&&(p.Qb(0,"div",5),p.Lb(1,"app-comp-list-item-pedido-cliente",6),p.Pb()),2&e){const e=p.cc();p.kc("ngClass",p.pc(2,We,e.isVisibleConfirmarAnimated?"fadeOutLeft d-none":"fadeInLeft")),p.zb(1),p.kc("arrSubtotales",e._arrSubtotales)}}function Xe(e,i){1&e&&(p.Qb(0,"span",31),p.Hc(1,"Promo"),p.Pb())}function ei(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",38),p.Yb("click",(function(){p.wc(e);const i=p.cc().$implicit,t=p.cc(3).$implicit,o=p.cc(2).$implicit,n=p.cc(2).$implicit;return p.cc(3).addItemToResumen(n,o,t,i,1)})),p.Hc(1,"-"),p.Pb()}}function ii(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",39),p.Yb("click",(function(){p.wc(e);const i=p.cc().$implicit,t=p.cc(3).$implicit,o=p.cc(2).$implicit,n=p.cc(2).$implicit;return p.cc(3).addItemToResumen(n,o,t,i,0)})),p.Hc(1,"+"),p.Pb()}}const ti=function(e){return{"pl-4":e}};function oi(e,i){if(1&e&&(p.Qb(0,"li",33),p.Qb(1,"div",34),p.Fc(2,ei,2,0,"div",35),p.Hc(3),p.dc(4,"number"),p.Fc(5,ii,2,0,"div",36),p.Pb(),p.Qb(6,"div",37),p.Hc(7),p.dc(8,"number"),p.Pb(),p.Pb()),2&e){const e=i.$implicit,t=p.cc(10);p.kc("matRippleColor",t.rippleColorSubItem),p.zb(1),p.kc("ngClass",p.pc(14,ti,t.isHayCuentaBusqueda)),p.zb(1),p.kc("ngIf",!t.isHayCuentaBusqueda),p.zb(1),p.Kc(" ",p.fc(4,8,e.cantidad_seleccionada,"2.")," ",e.des," "),p.zb(2),p.kc("ngIf",!t.isHayCuentaBusqueda),p.zb(1),p.kc("hidden",0===e.precio),p.zb(1),p.Jc(" + ",p.fc(8,11,e.precio,"0.2")," ")}}function ni(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"div"),p.Qb(2,"ul",25),p.Fc(3,oi,9,16,"li",32),p.Pb(),p.Pb(),p.Nb()),2&e){const e=p.cc(2).$implicit;p.zb(3),p.kc("ngForOf",e.subitems_view)}}function si(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"li",26),p.Yb("click",(function(){p.wc(e);const i=p.cc().$implicit,t=p.cc(2).$implicit;return p.cc(5).openDlgItemToResumen(t,i)})),p.Qb(2,"div",27),p.Hc(3),p.dc(4,"number"),p.Pb(),p.Qb(5,"div",28),p.Hc(6),p.dc(7,"lowercase"),p.Qb(8,"span",19),p.Hc(9),p.Pb(),p.Fc(10,Xe,2,0,"span",29),p.Pb(),p.Qb(11,"div",30),p.Hc(12),p.dc(13,"number"),p.Pb(),p.Pb(),p.Fc(14,ni,4,1,"ng-container",4),p.Nb()}if(2&e){const e=p.cc().$implicit,i=p.cc(7);p.zb(1),p.kc("matRippleColor",i.rippleColor),p.zb(2),p.Ic(p.fc(4,8,e.cantidad_seleccionada,"2.")),p.zb(3),p.Jc("",p.ec(7,11,e.des)," "),p.zb(2),p.kc("hidden",!e.indicaciones),p.zb(1),p.Jc("( ",e.indicaciones," )"),p.zb(1),p.kc("ngIf",e.ispromo),p.zb(2),p.Ic(p.fc(13,13,e.precio_print,"0.2")),p.zb(2),p.kc("ngIf",e.subitems_view)}}function ai(e,i){if(1&e&&(p.Qb(0,"div"),p.Fc(1,si,15,16,"ng-container",4),p.Pb()),2&e){const e=i.$implicit;p.zb(1),p.kc("ngIf",e.cantidad_seleccionada>0)}}function ci(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"div",23),p.Qb(2,"span"),p.Hc(3),p.dc(4,"titlecase"),p.Pb(),p.Qb(5,"div",24),p.Hc(6),p.Pb(),p.Pb(),p.Qb(7,"ul",25),p.Fc(8,ai,2,1,"div",22),p.Pb(),p.Nb()),2&e){const e=p.cc().$implicit;p.zb(3),p.Ic(p.ec(4,3,e.des)),p.zb(3),p.Ic(e.count_items),p.zb(2),p.kc("ngForOf",e.items)}}function ri(e,i){if(1&e&&(p.Qb(0,"div"),p.Fc(1,ci,9,5,"ng-container",4),p.Pb()),2&e){const e=i.$implicit;p.zb(1),p.kc("ngIf",e.count_items>0)}}function di(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",18),p.Qb(2,"span",19),p.Hc(3),p.Pb(),p.Qb(4,"span",19),p.Qb(5,"i",20),p.Yb("click",(function(){return p.wc(e),p.cc(4).goBackCarta()})),p.Pb(),p.Hc(6," Resumen de mi orden"),p.Pb(),p.Qb(7,"div",21),p.Hc(8),p.Pb(),p.Pb(),p.Fc(9,ri,2,1,"div",22),p.Nb()}if(2&e){const e=p.cc().$implicit,i=p.cc(3);p.zb(2),p.kc("hidden",i.isDeliveryCliente),p.zb(1),p.Ic(e.descripcion),p.zb(1),p.kc("hidden",!i.isDeliveryCliente),p.zb(4),p.Ic(e.count_items_seccion),p.zb(1),p.kc("ngForOf",e.secciones)}}function li(e,i){if(1&e&&(p.Qb(0,"div",17),p.Fc(1,di,10,5,"ng-container",4),p.Pb()),2&e){const e=i.$implicit;p.zb(1),p.kc("ngIf",e.count_items_seccion>0)}}function bi(e,i){if(1&e&&(p.Qb(0,"li",40),p.Qb(1,"div",25),p.Hc(2),p.dc(3,"titlecase"),p.Pb(),p.Qb(4,"div"),p.Hc(5),p.dc(6,"number"),p.Pb(),p.Pb()),2&e){const e=i.$implicit,t=p.cc(3);p.kc("matRippleColor",t.rippleColor),p.zb(2),p.Ic(p.ec(3,3,e.descripcion)),p.zb(3),p.Ic(p.fc(6,5,e.importe,"0.2"))}}function mi(e,i){1&e&&p.Lb(0,"i",46)}function pi(e,i){if(1&e){const e=p.Rb();p.Qb(0,"button",44),p.Yb("click",(function(){return p.wc(e),p.cc(4).imprimirPrecuenta()})),p.Fc(1,mi,1,0,"i",45),p.Hc(2," Imprimir Precuenta "),p.Pb()}if(2&e){const e=p.cc(4);p.kc("disabled",e.loadPrinterPrecuenta),p.zb(1),p.kc("ngIf",e.loadPrinterPrecuenta)}}function hi(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",41),p.Qb(2,"button",42),p.Yb("click",(function(){return p.wc(e),p.cc(3).nuevoPedidoFromCuenta()})),p.Hc(3,"Nuevo Pedido"),p.Pb(),p.Fc(4,pi,3,2,"button",43),p.Pb(),p.Nb()}if(2&e){const e=p.cc(3);p.zb(4),p.kc("ngIf",!e.isCliente)}}function ui(e,i){if(1&e&&(p.Qb(0,"div",12),p.Fc(1,li,2,1,"div",13),p.Qb(2,"div",14),p.Qb(3,"ul",15),p.Fc(4,bi,7,8,"li",16),p.Pb(),p.Pb(),p.Lb(5,"br"),p.Fc(6,hi,5,1,"ng-container",4),p.Lb(7,"br"),p.Lb(8,"br"),p.Lb(9,"br"),p.Lb(10,"br"),p.Lb(11,"br"),p.Pb()),2&e){const e=p.cc(2);p.kc("ngClass",p.pc(4,We,e.isVisibleConfirmarAnimated?"d-none":"d-inline")),p.zb(1),p.kc("ngForOf",e._miPedido.tipoconsumo),p.zb(3),p.kc("ngForOf",e._arrSubtotales),p.zb(2),p.kc("ngIf",e.isHayCuentaBusqueda)}}function fi(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",49),p.Qb(2,"app-comp-datos-reserva",50),p.Yb("isReady",(function(i){return p.wc(e),p.cc(3).isReadyClienteReserva=i}))("dataReserva",(function(i){return p.wc(e),p.cc(3).getDatosFormConfirmaReserva(i)})),p.Pb(),p.Qb(3,"p",51),p.Lb(4,"i",52),p.Hc(5," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),p.Pb(),p.Lb(6,"hr"),p.Pb(),p.Nb()}}function gi(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div"),p.Qb(1,"app-text-nom-cliente",58),p.Yb("isNombreValid",(function(i){return p.wc(e),p.cc(5).nombreClienteValido=i})),p.Pb(),p.Pb()}2&e&&(p.zb(1),p.kc("sizeTextBg",!0))}const vi=function(e){return{xdisabled:e}};function Ci(e,i){if(1&e){const e=p.Rb();p.Ob(0,25),p.Qb(1,"div",41),p.Lb(2,"br"),p.Lb(3,"br"),p.Fc(4,gi,2,1,"div",4),p.Lb(5,"hr"),p.Qb(6,"div"),p.Qb(7,"p",55),p.Lb(8,"i",52),p.Hc(9," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),p.Pb(),p.Lb(10,"hr"),p.Lb(11,"br"),p.Qb(12,"div",41),p.Qb(13,"button",56),p.Yb("click",(function(){return p.wc(e),p.cc(4).prepararEnvio()})),p.Qb(14,"div"),p.Qb(15,"span",57),p.Hc(16,"Enviar Pedido"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc(4);p.zb(4),p.kc("ngIf",e.isShowNombreClienteLoginInvitado),p.zb(9),p.kc("disabled",!e.nombreClienteValido)("ngClass",p.pc(3,vi,e.isRequiereMesa))}}function Pi(e,i){if(1&e){const e=p.Rb();p.Qb(0,"app-confirmar-delivery",59),p.Yb("isReady",(function(i){return p.wc(e),p.cc(4).isReadyClienteDelivery=i}))("dataDelivery",(function(i){return p.wc(e),p.cc(4).getDatosFormConfirmaDelivery(i)})),p.Pb()}if(2&e){const e=p.cc(4);p.kc("listSubtotales",e._arrSubtotales)}}function Si(e,i){if(1&e&&(p.Fc(0,Ci,17,5,"ng-container",53),p.Fc(1,Pi,1,1,"ng-template",null,54,p.Gc)),2&e){const e=p.tc(2),i=p.cc(3);p.kc("ngIf",!i.isDeliveryCliente||i.isPuntoAuntoPedido)("ngIfElse",e)}}function ki(e,i){if(1&e&&(p.Ob(0),p.Fc(1,fi,7,0,"ng-container",47),p.Fc(2,Si,3,2,"ng-template",null,48,p.Gc),p.Nb()),2&e){const e=p.tc(3),i=p.cc(2);p.zb(1),p.kc("ngIf",i.isReservaCliente)("ngIfElse",e)}}function xi(e,i){1&e&&(p.Qb(0,"div",70),p.Qb(1,"p",71),p.Hc(2,"RESERVAR"),p.Pb(),p.Pb())}function _i(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",70),p.Qb(1,"span",72),p.Hc(2,"Indique # de mesa"),p.Pb(),p.Qb(3,"div",25),p.Qb(4,"mat-form-field",73),p.Qb(5,"input",74,75),p.Yb("ngModelChange",(function(i){return p.wc(e),p.cc(3).frmConfirma.nummesa=i}))("keyup",(function(){p.wc(e);const i=p.tc(6);return p.cc(3).checkIsRequierMesa(i.value)})),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc(3);p.zb(5),p.kc("ngModel",e.frmConfirma.nummesa)("required",e.isRequiereMesa)}}function wi(e,i){if(1&e){const e=p.Rb();p.Ob(0,null,60),p.Qb(2,"div",61),p.Qb(3,"form",null,62),p.Fc(5,xi,3,0,"div",63),p.Fc(6,_i,7,2,"div",63),p.Qb(7,"div",25),p.Qb(8,"mat-form-field",64),p.Qb(9,"input",65),p.Yb("ngModelChange",(function(i){return p.wc(e),p.cc(2).frmConfirma.referencia=i})),p.Pb(),p.Pb(),p.Pb(),p.Lb(10,"br"),p.Qb(11,"div",66),p.Qb(12,"mat-checkbox",67),p.Yb("ngModelChange",(function(i){return p.wc(e),p.cc(2).frmConfirma.reserva=i}))("change",(function(){return p.wc(e),p.cc(2).checkIsRequierMesa()})),p.Hc(13," Esto es una reserva. "),p.Pb(),p.Pb(),p.Lb(14,"br"),p.Lb(15,"br"),p.Lb(16,"hr"),p.Qb(17,"p",68),p.Lb(18,"i",52),p.Hc(19," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),p.Pb(),p.Lb(20,"hr"),p.Pb(),p.Pb(),p.Qb(21,"div",19),p.Qb(22,"app-datos-delivery",69),p.Yb("changeStatus",(function(i){return p.wc(e),p.cc(2).checkDataDelivery(i)})),p.Pb(),p.Qb(23,"p",51),p.Lb(24,"i",52),p.Hc(25," Por favor, verifique su pedido, una vez enviado ya no podra realizar ningun cambio."),p.Pb(),p.Lb(26,"hr"),p.Lb(27,"br"),p.Lb(28,"br"),p.Lb(29,"br"),p.Lb(30,"br"),p.Pb(),p.Nb()}if(2&e){const e=p.cc(2);p.zb(2),p.kc("hidden",e.isDelivery),p.zb(3),p.kc("ngIf",e.frmConfirma.reserva),p.zb(1),p.kc("ngIf",!e.frmConfirma.reserva),p.zb(3),p.kc("ngModel",e.frmConfirma.referencia),p.zb(3),p.kc("ngModel",e.frmConfirma.reserva),p.zb(9),p.kc("hidden",!e.isDelivery),p.zb(1),p.kc("listSubtotales",e._arrSubtotales)}}const Ii=function(e){return{"xh-100":e}},yi=function(e,i,t){return[e,i,t]};function Qi(e,i){if(1&e&&(p.Qb(0,"div",7),p.Fc(1,ui,12,6,"div",8),p.Qb(2,"div",9),p.Qb(3,"div",10),p.Qb(4,"div",11),p.Fc(5,ki,4,2,"ng-container",4),p.Fc(6,wi,31,7,"ng-container",4),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&e){const e=p.cc();p.kc("ngClass",p.pc(6,Ii,e.isVisibleConfirmarAnimated)),p.zb(1),p.kc("ngIf",!e.isCliente&&!e.isPuntoAuntoPedido||e.isHayCuentaBusqueda),p.zb(1),p.kc("hidden",!e.isVisibleConfirmar),p.zb(1),p.kc("ngClass",p.rc(8,yi,e.isVisibleConfirmarAnimated?"show":"hide",e.isVisibleConfirmarAnimated?"fadeInRight":"fadeInLeft",e.isDeliveryCliente?"bg-2":"bg-1")),p.zb(2),p.kc("ngIf",e.isCliente||e.isPuntoAuntoPedido),p.zb(1),p.kc("ngIf",!e.isCliente&&!e.isPuntoAuntoPedido)}}function Ti(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",41),p.Lb(1,"br"),p.Lb(2,"img",76),p.Lb(3,"br"),p.Qb(4,"span",72),p.Hc(5,"Ver cuenta de la mesa #:"),p.Pb(),p.Qb(6,"div",25),p.Qb(7,"mat-form-field",73),p.Lb(8,"input",77,78),p.Pb(),p.Pb(),p.Qb(10,"span",79),p.Hc(11,"No se encontro cuenta de esta mesa."),p.Pb(),p.Lb(12,"br"),p.Lb(13,"br"),p.Qb(14,"button",80),p.Yb("click",(function(){p.wc(e);const i=p.tc(9);return p.cc().xLoadCuentaMesa(i.value)})),p.Hc(15,"Listo, buscar"),p.Pb(),p.Lb(16,"br"),p.Lb(17,"br"),p.Lb(18,"br"),p.Pb()}if(2&e){const e=p.cc();p.zb(10),p.kc("hidden",!e.msjErr)}}function Oi(e,i){1&e&&(p.Ob(0),p.Lb(1,"i",46),p.Nb())}function Mi(e,i){1&e&&p.Hc(0," Recargar Lista ")}function Di(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",81),p.Qb(2,"div",82),p.Qb(3,"p"),p.Hc(4,"Aun no tiene ningun producto en lista."),p.Pb(),p.Qb(5,"button",83),p.Yb("click",(function(){return p.wc(e),p.cc().pintarMiPedidoNuevamente()})),p.Fc(6,Oi,2,0,"ng-container",47),p.Fc(7,Mi,1,0,"ng-template",null,84,p.Gc),p.Pb(),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.tc(8),i=p.cc();p.zb(6),p.kc("ngIf",i.isReloadListPedidos)("ngIfElse",e)}}function zi(e,i){1&e&&(p.Ob(0),p.Hc(1," Borrar Lista "),p.Nb())}function Fi(e,i){1&e&&p.Hc(0," Nuevo Pedido ")}function Ri(e,i){1&e&&p.Mb(0)}function Li(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",95),p.Yb("click",(function(){return p.wc(e),p.cc(2).confirmarPeiddo()})),p.Qb(1,"div"),p.Qb(2,"span",96),p.Hc(3,"Continuar "),p.Lb(4,"i",97),p.Pb(),p.Pb(),p.Pb()}}function Ei(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",100),p.Yb("click",(function(){return p.wc(e),p.cc(4).prepararEnvio()})),p.Qb(1,"div"),p.Qb(2,"span",57),p.Hc(3,"Enviar Pedido"),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc(4);p.kc("ngClass",p.pc(1,vi,e.isRequiereMesa))}}function Hi(e,i){if(1&e&&(p.Ob(0),p.Fc(1,Ei,4,3,"div",99),p.Nb()),2&e){const e=p.cc(3);p.zb(1),p.kc("ngIf",!e.isCliente&&!e.isPuntoAuntoPedido)}}function ji(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",100),p.Yb("click",(function(){return p.wc(e),p.cc(3).prepararEnvio()})),p.Qb(1,"div"),p.Qb(2,"span",57),p.Hc(3,"Enviar delivery"),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc(3);p.kc("ngClass",p.pc(1,vi,e.isDelivery&&!e.isDeliveryValid))}}function Bi(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",100),p.Yb("click",(function(){return p.wc(e),p.cc(3).prepararEnvio()})),p.Qb(2,"div"),p.Qb(3,"span",57),p.Hc(4,"Confirmar"),p.Pb(),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc(3);p.zb(1),p.kc("ngClass",p.pc(1,vi,!e.isReadyClienteDelivery))}}function Ni(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",100),p.Yb("click",(function(){return p.wc(e),p.cc(3).prepararEnvio()})),p.Qb(2,"div"),p.Qb(3,"span",57),p.Hc(4,"Enviar Reserva"),p.Pb(),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc(3);p.zb(1),p.kc("ngClass",p.pc(1,vi,!e.isReadyClienteReserva))}}function Ai(e,i){if(1&e&&(p.Fc(0,Hi,2,1,"ng-container",47),p.Fc(1,ji,4,3,"ng-template",null,98,p.Gc),p.Fc(3,Bi,5,3,"ng-container",4),p.Fc(4,Ni,5,3,"ng-container",4)),2&e){const e=p.tc(2),i=p.cc(2);p.kc("ngIf",!i.isDelivery)("ngIfElse",e),p.zb(3),p.kc("ngIf",i.isDeliveryCliente),p.zb(1),p.kc("ngIf",i.isReservaCliente)}}function Vi(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",85),p.Qb(2,"div",86),p.Qb(3,"div",87),p.Yb("click",(function(){return p.wc(e),p.cc().nuevoPedido()})),p.Qb(4,"span",88),p.Fc(5,zi,2,0,"ng-container",47),p.Fc(6,Fi,1,0,"ng-template",null,89,p.Gc),p.Pb(),p.Qb(8,"span",90),p.Lb(9,"i",91),p.Hc(10," Atras "),p.Pb(),p.Pb(),p.Fc(11,Ri,1,0,"ng-container",92),p.Fc(12,Li,5,0,"ng-template",null,93,p.Gc),p.Fc(14,Ai,5,4,"ng-template",null,94,p.Gc),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.tc(7),i=p.tc(13),t=p.tc(15),o=p.cc();p.zb(4),p.kc("hidden",o.isVisibleConfirmarAnimated),p.zb(1),p.kc("ngIf",o.isCliente)("ngIfElse",e),p.zb(3),p.kc("hidden",!o.isVisibleConfirmarAnimated),p.zb(3),p.kc("ngIf",!o.isVisibleConfirmarAnimated)("ngIfThen",i)("ngIfElse",t)}}let qi=(()=>{class e{constructor(e,i,t,o,n,s,a,c,r,d,l,b,m,p,h,u){this.miPedidoService=e,this.reglasCartaService=i,this.navigatorService=t,this.socketService=o,this.jsonPrintService=n,this.infoToken=s,this.crudService=a,this.listenStatusService=c,this.estadoPedidoClientService=r,this.dialog=d,this.router=l,this.registrarPagoService=b,this.establecimientoService=m,this.utilService=p,this.verifyClientService=h,this.speechDataProviderService=u,this.destroy$=new le.Subject,this._miPedido=new Ae.a,this._arrSubtotales=[],this.hayItems=!1,this.isVisibleConfirmar=!1,this.isVisibleConfirmarAnimated=!1,this.numMesaCuenta="",this.msjErr=!1,this.isReserva=!1,this.isRequiereMesa=!1,this.isDelivery=!1,this.isDeliveryValid=!1,this.frmConfirma={},this.frmDelivery={},this.frmReservaCliente={},this.rippleColor="rgb(255,238,88, 0.5)",this.rippleColorSubItem="rgba(117,117,117,0.1)",this.loadPrinterPrecuenta=!1,this.objCuenta=[],this.isReadyClienteDelivery=!1,this.isReadyClienteReserva=!1,this.isReloadListPedidos=!1,this.isFirstLoadListen=!1,this.isBtnPagoShow=!1,this.systemOS="",this.nombreClienteValido=!1,this.isShowNombreClienteLoginInvitado=!1,this.showCuentaCliente=!1,this.isSavingPedido=!1}ngOnInit(){this.systemOS=this.utilService.getOS(),this._miPedido=this.miPedidoService.getMiPedido(),this.isPuntoAuntoPedido=this.infoToken.isPuntoAutoPedido(),this.validarNomhbreCliente(),this.reglasCartaService.loadReglasCarta().pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{this.rulesCarta=e[0]?e[0].reglas?e[0].reglas:[]:e.reglas?e.reglas:[],this.rulesSubtoTales=e.subtotales||e[0].subtotales,this.establecimientoService.setRulesSubtotales(this.rulesSubtoTales),this.listenMiPedido(),this.newFomrConfirma()}),this.listenStatusService.isBtnPagoShow$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{if(this.isBtnPagoShow=e,!e){const e=localStorage.getItem("sys::btnP");e&&"1"===e.toString()&&(this.isBtnPagoShow=!0)}}),this.speechDataProviderService.commandFinalizarPedido$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&(this.isVisibleConfirmarAnimated=!0,setTimeout(()=>{this.isVisibleConfirmar=!0},300),this.checkTiposDeConsumo(),this.checkIsRequierMesa(),this.checkIsDelivery(),this.navigatorService.addLink("mipedido-confirma"),this.isClienteSetValues())}),this.speechDataProviderService.commandIsShowPedido$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&(this.isVisibleConfirmarAnimated=!1,this.isRequiereMesa=!1,setTimeout(()=>{this.isVisibleConfirmar=!1},300))}),this.isCliente=this.infoToken.isCliente(),this.isSoloLLevar=this.infoToken.isSoloLlevar(),this.isDeliveryCliente=this.infoToken.isDelivery(),this.isReservaCliente=this.infoToken.isReserva(),this.isClienteSetValues()}isClienteSetValues(){this.isCliente&&(this.isRequiereMesa=!1)}validarNomhbreCliente(){if(this.isShowNombreClienteLoginInvitado=this.verifyClientService.getDataClient().isLoginByInvitado,this.isShowNombreClienteLoginInvitado||this.isPuntoAuntoPedido){let e=this.infoToken.infoUsToken.nombres;this.isPuntoAuntoPedido&&(e="",this.infoToken.infoUsToken.nombres="",this.infoToken.set()),e=e.toLocaleLowerCase().indexOf("invitado")>-1?"":e,this.isShowNombreClienteLoginInvitado=""===e,this.nombreClienteValido=!this.isShowNombreClienteLoginInvitado}else{let e=this.infoToken.infoUsToken.nombres;e=e?e.toLocaleLowerCase().indexOf("invitado")>-1?"":e:"",this.nombreClienteValido=""!==e}}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}newFomrConfirma(){this.frmConfirma={nummesa:"",nummesa_resplado:"",referencia:"",reserva:!1,solo_llevar:!1,delivery:!1},this.establecimientoService.getComsionEntrega(),this.isPuntoAuntoPedido&&this.validarNomhbreCliente()}pintarMiPedido(){this.isReloadListPedidos=!0,this.isHayCuentaBusqueda||this.miPedidoService.validarReglasCarta(this.rulesCarta),this._arrSubtotales=this.miPedidoService.getArrSubTotales(this.rulesSubtoTales),localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales))),this.hayItems=parseFloat(this._arrSubtotales[0].importe)>0,setTimeout(()=>{this.isReloadListPedidos=!1},1e3)}pintarMiPedidoNuevamente(){this.isReloadListPedidos=!0,this.rulesCarta?this.pintarMiPedido():window.location.reload()}listenMiPedido(){this.miPedidoService.countItemsObserve$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{this.hayItems=e>0}),this.miPedidoService.miPedidoObserver$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{this._miPedido=e,this.pintarMiPedido()}),this.listenStatusService.hayCuentaBusqueda$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{this.isHayCuentaBusqueda=e}),this.listenStatusService.isPagoSucces$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&this.registrarPagoService.getDataTrasaction().isSuccess&&this.isSoloLLevar&&(this.registrarPagoService.removeLocalDataTransaction(),this.enviarPedido())}),this.socketService.isSocketOpen$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{}),this.isCliente&&this.socketService.onGetNuevoPedido().pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{}),this.estadoPedidoClientService.hayCuentaCliente$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&(this.showCuentaCliente=!0,this.xLoadCuentaMesa("",e))}),this.listenStatusService.isOutEstablecimientoDelivery$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&(this.goBackOutEstablecimiento(),this.listenStatusService.setIsOutEstablecimientoDelivery(!1))}),this.listenStatusService.showCuentaMesaNumero$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{0!==e&&this.xLoadCuentaMesa(e.toString())})}addItemToResumen(e,i,t,o,n){this.miPedidoService.setObjSeccionSeleced(i);const s=this.miPedidoService.findItemCarta(t),a=s.itemtiposconsumo.filter(i=>i.idtipo_consumo===e.idtipo_consumo)[0];s.subitems_selected=o.subitems,s.cantidad_seleccionada=t.cantidad_seleccionada,this.miPedidoService.addItem2(a,s,n)}openDlgItemToResumen(e,i){if(this.isHayCuentaBusqueda)return;const t=new S.e,o=this.miPedidoService.findItemCarta(i);o.indicaciones=o.indicaciones?o.indicaciones:i.indicaciones||"",t.autoFocus=!1,t.data={idTpcItemResumenSelect:null,seccion:e,item:o,objItemTipoConsumoSelected:o.itemtiposconsumo},t.panelClass=["my-dialog-orden-detalle","margen-0","margen-0"],this.dialog.open(De,t).afterClosed().subscribe(e=>{})}nuevoPedido(){if(this.backConfirmacion(),this.isVisibleConfirmar)return void this.backConfirmacion();const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,this.dialog.open(x,e).afterClosed().subscribe(e=>{e&&(this.miPedidoService.resetAllNewPedido(),this.navigatorService.setPageActive("carta"),this.isDeliveryValid=!1)}),this.newFomrConfirma()}nuevoPedidoFromCuenta(){this.navigatorService.setPageActive("carta")}backConfirmacion(){this.navigatorService.addLink("mipedido"),this.isVisibleConfirmarAnimated=!1,this.isRequiereMesa=!1,setTimeout(()=>{this.isVisibleConfirmar=!1},300)}getDatosFormConfirmaDelivery(e){this.frmDelivery=e}getDatosFormConfirmaReserva(e){this.frmReservaCliente=e.formData,this.frmConfirma={nummesa:"",nummesa_resplado:"",referencia:this.frmReservaCliente.nombre_reserva+" "+this.frmReservaCliente.empresa+" "+this.frmReservaCliente.hora_reserva,reserva:!0,solo_llevar:!1,delivery:!1}}confirmarPeiddo(){if(this.isVisibleConfirmarAnimated){if(this.isRequiereMesa||!this.isDeliveryValid)return void(1===this.infoToken.infoUsToken.metodoPago.idtipo_pago&&this.isDeliveryValid&&this.prepararEnvio());this.prepararEnvio()}else this.isVisibleConfirmar=!0,this.isVisibleConfirmarAnimated=!0,this.checkTiposDeConsumo(),this.checkIsRequierMesa(),this.checkIsDelivery(),this.navigatorService.addLink("mipedido-confirma"),this.isClienteSetValues()}prepararEnvio(){this.isDeliveryCliente?2!==this.infoToken.infoUsToken.metodoPago.idtipo_pago?this.showLoaderPedido():this.enviarPedido():this.showLoaderPedido()}showLoaderPedido(){this.listenStatusService.setLoaderSendPedido(!0),this.isSavingPedido||(this.isSavingPedido=!0,this.infoToken.setMetodoPagoSelected(this.infoToken.infoUsToken.metodoPago),setTimeout(()=>{this.enviarPedido()},1400))}enviarPedido(){const e=2===this.infoToken.getInfoUs().metodoPago.idtipo_pago;this.checkTiposDeConsumo(),this.infoToken.setMetodoPagoSelected(this.infoToken.getInfoUs().metodoPago),this._arrSubtotales=JSON.parse(atob(localStorage.getItem("sys::st"))),localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales)));const i=this.infoToken.getInfoUs(),t={};this.isCliente||this.isPuntoAuntoPedido&&!this.isReservaCliente?(this.frmConfirma.solo_llevar=!!this.isSoloLLevar||this.frmConfirma.solo_llevar,t.m=this.isSoloLLevar?"":i.numMesaLector,t.m=this.isDeliveryCliente?"":i.numMesaLector,t.r=i.nombres.toUpperCase(),t.nom_us=i.nombres.toUpperCase(),t.m_respaldo=t.m):(t.m_respaldo=this.frmConfirma.nummesa_resplado,t.m=this.frmConfirma.nummesa?this.frmConfirma.nummesa:this.arrReqFrm.isRequiereMesa?this.frmConfirma.nummesa_resplado:"00",t.r=this.frmConfirma.delivery?this.frmDelivery.nombre:this.utilService.addslashes(this.frmConfirma.referencia)||"",t.nom_us=i.nombres.split(" ")[0].toUpperCase());const o={m:t.m,m_respaldo:t.m_respaldo,r:t.r,nom_us:t.nom_us,delivery:this.frmConfirma.delivery||this.isDeliveryCliente?1:0,reservar:this.frmConfirma.reserva?1:0,solo_llevar:this.frmConfirma.solo_llevar?1:0,idcategoria:localStorage.getItem("sys::cat"),correlativo_dia:"",num_pedido:"",isCliente:this.isCliente?1:0,isSoloLLevar:this.isSoloLLevar,idregistro_pago:0,arrDatosDelivery:this.frmDelivery,arrDatosReserva:this.frmReservaCliente,systemOS:this.systemOS,idregistra_scan_qr:this.establecimientoService.getLocalIdScanQr(),is_print_subtotales:this.miPedidoService.objDatosSede.datossede[0].is_print_subtotales,isprint_copy_short:this.miPedidoService.objDatosSede.datossede[0].isprint_copy_short,isprint_all_short:this.miPedidoService.objDatosSede.datossede[0].isprint_all_short,appv:"v.2z"};let n=this._arrSubtotales;0===parseFloat(n[n.length-1].importe)&&(n=this.frmDelivery.subTotales,this._arrSubtotales=n,localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales))));const s={p_header:o,p_body:this._miPedido,p_subtotales:n,idpedido:0},a=this.jsonPrintService.enviarMiPedido(this.isCliente),c=[];a.map(e=>{c.push({Array_enca:o,ArraySubTotales:n,ArrayItem:e.arrBodyPrint,Array_print:e.arrPrinters})});const r={dataPedido:s,dataPrint:c,dataUsuario:{idusuario:i.idusuario,idcliente:i.idcliente,idorg:i.idorg,idsede:i.idsede,nombres:i.nombres,cargo:i.cargo,usuario:i.usuario},isDeliveryAPP:1===o.delivery,isClienteRecogeLocal:this.infoToken.infoUsToken.pasoRecoger,dataDescuento:[],listPrinters:a.listPrinters};if(this.isDeliveryCliente&&2===i.metodoPago.idtipo_pago)return this.infoToken.setOrderDelivery(JSON.stringify(r),JSON.stringify(n)),void this.pagarCuentaDeliveryCliente();if(this.infoToken.infoUsToken.isHayDescuento){const e=this.miPedidoService.getIdsDescuentos();r.dataDescuento=e}this.infoToken.infoUsToken.isCliente&&this.infoToken.setIdCliente(),this.savePedidoSocket(r,e,n),this.isDeliveryValid=!1}backConfirmarPedido(){this.backConfirmacion(),this.navigatorService.setPageActive(this.isCliente?"estado":"carta"),this.isDeliveryValid=!1}checkTiposDeConsumo(){this.arrReqFrm=this.miPedidoService.findEvaluateTPCMiPedido(),this.isRequiereMesa=this.arrReqFrm.isRequiereMesa,this.frmConfirma.solo_llevar=!this.arrReqFrm.isTpcSoloDelivery&&this.arrReqFrm.isTpcSoloLLevar,this.frmConfirma.delivery=this.arrReqFrm.isTpcSoloDelivery}checkIsRequierMesa(e=""){""!==e&&(e=e.replace(/\D/gm,""),this.frmConfirma.nummesa=e),this.frmConfirma.nummesa_resplado=e;let i=parseInt(this.miPedidoService.objDatosSede.datossede[0].mesas,0);i=isNaN(i)?0:i;let t=!!this.frmConfirma.nummesa&&""!==this.frmConfirma.nummesa;const o=t?parseInt(this.frmConfirma.nummesa,0):0;t=!(o<=0||o>i),this.isRequiereMesa=this.arrReqFrm.isRequiereMesa,this.isRequiereMesa=this.isRequiereMesa&&!t&&!this.frmConfirma.reserva}checkIsDelivery(){this.isDelivery=this.miPedidoService.findMiPedidoIsTPCDelivery()}checkDataDelivery(e){this.isDeliveryValid=e.formIsValid,this.frmDelivery=e.formData}getLatPedidoClienteThisITable(e){const i={idsede:this.infoToken.getInfoUs().idsede,nummesa:e};this.crudService.postFree(i,"pedido","get-last-pedido-cliente-this-table",!1).subscribe(e=>{console.log(e)})}imprimirPrecuenta(){this.loadPrinterPrecuenta=!0;const e=this.jsonPrintService.getPrinterPrecuenta();e&&(this.miPedidoService.printerPrecuenta({dataPrint:{Array_enca:{m:this.numMesaCuenta,r:"",num_pedido:"",reservar:0,solo_llevar:0,correlativo_dia:"",precuenta:!0,delivery:!1,arrDatosDelivery:[],idregistro_pago:0,nom_us:this.infoToken.infoUsToken.usuario},Array_print:e.arrPrinters,ArrayItem:e.arrBodyPrint,ArraySubTotales:this._arrSubtotales},isprecuenta:1}),setTimeout(()=>{this.loadPrinterPrecuenta=!1},2e3))}xLoadCuentaMesa(e,i=null){this.isHayCuentaBusqueda=!1,this.msjErr=!1,this.numMesaCuenta=e;const t={mesa:e};if(i)return this.desglozarCuenta(i),void setTimeout(()=>{this.estadoPedidoClientService.setImporte(this._arrSubtotales[this._arrSubtotales.length-1].importe)},1e3);this.crudService.postFree(t,"pedido","lacuenta").subscribe(e=>{this.desglozarCuenta(e)})}desglozarCuenta(e){const i=new Ae.a,t=[];if(0===e.data.length)return this.isHayCuentaBusqueda=!1,this.msjErr=!0,void this.listenStatusService.setHayCuentaBuesqueda(!1);this.isHayCuentaBusqueda=!0,this.listenStatusService.setHayCuentaBuesqueda(!0),e.data.map(e=>{let i=t.filter(i=>i.idtipo_consumo===e.idtipo_consumo)[0];i||(i=new Ke.a,i.descripcion=e.des_tp,i.idtipo_consumo=parseInt(e.idtipo_consumo,0),t.push(i))}),t.map(i=>{e.data.filter(e=>e.idtipo_consumo===i.idtipo_consumo).map((e,t)=>{let o=i.secciones.filter(i=>i.idseccion.toString()===e.idseccion.toString())[0];o||(o=new $e.a,o.idseccion=e.idseccion.toString(),o.des=e.des_seccion,o.sec_orden=e.sec_orden,o.ver_stock_cero=0,i.count_items_seccion=t+1,i.secciones.push(o))})}),t.map(i=>{i.secciones.map(t=>{e.data.filter(e=>e.idtipo_consumo.toString()===i.idtipo_consumo.toString()&&e.idseccion.toString()===t.idseccion.toString()).map((e,i)=>{const o=new Ue.a;o.des=e.descripcion,o.detalles="",o.iditem=e.iditem,o.idcarta_lista=e.idcarta_lista,o.idseccion=e.idseccion,o.isalmacen=e.isalmacen,o.cantidad_seleccionada=parseInt(e.cantidad,0),o.precio=e.punitario,o.precio_print=parseFloat(e.ptotal),o.precio_total=parseFloat(e.ptotal),o.procede="0"===e.procede?1:0,o.seccion=e.des_seccion,o.subitems_view="null"!==e.subitems&&""!==e.subitems&&e.subitems?JSON.parse(e.subitems):[],t.count_items=i+1,t.items.push(o)})})}),i.tipoconsumo=t,this.miPedidoService.setObjMiPedido(i),this._miPedido=this.miPedidoService.getMiPedido(),this._arrSubtotales=this.miPedidoService.getArrSubTotales(this.rulesSubtoTales),localStorage.setItem("sys::st",btoa(JSON.stringify(this._arrSubtotales)))}pagarCuentaDeliveryCliente(){this.router.navigate(["./pagar-cuenta"]).then(()=>{this.isBtnPagoShow&&window.location.reload()})}confirmarPedidoDeliveryEnviado(){this.router.navigate(["./pedido-confirmado"])}goBackOutEstablecimiento(){const e=new S.e;e.data={idMjs:2},this.dialog.open(x,e).afterClosed().subscribe(e=>{e&&(this.miPedidoService.resetAllNewPedido(),this.miPedidoService.cerrarSession(),this.isDeliveryValid=!1,this.infoToken.cerrarSession())})}goBackCarta(){this.navigatorService.setPageActive("carta")}verificarConexionSocket(){this.socketService.isSocketOpen||this.socketService.connect()}savePedidoSocket(e,i,t){this.socketService.emitRes("nuevoPedido",JSON.stringify(e)).subscribe(o=>{var n;if(!1===o)return alert("!Ups a ocurrido un error, por favor verifique los datos y vuelve a intentarlo."),this.crudService.postFree({elerror:o,elorigen:"resumen-pedido"},"error","set-error",!1).subscribe(e=>console.log(e)),this.listenStatusService.setLoaderSendPedido(!1,this.verifyClientService.getIsQrSuccess()),void(this.isSavingPedido=!1);setTimeout(()=>{this.listenStatusService.setLoaderSendPedido(!1,this.verifyClientService.getIsQrSuccess()),this.isSavingPedido=!1,this.miPedidoService.stopTimerLimit(),this.miPedidoService.prepareNewPedido()},800);const s=o[0];if(e.dataPedido.idpedido=s.idpedido,e.dataPrint=s.data[1]?null===(n=s.data[1])||void 0===n?void 0:n.print:null,this.newFomrConfirma(),this.estadoPedidoClientService.setHoraInitPedido((new Date).getTime()),this.isDeliveryCliente&&!i)return this.infoToken.setOrderDelivery(JSON.stringify(e),JSON.stringify(t)),void this.confirmarPedidoDeliveryEnviado();this.isReservaCliente?this.confirmarPedidoDeliveryEnviado():this.backConfirmarPedido()})}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(a.a),p.Kb(de),p.Kb(c.a),p.Kb(d.a),p.Kb(Ve),p.Kb(m.a),p.Kb(y.a),p.Kb(r.a),p.Kb(Je.a),p.Kb(S.b),p.Kb(Ge.d),p.Kb(qe.a),p.Kb(b.a),p.Kb(w.a),p.Kb(l.a),p.Kb(q))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-resumen-pedido"]],decls:8,vars:10,consts:[["class","animated fadeIn transicion",3,"ngClass",4,"ngIf"],[1,"bg-dark","fs-13","p-2","text-white","text-center",3,"hidden"],["class","d-flex w-100 xanimated xfadeIn div-content-all","id","cardcontentall",3,"ngClass",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"animated","fadeIn","transicion",3,"ngClass"],[3,"arrSubtotales"],["id","cardcontentall",1,"d-flex","w-100","xanimated","xfadeIn","div-content-all",3,"ngClass"],["class","w-100 div-resumen-pedido transicion",3,"ngClass",4,"ngIf"],[1,"div-resumen-pre-pago","w-100",3,"hidden"],[1,"xcontent","div-confirma-pedido","w-100","p-3","transicion","animated","fadeInRight",3,"ngClass"],[1,"text-center","d-flex","justify-content-center",2,"max-width","500px"],[1,"w-100","div-resumen-pedido","transicion",3,"ngClass"],["class","xCursor",4,"ngFor","ngForOf"],[1,"div-total"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],[1,"xCursor"],[1,"div-plr","titulo-tpc"],[3,"hidden"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"countItem","countTpc"],[4,"ngFor","ngForOf"],[1,"div-plr","titulo-seccion"],[1,"countItem","countSeccion"],[1,"w-100"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor","click"],[1,"pr-2","fw-100"],[1,"w-100","fw-100","pr-1"],["style","font-size: 9px; font-weight: 100;","class","badge badge-info fw-100 fs-9",4,"ngIf"],[1,"fw-100"],[1,"badge","badge-info","fw-100","fs-9",2,"font-size","9px","font-weight","100"],["class","d-flex div-plr li-item fw-100 fs-13 text-secondary subitem-content-resumen","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"d-flex","div-plr","li-item","fw-100","fs-13","text-secondary","subitem-content-resumen",3,"matRippleColor"],[1,"d-flex","w-100",3,"ngClass"],["class","btnCount btnMenos",3,"click",4,"ngIf"],["class","btnCount btnMas",3,"click",4,"ngIf"],[1,"fs-11","text-right",2,"width","45px",3,"hidden"],[1,"btnCount","btnMenos",3,"click"],[1,"btnCount","btnMas",3,"click"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"],[1,"text-center"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","primary","class","ml-2",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary",1,"ml-2",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],[4,"ngIf","ngIfElse"],["elseTemplateDelivery",""],[1,"w-100","p-2",2,"max-width","500px"],[3,"isReady","dataReserva"],[1,"fw-100","fs-14","text-secondary"],["aria-hidden","true",1,"fa","fa-exclamation-triangle"],["class","w-100",4,"ngIf","ngIfElse"],["templateDelivery",""],[1,"fw-600","fs-17","text-dark"],["matRipple","",1,"btn","btn-footer-next","transicion","w-50","m-auto",3,"disabled","ngClass","click"],[1,"animated","fadeInLeft"],[3,"sizeTextBg","isNombreValid"],[3,"listSubtotales","isReady","dataDelivery"],["divUsuarioAutorizado",""],[1,"div-confirma-pedido-mesa","w-100",3,"hidden"],["frmconfirma","ngForm"],["class","xanimated xfadeIn",4,"ngIf"],[1,"w-100","text-center"],["matInput","","placeholder","Indique alguna referencia","name","referencia",3,"ngModel","ngModelChange"],[1,"w-50"],["name","reserva",3,"ngModel","ngModelChange","change"],[1,"fw-100","fs-17","text-secondary"],[3,"listSubtotales","changeStatus"],[1,"xanimated","xfadeIn"],[1,"fs-30","fw-100"],[1,"fw-100","fs-20"],[1,"text-center","fs-20"],["type","number","matInput","","name","mesa",3,"ngModel","required","ngModelChange","keyup"],["txtNumMesa",""],["src","./assets/images/icon_1.gif","width","300px","alt","..",1,"img-cuenta"],["type","number","matInput",""],["txt_mesa_cuenta",""],[1,"fs-14","font-weight-bold","text-danger","animated","flash",3,"hidden"],["mat-flat-button","","color","primary",3,"click"],[1,"text-center","d-flex","flex-column","h-75"],[1,"m-auto"],[1,"btn","btn-sm","btn-secondary",3,"click"],["elseTemplateText",""],[1,"xfooter"],[1,"m-0","w-100","d-flex","justify-content-between"],["matRipple","",1,"btn-footer-cancel",3,"click"],[1,"animated","fadeInRight",3,"hidden"],["elseTemplateisDeliveryCliente",""],[1,"animated","fadeInLeft",3,"hidden"],[1,"fa","fa-arrow-left"],[4,"ngIf","ngIfThen","ngIfElse"],["divBtnListo",""],["divBtnEnviar",""],["matRipple","",1,"btn-footer-next","transicion",3,"click"],[1,"animated","fadeInRight"],[1,"fa","fa-arrow-right"],["elseTemplate",""],["class","btn-footer-next transicion","matRipple","",3,"ngClass","click",4,"ngIf"],["matRipple","",1,"btn-footer-next","transicion",3,"ngClass","click"]],template:function(e,i){1&e&&(p.Fc(0,Ze,2,4,"div",0),p.Qb(1,"div",1),p.Hc(2),p.dc(3,"number"),p.Pb(),p.Fc(4,Qi,7,12,"div",2),p.Fc(5,Ti,19,1,"div",3),p.Fc(6,Di,9,2,"ng-container",4),p.Fc(7,Vi,16,7,"ng-container",4)),2&e&&(p.kc("ngIf",!i.isHayCuentaBusqueda&&i.isCliente||i.isPuntoAuntoPedido),p.zb(1),p.kc("hidden",!i.isHayCuentaBusqueda),p.zb(1),p.Jc(" CUENTA DE LA MESA ",p.fc(3,7,i.numMesaCuenta,"2."),"\n"),p.zb(2),p.kc("ngIf",i.hayItems),p.zb(1),p.kc("ngIf",!i.hayItems&&!i.isCliente&&!i.isPuntoAuntoPedido),p.zb(1),p.kc("ngIf",!i.hayItems&&i.isCliente&&!i.isDeliveryCliente),p.zb(1),p.kc("ngIf",i.hayItems&&!i.isHayCuentaBusqueda))},styles:[".xcontent[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0}.div-plr[_ngcontent-%COMP%]{padding-left:7px;padding-right:7px}.div-content-all[_ngcontent-%COMP%]{top:0;position:relative;background:#fff}.titulo-tpc[_ngcontent-%COMP%]{background:#424242;color:#e0e0e0}.titulo-seccion[_ngcontent-%COMP%], .titulo-tpc[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.titulo-seccion[_ngcontent-%COMP%]{background:#ffebcd}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.countItem[_ngcontent-%COMP%]{border-radius:50%;line-height:1.2;font-size:12px;min-width:20px;min-height:20px;padding:4px;text-align:center}.countTpc[_ngcontent-%COMP%]{float:right;background:#212121;color:#bdbdbd}.countSeccion[_ngcontent-%COMP%]{float:right;color:#616161;background:#ffcc80}.btn-footer-cancel[_ngcontent-%COMP%]{background:#f44336}.btn-footer-cancel[_ngcontent-%COMP%], .btn-footer-next[_ngcontent-%COMP%]{padding:12px;color:#fff;text-align:center;width:40%}.btn-footer-next[_ngcontent-%COMP%]{background:#00c853;white-space:nowrap}.btn-footer-next.xdisabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5;white-space:nowrap;background:#ccc}.div-resumen-pedido[_ngcontent-%COMP%]{position:absolute;height:-webkit-calc(100vh - 49px);height:calc(100vh - 49px);overflow:auto}.div-resumen-pedido.hide[_ngcontent-%COMP%]{margin-left:-100%}.div-resumen-pedido.show[_ngcontent-%COMP%]{margin-left:0}.div-confirma-pedido-mesa[_ngcontent-%COMP%]{height:100vh;position:relative}.div-confirma-pedido[_ngcontent-%COMP%]{background:#fff;overflow:hidden;top:0;margin:0;position:relative;text-align:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.bg-1[_ngcontent-%COMP%], .bg-2[_ngcontent-%COMP%]{background:#fff}.div-confirma-pedido.hide[_ngcontent-%COMP%]{margin-left:100%}.div-confirma-pedido.show[_ngcontent-%COMP%]{margin-left:0}.xh-100[_ngcontent-%COMP%]{height:100vh}.subitem-content-resumen[_ngcontent-%COMP%]{background:#d3eafd;font-size:12px;color:#616161;display:-webkit-box;display:-webkit-flex;display:flex}.subitem-content-resumen[_ngcontent-%COMP%]   .btnCount[_ngcontent-%COMP%]{-webkit-transition:all .1s ease-in;transition:all .1s ease-in;height:18px;cursor:pointer;opacity:0}.subitem-content-resumen[_ngcontent-%COMP%]:hover   .btnCount[_ngcontent-%COMP%]{opacity:1}.subitem-content-resumen[_ngcontent-%COMP%]   .btnMenos[_ngcontent-%COMP%]{font-weight:700;background:#d32f2f;padding:0 8px;margin-right:3px;border-radius:3px;color:#fff}.subitem-content-resumen[_ngcontent-%COMP%]   .btnMas[_ngcontent-%COMP%]{font-weight:700;background:#1565c0;padding:0 8px;margin-left:3px;border-radius:3px;color:#fff}@media only screen and (min-width:600px){.div-resumen-pedido[_ngcontent-%COMP%]{position:relative;height:auto;overflow:hidden}.div-resumen-pre-pago[_ngcontent-%COMP%]{position:absolute}.xfooter[_ngcontent-%COMP%]{bottom:0;position:fixed;background:#e0e0e0;box-sizing:border-box;min-width:230px;max-width:360px;width:-webkit-calc(100%/9.8 * 3);width:calc(100% / 9.8 * 3)}.div-content-all[_ngcontent-%COMP%]{font-size:14px!important}}.content-resumen[_ngcontent-%COMP%]{background:#eee}@media only screen and (max-width:1050px){.content-resumen[_ngcontent-%COMP%]{display:none}.xfooter[_ngcontent-%COMP%]{width:100%;max-width:100%}}.img-cuenta[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:15px}"]}),e})();function $i(e,i){if(1&e&&(p.Qb(0,"div",9),p.Qb(1,"p",10),p.Hc(2),p.Pb(),p.Qb(3,"p",11),p.Hc(4),p.Pb(),p.Qb(5,"p",12),p.Hc(6),p.Pb(),p.Qb(7,"p",12),p.Hc(8),p.Pb(),p.Pb()),2&e){const e=p.cc();p.zb(2),p.Ic(e.ItemPromoheader.titulo),p.zb(2),p.Ic(e.ItemPromoheader.descripcion),p.zb(2),p.Kc("Abierto de: ",e.ItemPromoBody.h_inicio," a ",e.ItemPromoBody.h_fin,""),p.zb(2),p.Ic(e.diasActivo)}}const Ui=function(e,i){return{fadeInDown:e,fadeOutDown:i}};function Ki(e,i){if(1&e&&(p.Qb(0,"div",13),p.Qb(1,"p",14),p.Hc(2),p.Pb(),p.Pb()),2&e){const e=p.cc();p.kc("ngClass",p.qc(2,Ui,e.showInfoPromo,!e.showInfoPromo)),p.zb(2),p.Jc("Acceda con un consumo m\xednimo de S/",e.ItemPromoBody.importe_consumo_min," en otros productos.")}}const Yi=function(e){return{wobble:e}};function Ji(e,i){if(1&e&&(p.Ob(0),p.Lb(1,"img",15),p.Nb()),2&e){const e=p.cc();p.zb(1),p.kc("ngClass",p.pc(1,Yi,e.animateBloqueo))}}function Gi(e,i){if(1&e&&(p.Qb(0,"div",17),p.Qb(1,"div",18),p.Qb(2,"span",19),p.Hc(3),p.Pb(),p.Qb(4,"p",20),p.Hc(5),p.Pb(),p.Pb(),p.Qb(6,"div",21),p.Qb(7,"p",22),p.Hc(8,"Consumo m\xednimo"),p.Pb(),p.Pb(),p.Pb()),2&e){const e=p.cc(2);p.kc("ngClass",p.pc(3,Yi,e.animateBloqueo)),p.zb(3),p.Ic(e.simbolo_moneda),p.zb(2),p.Jc(" ",e.ItemPromoBody.importe_consumo_min," ")}}function Wi(e,i){if(1&e&&p.Fc(0,Gi,9,5,"div",16),2&e){const e=p.cc();p.kc("ngIf",e.ItemPromoBody.importe_consumo_min)}}const Zi=function(e){return{"bg-confetti-animated":e}};let Xi=(()=>{class e{constructor(e,i){this.cocinarPromocionService=e,this.establecimientoService=i,this.selected=new p.n,this.diasActivo="",this.isAbierto=!1,this.animateBloqueo=!1,this.iconGifPromo="",this.showInfoPromo=!1}ngOnInit(){this.isAbierto=1===this.promo.abierto,this.ItemPromoheader=this.promo.parametros.header,this.ItemPromoBody=this.promo.parametros.body,this.diasActivo=this.cocinarPromocionService.showDiasSemana(this.ItemPromoBody.dias_semana),this.iconGifPromo="assets/images/"+this.ItemPromoheader.icon,this.isAbierto=1===this.promo.abierto,this.simbolo_moneda=this.establecimientoService.getSimboloMoneda()}clickPromo(){this.validarIngresoPromo()&&(this.isAbierto=!0,this.selected.emit(this.promo))}validarIngresoPromo(){let e=!1,i=null;return 1===this.promo.abierto&&(e=!0,i=this.ItemPromoBody.importe_consumo_min,i)&&(e=this.cocinarPromocionService.getImportePedido()>=i),e||(this.isAbierto=!1,this.animateBloqueo=!0,setTimeout(()=>{this.showInfoPromo=!(!i||1!==this.promo.abierto),this.animateBloqueo=!1,this.showInfoPromo&&setTimeout(()=>{this.showInfoPromo=!1},6e3)},300)),e}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(Ne),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-item-promocion"]],inputs:{promo:"promo"},outputs:{selected:"selected"},decls:10,vars:8,consts:[[1,"w-100",3,"ngClass","click"],[1,"div-promo","w-100"],[1,"d-flex","align-items-center"],[1,"img-promo"],["alt","ico_promo",3,"src"],["class","info-promo animated fadeIn",4,"ngIf"],["class","info-promo animated",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplateGo",""],[1,"info-promo","animated","fadeIn"],[1,"fw-600","fs-15"],[1,"fw-600","fs-12","text-secondary"],[1,"fw-100","fs-12","text-secondary"],[1,"info-promo","animated",3,"ngClass"],[1,"fw-600","fs-13","text-danger"],["src","assets/images/002-lock.png","alt","bloqueado",1,"animated",3,"ngClass"],["class","content-importe-minimo animated",3,"ngClass",4,"ngIf"],[1,"content-importe-minimo","animated",3,"ngClass"],[1,"importe-minimo"],[1,"fs-10"],[1,"fs-18","fw-600"],[1,"text-center"],[1,"fs-9","text-secondary"]],template:function(e,i){if(1&e&&(p.Qb(0,"div",0),p.Yb("click",(function(){return i.clickPromo()})),p.Qb(1,"div",1),p.Qb(2,"div",2),p.Qb(3,"div",3),p.Lb(4,"img",4),p.Pb(),p.Fc(5,$i,9,5,"div",5),p.Fc(6,Ki,3,5,"div",6),p.Pb(),p.Fc(7,Ji,2,3,"ng-container",7),p.Fc(8,Wi,1,1,"ng-template",null,8,p.Gc),p.Pb(),p.Pb()),2&e){const e=p.tc(9);p.kc("ngClass",p.pc(6,Zi,1===i.promo.abierto)),p.zb(4),p.lc("src",i.iconGifPromo,p.xc),p.zb(1),p.kc("ngIf",!i.showInfoPromo),p.zb(1),p.kc("ngIf",i.showInfoPromo),p.zb(1),p.kc("ngIf",0===i.promo.abierto)("ngIfElse",e)}},directives:[o.q,o.t],styles:[".bg-confetti-animated[_ngcontent-%COMP%]{background-repeat:repeat-x;background-position:top -10px center;background-image:url(\"data:image/svg+xml,%3Csvg width='600' height='90' viewBox='0 0 600 90' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='42' y='-10' width='6' height='10'/%3E%3Crect x='84' y='-10' width='6' height='10'/%3E%3Crect x='126' y='-13' width='5' height='13'/%3E%3Crect x='168' y='-13' width='5' height='13'/%3E%3Crect x='210' y='-10' width='6' height='10'/%3E%3Crect x='252' y='-13' width='5' height='13'/%3E%3Crect x='294' y='-10' width='6' height='10'/%3E%3Crect x='336' y='-13' width='5' height='13'/%3E%3Crect x='378' y='-13' width='5' height='13'/%3E%3Crect x='420' y='-10' width='6' height='10'/%3E%3Crect x='462' y='-10' width='6' height='10'/%3E%3Crect x='504' y='-13' width='5' height='13'/%3E%3Crect x='546' y='-10' width='6' height='10'/%3E%3Cstyle type='text/css'%3E rect %7B opacity: 0; %7D rect:nth-child(1) %7B transform-origin: 45px 5px; transform: rotate(-145deg); animation: blast 700ms infinite ease-out; animation-delay: 88ms; animation-duration: 631ms; %7D rect:nth-child(2) %7B transform-origin: 87px 5px; transform: rotate(164deg); animation: blast 700ms infinite ease-out; animation-delay: 131ms; animation-duration: 442ms; %7D rect:nth-child(3) %7B transform-origin: 128px 6px; transform: rotate(4deg); animation: blast 700ms infinite ease-out; animation-delay: 92ms; animation-duration: 662ms; %7D rect:nth-child(4) %7B transform-origin: 170px 6px; transform: rotate(-175deg); animation: blast 700ms infinite ease-out; animation-delay: 17ms; animation-duration: 593ms; %7D rect:nth-child(5) %7B transform-origin: 213px 5px; transform: rotate(-97deg); animation: blast 700ms infinite ease-out; animation-delay: 122ms; animation-duration: 476ms; %7D rect:nth-child(6) %7B transform-origin: 255px 6px; transform: rotate(57deg); animation: blast 700ms infinite ease-out; animation-delay: 271ms; animation-duration: 381ms; %7D rect:nth-child(7) %7B transform-origin: 297px 5px; transform: rotate(-46deg); animation: blast 700ms infinite ease-out; animation-delay: 131ms; animation-duration: 619ms; %7D rect:nth-child(8) %7B transform-origin: 338px 6px; transform: rotate(-65deg); animation: blast 700ms infinite ease-out; animation-delay: 85ms; animation-duration: 668ms; %7D rect:nth-child(9) %7B transform-origin: 380px 6px; transform: rotate(13deg); animation: blast 700ms infinite ease-out; animation-delay: 128ms; animation-duration: 377ms; %7D rect:nth-child(10) %7B transform-origin: 423px 5px; transform: rotate(176deg); animation: blast 700ms infinite ease-out; animation-delay: 311ms; animation-duration: 508ms; %7D rect:nth-child(11) %7B transform-origin: 465px 5px; transform: rotate(108deg); animation: blast 700ms infinite ease-out; animation-delay: 108ms; animation-duration: 595ms; %7D rect:nth-child(12) %7B transform-origin: 506px 6px; transform: rotate(62deg); animation: blast 700ms infinite ease-out; animation-delay: 105ms; animation-duration: 375ms; %7D rect:nth-child(13) %7B transform-origin: 549px 5px; transform: rotate(16deg); animation: blast 700ms infinite ease-out; animation-delay: 149ms; animation-duration: 491ms; %7D rect:nth-child(odd) %7B fill: %2365BB5C; %7D rect:nth-child(even) %7B z-index: 1; fill: %2333AAFF; %7D rect:nth-child(4n) %7B animation-duration: 1400ms; fill: %23F23B14; %7D rect:nth-child(3n) %7B animation-duration: 1750ms; animation-delay: 700ms; %7D rect:nth-child(4n-7) %7B fill: %232A2F6A; %7D rect:nth-child(6n) %7B fill: %23FBBA23; %7D @keyframes blast %7B from %7B opacity: 0; %7D 20%25 %7B opacity: 1; %7D to %7B transform: translateY(90px); %7D %7D %3C/style%3E%3C/svg%3E%0A\");@media (prefers-reduced-motion){background-image:url(\"data:image/svg+xml,%3Csvg width='574' height='60' viewBox='0 0 574 60' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect opacity='0.8' x='27.1224' y='20.0458' width='5' height='13' transform='rotate(-139 27.1224 20.0458)' fill='%23F23B14'/%3E%3Crect opacity='0.8' x='118.478' y='7.00201' width='5' height='13' transform='rotate(-38.8114 118.478 7.00201)' fill='%23FBBA23'/%3E%3Crect opacity='0.8' x='504.616' y='25.4479' width='5' height='13' transform='rotate(-60.2734 504.616 25.4479)' fill='%23F23B14'/%3E%3Crect opacity='0.6' x='538.983' y='45.555' width='5' height='13' transform='rotate(16.7826 538.983 45.555)' fill='%232A2F6A'/%3E%3Crect opacity='0.3' x='470.322' y='2.63625' width='5' height='13' transform='rotate(11.295 470.322 2.63625)' fill='%2333AAFF'/%3E%3Crect opacity='0.3' x='190.295' y='4.58138' width='5' height='13' transform='rotate(27.5954 190.295 4.58138)' fill='%23F23B14'/%3E%3Crect opacity='0.8' x='234.303' y='16.3233' width='5' height='13' transform='rotate(-41.8233 234.303 16.3233)' fill='%2365BB5C'/%3E%3Crect opacity='0.6' x='369.702' y='40.9875' width='5' height='13' transform='rotate(-56.419 369.702 40.9875)' fill='%2333AAFF'/%3E%3Crect opacity='0.3' x='402.121' y='31.0848' width='5' height='13' transform='rotate(-17.9234 402.121 31.0848)' fill='%23F23B14'/%3E%3Crect opacity='0.6' x='200.316' y='31.9328' width='5' height='13' transform='rotate(-15.8896 200.316 31.9328)' fill='%232A2F6A'/%3E%3Crect opacity='0.6' x='69.6745' y='23.4725' width='6' height='10' transform='rotate(70.0266 69.6745 23.4725)' fill='%2365BB5C'/%3E%3Crect opacity='0.6' x='291.945' y='7.16931' width='6' height='10' transform='rotate(30.4258 291.945 7.16931)' fill='%23FBBA23'/%3E%3Crect opacity='0.3' x='33.7754' y='38.2208' width='6' height='10' transform='rotate(38.6056 33.7754 38.2208)' fill='%23FBBA23'/%3E%3Crect opacity='0.8' x='109.752' y='31.1743' width='6' height='10' transform='rotate(28.5296 109.752 31.1743)' fill='%2333AAFF'/%3E%3Crect opacity='0.3' x='278.081' y='37.8695' width='6' height='10' transform='rotate(-26.5651 278.081 37.8695)' fill='%23F23B14'/%3E%3Crect opacity='0.8' x='416.294' y='11.5573' width='6' height='10' transform='rotate(-22.8498 416.294 11.5573)' fill='%23FBBA23'/%3E%3Crect opacity='0.3' x='354.667' y='9.32341' width='6' height='10' transform='rotate(17.7506 354.667 9.32341)' fill='%232A2F6A'/%3E%3Crect opacity='0.8' x='532.404' y='16.6372' width='6' height='10' transform='rotate(-75.3432 532.404 16.6372)' fill='%23FBBA23'/%3E%3Crect opacity='0.6' x='460.463' y='39.3557' width='6' height='10' transform='rotate(45.4982 460.463 39.3557)' fill='%2365BB5C'/%3E%3C/svg%3E\")}}.div-promo[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.div-promo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.img-promo[_ngcontent-%COMP%]{text-align:left;width:64px}.info-promo[_ngcontent-%COMP%]{margin-left:-1px;max-width:210px}.content-importe-minimo[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #e0e0e0;margin-right:-20px;background:#e1f5fe;padding:10px 0;width:72px;height:75px}.importe-minimo[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.label-promo[_ngcontent-%COMP%]{width:60px;float:left;position:absolute;background:#0ff;color:#0ff;-webkit-transform:rotate(318deg);transform:rotate(318deg);text-align:center;margin:-15px -40px;padding:10 px}"]}),e})();function et(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",14),p.Yb("click",(function(){return p.wc(e),p.cc().goBack()})),p.Qb(2,"span",15),p.Hc(3),p.Pb(),p.Qb(4,"div",16),p.Lb(5,"i",17),p.Qb(6,"span",18),p.Hc(7,"Atr\xe1s"),p.Pb(),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc();p.zb(3),p.Ic(e.tituloToolBar)}}function it(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",19),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogComentarios()})),p.Qb(1,"div",20),p.Qb(2,"span",21),p.Lb(3,"i",22),p.Hc(4),p.dc(5,"number"),p.Pb(),p.Pb(),p.Qb(6,"div"),p.Qb(7,"span"),p.Hc(8),p.Lb(9,"i",23),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc();p.kc("matRippleColor",e.rippleColor),p.zb(4),p.Jc(" ",p.fc(5,3,e.dataCalificacion.calificacion,".1"),""),p.zb(4),p.Jc("",e.dataCalificacion.cantidad," Opiniones ")}}const tt=function(e){return{wobble:e}};function ot(e,i){if(1&e&&(p.Qb(0,"div",36),p.Lb(1,"img",37),p.Pb()),2&e){const e=p.cc(3);p.zb(1),p.kc("ngClass",p.pc(1,tt,e.animateBloqueoCategoria))}}function nt(e,i){if(1&e){const e=p.Rb();p.Qb(0,"li",25),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc(2).getSecciones(t)})),p.Qb(1,"div",26),p.Qb(2,"div",27),p.Qb(3,"div",28),p.Lb(4,"img",29),p.Pb(),p.Qb(5,"div"),p.Qb(6,"span",30),p.Hc(7),p.Pb(),p.Lb(8,"br"),p.Qb(9,"div",31),p.Qb(10,"span",32),p.Hc(11),p.dc(12,"lowercase"),p.Pb(),p.Lb(13,"br"),p.Lb(14,"i",33),p.Qb(15,"span",34),p.Hc(16),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Fc(17,ot,2,3,"div",35),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.cc(2);p.kc("matRippleColor",t.rippleColor),p.zb(7),p.Ic(e.des),p.zb(4),p.Ic(p.ec(12,6,e.detalle)),p.zb(5),p.Kc("Horario: ",e.hora_ini," a ",e.hora_fin," "),p.zb(1),p.kc("ngIf",!e.abierto)}}function st(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"ul"),p.Fc(2,nt,18,8,"li",24),p.Pb(),p.Nb()),2&e){const e=p.cc();p.zb(2),p.kc("ngForOf",e.miPedidoService.objCarta.carta)}}function at(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",39),p.Qb(1,"app-item-promocion",40),p.Yb("selected",(function(){p.wc(e);const t=i.$implicit;return p.cc(2).showItemsPromo(t)})),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.cc(2);p.kc("matRippleColor",t.rippleColor),p.zb(1),p.kc("promo",e)}}function ct(e,i){if(1&e&&(p.Ob(0),p.Fc(1,at,2,2,"div",38),p.Nb()),2&e){const e=p.cc();p.zb(1),p.kc("ngForOf",e.objPromociones)}}function rt(e,i){if(1&e&&(p.Ob(0),p.Lb(1,"img",49),p.Nb()),2&e){const e=p.cc().index;p.zb(1),p.mc("src","assets/images/",e,".png",p.xc)}}function dt(e,i){if(1&e&&p.Lb(0,"img",49),2&e){const e=p.cc().$implicit;p.mc("src","assets/images/",e.img,"",p.xc)}}function lt(e,i){if(1&e&&(p.Qb(0,"div"),p.Qb(1,"span",50),p.Hc(2),p.Pb(),p.Pb()),2&e){const e=p.cc().$implicit;p.zb(2),p.Jc("- ",e.descuento,"")}}function bt(e,i){if(1&e){const e=p.Rb();p.Qb(0,"li",41),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc().getItems(t)})),p.Qb(1,"div",42),p.Qb(2,"div",43),p.Fc(3,rt,2,1,"ng-container",9),p.Fc(4,dt,1,1,"ng-template",null,44,p.Gc),p.Pb(),p.Qb(6,"div",45),p.Qb(7,"div"),p.Qb(8,"div",20),p.Qb(9,"span",46),p.Hc(10),p.Pb(),p.Lb(11,"br"),p.Fc(12,lt,3,1,"div",5),p.Pb(),p.Qb(13,"div",47),p.Qb(14,"span",48),p.Hc(15),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.tc(5),o=p.cc();p.kc("matRippleColor",o.rippleColor),p.zb(3),p.kc("ngIf",""===e.img)("ngIfElse",t),p.zb(7),p.Ic(e.des),p.zb(2),p.kc("ngIf",e.descuento),p.zb(3),p.Ic(o.getObjDetalleSeccion(e))}}function mt(e,i){1&e&&p.Lb(0,"i",22)}function pt(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"p",64),p.Hc(2),p.Pb(),p.Nb()),2&e){const e=p.cc(2).$implicit;p.zb(2),p.Ic(e.detalles)}}function ht(e,i){if(1&e&&(p.Qb(0,"span",65),p.Hc(1),p.dc(2,"number"),p.Pb()),2&e){const e=p.cc(2).$implicit;p.zb(1),p.Ic(p.fc(2,1,e.precio_antes,"0.2"))}}function ut(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"div",58),p.Qb(2,"div"),p.Qb(3,"span",59),p.Hc(4),p.Fc(5,mt,1,0,"i",60),p.Pb(),p.Fc(6,pt,3,1,"ng-container",5),p.Pb(),p.Qb(7,"div",61),p.Qb(8,"p",62),p.Fc(9,ht,3,4,"span",63),p.Hc(10),p.dc(11,"number"),p.Pb(),p.Pb(),p.Pb(),p.Nb()),2&e){const e=p.cc().$implicit;p.zb(4),p.Jc("",e.des," "),p.zb(1),p.kc("ngIf","1"===e.is_recomendacion),p.zb(1),p.kc("ngIf",e.detalles.length>0),p.zb(3),p.kc("ngIf",e.precio_antes),p.zb(1),p.Jc(" ",p.fc(11,5,e.precio,"0.2")," ")}}function ft(e,i){1&e&&p.Lb(0,"i",22)}function gt(e,i){if(1&e&&(p.Qb(0,"p",64),p.Hc(1),p.Pb()),2&e){const e=p.cc(2).$implicit;p.zb(1),p.Ic(e.detalles)}}function vt(e,i){if(1&e&&(p.Qb(0,"p",73),p.Hc(1),p.dc(2,"number"),p.Pb()),2&e){const e=p.cc(2).$implicit;p.zb(1),p.Ic(p.fc(2,1,e.precio_antes,"0.2"))}}function Ct(e,i){if(1&e&&(p.Qb(0,"div",66),p.Qb(1,"div"),p.Qb(2,"span",59),p.Hc(3),p.Fc(4,ft,1,0,"i",60),p.Pb(),p.Ob(5),p.Fc(6,gt,2,1,"p",67),p.Qb(7,"div"),p.Fc(8,vt,3,4,"p",68),p.Qb(9,"p",69),p.Hc(10),p.dc(11,"number"),p.Pb(),p.Pb(),p.Nb(),p.Pb(),p.Qb(12,"div",70),p.Qb(13,"div",71),p.Lb(14,"img",72),p.Pb(),p.Pb(),p.Pb()),2&e){const e=p.cc().$implicit,i=p.cc(2);p.zb(3),p.Jc("",e.des," "),p.zb(1),p.kc("ngIf","1"===e.is_recomendacion),p.zb(2),p.kc("ngIf",e.detalles.length>0),p.zb(2),p.kc("ngIf",e.precio_antes),p.zb(2),p.Ic(p.fc(11,7,e.precio,"0.2")),p.zb(4),p.nc("src","",i.rutaImgItem,"",e.img,"",p.xc)}}function Pt(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",75),p.Qb(1,"app-comp-ctrl-add-fast",76),p.Yb("objResponse",(function(i){return p.wc(e),p.cc(4).resultCantItemMercado(i)})),p.Pb(),p.Qb(2,"div",77),p.Yb("click",(function(){p.wc(e);const i=p.cc(2).$implicit;return p.cc(2).selectedItem(i,!0)})),p.Lb(3,"i",78),p.Qb(4,"span",79),p.Hc(5,"Indicaciones"),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc(2).$implicit;p.zb(1),p.kc("cantidad_show",e.cantidad_seleccionada)("objItem",e)("comprimir",!1)("quitarFadeUp",!0)("limitAdd",e.cantidad)}}function St(e,i){if(1&e&&(p.Ob(0),p.Fc(1,Pt,6,5,"div",74),p.Nb()),2&e){const e=p.cc().$implicit;p.zb(1),p.kc("ngIf",e.is_visible_control_last_add||e.cantidad_seleccionada>0)}}const kt=function(e,i){return{"li-tachado":e,"p-titulo-item-sin-detalle":i}};function xt(e,i){if(1&e){const e=p.Rb();p.Qb(0,"li",53),p.Qb(1,"div",54),p.Qb(2,"div",55),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc(2).selectedItem(t)})),p.Qb(3,"div",56),p.Fc(4,ut,12,8,"ng-container",9),p.Fc(5,Ct,15,10,"ng-template",null,57,p.Gc),p.Pb(),p.Pb(),p.Fc(7,St,2,1,"ng-container",5),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.tc(6),o=p.cc(2);p.zb(1),p.Bb("border-bottom-li xcontent child-item border-left-item-",o.getEstadoStockItem(e.cantidad),""),p.kc("matRippleColor",o.rippleColor),p.zb(1),p.kc("ngClass",p.qc(8,kt,e.cantidad<1,0===e.detalles.length)),p.zb(2),p.kc("ngIf",""===e.img)("ngIfElse",t),p.zb(3),p.kc("ngIf",o.isPuntoAutoPedido||o.isTomaPedidoRapido||o.isCliente)}}function _t(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"ul",51),p.Fc(2,xt,8,11,"li",52),p.Pb(),p.Nb()),2&e){const e=p.cc();p.zb(2),p.kc("ngForOf",e.objItems)}}function wt(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"img",91),p.Yb("click",(function(){p.wc(e);const i=p.cc().$implicit;return p.cc(2).selectedItem(i)})),p.Pb(),p.Nb()}if(2&e){const e=p.cc(3);p.zb(1),p.lc("src",e.imgNull,p.xc)}}function It(e,i){if(1&e){const e=p.Rb();p.Qb(0,"img",91),p.Yb("click",(function(){p.wc(e);const i=p.cc().$implicit;return p.cc(2).selectedItem(i)})),p.Pb()}if(2&e){const e=p.cc().$implicit,i=p.cc(2);p.nc("src","",i.rutaImgItem,"",e.img,"",p.xc)}}function yt(e,i){1&e&&p.Lb(0,"i",22)}function Qt(e,i){if(1&e&&(p.Qb(0,"p",73),p.Hc(1),p.dc(2,"number"),p.Pb()),2&e){const e=p.cc().$implicit;p.zb(1),p.Ic(p.fc(2,1,e.precio_antes,"0.2"))}}const Tt=function(e){return{"li-tachado":e}};function Ot(e,i){if(1&e){const e=p.Rb();p.Qb(0,"li",82),p.Qb(1,"div",83),p.Qb(2,"div",84),p.Qb(3,"div",85),p.Qb(4,"div"),p.Qb(5,"app-comp-ctrl-add-fast",86),p.Yb("objResponse",(function(i){return p.wc(e),p.cc(2).resultCantItemMercado(i)})),p.Pb(),p.Qb(6,"div",70),p.Qb(7,"div",87),p.Fc(8,wt,2,1,"ng-container",9),p.Fc(9,It,1,2,"ng-template",null,88,p.Gc),p.Pb(),p.Pb(),p.Pb(),p.Qb(11,"div",89),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc(2).selectedItem(t)})),p.Qb(12,"span",90),p.Hc(13),p.Fc(14,yt,1,0,"i",60),p.Pb(),p.Qb(15,"div"),p.Fc(16,Qt,3,4,"p",68),p.Qb(17,"p",69),p.Hc(18),p.dc(19,"number"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.tc(10);p.zb(1),p.kc("ngClass",p.pc(13,Tt,e.cantidad<1)),p.zb(4),p.kc("cantidad_show",e.cantidad_seleccionada)("objItem",e)("limitAdd",e.cantidad),p.zb(3),p.kc("ngIf",""===e.img)("ngIfElse",t),p.zb(5),p.Jc("",e.des," "),p.zb(1),p.kc("ngIf","1"===e.is_recomendacion),p.zb(2),p.kc("ngIf",e.precio_antes),p.zb(2),p.Ic(p.fc(19,10,e.precio,"0.2"))}}function Mt(e,i){if(1&e&&(p.Qb(0,"ul",80),p.Fc(1,Ot,20,15,"li",81),p.Pb()),2&e){const e=p.cc();p.zb(1),p.kc("ngForOf",e.objItems)}}function Dt(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"p",95),p.Hc(2),p.Pb(),p.Nb()),2&e){const e=p.cc().$implicit;p.zb(2),p.Kc("",e.seccion,": ",e.detalles,"")}}const zt=function(e,i,t){return{"li-tachado":e,"p-titulo-item-sin-detalle":i,"p-titulo-item-select":t}};function Ft(e,i){if(1&e){const e=p.Rb();p.Qb(0,"li",92),p.Qb(1,"div"),p.Qb(2,"div",93),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc().selectedItem(t)})),p.Qb(3,"div",94),p.Qb(4,"span"),p.Hc(5),p.Pb(),p.Fc(6,Dt,3,2,"ng-container",5),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.cc();p.kc("hidden",!e.visible),p.zb(1),p.Bb("xcontent border-left-item-",t.getEstadoStockItem(e.cantidad),""),p.zb(1),p.kc("matRippleColor",t.rippleColor)("ngClass",p.rc(8,zt,e.cantidad<1,0===e.detalles.length,e.selected)),p.zb(3),p.Ic(e.des),p.zb(1),p.kc("ngIf",e.detalles.length>0)}}let Rt=(()=>{class e{constructor(e,i,t,o,n,s,a,c,r,d,l,b){this.socketService=e,this.miPedidoService=i,this.reglasCartaService=t,this.navigatorService=o,this.listenStatusService=n,this.infoToken=s,this.dialog=a,this.establecimientoService=c,this.calcDistanciaService=r,this.crudService=d,this.speechDataProviderService=l,this.cocinarPromoShowService=b,this.unsubscribeCarta=new Fe.a,this.objCartaBus=[],this.isBusqueda=!1,this.rutaImgItem=A.d,this.imgNull="./assets/images/icon-app/img-null.png",this.isCargado=!0,this.showCategoria=!1,this.showSecciones=!1,this.showItems=!1,this.showToolBar=!1,this.tituloToolBar="",this.rippleColor="rgb(255,238,88, 0.5)",this.objSecciones=[],this.objItems=[],this.objPromociones=null,this.tiposConsumo=[],this.objNewItemTiposConsumo=[],this.countSeeBack=2,this.nomCategoriaSeleted="",this.destroy$=new le.Subject,this.isFirstLoadListen=!1,this.isScreenIsMobile=!0,this.isViewMercado=!1,this.isShowCalificacion=!1,this.isCliente=!1,this.isPuntoAutoPedido=!1,this.isTomaPedidoRapido=!1,this.isCantidadCero=!0,this.animateBloqueoCategoria=!1}onResize(e){this.detectScreenSize()}detectScreenSize(){this.isScreenIsMobile=!(window.innerWidth>599)}ngOnInit(){this.detectScreenSize();const e=JSON.parse(localStorage.getItem("sys::punto"))||{};if(this.isViewMercado=1===this.establecimientoService.get().pwa_show_item_view_mercado,this.isCliente=this.infoToken.infoUsToken.isCliente,this.isPuntoAutoPedido=e.ispunto_autopedido||!1,this.isTomaPedidoRapido=e.istoma_pedido_rapido||!1,this.isTomaPedidoRapido&&(this.canalConsumoTomaPedidoRapido=null==e?void 0:e.canal_consumo),this.initCarta(),this.isShowCalificacion=this.establecimientoService.get().calificacion>=3.7,this.isShowCalificacion){this.dataCalificacion={calificacion:this.establecimientoService.get().calificacion,cantidad:0,listCalificacion:[]};const e={idsede:this.establecimientoService.get().idsede};this.crudService.postFree(e,"delivery","get-calificacion-sede",!1).subscribe(e=>{this.dataCalificacion.listCalificacion=e.data,this.dataCalificacion.cantidad=this.dataCalificacion.listCalificacion.map(e=>e.numpedidos).reduce((e,i)=>e+i,0)})}this.infoToken.getInfoUs().isCliente&&this.infoToken.getInfoUs().isDelivery&&!this.infoToken.getInfoUs().isReserva&&this.calcDistanciaService.calcCostoEntregaApiGoogleRain(this.infoToken.getInfoUs().direccionEnvioSelected,this.establecimientoService.get())}ngAfterViewInit(){}initCarta(){this.isCargado=!0,this.socketService.connect(),this.listenStatusService.setLoaderCarta(!0),this.listeStatusBusqueda(),this.infoToken.isReserva()||this.miPedidoService.getDeliveryConstCantEscala(),this.unsubscribeCarta=this.navigatorService.resNavigatorSourceObserve$.subscribe(e=>{if("carta"===e.pageActive){if(this.countSeeBack<2)return void this.countSeeBack++;this.goBack()}else this.countSeeBack=0}),this.establecimientoService.getComsionEntrega(),this.unsubscribeCarta=this.socketService.onGetCarta().subscribe(e=>{if(this.listenStatusService.setLoaderCarta(!1),this.socketService.isSocketOpenReconect)return this.miPedidoService.setObjCarta(e),this.resetParamsCarta(),this.miPedidoService.findIsHayItems()&&this.miPedidoService.updatePedidoFromStrorage(),this.navigatorService.setPageActive("carta"),void localStorage.removeItem("sys::time-list-table");this.miPedidoService.setObjCarta(e),this.miPedidoService.objCarta.promociones&&this.miPedidoService.objCarta.promociones.lista_promociones&&(this.objPromociones=this.miPedidoService.objCarta.promociones.lista_promociones,this.isCliente||(this.objPromociones=this.objPromociones.filter(e=>0===e.parametros.body.solo_app)),this.cocinarPromoShowService.iniReloadOpenPromo(this.objPromociones)),this.resetParamsCarta(),this.miPedidoService.clearPedidoIsLimitTime(),this.miPedidoService.updatePedidoFromStrorage(),this.miPedidoService.restoreTimerLimit(),this.loadItemsBusqueda(),this.isFirstLoadListen||(this.isFirstLoadListen=!0,this.miPedidoService.listenChangeCantItem())}),this.unsubscribeCarta=this.socketService.onGetTipoConsumo().subscribe(e=>{this.socketService.isSocketOpenReconect||(this.tiposConsumo=e,this.tiposConsumo.map(e=>{const i=new ae.a;if(i.descripcion=e.descripcion,i.idtipo_consumo=e.idtipo_consumo,i.titulo=e.titulo,i.idimpresora=e.idimpresora,this.infoToken.isCliente())if(this.infoToken.isDelivery()){if("DELIVERY"!==e.descripcion)return;i.descripcion="CANTIDAD"}else{if("DELIVERY"===e.descripcion)return;if(this.infoToken.isSoloLlevar()&&-1===e.descripcion.indexOf("LLEVAR"))return}this.infoToken.isPuntoAutoPedido()&&-1===e.descripcion.indexOf("LLEVAR")||this.objNewItemTiposConsumo.push(i)}),this.miPedidoService.setObjNewItemTiposConsumo(this.objNewItemTiposConsumo),this.navigatorService.addLink("carta-i-"),this.initFirtsCategoria())}),this.unsubscribeCarta=this.socketService.onGetDataSedeDescuentos().subscribe(e=>{this.miPedidoService.setObjCartaDescuentos(e)}),this.reglasCartaService.loadReglasCarta()}initFirtsCategoria(){1===this.miPedidoService.objCarta.carta.length&&(this.objSecciones=this.miPedidoService.objCarta.carta[0].secciones,this.tituloToolBar=this.miPedidoService.objCarta.carta[0].des,this.showSecciones=!0,this.showCategoria=!1,this.showToolBar=!0,this.getSecciones(this.miPedidoService.objCarta.carta[0]),this.isScreenIsMobile||this.getItems(this.objSecciones[0]),this.objItems=this.objSecciones[0].items)}resetParamsCarta(){this.isCargado=!1,this.objSecciones=[],this.objItems=[],this.showSecciones=!1,this.showItems=!1,this.showToolBar=!1,this.showCategoria=!0}ngOnDestroy(){this.unsubscribeCarta.unsubscribe(),this.destroy$.next(!0),this.destroy$.unsubscribe()}getSecciones(e){if(this.infoToken.isCliente()&&!e.abierto)return this.animateBloqueoCategoria=!0,void setTimeout(()=>{this.animateBloqueoCategoria=!1},300);this.categoriaSeleted=e,setTimeout(()=>{this.objSecciones=e.secciones,this.showSecciones=!0,this.showCategoria=!1,this.showToolBar=!0,localStorage.setItem("sys::cat",e.idcategoria.toString()),this.tituloToolBar=e.des,this.nomCategoriaSeleted=e.des,this.navigatorService.addLink("carta-i-secciones")},250)}getItems(e){this.miPedidoService.setObjSeccionSeleced(e),setTimeout(()=>{this.seccionSelected=e,this.objItems=e.items,this.showSecciones=!1,this.showItems=!0,this.isScreenIsMobile&&(this.tituloToolBar=this.nomCategoriaSeleted+" / "+e.des),this.navigatorService.addLink("carta-i-secciones-items")},150)}getItemsPromo(e){setTimeout(()=>{this.objItems=e,this.showSecciones=!1,this.showItems=!0,this.navigatorService.addLink("carta-i-secciones-items")},150)}getItems_seccion_from_busqueda(e){this.miPedidoService.setObjSeccionSeleced({des:e.seccion,idseccion:e.idseccion,idimpresora:e.idimpresora,sec_orden:e.sec_orden,ver_stock_cero:e.ver_stock_cero})}loadItemsBusqueda(){let e,i;e=this.miPedidoService.getObjCarta(),e.carta&&(e.carta.map(e=>{e.secciones.map(e=>{e.items.map(t=>{i=t,i.seccion=e.des,i.idimpresora=e.idimpresora,i.sec_orden=e.sec_orden,i.ver_stock_cero=e.ver_stock_cero,i.selected=!1,i.visible=!0,this.objCartaBus.push(i)})})}),window.localStorage.setItem("sys::find",""))}goBack(){try{if(1===this.miPedidoService.objCarta.carta.length&&!this.isScreenIsMobile)return}catch(e){}if(this.objItems.map(e=>e.selected=!1),this.showItems)return this.showItems=!1,this.showSecciones=!0,void(this.tituloToolBar=this.tituloToolBar.split(" / ")[0]);this.showSecciones&&(this.showSecciones=!1,this.showToolBar=!1,this.showCategoria=!0)}selectedItem(e,i=!1){var t;if((this.isPuntoAutoPedido||this.isTomaPedidoRapido||this.isCliente)&&!i&&0===(null==e?void 0:e.count_subitems)&&!this.isViewMercado)return void this.resultCantItemMercado(e,!0);if("0"===e.cantidad.toString()&&!e.cantidad_seleccionada)return;e.selected=!0,this.itemSelected=e;const o=JSON.parse(JSON.stringify(this.objNewItemTiposConsumo));this.objItemTipoConsumoSelected=e.itemtiposconsumo?e.itemtiposconsumo:o,e.itemtiposconsumo||(e.itemtiposconsumo=this.objItemTipoConsumoSelected);const n=(null===(t=this.seccionSelected)||void 0===t?void 0:t.idseccion)||0,s=this.miPedidoService.getObjSeccionSeleced();(this.itemSelected.idseccion!==n||s.idseccion!==n)&&(this.seccionSelected=this.miPedidoService.findItemSeccionCarta(this.itemSelected.idseccion),this.miPedidoService.setObjSeccionSeleced(this.seccionSelected)),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),this.openDlgItem(e)}openDlgItem(e){const i=new S.e,t=e.ispromo?e:this.miPedidoService.findItemCarta(e);t.itemtiposconsumo||(t.itemtiposconsumo=e.itemtiposconsumo),i.autoFocus=!1,i.data={idTpcItemResumenSelect:null,seccion:this.isBusqueda?this.miPedidoService.findItemSeccionCarta(t.idseccion):this.seccionSelected,item:t,objItemTipoConsumoSelected:this.itemSelected.itemtiposconsumo},i.panelClass=["my-dialog-orden-detalle","margen-0","my-dialog-item-producto"],this.dialog.open(De,i).afterClosed().subscribe(e=>{})}addItemToPedido(e,i){this.miPedidoService.addItem2(e,this.itemSelected,i)}addItemToPedidoFromBusqueda(e,i){this.getItems_seccion_from_busqueda(this.itemSelected),this.miPedidoService.addItem2(e,this.itemSelected,i)}addItemIndicaciones(e,i){this.itemSelected.indicaciones=i,e.indicaciones=i}getEstadoStockItem(e){if("ND"===e||isNaN(e))return"verde";{const i=parseInt(e,0);return i>10?"verde":i>5?"amarillo":"rojo"}}listeStatusBusqueda(){this.listenStatusService.isBusqueda$.subscribe(e=>{this.isBusqueda=e}),this.listenStatusService.charBuqueda$.pipe(Object(ze.takeUntil)(this.destroy$)).subscribe(e=>{this.isBusquedaFindNow(e)}),this.socketService.isSocketOpen$.pipe(Object(ze.takeUntil)(this.destroy$)).subscribe(e=>{e||this.unsubscribeCarta.unsubscribe()}),this.speechDataProviderService.commandNavegacionSeccion$.pipe(Object(ze.takeUntil)(this.destroy$)).subscribe(e=>{e&&(this.getSecciones(this.miPedidoService.objCarta.carta[0]),setTimeout(()=>{this.getItems(e)},100))}),this.speechDataProviderService.commandNavegacionRecomendado$.pipe(Object(ze.takeUntil)(this.destroy$)).subscribe(e=>{e.length>0&&this.getItemsPromo(e)}),this.speechDataProviderService.commandAddItem$.pipe(Object(ze.takeUntil)(this.destroy$)).subscribe(e=>{e&&this.resultCantItemMercado(e.item,e.isSuma)})}isBusquedaFindNow(e){e=e.toLowerCase();let i="";this.objCartaBus.map(t=>{i=`${t.des} ${t.seccion} ${t.detalles}`,i=i.toLowerCase(),t.visible=i.indexOf(e)>-1})}getObjDetalleSeccion(e){let i="";if(null!==e.items)return e.items.map((e,t)=>{t>5||(i+=e.des.toLowerCase()+", ")}),i.slice(0,-2)}resultCantItemMercado(e,i=!1){var t;this.itemSelected=e;const o=JSON.parse(JSON.stringify(this.objNewItemTiposConsumo));this.objItemTipoConsumoSelected=e.itemtiposconsumo?e.itemtiposconsumo:o,e.itemtiposconsumo||(e.itemtiposconsumo=this.objItemTipoConsumoSelected),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected);let n=this.objItemTipoConsumoSelected[0];this.isTomaPedidoRapido&&(n=this.objItemTipoConsumoSelected.filter(e=>e.descripcion.toLocaleLowerCase()===this.canalConsumoTomaPedidoRapido.descripcion.toLocaleLowerCase())[0]);const s=i||e.isSuma_selected?0:1,a=(null===(t=this.seccionSelected)||void 0===t?void 0:t.idseccion)||0,c=this.miPedidoService.getObjSeccionSeleced();(this.itemSelected.idseccion!==a||c.idseccion!==a)&&(this.seccionSelected=this.miPedidoService.findItemSeccionCarta(this.itemSelected.idseccion),this.miPedidoService.setObjSeccionSeleced(this.seccionSelected)),this.miPedidoService.addItem2(n,this.itemSelected,s),e.is_visible_control_last_add=0!==e.cantidad_seleccionada}openDialogComentarios(){const e=new S.e;e.autoFocus=!1,e.data=this.dataCalificacion,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialog.open(je,e).afterClosed().subscribe(e=>{})}showItemsPromo(e){const i=this.cocinarPromoShowService.promoFilterShow(e,this.categoriaSeleted);this.getItemsPromo(i)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(d.a),p.Kb(a.a),p.Kb(de),p.Kb(c.a),p.Kb(r.a),p.Kb(m.a),p.Kb(S.b),p.Kb(b.a),p.Kb(Re.a),p.Kb(y.a),p.Kb(q),p.Kb(Ne))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-carta"]],hostBindings:function(e,i){1&e&&p.Yb("resize",(function(e){return i.onResize(e)}),!1,p.vc)},decls:27,vars:13,consts:[[1,"fondo"],[1,"content-master",3,"hidden"],[4,"ngIfIsBusqueda","ngIf"],[1,"content-secciones","xanimated","xfadeIn",3,"hidden"],["class","p-2 pl-3 pr-3 border-bottom d-flex justify-content-between fs-14","style","background: #e3f2fd;","matRipple","",3,"matRippleColor","click",4,"ngIf"],[4,"ngIf"],[1,"content-secciones","xanimated","xfadeIn","m-main-pt-40",3,"hidden"],["class","li-seccion xCursor","matRipple","",3,"matRippleColor","click",4,"ngFor","ngForOf"],[1,"content-items","xtransicion","m-main-pt-40",3,"hidden"],[4,"ngIf","ngIfElse"],["elseViewItemMercado",""],[1,"content-resumen"],[1,"xtransicion","color-fondo-ul","xanimated","xfadeInDown",2,"border-top","8px solid #3f51b5",3,"hidden"],[3,"hidden",4,"ngFor","ngForOf"],["matRipple","",1,"text-white","bg-primary","p-2","m-toolbar-seccion","xanimated","xfadeInDown","text-puntos-suspensivos","d-flex","justify-content-between","align-items-center",3,"click"],[1,"pl-2","font-weight-light","fs-13","text-puntos"],[1,"border-1"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"fs-13"],["matRipple","",1,"p-2","pl-3","pr-3","border-bottom","d-flex","justify-content-between","fs-14",2,"background","#e3f2fd",3,"matRippleColor","click"],[1,"d-flex"],[1,"pr-2"],[1,"fa","fa-star","text-warning","pr-1"],[1,"fa","fa-angle-right","text-secondary","pl-2"],["class","xCursor","matRipple","",3,"matRippleColor","click",4,"ngFor","ngForOf"],["matRipple","",1,"xCursor",3,"matRippleColor","click"],[1,"m1","seccion","item-categoria-carta"],[1,"w-100","d-flex","align-items-center"],[1,"img","mt-2"],["src","assets/images/048-grill.png","alt",""],[1,"fw-100","fs-20"],[1,"text-secondary"],[1,"mt-2","fs-15"],["aria-hidden","true",1,"fa","fa-clock-o","pr-2"],[1,"mt-2","fs-12"],["class","aling-rigth",4,"ngIf"],[1,"aling-rigth"],["src","assets/images/002-lock.png","alt","bloqueado",1,"animated",3,"ngClass"],["class","m1 seccion li-seccion xCursor","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"m1","seccion","li-seccion","xCursor",3,"matRippleColor"],[1,"w-100",3,"promo","selected"],["matRipple","",1,"li-seccion","xCursor",3,"matRippleColor","click"],[1,"m1","seccion"],[1,"img"],["elseTemplateImg",""],[2,"width","calc(100% - 50px) !important"],[1,"fw-100","fs-19"],[1,"titulo-detalle-seccion","text-secondary"],[1,"fw-100","mt-2","fs-13"],["alt","img-icon",3,"src"],[1,"badge","badge-danger","ml-2"],[1,"ul-items"],["class","li-item",4,"ngFor","ngForOf"],[1,"li-item"],["matRipple","",3,"matRippleColor"],[1,"m1","d-flex","xtitulo",3,"ngClass","click"],[1,"content-titulo-item","w-100","d-flex","align-items-center","justify-content-between","w-100"],["elseConImagen",""],[1,"d-flex","justify-content-between","w-100"],[1,"fw-600","fs-12","item-titulo"],["class","fa fa-star text-warning pr-1",4,"ngIf"],[1,"text-right","pl-1"],[1,"mb-0","fw-600"],["class","fw-600 li-tachado mr-1",4,"ngIf"],[1,"titlo-detalle","mb-1"],[1,"fw-600","li-tachado","mr-1"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["class","titlo-detalle mb-1",4,"ngIf"],["class","mb-0 fw-600 li-tachado",4,"ngIf"],[1,"mb-0","fw-600","pr-2"],[1,"text-right","ml-1"],[1,"rounded-circle","icon-div-carta"],["alt","icon-item-carta",1,"icon-item-carta","rounded-circle",3,"src"],[1,"mb-0","fw-600","li-tachado"],["class","control-more-clic animated fadeInUp",4,"ngIf"],[1,"control-more-clic","animated","fadeInUp"],[1,"float-left","mr-1",3,"cantidad_show","objItem","comprimir","quitarFadeUp","limitAdd","objResponse"],[1,"btn-indicacion-last-control",3,"click"],[1,"fa","fa-pencil","pr-1"],[1,"fs-11"],[1,"content-view-item-mercado"],["class","li-content-mercado",4,"ngFor","ngForOf"],[1,"li-content-mercado"],["matRipple","",1,"li-item-mercado","d-flex","xtitulo","p-titulo-item-sin-detalle",3,"ngClass"],[1,"w-100"],[1,"w-100","align-items-center"],[1,"div-control-add-fast",3,"cantidad_show","objItem","limitAdd","objResponse"],[1,"text-center"],["elseTemplateConImg",""],[1,"text-center",3,"click"],[1,"fw-600","fs-11","item-titulo"],["alt","icon-item-carta",1,"icon-item-carta",3,"src","click"],[3,"hidden"],["matRipple","",1,"m1","d-flex","xtitulo",3,"matRippleColor","ngClass","click"],[1,"content-titulo-item","w-100"],[1,"titlo-detalle"]],template:function(e,i){if(1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Fc(2,et,8,1,"ng-container",2),p.Qb(3,"div",3),p.Fc(4,it,10,6,"div",4),p.Fc(5,st,3,1,"ng-container",5),p.Pb(),p.Qb(6,"div",6),p.Fc(7,ct,2,1,"ng-container",5),p.Ob(8),p.Qb(9,"ul"),p.Fc(10,bt,16,6,"li",7),p.Pb(),p.Lb(11,"br"),p.Lb(12,"br"),p.Nb(),p.Pb(),p.Qb(13,"div",8),p.Ob(14),p.Fc(15,_t,3,1,"ng-container",9),p.Fc(16,Mt,2,1,"ng-template",null,10,p.Gc),p.Nb(),p.Pb(),p.Ob(18),p.Qb(19,"div",11),p.Lb(20,"app-resumen-pedido"),p.Pb(),p.Nb(),p.Lb(21,"br"),p.Pb(),p.Qb(22,"div",12),p.Ob(23),p.Qb(24,"ul"),p.Fc(25,Ft,7,12,"li",13),p.Pb(),p.Nb(),p.Pb(),p.Lb(26,"br"),p.Pb()),2&e){const e=p.tc(17);p.zb(1),p.kc("hidden",i.isBusqueda),p.zb(1),p.kc("ngIf",i.showToolBar),p.zb(1),p.kc("hidden",!i.showCategoria),p.zb(1),p.kc("ngIf",i.isShowCalificacion&&i.isCliente),p.zb(1),p.kc("ngIf",i.miPedidoService.objCarta),p.zb(1),p.kc("hidden",!i.showSecciones&&i.isScreenIsMobile),p.zb(1),p.kc("ngIf",i.objPromociones),p.zb(3),p.kc("ngForOf",i.objSecciones),p.zb(3),p.kc("hidden",!i.showItems&&i.isScreenIsMobile),p.zb(2),p.kc("ngIf",!i.isViewMercado)("ngIfElse",e),p.zb(7),p.kc("hidden",!i.isBusqueda),p.zb(3),p.kc("ngForOf",i.objCartaBus)}},directives:[o.t,o.s,qi,M.o,o.q,Xi,me.a],pipes:[o.g,o.p],styles:[".text-puntos-suspensivos[_ngcontent-%COMP%]{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-view-item-mercado[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.li-content-mercado[_ngcontent-%COMP%]{list-style-type:none}.li-item-mercado[_ngcontent-%COMP%]{background:#fff;padding:8px 15px}.div-control-add-fast[_ngcontent-%COMP%]{position:absolute;right:20px;top:5px}.control-more-clic[_ngcontent-%COMP%]{padding-left:15px;margin-bottom:10px}.btn-indicacion-last-control[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:#3cb371;color:#fff;text-align:center;padding:2px 10px;border-radius:5px;height:32px}.btn-indicacion-last-control[_ngcontent-%COMP%], .item-categoria-carta[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}@media only screen and (min-width:600px){.content-master[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.content-secciones[_ngcontent-%COMP%]{max-width:350px;min-width:310px;border-right:2px solid #bdbdbd}.content-items[_ngcontent-%COMP%], .content-secciones[_ngcontent-%COMP%]{width:100%;height:-webkit-calc(100vh - 110px);height:calc(100vh - 110px);overflow:auto}.content-items[_ngcontent-%COMP%]{min-width:320px;border-right:1px solid #dee2e6!important}.content-resumen[_ngcontent-%COMP%]{min-width:360px;max-width:420px;width:100%;padding:50px 20px 0;border:2px solid #bdbdbd;height:-webkit-calc(100vh - 110px);height:calc(100vh - 110px);overflow:auto;background:#eee}}@media only screen and (max-width:1050px){.content-resumen[_ngcontent-%COMP%]{display:none}}@media only screen and (min-width:1250px){.ul-items[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;flex-flow:row wrap}.li-item[_ngcontent-%COMP%]{-webkit-flex-basis:50%;flex-basis:50%;border-right:2px solid hsla(0,0%,93.3%,.9333333333333333)}.child-item[_ngcontent-%COMP%]{height:100%}}",".m1[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{background:#fff;padding:8px 15px}.m1.seccion[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.border-bottom-li[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.img[_ngcontent-%COMP%]{border:1px solid #bdbdbd;text-align:center;border-radius:50px;width:50px;line-height:10px;padding:8px;float:left;margin-right:10px;max-height:52px}.estado-color-verde[_ngcontent-%COMP%]{background:#43a047;color:#e0e0e0}.estado-color-amarillo[_ngcontent-%COMP%]{background:#ffb300;color:#424242}.estado-color-rojo[_ngcontent-%COMP%]{background:#d81b60;color:#e0e0e0}.trasicion-border[_ngcontent-%COMP%]{-webkit-transition:border-left .3s ease-out;transition:border-left .3s ease-out}.border-left-item-verde[_ngcontent-%COMP%]{border-left:5px solid #43a047}.border-left-item-rojo[_ngcontent-%COMP%]{border-left:5px solid #d81b60}.border-left-item-amarillo[_ngcontent-%COMP%]{border-left:5px solid #ffb300}.m1-selected[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.margin-input[_ngcontent-%COMP%]{margin-bottom:-20px;margin-top:-20px}.color-fondo-ul[_ngcontent-%COMP%]{background:#616161}.li-padding-selected[_ngcontent-%COMP%]{padding:12px}.li-padding-selected[_ngcontent-%COMP%]   .xcontent[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.p-titulo-item-sin-detalle[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.p-titulo-item-select[_ngcontent-%COMP%]{padding:8px 15px}.content-titulo-item[_ngcontent-%COMP%]{font-size:14px}.content-titulo-item[_ngcontent-%COMP%]   .titlo-detalle[_ngcontent-%COMP%]{font-size:13px;font-family:Ubuntu-Light;color:#616161;display:-webkit-box;max-width:100%;max-height:40px;margin:0 auto;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;text-transform:lowercase}.titulo-detalle-seccion[_ngcontent-%COMP%]{width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.li-padding-selected[_ngcontent-%COMP%]   .xtitulo[_ngcontent-%COMP%]{background:#e0e0e0}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock[_ngcontent-%COMP%]{display:inline-block}.tb-tpc[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px dashed #e0e0e0}.btn-tbl[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:5px 15px;font-size:15px}.flag-stock[_ngcontent-%COMP%]{position:absolute;float:right;margin-top:-9px;margin-right:50px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1;display:none}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock-dialog[_ngcontent-%COMP%]{display:inline-block}.li-tachado[_ngcontent-%COMP%]{text-decoration:line-through;color:red}.flag-stock-dialog[_ngcontent-%COMP%]{float:right;margin-top:-9px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1}.mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.m-toolbar-seccion[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:1}.m-main-pt-40[_ngcontent-%COMP%]{padding-top:40px}.titulo-num-mesa[_ngcontent-%COMP%]{background:#757575;color:#000}.subitem-content[_ngcontent-%COMP%]{width:100%;background:#fafad2;padding:5px;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-top:20px;margin-bottom:20px;border-top:1px solid #bdbdbd;border-bottom:1px solid #bdbdbd}.subitem-content[_ngcontent-%COMP%], .subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{padding-right:8px;min-width:150px}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]   .agotado[_ngcontent-%COMP%]{text-decoration:line-through;color:#db7093}.item-titulo[_ngcontent-%COMP%]{color:#424242}.icon-div-carta[_ngcontent-%COMP%]{border:1px solid #bdbdbd}.icon-item-carta[_ngcontent-%COMP%]{height:60px;-o-object-fit:cover;object-fit:cover;-webkit-transition:all .1s;transition:all .1s;width:60px;border-radius:5px}.li-seccion[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function Lt(e,i){1&e&&(p.Qb(0,"span"),p.Lb(1,"i",4),p.Pb())}const Et=function(e){return{fadeInUp:"isShowTxtTraduce",fadeOutDown:e}},Ht=function(e,i){return{"text-success":e,"fw-600":i}};let jt=(()=>{class e{constructor(e,i,t){this.spechTotextService=e,this.speechDataProviderService=i,this.utilitariosSerivce=t,this.destroy$=new le.Subject,this.isShowTxtTraduce=!1,this.isShowCheck=!1,this.countTimeClose=null,this.textTranscript=""}ngOnInit(){this.spechTotextService.listenOnTraduce$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&(this.isShowTxtTraduce=e),clearInterval(this.countTimeClose),this.activeCloseBanner()}),this.spechTotextService.speechTexResponse$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&(this.txtResults=e,this.textTranscript=this.txtResults[0].alternatives[0].transcript,this.isShowCheck=!1)}),this.speechDataProviderService.commandAceptado$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{if(e>0){setTimeout(()=>{this.isShowCheck=!0},100);const i=setInterval(()=>{e<=0?clearInterval(i):(this.utilitariosSerivce.beep(),e--)},100)}})}activeCloseBanner(){let e=0;this.countTimeClose=setInterval(()=>{e>4&&(this.isShowTxtTraduce=!1,clearInterval(this.countTimeClose)),e++},1e3)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(B),p.Kb(q),p.Kb(w.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-mozo-show-traduce-text"]],decls:5,vars:9,consts:[[1,"bg-voz","footer-btn-go-lista","animated","fadeIn",3,"ngClass"],[1,"text-center"],[1,"mr-2",3,"ngClass"],[4,"ngIf"],[1,"fa","fa-check","text-success"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Qb(2,"span",2),p.Hc(3),p.Pb(),p.Fc(4,Lt,2,0,"span",3),p.Pb(),p.Pb()),2&e&&(p.kc("ngClass",p.pc(4,Et,!i.isShowTxtTraduce)),p.zb(2),p.kc("ngClass",p.qc(6,Ht,i.isShowCheck,i.isShowCheck)),p.zb(1),p.Ic(i.textTranscript),p.zb(1),p.kc("ngIf",i.isShowCheck))},directives:[o.q,o.t],styles:[".footer-btn-go-lista[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;text-align:center;background:#d3d3d3;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:13px;z-index:100;font-weight:400;border-top:3px solid #3f78b5}.footer-btn-go-lista[_ngcontent-%COMP%], .footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;width:85%;font-size:14px;border-radius:5px 5px 0 0;padding:10px;font-weight:100;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}"]}),e})();var Bt=t("W2jQ");function Nt(e,i){1&e&&(p.Qb(0,"div",12),p.Lb(1,"mat-progress-bar",13),p.Pb())}function At(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"td"),p.Lb(2,"img",22),p.Pb(),p.Qb(3,"td"),p.Qb(4,"span",23),p.Hc(5),p.dc(6,"titlecase"),p.Pb(),p.Pb(),p.Nb()),2&e){const e=p.cc().$implicit;p.zb(5),p.Ic(p.ec(6,1,e.referencia))}}function Vt(e,i){if(1&e&&(p.Qb(0,"td"),p.Lb(1,"img",24),p.Pb(),p.Qb(2,"td"),p.Qb(3,"span",23),p.Hc(4),p.dc(5,"titlecase"),p.Pb(),p.Pb()),2&e){const e=p.cc().$implicit;p.zb(4),p.Ic(p.ec(5,1,e.nommozo))}}const qt=function(e){return{"animated fadeOutLeft":e}},$t=function(e){return{"bg-info-mesa-client":e}};function Ut(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",14),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc().goCuentaMesa(t)})),p.Qb(1,"div",15),p.Qb(2,"span"),p.Hc(3),p.Pb(),p.Pb(),p.Qb(4,"div",16),p.Qb(5,"table",17),p.Qb(6,"tr"),p.Fc(7,At,7,3,"ng-container",18),p.Fc(8,Vt,6,3,"ng-template",null,19,p.Gc),p.Pb(),p.Qb(10,"tr"),p.Qb(11,"td"),p.Lb(12,"img",20),p.Pb(),p.Qb(13,"td"),p.Qb(14,"span",21),p.Hc(15),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.tc(9),o=p.cc();p.kc("matRippleColor",o.rippleColor)("ngClass",p.pc(7,qt,e.remove)),p.zb(3),p.Ic(e.nummesa),p.zb(1),p.kc("ngClass",p.pc(9,$t,1==e.flag_is_cliente)),p.zb(3),p.kc("ngIf",1==e.flag_is_cliente)("ngIfElse",t),p.zb(8),p.Jc("",e.min," min")}}let Kt=(()=>{class e{constructor(e,i,t,o,n,s,a){this.socketService=e,this.crudService=i,this.infoToken=t,this.navigatorService=o,this.listenStatusService=n,this.utilitariosService=s,this.dialog=a,this.destroy$=new le.Subject,this.listMesas=[],this.countPersonal=0,this.countCliente=0,this.showLoaderListMesa=!0,this.rippleColor="rgb(255,238,88, 0.5)",this.keyLocalStorage="sys::time-list-table",this.isHayPedidoPendiente=!1}ngOnInit(){localStorage.removeItem(this.keyLocalStorage),this.listenStatusService.showLoadListMesas$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{e&&this.loadListMesas()}),this.listenStatusService.hayPedidoPendiente$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{this.isHayPedidoPendiente=e}),this.socketService.onGetMesaPagada().subscribe(e=>{this.removeMesaList(e.num_mesa)}),this.socketService.onGetNewPedidoMesa().subscribe(e=>{this.listMesas.push(e)})}loadListMesas(){this.verifyTimeLoadListmesas()&&(this.showLoaderListMesa=!0,this.crudService.postFree({idsede:this.infoToken.infoUsToken.idsede},"pedido","get-list-mesas",!0).subscribe(e=>{this.showLoaderListMesa=!1,this.listMesas=e.data.map(e=>(e.remove=!1,e)),this.countPersonal=this.listMesas.length,this.countCliente=this.listMesas.map(e=>e.flag_is_cliente).reduce((e,i)=>e+i,0),this.countPersonal=this.countPersonal-this.countCliente}))}orderList(e){this.listMesas=this.listMesas.sort((i,t)=>1===e?t.flag_is_cliente-i.flag_is_cliente:i.flag_is_cliente-t.flag_is_cliente)}goCuentaMesa(e){if(this.isHayPedidoPendiente){const i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.data={idMjs:2},this.dialog.open(Bt.a,i).afterClosed().subscribe(i=>{i&&this.showCuentaMesa(e)})}else this.showCuentaMesa(e)}showCuentaMesa(e){this.navigatorService.setPageActive("mipedido"),this.listenStatusService.setShowCuentaMesaNumero(e.nummesa)}removeMesaList(e){const i=this.listMesas.find(i=>i.nummesa===e);i&&(i.remove=!0,setTimeout(()=>{this.listMesas=this.listMesas.filter(i=>i.nummesa!==e)},700))}verifyTimeLoadListmesas(){const e=localStorage.getItem(this.keyLocalStorage);return e?this.utilitariosService.getTimeMinutesDiff(e)>4&&(localStorage.setItem(this.keyLocalStorage,(new Date).toString()),!0):(localStorage.setItem(this.keyLocalStorage,(new Date).toString()),!0)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(d.a),p.Kb(y.a),p.Kb(m.a),p.Kb(c.a),p.Kb(r.a),p.Kb(w.a),p.Kb(S.b))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-list-mesas"]],decls:25,vars:6,consts:[[1,"content-master"],[1,"d-flex","justify-content-between","align-items-center","p-2","border-bottom",2,"background-color","#deeeff"],[1,"fw-100","fs-18"],[1,"d-flex"],["matRipple","",1,"text-center","mr-1","btn-filter","personal","xCursor",3,"matRippleColor","click"],["src","assets/images/waiter-table.png","width","18px","alt","mozo pedido"],[1,"fw-100","text-secondary","fs-11","m-0"],["matRipple","",1,"text-center","btn-filter","cliente","xCursor",3,"matRippleColor","click"],["src","assets/images/waiter-client.png","width","18px","alt","mozo pedido"],["class","p-4",4,"ngIf"],[1,"div-content-mesas"],["class","div-item-mesa xCursor","matRipple","",3,"matRippleColor","ngClass","click",4,"ngFor","ngForOf"],[1,"p-4"],["mode","indeterminate"],["matRipple","",1,"div-item-mesa","xCursor",3,"matRippleColor","ngClass","click"],[1,"num-mesa"],[1,"info-mesa","animated","fadeInUp",3,"ngClass"],[1,"w-100"],[4,"ngIf","ngIfElse"],["elseTemplateMozo",""],["src","assets/images/x_is_all_demand.png","width","15px","alt","tiempo pedido"],[1,"fs-13","fw-100"],["src","assets/images/waiter-client.png","width","15px","alt","mozo pedido"],[1,"fs-13"],["src","assets/images/waiter-table.png","width","15px","alt","mozo pedido"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Qb(2,"span",2),p.Hc(3,"Mesas ocupadas"),p.Pb(),p.Qb(4,"div",3),p.Qb(5,"div",4),p.Yb("click",(function(){return i.orderList(0)})),p.Qb(6,"div"),p.Lb(7,"img",5),p.Qb(8,"span"),p.Hc(9),p.Pb(),p.Pb(),p.Qb(10,"p",6),p.Hc(11,"Personal"),p.Pb(),p.Pb(),p.Qb(12,"div",7),p.Yb("click",(function(){return i.orderList(1)})),p.Qb(13,"div"),p.Lb(14,"img",8),p.Qb(15,"span"),p.Hc(16),p.Pb(),p.Pb(),p.Qb(17,"p",6),p.Hc(18,"Cliente"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Lb(19,"br"),p.Fc(20,Nt,2,0,"div",9),p.Qb(21,"div",10),p.Fc(22,Ut,16,11,"div",11),p.Pb(),p.Lb(23,"br"),p.Lb(24,"br"),p.Pb()),2&e&&(p.zb(5),p.kc("matRippleColor",i.rippleColor),p.zb(4),p.Ic(i.countPersonal),p.zb(3),p.kc("matRippleColor",i.rippleColor),p.zb(4),p.Ic(i.countCliente),p.zb(4),p.kc("ngIf",i.showLoaderListMesa),p.zb(2),p.kc("ngForOf",i.listMesas))},directives:[M.o,o.t,o.s,v.a,o.q],pipes:[o.F],styles:[".content-master[_ngcontent-%COMP%]{max-width:450px;margin:0 auto}.div-content-mesas[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));justify-items:center;padding:10px}.div-item-mesa[_ngcontent-%COMP%]{-webkit-box-align:center;-webkit-align-items:center;align-items:center;border:1px solid #d0d0d0;width:100px;text-align:center;background-color:#e8e8e8;border-radius:5px}.div-item-mesa[_ngcontent-%COMP%]   .num-mesa[_ngcontent-%COMP%]{font-size:25px;border-radius:8px;text-align:center;padding:5px}.div-item-mesa[_ngcontent-%COMP%]   .info-mesa[_ngcontent-%COMP%]{padding:7px;background:#d4dfe4;border-radius:0 0 5px 5px}.bg-info-mesa-client[_ngcontent-%COMP%]{background:#71ffcc!important}.btn-filter[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:5px;padding:5px}.btn-filter.personal[_ngcontent-%COMP%]{background:#d4dfe4}.btn-filter.cliente[_ngcontent-%COMP%]{background:#71ffcc}"]}),e})();var Yt=t("GuEi"),Jt=t("QibW"),Gt=t("NFeN");function Wt(e,i){if(1&e&&(p.Qb(0,"mat-radio-button",22),p.Hc(1),p.Pb()),2&e){const e=i.$implicit;p.kc("value",e),p.zb(1),p.Jc(" ",e.descripcion," ")}}const Zt=function(e){return[e]};function Xt(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div"),p.Qb(1,"mat-form-field",8),p.Qb(2,"input",23),p.Yb("ngModelChange",(function(i){return p.wc(e),p.cc().dataFac.nombre=i}))("keyup",(function(){return p.wc(e),p.cc().changeName()})),p.Pb(),p.Pb(),p.Qb(3,"p",10),p.Hc(4,"M\xednimo 5 digitos"),p.Pb(),p.Pb()}if(2&e){const e=p.cc();p.zb(2),p.kc("ngModel",e.dataFac.nombre),p.zb(1),p.kc("ngClass",p.pc(2,Zt,e.isSuccessName?"text-success":"text-danger"))}}let eo=(()=>{class e{constructor(e,i,t){this.crudService=e,this.infoTokenService=i,this.dialogRef=t,this.listTPC=[],this.isShowNombre=!0,this.labelInpuntTPC="DNI \xd3 RUC",this.isSuccessDNI=!1,this.isSuccessName=!1,this.msjDNI="",this.dataFac=new Yt.a}ngOnInit(){this.dataPostf={idsede:this.infoTokenService.getInfoUs().idsede},this.crudService.postFree(this.dataPostf,"pedido","get-tpc-dato-facturacion",!1).subscribe(e=>{if(e.success){this.listTPC=e.data,this.comprobanteSelected=this.listTPC[0];const i=this.infoTokenService.infoUsToken.tipoComprobante;i&&i.descripcion===i.descripcion.toUpperCase()&&(this.comprobanteSelected=this.listTPC.filter(e=>e.idtipo_comprobante===i.idtipo_comprobante)[0],this.comprobanteSelected&&(this.dataFac=i,this.changeOptionCPE()))}})}changeOptionCPE(){this.isShowNombre="FACTURA"!==this.comprobanteSelected.descripcion,this.labelInpuntTPC=this.isShowNombre?"RUC":"DNI \xd3 RUC"}changeDNI(){this.isShowNombre=!this.dataFac.dni,this.comprobarDNI()}changeName(){this.isSuccessName=!!this.dataFac.nombre&&this.dataFac.nombre.toString().length>=5}comprobarDNI(){const e=this.dataFac.dni?this.dataFac.dni.toString().length:"";"BOLETA"===this.comprobanteSelected.descripcion?(this.msjDNI=8===e?"DNI correcto":e<8?"DNI incorrecto":"",this.msjDNI=11===e?"RUC correcto":e<11&&e>8?"RUC incorrecto":this.msjDNI):this.msjDNI=11===e?"RUC correcto":e<11?"RUC incorrecto":"",this.isSuccessDNI=!(this.msjDNI.indexOf("incorrecto")>-1)}saveFacturacion(){this.setDatosFacturacion();const e={idsede:this.infoTokenService.getInfoUs().idsede,idcliente:this.infoTokenService.getInfoUs().idcliente,num_mesa:this.infoTokenService.getInfoUs().numMesaLector,data:this.dataFac};this.crudService.postFree(e,"pedido","set-datos-facturacion-cliente",!1).subscribe(e=>{this.dialogRef.close()})}cerrarDlg(){this.setDatosFacturacion(),this.dialogRef.close()}setDatosFacturacion(){this.dataFac.idtipo_comprobante=this.comprobanteSelected.idtipo_comprobante,this.dataFac.descripcion=this.comprobanteSelected.descripcion,console.log("this.dataFac",this.dataFac),this.infoTokenService.infoUsToken.tipoComprobante=this.dataFac}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(y.a),p.Kb(m.a),p.Kb(S.i))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-datos-facturacion-cliente"]],decls:37,vars:9,consts:[[1,"i-header"],[1,"fw-600","fs-14","m-0","p-1"],["matRipple","",1,"i-btn-exit",2,"width","30px",3,"click"],["aria-hidden","true",1,"fa","fa-times"],["autocomplete","off",1,"w-100","p-4"],[1,"d-flex"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"ngModel","ngModelChange","change"],["class","example-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"w-100"],["type","number","maxlength","11","matInput","","placeholder","RUC o DNI","name","dni","autocomplete","off",3,"ngModel","ngModelChange","keyup","blur"],[1,"p-msj-dni",3,"ngClass"],[4,"ngIf"],["type","number","maxlength","9","matInput","","placeholder","Tel\xe9fono Whatsapp","name","telefono","autocomplete","off",3,"ngModel","ngModelChange"],["matSuffix",""],[1,"fa","fa-whatsapp","text-success"],[1,"d-flex","align-items-center","p-msj-dni"],[1,"m-0","fs-13"],[1,"fs-14","text-secondary","text-center"],[1,"fa","fa-info-circle","text-info"],[1,"text-center","p-2"],["mat-flat-button","","color","primary",1,"mr-1",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"example-radio-button",3,"value"],["matInput","","placeholder","Nombre | Razon Social","name","nombre","autocomplete","off",3,"ngModel","ngModelChange","keyup"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"p",1),p.Hc(2,"Indique los datos para su comprobante."),p.Pb(),p.Qb(3,"div",2),p.Yb("click",(function(){return i.cerrarDlg()})),p.Lb(4,"i",3),p.Pb(),p.Pb(),p.Qb(5,"div",4),p.Qb(6,"p"),p.Hc(7,"Tipo Comprobante"),p.Pb(),p.Qb(8,"div",5),p.Qb(9,"mat-radio-group",6),p.Yb("ngModelChange",(function(e){return i.comprobanteSelected=e}))("change",(function(){return i.changeOptionCPE()})),p.Fc(10,Wt,2,2,"mat-radio-button",7),p.Pb(),p.Pb(),p.Qb(11,"div",8),p.Qb(12,"div"),p.Qb(13,"mat-form-field",8),p.Qb(14,"input",9),p.Yb("ngModelChange",(function(e){return i.dataFac.dni=e}))("keyup",(function(){return i.changeDNI()}))("blur",(function(){return i.comprobarDNI()})),p.Pb(),p.Pb(),p.Qb(15,"p",10),p.Hc(16),p.Pb(),p.Fc(17,Xt,5,4,"div",11),p.Pb(),p.Qb(18,"div"),p.Qb(19,"mat-form-field",8),p.Qb(20,"input",12),p.Yb("ngModelChange",(function(e){return i.dataFac.telefono=e})),p.Pb(),p.Qb(21,"mat-icon",13),p.Lb(22,"i",14),p.Pb(),p.Pb(),p.Qb(23,"div",15),p.Qb(24,"p",16),p.Hc(25," Tel\xe9fono donde se enviar\xe1 el comprobante."),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Lb(26,"br"),p.Lb(27,"hr"),p.Qb(28,"p",17),p.Lb(29,"i",18),p.Hc(30," El comprobante ser\xe1 emitido desde caja con los datos que indique al momento de pagar la cuenta. "),p.Pb(),p.Lb(31,"hr"),p.Qb(32,"div",19),p.Qb(33,"button",20),p.Yb("click",(function(){return i.saveFacturacion()})),p.Hc(34,"Listo, continuar"),p.Pb(),p.Qb(35,"button",21),p.Yb("click",(function(){return i.cerrarDlg()})),p.Hc(36,"Cerrar"),p.Pb(),p.Pb(),p.Pb()),2&e&&(p.zb(9),p.kc("ngModel",i.comprobanteSelected),p.zb(1),p.kc("ngForOf",i.listTPC),p.zb(4),p.kc("ngModel",i.dataFac.dni),p.zb(1),p.kc("ngClass",p.pc(7,Zt,i.isSuccessDNI?"text-success":"text-danger")),p.zb(1),p.Ic(i.msjDNI),p.zb(1),p.kc("ngIf",i.isShowNombre),p.zb(3),p.kc("ngModel",i.dataFac.telefono))},directives:[M.o,Jt.b,n.p,n.s,o.s,T.c,n.v,be.a,n.c,n.k,o.q,o.t,Gt.a,T.j,k.b,Jt.a],styles:[".example-radio-group[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;margin:15px 0;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.i-header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #d3d3d3;background:#eee}.p-msj-dni[_ngcontent-%COMP%]{margin-top:-18px;font-size:12px}.i-btn-exit[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;padding:8px;line-height:10px;background:hsla(0,0%,74.1%,.7);border-radius:4px}"]}),e})();function io(e,i){}function to(e,i){if(1&e&&(p.Qb(0,"span"),p.Hc(1,"Tiempo de espera "),p.Qb(2,"strong"),p.Hc(3),p.Pb(),p.Hc(4," aprox."),p.Pb()),2&e){const e=p.cc(3);p.zb(3),p.Jc("",e.tiempoEspera," min")}}function oo(e,i){1&e&&(p.Qb(0,"span"),p.Hc(1,"Su pedido esta por llegar."),p.Pb())}function no(e,i){1&e&&(p.Qb(0,"span"),p.Hc(1,"Su pedido ya fue despachado."),p.Pb())}function so(e,i){if(1&e&&(p.Qb(0,"div",24),p.Fc(1,to,5,1,"span",25),p.Fc(2,oo,2,0,"span",25),p.Fc(3,no,2,0,"span",25),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.kc("ngIf",0===e.estadoPedido.estado),p.zb(1),p.kc("ngIf",1===e.estadoPedido.estado),p.zb(1),p.kc("ngIf",2===e.estadoPedido.estado)}}function ao(e,i){1&e&&(p.Ob(0),p.Qb(1,"span",26),p.Hc(2,"Tiene pedido pendiente."),p.Pb(),p.Nb())}function co(e,i){if(1&e){const e=p.Rb();p.Qb(0,"span",27),p.Yb("click",(function(){return p.wc(e),p.cc(2).verCuenta()})),p.Hc(1,"Ver cuenta"),p.Pb()}}function ro(e,i){1&e&&(p.Qb(0,"p",28),p.Hc(1,"Comercio solo acepta pagos en caja."),p.Pb())}function lo(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",29),p.Yb("click",(function(){return p.wc(e),p.cc(2).solicitarAtencion()})),p.Qb(1,"div",30),p.Qb(2,"span",31),p.Hc(3,"Solicitar atenci\xf3n del personal."),p.Pb(),p.Qb(4,"span",32),p.Hc(5,"Solicitud enviada."),p.Pb(),p.Pb(),p.Qb(6,"div",18),p.Lb(7,"img",33),p.Pb(),p.Pb()}if(2&e){const e=p.cc(2);p.kc("matRippleColor",e.rippleColor),p.zb(4),p.kc("hidden",!e.isViewMsjSolicitudPersoanl)}}function bo(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",3),p.Qb(2,"div",4),p.Qb(3,"span"),p.Hc(4),p.Pb(),p.Qb(5,"h3"),p.Hc(6),p.dc(7,"number"),p.Pb(),p.Pb(),p.Fc(8,io,0,0,"ng-template",null,5,p.Gc),p.Fc(10,so,4,3,"div",6),p.Pb(),p.Qb(11,"div",7),p.Qb(12,"div",8),p.Qb(13,"span",9),p.Hc(14,"Importe a pagar"),p.Pb(),p.Lb(15,"br"),p.Fc(16,ao,3,0,"ng-container",1),p.Fc(17,co,2,0,"ng-template",null,10,p.Gc),p.Pb(),p.Qb(19,"div",11),p.Qb(20,"span",12),p.Hc(21),p.dc(22,"number"),p.Pb(),p.Pb(),p.Pb(),p.Qb(23,"div",13),p.Qb(24,"div",14),p.Lb(25,"img",15),p.Lb(26,"img",16),p.Lb(27,"img",17),p.Pb(),p.Qb(28,"div",18),p.Qb(29,"button",19),p.Yb("click",(function(){return p.wc(e),p.cc().pagarCuenta()})),p.Hc(30,"Pagar"),p.Pb(),p.Pb(),p.Qb(31,"div",20),p.Fc(32,ro,2,0,"p",21),p.Pb(),p.Pb(),p.Fc(33,lo,8,2,"div",22),p.Qb(34,"div",7),p.Qb(35,"div",23),p.Qb(36,"span",9),p.Hc(37,"Al cancelar la cuenta por favor tomece un minuto para calificar nuestro servicio, su opini\xf3n es muy importante."),p.Pb(),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.tc(18),i=p.cc();p.zb(4),p.Ic(i.tituloMesa),p.zb(2),p.Ic(p.fc(7,10,i.infoToken.numMesaLector,"2.")),p.zb(4),p.kc("ngIf",i.estadoPedido),p.zb(6),p.kc("ngIf",i.estadoPedido.hayPedidoClientePendiente)("ngIfElse",e),p.zb(5),p.Kc("",i.simbolo_moneda," ",p.fc(22,13,i.estadoPedido.importe,".2"),""),p.zb(8),p.kc("disabled",i.estadoPedido.hayPedidoClientePendiente||0==i.estadoPedido.importe||!i.isComercioAceptaTarjeta),p.zb(3),p.kc("ngIf",!i.isComercioAceptaTarjeta),p.zb(1),p.kc("ngIf",!i.infoToken.isSoloLLevar)}}function mo(e,i){if(1&e&&(p.Qb(0,"div",34),p.Qb(1,"span",35),p.Hc(2,"Direccion de entrega:"),p.Pb(),p.Qb(3,"p",36),p.Hc(4,"Jr. Reyes Guerra 456"),p.Pb(),p.Pb(),p.Qb(5,"div",34),p.Qb(6,"p",36),p.Lb(7,"i",37),p.Hc(8," Hora de entrega: 10 - 15 min"),p.Pb(),p.Pb(),p.Qb(9,"div",34),p.Qb(10,"mat-form-field",38),p.Lb(11,"input",39),p.Pb(),p.Qb(12,"span",35),p.Hc(13,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),p.Pb(),p.Pb(),p.Qb(14,"div",34),p.Lb(15,"div",40),p.Pb()),2&e){const e=p.cc();p.kc("matRippleColor",e.rippleColor),p.zb(5),p.kc("matRippleColor",e.rippleColor),p.zb(4),p.kc("matRippleColor",e.rippleColor),p.zb(5),p.kc("matRippleColor",e.rippleColor)}}let po=(()=>{class e{constructor(e,i,t,o,n,s,a,c){this.listenStatusService=e,this.estadoPedidoClienteService=i,this.infoTokenService=t,this.navigatorService=o,this.socketService=n,this.router=s,this.establecimientoService=a,this.dialogDatosFacturacion=c,this.rippleColor="rgb(255,238,88, 0.5)",this.tituloMesa="Mesa",this.isViewMsjSolicitudPersoanl=!1,this.isComercioAceptaTarjeta=!1,this.isBtnPagoShow=!1,this.destroyEstado$=new le.Subject}ngOnInit(){this.infoToken=this.infoTokenService.getInfoUs(),this.isDeliveryCliente=this.infoToken.isDelivery,this.simbolo_moneda=this.establecimientoService.getSimboloMoneda(),this.isComercioAceptaTarjeta=1===this.establecimientoService.get().pwa_delivery_acepta_tarjeta,this.listenStatus()}ngOnDestroy(){this.destroyEstado$.next(!0),this.destroyEstado$.unsubscribe()}listenStatus(){this.navigatorService.resNavigatorSourceObserve$.pipe(Object(Ye.a)(this.destroyEstado$)).subscribe(e=>{"estado"===e.pageActive&&(this.tituloMesa=this.infoToken.isSoloLLevar?"Para Llevar":"Mesa",setTimeout(()=>{this.estadoPedidoClienteService.getCuentaTotales()},2500))}),this.navigatorService.resNavigatorSourceObserve$.pipe(Object(Ye.a)(this.destroyEstado$)).subscribe(e=>Object(R.a)(this,void 0,void 0,(function*(){if("estado"===e.pageActive){const e=yield this.estadoPedidoClienteService.getImporteCuenta();this.estadoPedido.importe=e||0}}))),this.listenStatusService.hayPedidoPendiente$.pipe(Object(Ye.a)(this.destroyEstado$)).subscribe(e=>{this.estadoPedidoClienteService.setHayPedidoPendiente(e)}),this.listenStatusService.estadoPedido$.pipe(Object(Ye.a)(this.destroyEstado$)).subscribe(e=>{this.estadoPedido=e,0===this.estadoPedido.importe&&this.estadoPedido.isRegisterOnePago&&(this.estadoPedidoClienteService.setisRegisterPago(!1),this.navigatorService._router("../lanzar-encuesta"))}),this.estadoPedidoClienteService.timeRestanteAprox$.subscribe(e=>{this.tiempoEspera=e}),this.socketService.onPedidoPagado().pipe(Object(Ye.a)(this.destroyEstado$)).subscribe(e=>{this.estadoPedidoClienteService.getCuentaTotales(),this.estadoPedidoClienteService.setisRegisterPago(!0)}),this.listenStatusService.isBtnPagoShow$.pipe(Object(Ye.a)(this.destroyEstado$)).subscribe(e=>{this.isBtnPagoShow=e})}verCuenta(){this.estadoPedidoClienteService.getCuenta(),this.navigatorService.setPageActive("mipedido")}pagarCuenta(){localStorage.getItem("sys::st")?(this.estadoPedidoClienteService.getCuenta(),this.router.navigate(["./pagar-cuenta"]).then(()=>{this.isBtnPagoShow&&window.location.reload()}),this.listenStatusService.setIsPagePagarCuentaShow(!0)):this.verCuenta()}solicitarAtencion(){this.isViewMsjSolicitudPersoanl||(console.log("notificar-cliente-llamado"),this.socketService.emit("notificar-cliente-llamado",this.infoToken.numMesaLector),this.isViewMsjSolicitudPersoanl=!0,setTimeout(()=>{this.isViewMsjSolicitudPersoanl=!1},3e4))}showDatosFacturacion(){const e=new S.e;e.panelClass=["my-dialog-orden-detalle","margen-0"],this.dialogDatosFacturacion.open(eo,e)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(r.a),p.Kb(Je.a),p.Kb(m.a),p.Kb(c.a),p.Kb(d.a),p.Kb(Ge.d),p.Kb(b.a),p.Kb(S.b))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-estado-pedido"]],decls:6,vars:2,consts:[[1,"animated","fadeIn"],[4,"ngIf","ngIfElse"],["templateDelivery",""],[1,"row","xboder-abajo","m-0","p-2"],[1,"col-4","text-center","xboder-derecha"],["elseTemplate",""],["class","col-8 xcontainer-center text-right",4,"ngIf"],[1,"row","xboder-abajo","m-0","p-2","xcontainer-center"],[1,"col-6","pb-3","pt-3"],[1,"fs-13"],["elseTemplateCuenta",""],[1,"col-6","text-right"],[1,"fs-25"],[1,"row","xboder-abajo","m-0","p-2","pt-3","pb-3","xcontainer-center"],[1,"col-8"],["src","./assets/images/001-visa.png","alt","visa-card",1,"pr-2"],["src","./assets/images/002-mastercard.png","alt","maestro-card",1,"pr-2"],["src","./assets/images/002-american-express.png","alt","american-express"],[1,"col-4","text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"col-12"],["class","fs-11 fw-100 m-0",4,"ngIf"],["class","row xboder-abajo m-0 p-2 xcontainer-center","matRipple","",3,"matRippleColor","click",4,"ngIf"],[1,"col-12","pb-3","pt-3"],[1,"col-8","xcontainer-center","text-right"],[4,"ngIf"],[1,"text-danger"],[1,"text-info","xCursor",3,"click"],[1,"fs-11","fw-100","m-0"],["matRipple","",1,"row","xboder-abajo","m-0","p-2","xcontainer-center",3,"matRippleColor","click"],[1,"col-8","pb-3","pt-3"],[1,"fs-13","fw-600"],[1,"fs-13","text-info","pl-2","animated","flash",3,"hidden"],["src","./assets/images/solicitar-atencion.png","alt","solicitar-atencion"],["matRipple","",1,"border-bottom","m-0","p-3",3,"matRippleColor"],[1,"fw-100","fs-12","text-secondary"],[1,"m-0"],[1,"fa","fa-clock-o"],[1,"w-100"],["type","number","matInput","","placeholder","Telefono"],[1,"row","border-bottom"]],template:function(e,i){if(1&e&&(p.Qb(0,"div",0),p.Fc(1,bo,38,16,"ng-container",1),p.Fc(2,mo,16,4,"ng-template",null,2,p.Gc),p.Lb(4,"br"),p.Lb(5,"br"),p.Pb()),2&e){const e=p.tc(3);p.zb(1),p.kc("ngIf",!i.isDeliveryCliente)("ngIfElse",e)}},directives:[o.t,k.b,M.o,T.c,be.a],pipes:[o.g],styles:[""]}),e})();function ho(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Lb(1,"img",25),p.Qb(2,"div",26),p.Qb(3,"p",27),p.Hc(4,"Pedido Recibido."),p.Pb(),p.Lb(5,"hr"),p.Qb(6,"p",28),p.Hc(7,"Su pedido fue recibido correctamente en las zonas de producci\xf3n correspondientes."),p.Pb(),p.Lb(8,"hr"),p.Qb(9,"button",29),p.Yb("click",(function(){return p.wc(e),p.cc(3).closeMsjLoaderPedido()})),p.Hc(10,"Listo"),p.Pb(),p.Pb(),p.Nb()}}function uo(e,i){1&e&&(p.Lb(0,"img",30),p.Qb(1,"p",27),p.Hc(2,"Pedido Enviado"),p.Pb())}function fo(e,i){if(1&e&&(p.Ob(0),p.Fc(1,ho,11,0,"ng-container",22),p.Fc(2,uo,3,0,"ng-template",null,24,p.Gc),p.Nb()),2&e){const e=p.tc(3),i=p.cc(2);p.zb(1),p.kc("ngIf",i.isUsuarioCliente)("ngIfElse",e)}}function go(e,i){1&e&&(p.Lb(0,"img",31),p.Lb(1,"br"),p.Lb(2,"br"),p.Lb(3,"mat-progress-bar",32),p.Qb(4,"span",33),p.Hc(5,"Enviando pedido..."),p.Pb())}function vo(e,i){if(1&e&&(p.Qb(0,"div",20),p.Qb(1,"div",21),p.Fc(2,fo,4,2,"ng-container",22),p.dc(3,"async"),p.Fc(4,go,6,0,"ng-template",null,23,p.Gc),p.Pb(),p.Pb()),2&e){const e=p.tc(5),i=p.cc();p.zb(2),p.kc("ngIf",p.ec(3,2,i.listenStatusService.isFinishLoaderSendPedido$))("ngIfElse",e)}}function Co(e,i){1&e&&(p.Qb(0,"div",20),p.Qb(1,"div",21),p.Lb(2,"mat-progress-bar",32),p.Qb(3,"span",34),p.Hc(4,"Obteniendo productos..."),p.Pb(),p.Pb(),p.Pb())}const Po=function(e,i){return{fadeInUp:e,fadeOutDown:i}};function So(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",35),p.Qb(1,"div",36),p.Yb("click",(function(){return p.wc(e),p.cc().goListaProductos()})),p.Qb(2,"p",37),p.Hc(3),p.Pb(),p.Qb(4,"p"),p.Hc(5,"Ver pedido"),p.Pb(),p.Qb(6,"p"),p.Hc(7),p.dc(8,"number"),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc();p.kc("ngClass",p.qc(6,Po,e.countTotalItems>0,e.countTotalItems<=0)),p.zb(3),p.Ic(e.countTotalItems),p.zb(4),p.Jc("S/. ",p.fc(8,3,e.importeTotalProductos,".2"),"")}}function ko(e,i){if(1&e&&(p.Qb(0,"div",40),p.Hc(1),p.dc(2,"number"),p.Lb(3,"div",41),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.Jc(" ",p.fc(2,1,e.countTotalItems,"2.")," ")}}function xo(e,i){if(1&e&&(p.Qb(0,"span"),p.Hc(1,"Mi Pedido "),p.Pb(),p.Lb(2,"i",38),p.Fc(3,ko,4,4,"div",39)),2&e){const e=p.cc();p.zb(3),p.kc("ngIf",e.countTotalItems>0)}}function _o(e,i){1&e&&(p.Ob(0),p.Lb(1,"app-resumen-pedido"),p.Nb())}function wo(e,i){if(1&e){const e=p.Rb();p.Qb(0,"mat-tab",42),p.Qb(1,"div",12),p.Yb("scroll",(function(i){return p.wc(e),p.cc().onScroll(i)})),p.Lb(2,"app-comp-list-mesas"),p.Lb(3,"br"),p.Pb(),p.Pb()}}function Io(e,i){if(1&e){const e=p.Rb();p.Qb(0,"mat-tab",43),p.Qb(1,"div",12),p.Yb("scroll",(function(i){return p.wc(e),p.cc().onScroll(i)})),p.Lb(2,"app-estado-pedido"),p.Lb(3,"br"),p.Pb(),p.Pb()}}const yo=function(e){return{loaded:e}},Qo=function(e,i){return{fadeInTool:e,fadeOutTool:i}},To=function(e){return{"header-less-tabs pt-0":e}},Oo=function(e){return{"fondo-gris":e}};let Mo=(()=>{class e{constructor(e,i,t,o,n,s,a){this.miPedidoService=e,this.navigatorService=i,this.listenStatusService=t,this.socketService=o,this.verifyClientService=n,this.infoTokenService=s,this.establecimientoService=a,this.isVisibleToolBar=!0,this.isBusqueda=!1,this.isHayCuentaBusqueda=!1,this.countTotalItems=0,this.selectedTab=0,this.isUsuarioCliente=!1,this.isClienteDelivery=!1,this.isClienteReserva=!1,this.isPagePagarShow=!1,this.isPuntoAutoPedido=!1,this.loaderPage=!1,this.timeLoader=null,this.isSpeechVoiceAcivado=!1,this.lastValScrollTop=0,this.importeTotalProductos=0,this.isScreenIsMobile=!0}onResize(e){this.detectScreenSize()}detectScreenSize(){this.isScreenIsMobile=!(window.innerWidth>1049)}ngOnInit(){this.detectScreenSize(),this.socketService.isSocketOpenReconect=!1,this.navigatorService.setPageActive("carta"),this.infoTokenService.getInfoUs(),this.isPuntoAutoPedido=this.infoTokenService.isPuntoAutoPedido(),this.isSpeechVoiceAcivado=1===this.establecimientoService.get().speech_disabled,this.verifyClientService.verifyClient().subscribe(e=>{this.isUsuarioCliente=e?e.isCliente||!1:this.infoTokenService.infoUsToken.isCliente,this.listenStatusService.setIsUsuarioCliente(this.isUsuarioCliente),this.isClienteDelivery=null==e?void 0:e.isDelivery,this.isClienteReserva=null==e?void 0:e.isReserva,this.verifyClientService.getIsDelivery()&&this.verifyClientService.getIsQrSuccess()&&(this.socketService.isSocketOpen=!1)}),this.listenStatusService.isBusqueda$.subscribe(e=>{this.isBusqueda=e}),this.listenStatusService.hayCuentaBusqueda$.subscribe(e=>{this.isHayCuentaBusqueda=e}),this.listenStatusService.isPagePagarCuentaShow$.subscribe(e=>{this.isPagePagarShow=e}),this.listenStatusService.isFinishLoaderSendPedido$.subscribe(e=>{!0!==e||this.isUsuarioCliente||setTimeout(()=>{this.closeMsjLoaderPedido()},1600)}),this.navigatorService.resNavigatorSourceObserve$.subscribe(e=>{switch(e.pageActive){case"carta":this.selectedTab=0,this.resetObjCuenta();break;case"estado":this.selectedTab=2;break;case"mipedido":this.selectedTab=1;break;case"mesas":console.log("llegamos a mesas"),this.listenStatusService.setshowLoadListMesas()}}),this.miPedidoService.countItemsObserve$.subscribe(e=>{this.countTotalItems=e,this.importeTotalProductos=this.miPedidoService.getSubTotalMiPedido()}),this.listenStatusService.isLoaderCarta$.subscribe(e=>{this.loaderPage=e,this.loaderPage?this.verificarLoaderReload():clearTimeout(this.timeLoader)})}verificarLoaderReload(){this.timeLoader=setTimeout(()=>{this.loaderPage&&window.location.reload()},15e3)}onScroll(e){const i=e.srcElement.scrollTop;this.isVisibleToolBar=!(i>=this.lastValScrollTop&&i>0),setTimeout(()=>{this.lastValScrollTop=i},100)}clickTab(e){this.selectedTab=e.index;const i=e.tab.textLabel.toLowerCase();this.navigatorService.setPageActive(i),this.isVisibleToolBar=!0}resetObjCuenta(){this.isHayCuentaBusqueda&&(this.miPedidoService.resetObjMiPedido(),this.listenStatusService.setHayCuentaBuesqueda(!1))}goListaProductos(){this.clickTab({index:1,tab:{isActive:!0,origin:1,position:0,textLabel:"MiPedido"}})}pruebaMsjs(){this.listenStatusService.setIsFinishLoaderSendPedidoSource(!0)}closeMsjLoaderPedido(){this.listenStatusService.closeFinishLoaderSendPedidoSource()}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(a.a),p.Kb(c.a),p.Kb(r.a),p.Kb(d.a),p.Kb(l.a),p.Kb(m.a),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-main"]],hostBindings:function(e,i){1&e&&p.Yb("resize",(function(e){return i.onResize(e)}),!1,p.vc)},decls:34,vars:30,consts:[[3,"ngClass"],[1,"wrapper"],["id","loader-wrapper"],["id","loader"],[1,"loader-msj"],[1,"loader-section","section-left"],[1,"loader-section","section-right"],["class","animated fadeIn div-loader-2",4,"ngIf"],[1,"h-100","overflow-hidden"],[1,"toolbar-main",3,"ngClass"],["backgroundColor","primary","color","accent",1,"main-contemt","transicion","xanimated","xfadeIn",3,"selectedIndex","ngClass","selectedTabChange"],["label","Carta"],[1,"x100-toolbar-hidden",3,"scroll"],["class","footer-btn-go-lista animated fadeIn",3,"ngClass",4,"ngIf"],["label","MiPedido",3,"disabled"],["matTabLabel",""],[1,"x100-toolbar-hidden",3,"ngClass","scroll"],[4,"ngIf"],["label","Mesas",4,"ngIf"],["label","Estado",4,"ngIf"],[1,"animated","fadeIn","div-loader-2"],[1,"loader"],[4,"ngIf","ngIfElse"],["elseTemplateNoFinish",""],["elseTemplateIsMozo",""],["src","./assets/images/printer_3.gif","alt","send-printer"],[2,"max-width","220px"],[1,"pt-2","fs-18","fw-600"],[1,"pt-2","fs-15","fw-100"],["mat-flat-button","","color","primary",3,"click"],["src","./assets/images/success_3.gif","width","130px","alt","send-success"],["src","./assets/images/plane_3.gif","alt","send"],["mode","indeterminate"],[1,"pt-2","fs-16","fw-600"],[1,"pt-2"],[1,"footer-btn-go-lista","animated","fadeIn",3,"ngClass"],[1,"content",3,"click"],[1,"badge","badge-light"],["aria-hidden","true",1,"fa","fa-shopping-basket","pl-2"],["class","countItem countTotal animated fadeInUp d-flex",4,"ngIf"],[1,"countItem","countTotal","animated","fadeInUp","d-flex"],[1,"div-spinner"],["label","Mesas"],["label","Estado"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.dc(1,"async"),p.Qb(2,"div",1),p.Qb(3,"div",2),p.Lb(4,"div",3),p.Qb(5,"div",4),p.Hc(6),p.dc(7,"async"),p.Pb(),p.Lb(8,"div",5),p.Lb(9,"div",6),p.Pb(),p.Pb(),p.Pb(),p.Fc(10,vo,6,4,"div",7),p.dc(11,"async"),p.Fc(12,Co,5,0,"div",7),p.dc(13,"async"),p.Lb(14,"app-comp-list-call-client"),p.Qb(15,"div",8),p.Lb(16,"app-progress-time-limit"),p.Qb(17,"div",9),p.Lb(18,"app-tool-bar"),p.Pb(),p.Qb(19,"div"),p.Qb(20,"mat-tab-group",10),p.Yb("selectedTabChange",(function(e){return i.clickTab(e)})),p.Qb(21,"mat-tab",11),p.Qb(22,"div",12),p.Yb("scroll",(function(e){return i.onScroll(e)})),p.Lb(23,"app-carta"),p.Lb(24,"br"),p.Fc(25,So,9,9,"div",13),p.Pb(),p.Pb(),p.Qb(26,"mat-tab",14),p.Fc(27,xo,4,1,"ng-template",15),p.Qb(28,"div",16),p.Yb("scroll",(function(e){return i.onScroll(e)})),p.Fc(29,_o,2,0,"ng-container",17),p.Lb(30,"br"),p.Pb(),p.Pb(),p.Fc(31,wo,4,0,"mat-tab",18),p.Fc(32,Io,4,0,"mat-tab",19),p.Pb(),p.Pb(),p.Lb(33,"app-mozo-show-traduce-text"),p.Pb()),2&e&&(p.kc("ngClass",p.pc(21,yo,p.ec(1,13,i.socketService.isSocketOpen$))),p.zb(6),p.Ic(p.ec(7,15,i.socketService.msjConex$)),p.zb(4),p.kc("ngIf",p.ec(11,17,i.listenStatusService.isLoaderSendPedido$)),p.zb(2),p.kc("ngIf",p.ec(13,19,i.listenStatusService.isLoaderCarta$)),p.zb(5),p.kc("ngClass",p.qc(23,Qo,i.isVisibleToolBar,!i.isVisibleToolBar)),p.zb(3),p.kc("selectedIndex",i.selectedTab)("ngClass",p.pc(26,To,i.isBusqueda)),p.zb(5),p.kc("ngIf",(i.isUsuarioCliente||i.isPuntoAutoPedido)&&i.isScreenIsMobile),p.zb(1),p.kc("disabled",!i.isScreenIsMobile),p.zb(2),p.kc("ngClass",p.pc(28,Oo,i.isUsuarioCliente)),p.zb(1),p.kc("ngIf",i.isScreenIsMobile),p.zb(2),p.kc("ngIf",!i.isUsuarioCliente&&!i.isClienteDelivery&&!i.isClienteReserva),p.zb(1),p.kc("ngIf",i.isUsuarioCliente&&!i.isClienteDelivery&&!i.isClienteReserva))},directives:[o.q,o.t,f,P,ne,se.c,se.a,Rt,se.d,jt,k.b,v.a,qi,Kt,po],pipes:[o.b,o.g],styles:[".main-contemt[_ngcontent-%COMP%]{overflow:hidden!important}.x100[_ngcontent-%COMP%]{height:100vh;overflow:auto}.toolbar-main[_ngcontent-%COMP%]{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}@keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}.toolbar-main.fadeOutTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeOutTool;animation-name:fadeOutTool}@-webkit-keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}@keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}.toolbar-main.fadeInTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeInTool;animation-name:fadeInTool}.x100-toolbar-visible[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 105px);height:calc(100vh - 105px);overflow:auto}.x100-toolbar-hidden[_ngcontent-%COMP%]{position:relative;height:-webkit-calc(100vh - 49px);height:calc(100vh - 49px);overflow:auto}.countItem[_ngcontent-%COMP%]{padding:2px 6px 2px 3px;border-radius:50%;line-height:18px;font-size:12px;margin-bottom:15px;text-align:center}.countTotal[_ngcontent-%COMP%]{float:right;background:#f44336;color:#eee}.footer-btn-go-lista[_ngcontent-%COMP%]{position:fixed;bottom:-15px;width:100%;text-align:center;background:#e0e0e0;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.footer-btn-go-lista[_ngcontent-%COMP%], .footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.footer-btn-go-lista[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;width:85%;font-size:14px;border-radius:5px 5px 0 0;padding:10px;font-weight:100;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.fondo-gris[_ngcontent-%COMP%]{background:#eee} .header-less-tabs.mat-tab-group .mat-tab-header{display:none}"]}),e})();function Do(e,i){if(1&e&&(p.Qb(0,"div",7),p.Hc(1),p.dc(2,"number"),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.Jc(" ",p.fc(2,1,e.countTotalItems,"2."),"")}}function zo(e,i){if(1&e&&(p.Qb(0,"span"),p.Hc(1,"Mi Pedido"),p.Pb(),p.Fc(2,Do,3,4,"div",6)),2&e){const e=p.cc();p.zb(2),p.kc("ngIf",e.countTotalItems>0)}}const Fo=function(e,i){return{fadeInTool:e,fadeOutTool:i}};let Ro=(()=>{class e{constructor(e,i){this.miPedidoService=e,this.router=i,this.isVisibleToolBar=!0,this.countTotalItems=0,this.lastValScrollTop=0,i.events.pipe(Object(_.a)(e=>e instanceof Ge.b)).subscribe(e=>{console.log("navigation",e)})}ngOnInit(){this.miPedidoService.countItemsObserve$.subscribe(e=>{this.countTotalItems=e})}onScroll(e){const i=e.srcElement.scrollTop;this.isVisibleToolBar=!(i>=this.lastValScrollTop&&i>54),setTimeout(()=>{this.lastValScrollTop=i},100)}addLink(e){this.router.navigate(["../../",{id:e}])}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(a.a),p.Kb(Ge.d))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-inicio"]],decls:14,vars:4,consts:[[1,"h-100","overflow-hidden"],[1,"toolbar-main",3,"ngClass"],["backgroundColor","primary","color","accent",1,"main-contemt","transicion"],["label","Carta"],[1,"x100-toolbar-hidden",3,"scroll"],["matTabLabel",""],["class","countItem countTotal animated fadeInUp",4,"ngIf"],[1,"countItem","countTotal","animated","fadeInUp"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Lb(2,"app-tool-bar"),p.Pb(),p.Qb(3,"div"),p.Qb(4,"mat-tab-group",2),p.Qb(5,"mat-tab",3),p.Qb(6,"div",4),p.Yb("scroll",(function(e){return i.onScroll(e)})),p.Lb(7,"app-carta"),p.Lb(8,"br"),p.Pb(),p.Pb(),p.Qb(9,"mat-tab"),p.Fc(10,zo,3,1,"ng-template",5),p.Qb(11,"div",4),p.Yb("scroll",(function(e){return i.onScroll(e)})),p.Lb(12,"app-resumen-pedido"),p.Lb(13,"br"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&e&&(p.zb(1),p.kc("ngClass",p.qc(1,Fo,i.isVisibleToolBar,!i.isVisibleToolBar)))},directives:[o.q,ne,se.c,se.a,Rt,se.d,qi,o.t],pipes:[o.g],styles:[".main-contemt[_ngcontent-%COMP%]{overflow:hidden!important}.x100[_ngcontent-%COMP%]{height:100vh;overflow:auto}.toolbar-main[_ngcontent-%COMP%]{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}@keyframes fadeOutTool{0%{margin-top:0}to{margin-top:-60px;display:none;visibility:hidden}}.toolbar-main.fadeOutTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeOutTool;animation-name:fadeOutTool}@-webkit-keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}@keyframes fadeInTool{0%{margin-top:-60px;display:inline-block}to{margin-top:0}}.toolbar-main.fadeInTool[_ngcontent-%COMP%]{-webkit-animation-name:fadeInTool;animation-name:fadeInTool}.x100-toolbar-visible[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 105px);height:calc(100vh - 105px);overflow:auto}.x100-toolbar-hidden[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 49px);height:calc(100vh - 49px);overflow:auto}.countItem[_ngcontent-%COMP%]{padding:2px 6px 2px 3px;border-radius:50%;line-height:18px;font-size:12px;margin-bottom:15px;text-align:center}.countTotal[_ngcontent-%COMP%]{float:right;background:#f44336;color:#eee}"]}),e})(),Lo=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=p.Eb({type:e,selectors:[["app-buscar-item"]],decls:2,vars:0,template:function(e,i){1&e&&(p.Qb(0,"p"),p.Hc(1,"buscar-item works!"),p.Pb())},styles:[""]}),e})();const Eo=[{path:"",component:Mo,data:{titulo:"Pedido"},children:[{path:"lacarta/:id",component:Rt,data:{titulo:"Carta"}}]}];let Ho=(()=>{class e{}return e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({factory:function(i){return new(i||e)},imports:[[Ge.h.forChild(Eo)],Ge.h]}),e})();var jo=t("pKmL");const Bo=function(e){return{"li-tachado":e}},No=function(e){return{"xanimated xwobble":e}};function Ao(e,i){if(1&e){const e=p.Rb();p.Qb(0,"li"),p.Qb(1,"div"),p.Qb(2,"div",2),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc().selectedItemBusq(t)})),p.Qb(3,"div",3),p.Qb(4,"span"),p.Hc(5),p.Pb(),p.Pb(),p.Qb(6,"div",4),p.Qb(7,"div"),p.Qb(8,"div",5),p.Qb(9,"span",6),p.Hc(10,"Stock"),p.Pb(),p.Lb(11,"br"),p.Qb(12,"span",7),p.Hc(13),p.Pb(),p.Pb(),p.Pb(),p.Qb(14,"span"),p.Hc(15),p.dc(16,"number"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.cc();p.zb(1),p.Bb("xcontent border-left-item-",t.getEstadoStockItem(e.cantidad),""),p.zb(1),p.kc("matRippleColor",t.rippleColor)("ngClass",p.pc(15,Bo,"0"===e.cantidad)),p.zb(3),p.Ic(e.des),p.zb(2),p.Bb("flag-stock text-center estado-color-",t.getEstadoStockItem(e.cantidad),""),p.zb(1),p.kc("ngClass",p.pc(17,No,0===e.cantidad)),p.zb(5),p.Ic(e.cantidad),p.zb(2),p.Ic(p.fc(16,12,e.precio,"0.2"))}}let Vo=(()=>{class e{constructor(e,i,t){this.socketService=e,this.miPedidoService=i,this.dialog=t,this.objCartaBus=[],this.objNewItemTiposConsumo=[]}ngOnInit(){}loadItemsBusqueda(){let e,i;e=this.miPedidoService.getObjCartaLibery(),e.carta.map(e=>{e.secciones.map(e=>{e.items.map(t=>{i=t,i.seccion=e.des,i.selected=!1,this.objCartaBus.push(i)})})}),this.objNewItemTiposConsumo=this.socketService.getDataTipoConsumo()}selectedItemBusq(e){this.objCartaBus.map(e=>e.selected=!1),e.selected=!0,this.itemSelected=e;const i=JSON.parse(JSON.stringify(this.objNewItemTiposConsumo));this.objItemTipoConsumoSelected=e.itemtiposconsumo?e.itemtiposconsumo:i,e.itemtiposconsumo||(e.itemtiposconsumo=this.objItemTipoConsumoSelected),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),this.openDlgItemBusq(e)}openDlgItemBusq(e){const i=new S.e,t=this.miPedidoService.findItemCarta(e);i.autoFocus=!1,i.data={idTpcItemResumenSelect:null,item:t,objItemTipoConsumoSelected:this.itemSelected.itemtiposconsumo},this.dialog.open(De,i).afterClosed().subscribe(e=>{})}getEstadoStockItem(e){if("ND"===e)return"verde";{const i=parseInt(e,0);return i>10?"verde":i>5?"amarillo":"rojo"}}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(d.a),p.Kb(a.a),p.Kb(S.b))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-busqueda"]],decls:7,vars:1,consts:[[1,"xtransicion","m-main-pt-40","color-fondo-ul"],[4,"ngFor","ngForOf"],["matRipple","",1,"m1","d-flex","xtitulo",3,"matRippleColor","ngClass","click"],[1,"w-100"],[1,"text-right","d-flex"],[3,"ngClass"],[1,"fs-9"],[1,"fs-15"]],template:function(e,i){1&e&&(p.Qb(0,"p"),p.Hc(1,"busqueda works!"),p.Pb(),p.Qb(2,"div",0),p.Ob(3),p.Qb(4,"ul"),p.Fc(5,Ao,17,19,"li",1),p.Pb(),p.Nb(),p.Pb(),p.Lb(6,"br")),2&e&&(p.zb(5),p.kc("ngForOf",i.objCartaBus))},directives:[o.s,M.o,o.q],pipes:[o.g],styles:["",".m1[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{background:#fff;padding:8px 15px}.m1.seccion[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.border-bottom-li[_ngcontent-%COMP%], .m1.seccion[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.img[_ngcontent-%COMP%]{border:1px solid #bdbdbd;text-align:center;border-radius:50px;width:50px;line-height:10px;padding:8px;float:left;margin-right:10px;max-height:52px}.estado-color-verde[_ngcontent-%COMP%]{background:#43a047;color:#e0e0e0}.estado-color-amarillo[_ngcontent-%COMP%]{background:#ffb300;color:#424242}.estado-color-rojo[_ngcontent-%COMP%]{background:#d81b60;color:#e0e0e0}.trasicion-border[_ngcontent-%COMP%]{-webkit-transition:border-left .3s ease-out;transition:border-left .3s ease-out}.border-left-item-verde[_ngcontent-%COMP%]{border-left:5px solid #43a047}.border-left-item-rojo[_ngcontent-%COMP%]{border-left:5px solid #d81b60}.border-left-item-amarillo[_ngcontent-%COMP%]{border-left:5px solid #ffb300}.m1-selected[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.margin-input[_ngcontent-%COMP%]{margin-bottom:-20px;margin-top:-20px}.color-fondo-ul[_ngcontent-%COMP%]{background:#616161}.li-padding-selected[_ngcontent-%COMP%]{padding:12px}.li-padding-selected[_ngcontent-%COMP%]   .xcontent[_ngcontent-%COMP%]{border:1px solid #e0e0e0;background:#eee;border-radius:5px}.p-titulo-item-sin-detalle[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}.p-titulo-item-select[_ngcontent-%COMP%]{padding:8px 15px}.content-titulo-item[_ngcontent-%COMP%]{font-size:14px}.content-titulo-item[_ngcontent-%COMP%]   .titlo-detalle[_ngcontent-%COMP%]{font-size:13px;font-family:Ubuntu-Light;color:#616161;display:-webkit-box;max-width:100%;max-height:40px;margin:0 auto;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;text-transform:lowercase}.titulo-detalle-seccion[_ngcontent-%COMP%]{width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.li-padding-selected[_ngcontent-%COMP%]   .xtitulo[_ngcontent-%COMP%]{background:#e0e0e0}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock[_ngcontent-%COMP%]{display:inline-block}.tb-tpc[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px dashed #e0e0e0}.btn-tbl[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:5px 15px;font-size:15px}.flag-stock[_ngcontent-%COMP%]{position:absolute;float:right;margin-top:-9px;margin-right:50px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1;display:none}.li-padding-selected[_ngcontent-%COMP%]   .flag-stock-dialog[_ngcontent-%COMP%]{display:inline-block}.li-tachado[_ngcontent-%COMP%]{text-decoration:line-through;color:red}.flag-stock-dialog[_ngcontent-%COMP%]{float:right;margin-top:-9px;padding:5px;border-radius:0 0 5px 5px;right:10px;line-height:1}.mat-dialog-container[_ngcontent-%COMP%]{padding:0!important}.m-toolbar-seccion[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:1}.m-main-pt-40[_ngcontent-%COMP%]{padding-top:40px}.titulo-num-mesa[_ngcontent-%COMP%]{background:#757575;color:#000}.subitem-content[_ngcontent-%COMP%]{width:100%;background:#fafad2;padding:5px;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-top:20px;margin-bottom:20px;border-top:1px solid #bdbdbd;border-bottom:1px solid #bdbdbd}.subitem-content[_ngcontent-%COMP%], .subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]{padding-right:8px;min-width:150px}.subitem-content[_ngcontent-%COMP%]   .xoption[_ngcontent-%COMP%]   .agotado[_ngcontent-%COMP%]{text-decoration:line-through;color:#db7093}.item-titulo[_ngcontent-%COMP%]{color:#424242}.icon-div-carta[_ngcontent-%COMP%]{border:1px solid #bdbdbd}.icon-item-carta[_ngcontent-%COMP%]{height:60px;-o-object-fit:cover;object-fit:cover;-webkit-transition:all .1s;transition:all .1s;width:60px;border-radius:5px}.li-seccion[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function qo(e,i){1&e&&(p.Ob(0),p.Qb(1,"span"),p.Lb(2,"i",4),p.Hc(3,"Enviando ..."),p.Pb(),p.Nb())}function $o(e,i){1&e&&(p.Qb(0,"span",5),p.Lb(1,"i",6),p.Hc(2,"Envio correcto"),p.Pb())}let Uo=(()=>{class e{constructor(e){this.dialogRef=e,this.isSusccess=!1}ngOnInit(){setTimeout(()=>{this.isSusccess=!0,setTimeout(()=>{this.dialogRef.close()},1500)},1500)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(S.i))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-dialog-loading"]],decls:5,vars:2,consts:[[1,"text-center","p-3"],[1,"fw-100","fs-18"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"fa","fa-spinner","fa-spin","fa-2x","fa-fw","pr-1"],[1,"animated","fadeInLeft"],["aria-hidden","true",1,"fa","fa-check","text-success","pr-1"]],template:function(e,i){if(1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Fc(2,qo,4,0,"ng-container",2),p.Fc(3,$o,3,0,"ng-template",null,3,p.Gc),p.Pb(),p.Pb()),2&e){const e=p.tc(4);p.zb(2),p.kc("ngIf",!i.isSusccess)("ngIfElse",e)}},directives:[o.t],styles:[".img-success[_ngcontent-%COMP%]{width:150px}"]}),e})();var Ko=t("cH1L"),Yo=t("ihCf"),Jo=t("dNgK"),Go=t("xHqg"),Wo=t("7EHt"),Zo=t("Wp6s"),Xo=t("vxfF"),en=t("XhcP"),tn=t("/1cH"),on=t("MutI"),nn=t("f0Cb"),sn=t("1jcm"),an=t("Pg/a"),cn=t("N6vS"),rn=t("Ln/Y"),dn=t("MWJo"),ln=t("/Qaf"),bn=t("JX91"),mn=t("eIep"),pn=t("lJxs"),hn=t("EY2u");let un=(()=>{class e{constructor(e){this.crudService=e}serchClienteByDni(e){return new re.Observable(i=>{this.crudService.getConsultaRucDni("dni",e).subscribe(e=>{i.next(e.success?e.data:null)})})}}return e.\u0275fac=function(i){return new(i||e)(p.Ub(y.a))},e.\u0275prov=p.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var fn=t("+OL8");const gn=["search"];function vn(e,i){1&e&&(p.Qb(0,"div",33),p.Qb(1,"span",34),p.Hc(2," Documento no encontrado "),p.Pb(),p.Pb())}function Cn(e,i){1&e&&(p.Qb(0,"mat-form-field",16),p.Lb(1,"input",35),p.Pb())}function Pn(e,i){if(1&e&&(p.Qb(0,"mat-option",41),p.Qb(1,"span",42),p.Hc(2),p.Pb(),p.Pb()),2&e){const e=i.$implicit;p.kc("value",e),p.zb(2),p.Jc(" ",e.nombres," ")}}function Sn(e,i){if(1&e){const e=p.Rb();p.Qb(0,"mat-form-field",16),p.Qb(1,"input",36,37),p.Yb("keyup",(function(){p.wc(e);const i=p.tc(2);return p.cc().setNombreControl(i.value)})),p.Pb(),p.Qb(3,"mat-autocomplete",38,39),p.Yb("optionSelected",(function(i){return p.wc(e),p.cc().changeCliente(i)})),p.Fc(5,Pn,3,2,"mat-option",40),p.dc(6,"async"),p.Pb(),p.Pb()}if(2&e){const e=p.tc(4),i=p.cc();p.zb(1),p.kc("formControl",i.myControl)("matAutocomplete",e),p.zb(2),p.kc("displayWith",i.displayFn),p.zb(2),p.kc("ngForOf",p.ec(6,4,i.filteredOptions))}}function kn(e,i){if(1&e&&(p.Qb(0,"mat-form-field",16),p.Lb(1,"input",43),p.Pb()),2&e){const e=p.cc();p.zb(1),p.kc("required",!e.isRecojoLocalCheked)}}function xn(e,i){if(1&e&&(p.Qb(0,"span",53),p.Hc(1),p.Pb()),2&e){const e=p.cc(3);p.zb(1),p.Jc(" ",e.dirEstablecimiento.distancia_km," km ")}}function _n(e,i){if(1&e&&(p.Qb(0,"p",54),p.Hc(1),p.Pb()),2&e){const e=p.cc(3);p.zb(1),p.Jc(" ",e.msjErrorDir," ")}}const wn=function(e){return{"text-danger":e}};function In(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",45),p.Yb("click",(function(){return p.wc(e),p.cc(2).openDialogDireccion_new()})),p.Qb(1,"div"),p.Qb(2,"span",46),p.Hc(3,"Direccion de entrega:"),p.Pb(),p.Qb(4,"p",47),p.Qb(5,"strong",48),p.Hc(6),p.Pb(),p.Fc(7,xn,2,1,"span",49),p.Lb(8,"br"),p.Hc(9),p.Pb(),p.Fc(10,_n,2,1,"p",50),p.Pb(),p.Qb(11,"div"),p.Qb(12,"button",51),p.Qb(13,"span",52),p.Hc(14,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc(2);p.kc("matRippleColor",e.rippleColor),p.zb(5),p.kc("ngClass",p.pc(6,wn,""===e.direccionCliente.direccion)),p.zb(1),p.Ic(e.direccionCliente.titulo),p.zb(1),p.kc("ngIf",""!=e.direccionCliente.direccion),p.zb(2),p.Jc(" ",e.direccionCliente.direccion," "),p.zb(1),p.kc("ngIf",e.msjErrorDir.length>0)}}function yn(e,i){if(1&e&&(p.Ob(0),p.Fc(1,In,15,8,"div",44),p.Nb()),2&e){const e=p.cc();p.zb(1),p.kc("ngIf",!e.isRecojoLocalCheked)}}function Qn(e,i){if(1&e){const e=p.Rb();p.Qb(0,"mat-form-field",16),p.Qb(1,"input",55,56),p.Yb("keyup",(function(){p.wc(e);const i=p.tc(2);return p.cc().setTextDirClienteNoMapa(i.value)})),p.Pb(),p.Pb(),p.Lb(3,"span")}if(2&e){const e=p.cc();p.zb(1),p.kc("required",!e.isShowAddDireccionMapa)}}function Tn(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",57),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogMetodoPago()})),p.Qb(1,"p",47),p.Hc(2,"Metodo de pago: "),p.Qb(3,"strong"),p.Hc(4),p.Pb(),p.Pb(),p.Lb(5,"i",28),p.Pb()}if(2&e){const e=p.cc();p.kc("matRippleColor",e.rippleColor),p.zb(4),p.Ic(e.metodoPagoSelected.descripcion)}}function On(e,i){if(1&e&&(p.Qb(0,"li",58),p.Qb(1,"div",59),p.Hc(2),p.dc(3,"titlecase"),p.Pb(),p.Qb(4,"div",60),p.Hc(5),p.dc(6,"number"),p.Pb(),p.Pb()),2&e){const e=i.$implicit,t=p.cc();p.kc("matRippleColor",t.rippleColor),p.zb(2),p.Ic(p.ec(3,3,e.descripcion)),p.zb(3),p.Ic(p.fc(6,5,e.importe,"0.2"))}}const Mn=function(e){return{"fw-600":e}};let Dn=(()=>{class e{constructor(e,i,t,o,s,a,c,r,d,l,b,m){this.fb=e,this.crudService=i,this.dialogDireccion=t,this.infoTokenService=o,this.miPedidoService=s,this.dialog=a,this.establecimientoService=c,this.calcDistanceService=r,this.dialogTipoComprobante=d,this.utilService=l,this.clienteService=b,this.dialogDireccionClienteDelivery=m,this.changeStatus=new p.n,this.isDataFromDNI=!1,this.errorDni=!1,this.isValid=!1,this.loadConsulta=!1,this.isNuevoCliente=!1,this.direccionCliente={},this.isRecojoLocalCheked=!1,this.isAceptaRecojoLocal=!0,this.dataListClientes=[],this.myControl=new n.f,this.rippleColor="rgb(255,238,88, 0.3)",this.msjErrorDir="",this.resData={idcliente:"",dni:"",nombre:"",f_nac:"",direccion:"",telefono:"",paga_con:"",dato_adicional:"",referencia:"",tipoComprobante:{},importeTotal:0,metodoPago:{},propina:{},direccionEnvioSelected:{},establecimiento:{},subTotales:{},pasoRecoger:!1,buscarRepartidor:!0,isFromComercio:1,costoTotalDelivery:0,tiempoEntregaProgamado:{},num_verificador:"",solicitaCubiertos:0},this.importeTota=0,this.isShowAddDireccionMapa=!0,this.isCubierto=!1}set listSubtotales(e){this._listSubtotales=e}ngOnInit(){this.direccionCliente={titulo:"Seleccione una direccion *",direccion:"",referencia:""},this.tiempoEntregaSelected=new dn.a,this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.infoTokenService.setIniMetodoPago("Efectivo"),this.metodoPagoSelected=this.infoTokenService.infoUsToken.metodoPago,this.dirEstablecimiento=this.establecimientoService.get(),this.isAceptaRecojoLocal=1===this.establecimientoService.establecimiento.pwa_delivery_habilitar_recojo_local,this.myForm=this.fb.group({idcliente:new n.f(""),dni:new n.f(""),nombre:new n.f("",[n.D.required]),f_nac:new n.f(""),telefono:new n.f(""),dato_adicional:new n.f(""),num_verificador:new n.f("")}),this.myForm.statusChanges.subscribe(e=>{this.isValid="VALID"===e,this.setearData()}),this.infoEstablecimiento=this.establecimientoService.get(),this.isShowAddDireccionMapa=1===this.infoEstablecimiento.pwa_habilitar_busqueda_mapa,this.filteredOptions=this.myControl.valueChanges.pipe(Object(bn.a)(""),Object(mn.a)(e=>this._filter(e)),Object(pn.a)(e=>this.dataListClientes=e))}setTextDirClienteNoMapa(e){this.direccionCliente.direccion=this.utilService.addslashes(e),this.setearData()}setearData(){this.isValid="VALID"===this.myForm.status,this.resData.idcliente=this.myForm.controls.idcliente.value||null,this.resData.dni=this.myForm.controls.dni.value,this.resData.nombre=this.myForm.controls.nombre.value,this.resData.f_nac=this.myForm.controls.f_nac.value,this.resData.num_verificador=this.myForm.controls.num_verificador.value,this.resData.telefono=this.myForm.controls.telefono.value,this.resData.importeTotal=this.getTotalPedido(),this.resData.paga_con=this.metodoPagoSelected.descripcion+"  "+this.metodoPagoSelected.importe||"",this.resData.dato_adicional=this.myForm.controls.dato_adicional.value,this.resData.metodoPago=this.metodoPagoSelected,this.resData.tipoComprobante=this.infoTokenService.getInfoUs().tipoComprobante,this.resData.direccionEnvioSelected=this.direccionCliente,this.resData.tiempoEntregaProgamado=this.tiempoEntregaSelected,this.resData.establecimiento=this.infoEstablecimiento,this.resData.referencia=""===this.direccionCliente.referencia?this.resData.nombre:this.utilService.addslashes(this.direccionCliente.referencia),this.resData.direccion=this.direccionCliente.direccion,this.resData.subTotales=this._listSubtotales,this.resData.propina=this.infoTokenService.getInfoUs().propina,this.resData.pasoRecoger=this.isRecojoLocalCheked,this.resData.buscarRepartidor=0===this.establecimientoService.establecimiento.pwa_delivery_servicio_propio,this.resData.costoTotalDelivery=this.infoEstablecimiento.c_servicio,this.resData.solicitaCubiertos=this.isCubierto?1:0,this.isShowAddDireccionMapa&&(this.direccionCliente.ciudad||this.isRecojoLocalCheked||(this.isValid=!1)),this.changeStatus.emit({formIsValid:this.isValid,isNuevoCliente:this.isNuevoCliente,formData:this.resData,direccionMapsSave:this.direccionCliente})}buscarDNI(){if(this.errorDni=!1,this.myForm.controls.dni.value.length<8)return void(this.errorDni=!0);const e={documento:this.myForm.controls.dni.value,only_sede:!0};this.loadConsulta=!0,this.isNuevoCliente=!1,this.limpiarForm(e.documento),this.isDataFromDNI=!0,this.crudService.postFree(e,"service","consulta-dni-ruc",!0).subscribe(i=>{const t=i.data;i.success&&t.length>0?(this.myForm.controls.idcliente.patchValue(t[0].idcliente),this.myForm.controls.nombre.patchValue(t[0].nombres),this.myForm.controls.f_nac.patchValue(t[0].f_nac),this.myForm.controls.num_verificador.patchValue(""),this.myControl.patchValue(t[0].nombres),this.myForm.controls.telefono.patchValue(t[0].telefono),this.loadConsulta=!1,this.isNuevoCliente=!1,this.errorDni=!1,null==t[0].dni_num_verificador&&this.clienteService.serchClienteByDni(e.documento).subscribe(e=>{this.myForm.controls.f_nac.patchValue(e.date_of_birthday),this.myForm.controls.num_verificador.patchValue(e.verification_code)})):this.crudService.getConsultaRucDni("dni",e.documento).subscribe(i=>{if(i.success){const e=i.data,t=`${e.name} ${e.first_name} ${e.last_name}`;this.myForm.controls.idcliente.patchValue(0),this.myForm.controls.nombre.patchValue(t),this.myForm.controls.f_nac.patchValue(e.date_of_birthday),this.myForm.controls.num_verificador.patchValue(e.verification_code),this.isNuevoCliente=!0,this.errorDni=!1}else this.limpiarForm(e.documento),this.isDataFromDNI=!1,this.errorDni=!0;this.loadConsulta=!1,this.resData.idcliente="0"})})}limpiarForm(e){this.myForm.reset(),this.myForm.controls.dni.patchValue(e)}openDialogDireccion(){this.resData.idcliente=""!==this.resData.idcliente?this.resData.idcliente:this.clienteSelectBusqueda?this.clienteSelectBusqueda.idcliente:"";const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0,idClienteBuscar:this.resData.idcliente},this.dialogDireccion.open(cn.a,e).afterClosed().subscribe(e=>{e&&(this.direccionCliente=e,this.direccionCliente.idcliente_pwa_direccion=null===this.direccionCliente.idcliente_pwa_direccion?0:this.direccionCliente.idcliente_pwa_direccion,this.calcDistanceService.calculateRouteObserver(e,this.dirEstablecimiento,!1).subscribe(e=>{const i=this.dirEstablecimiento.c_servicio;this.establecimientoService.set(this.dirEstablecimiento),this.infoEstablecimiento.c_servicio=i,this.resData.costoTotalDelivery=i;const t=this.miPedidoService.getArrSubTotales(this.dirEstablecimiento.rulesSubTotales);localStorage.setItem("sys::st",btoa(JSON.stringify(t))),this._listSubtotales=t,this.setearData()}))})}openDialogDireccion_new(){const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.resData.idcliente=""!==this.resData.idcliente?this.resData.idcliente:this.clienteSelectBusqueda?this.clienteSelectBusqueda.idcliente:"",e.data={idcliente:this.resData.idcliente,isFromComercio:!0},this.dialogDireccionClienteDelivery.open(fn.a,e).afterClosed().subscribe(e=>{if(e){if(this.msjErrorDir="",this.direccionCliente=e,this.direccionCliente.ciudad.toLocaleLowerCase()!==this.infoEstablecimiento.ciudad.toLocaleLowerCase())return this.direccionCliente.codigo=null,void(this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.");this.direccionCliente.idcliente_pwa_direccion=null===this.direccionCliente.idcliente_pwa_direccion?0:this.direccionCliente.idcliente_pwa_direccion,this.calcularCostoEntrega(this.direccionCliente)}})}calcularCostoEntrega(e){this.calcDistanceService.calculateRouteObserver(e,this.dirEstablecimiento,!1).subscribe(e=>{this.establecimientoService.set(this.dirEstablecimiento),this.infoEstablecimiento.c_servicio=this.dirEstablecimiento.c_servicio,this.resData.costoTotalDelivery=this.dirEstablecimiento.c_servicio;const i=this.miPedidoService.getArrSubTotales(this.dirEstablecimiento.rulesSubTotales);localStorage.setItem("sys::st",btoa(JSON.stringify(i))),this._listSubtotales=i,this.setearData()})}recalcularTotales(){if(this.isRecojoLocalCheked){this._listSubtotalesTmp=JSON.parse(JSON.stringify(this._listSubtotales));const e=this._listSubtotales[this._listSubtotales.length-1];this._listSubtotales=this._listSubtotales.filter(e=>e.id>=0&&"TOTAL"!==e.descripcion);const i=this._listSubtotales.map(e=>parseFloat(e.importe)).reduce((e,i)=>e+i,0);e.importe=i,this._listSubtotales.push(e),this.myForm.controls.telefono.setValidators(null)}else this.myForm.controls.telefono.setValidators([n.D.required]),this._listSubtotales=this._listSubtotalesTmp;localStorage.setItem("sys::st",btoa(JSON.stringify(this._listSubtotales))),this.infoTokenService.setPasoRecoger(this.isRecojoLocalCheked),this.setearData()}openDialogMetodoPago(){const e=new S.e;e.width="380px",e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={importeTotalPagar:this._listSubtotales[this._listSubtotales.length-1].importe,excluirId:2},this.dialog.open(rn.a,e).afterClosed().subscribe(e=>{this.metodoPagoSelected=e,this.setearData()})}getTotalPedido(){return this._listSubtotales[this._listSubtotales.length-1].importe}_filter(e){return this.isDataFromDNI||e.length<5?hn.a:"object"==typeof e?(this.selectedClienteBusqueda(e),hn.a):(this.limpiarForm(""),this.establecimientoService.getClienteAutocomplete(e))}changeCliente(e){}displayFn(e){return e?e.nombres:""}selectedClienteBusqueda(e){this.clienteSelectBusqueda=e,this.myForm.controls.idcliente.patchValue(e.idcliente),this.myForm.controls.nombre.patchValue(e.nombres),this.myForm.controls.dni.patchValue(e.ruc),this.myForm.controls.telefono.patchValue(e.telefono)}setNombreControl(e){this.myForm.controls.nombre.patchValue(e)}openDialogTiempoEntrega(){const e=new S.e;e.width="380px",e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTipoComprobante.open(ln.a,e).afterClosed().subscribe(e=>{e&&(this.tiempoEntregaSelected=e,this.setearData())})}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(n.e),p.Kb(y.a),p.Kb(S.b),p.Kb(m.a),p.Kb(a.a),p.Kb(S.b),p.Kb(b.a),p.Kb(Re.a),p.Kb(S.b),p.Kb(w.a),p.Kb(un),p.Kb(S.b))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-datos-delivery"]],viewQuery:function(e,i){var t;1&e&&p.Mc(gn,!0),2&e&&p.sc(t=p.Zb())&&(i.searchElementRef=t.first)},inputs:{listSubtotales:"listSubtotales"},outputs:{changeStatus:"changeStatus"},decls:52,vars:21,consts:[[1,"text-center"],[1,"fw-100","fs-20"],[1,"border-bottom","m-0"],[1,"d-flex","justify-content-between","p-2",2,"background","beige"],[1,"text-left"],[1,"fw-600","fs-14"],[1,"fa","fa-cutlery"],[1,"fw-100","fs-12","text-secondary","p-0","m-0"],["name","isCubierto",3,"ngModel","ngModelChange"],["matRipple","",1,"border-bottom","m-0","text-left",3,"hidden"],["labelPosition","before",3,"ngModel","ngModelChange","change"],["aria-hidden","true",1,"fa","fa-home","pr-2"],[1,"mr-1",3,"ngClass"],[3,"formGroup"],[1,"w-100","pt-2"],[1,"text-info","fs-11"],[1,"w-100"],["matInput","","placeholder","DNI","type","text","formControlName","dni",3,"keyup.enter"],["mat-icon-button","","matSuffix","",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["class","text-left span-input-alert",4,"ngIf"],["mode","indeterminate",2,"bottom","20px",3,"hidden"],["class","w-100",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplateNoMapa",""],["matRipple","",1,"border-bottom","m-0","pl-0","pr-2","pt-3","pb-3","d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14"],["aria-hidden","true",1,"fa","fa-caret-down"],["class","border-bottom m-0 pl-0 pr-2 pt-3 pb-4 d-flex justify-content-between","matRipple","",3,"matRippleColor","click",4,"ngIf"],[1,"div-total","border-0","w-100"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],[1,"text-left","span-input-alert"],[1,"fw-100","text-danger","fs-11"],["matInput","","placeholder","Nombre y apellidos","formControlName","nombre","readonly",""],["type","text","placeholder","Nombre y apellidos del cliente","aria-label","Cliene","matInput","","name","cliente",3,"formControl","matAutocomplete","keyup"],["valNom",""],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"fs-12"],["matInput","","placeholder","Telefono","formControlName","telefono",3,"required"],["class","border-bottom m-0 pl-0 pr-2 pt-3 pb-3 text-left d-flex justify-content-between align-items-center","matRipple","",3,"matRippleColor","click",4,"ngIf"],["matRipple","",1,"border-bottom","m-0","pl-0","pr-2","pt-3","pb-3","text-left","d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"fw-100","fs-12","text-secondary"],[1,"m-0","fs-14"],[3,"ngClass"],["class","fw-100 text-info pl-2",4,"ngIf"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],[1,"fw-100","text-info","pl-2"],[1,"text-danger","fs-12","fw-100","m-0"],["matInput","","placeholder","Direccion",3,"required","keyup"],["text_dir_solo",""],["matRipple","",1,"border-bottom","m-0","pl-0","pr-2","pt-3","pb-4","d-flex","justify-content-between",3,"matRippleColor","click"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"],[1,"w-100","text-left"],[1,"text-right"]],template:function(e,i){if(1&e&&(p.Qb(0,"div"),p.Qb(1,"div",0),p.Qb(2,"p",1),p.Hc(3,"Datos del Delivery"),p.Pb(),p.Pb(),p.Qb(4,"div",2),p.Qb(5,"div",3),p.Qb(6,"div",4),p.Qb(7,"span",5),p.Hc(8,"Cubiertos "),p.Lb(9,"i",6),p.Pb(),p.Qb(10,"p",7),p.Hc(11,"Incluir cubiertos."),p.Pb(),p.Pb(),p.Qb(12,"mat-slide-toggle",8),p.Yb("ngModelChange",(function(e){return i.isCubierto=e})),p.Pb(),p.Pb(),p.Pb(),p.Lb(13,"br"),p.Qb(14,"div",9),p.Qb(15,"mat-checkbox",10),p.Yb("ngModelChange",(function(e){return i.isRecojoLocalCheked=e}))("change",(function(){return i.recalcularTotales()})),p.Lb(16,"i",11),p.Qb(17,"span",12),p.Hc(18,"Cliente pasa a recoger en el Local"),p.Pb(),p.Pb(),p.Pb(),p.Qb(19,"form",13),p.Qb(20,"div",14),p.Qb(21,"div",4),p.Qb(22,"span",15),p.Hc(23,"(Opcional) Ingrese DNI del cliente para llevar un registro. \xd3 busque por el nombre."),p.Pb(),p.Pb(),p.Qb(24,"mat-form-field",16),p.Qb(25,"input",17),p.Yb("keyup.enter",(function(){return i.buscarDNI()})),p.Pb(),p.Qb(26,"button",18),p.Yb("click",(function(){return i.buscarDNI()})),p.Lb(27,"i",19),p.Pb(),p.Pb(),p.Fc(28,vn,3,0,"div",20),p.Qb(29,"div",16),p.Lb(30,"mat-progress-bar",21),p.Pb(),p.Fc(31,Cn,2,0,"mat-form-field",22),p.Fc(32,Sn,7,6,"mat-form-field",22),p.Fc(33,kn,2,1,"mat-form-field",22),p.Fc(34,yn,2,1,"ng-container",23),p.Fc(35,Qn,4,1,"ng-template",null,24,p.Gc),p.Qb(37,"div",25),p.Yb("click",(function(){return i.openDialogTiempoEntrega()})),p.Qb(38,"div"),p.Qb(39,"p",26),p.Qb(40,"span",27),p.Hc(41),p.Qb(42,"strong"),p.Hc(43),p.dc(44,"titlecase"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(45,"div"),p.Lb(46,"i",28),p.Pb(),p.Pb(),p.Fc(47,Tn,6,2,"div",29),p.Pb(),p.Pb(),p.Qb(48,"div",26),p.Qb(49,"div",30),p.Qb(50,"ul",31),p.Fc(51,On,7,8,"li",32),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&e){const e=p.tc(36);p.zb(12),p.kc("ngModel",i.isCubierto),p.zb(2),p.kc("hidden",!i.isAceptaRecojoLocal),p.zb(1),p.kc("ngModel",i.isRecojoLocalCheked),p.zb(2),p.kc("ngClass",p.pc(19,Mn,i.isRecojoLocalCheked)),p.zb(2),p.kc("formGroup",i.myForm),p.zb(9),p.kc("ngIf",!i.loadConsulta&&i.errorDni),p.zb(2),p.kc("hidden",!i.loadConsulta),p.zb(1),p.kc("ngIf",i.isDataFromDNI),p.zb(1),p.kc("ngIf",!i.isDataFromDNI),p.zb(1),p.kc("ngIf",!i.isRecojoLocalCheked),p.zb(1),p.kc("ngIf",i.isShowAddDireccionMapa)("ngIfElse",e),p.zb(3),p.kc("matRippleColor",i.rippleColor),p.zb(4),p.Jc(" ",i.tiempoEntregaSelected.descripcion,": "),p.zb(2),p.Jc("",p.ec(44,17,i.tiempoEntregaSelected.value)," "),p.zb(4),p.kc("ngIf",!i.isRecojoLocalCheked),p.zb(4),p.kc("ngForOf",i._listSubtotales)}},directives:[sn.a,n.p,n.s,M.o,Q.a,o.q,n.F,n.q,n.i,T.c,be.a,n.c,n.h,k.b,T.j,o.t,v.a,o.s,tn.d,n.g,tn.a,M.j,n.A],pipes:[o.F,o.b,o.g],styles:[".div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.mat-option[_ngcontent-%COMP%]{height:20px!important}.span-input-alert[_ngcontent-%COMP%]{bottom:20px;position:relative}"]}),e})();var zn=t("3jVI"),Fn=t("7jE7"),Rn=t("lkOP"),Ln=t("2dOp"),En=t("e9Tq");function Hn(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",9),p.Qb(1,"mat-checkbox",10),p.Yb("change",(function(){p.wc(e);const t=i.$implicit;return p.cc().chageItem(t)}))("ngModelChange",(function(t){return p.wc(e),i.$implicit.checked=t})),p.Qb(2,"div",11),p.Qb(3,"span"),p.Hc(4),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit;p.zb(1),p.kc("ngModel",e.checked),p.zb(3),p.Jc("",e.descripcion," ")}}let jn=(()=>{class e{constructor(e,i,t){this.dialogRef=e,this.infoTokenService=i,this.utilService=t,this.datosComprobante={dni:"",otro:""}}ngOnInit(){this.loadTipoComprobante(),this.itemSelected=this.infoTokenService.infoUsToken.tipoComprobante,this.datosComprobante.dni=this.itemSelected.dni,this.datosComprobante.otro=this.itemSelected.otro_dato,this.verificarComprobanteInit()}loadTipoComprobante(){this.listTipoComprobante=[],this.listTipoComprobante.push({idtipo_comprobante:1,descripcion:"Boleta",checked:!0}),this.listTipoComprobante.push({idtipo_comprobante:2,descripcion:"Factura",checked:!1})}verificarComprobanteInit(){this.listTipoComprobante.map(e=>{e.checked=e.idtipo_comprobante===this.itemSelected.idtipo_comprobante})}chageItem(e){this.listTipoComprobante.map(e=>e.checked=!1),e.checked=!0,this.itemSelected=e}cerrarDlg(){this.itemSelected.dni=this.datosComprobante.dni,this.itemSelected.otro_dato=this.utilService.addslashes(this.datosComprobante.otro),this.infoTokenService.setTipoComprobante(this.itemSelected),this.dialogRef.close(this.itemSelected)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(S.i),p.Kb(m.a),p.Kb(w.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-dialog-tipo-comprobante"]],decls:16,vars:3,consts:[[1,"p-4"],[1,"fs-18","fw-600"],["class","xoption w-100","matRipple","",4,"ngFor","ngForOf"],[1,"w-100"],["type","number","matInput","","placeholder","DNI / RUC",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Indicacion adicional",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"fs-12","fw-100","text-info"],["mat-flat-button","","color","primary",3,"click"],["matRipple","",1,"xoption","w-100"],[1,"w-100",3,"ngModel","change","ngModelChange"],[1,"w-100","d-flex"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"p",1),p.Hc(2,"Tipo de Comprobante"),p.Pb(),p.Lb(3,"hr"),p.Fc(4,Hn,5,2,"div",2),p.Ob(5),p.Qb(6,"mat-form-field",3),p.Qb(7,"input",4),p.Yb("ngModelChange",(function(e){return i.datosComprobante.dni=e})),p.Pb(),p.Pb(),p.Qb(8,"mat-form-field",3),p.Qb(9,"input",5),p.Yb("ngModelChange",(function(e){return i.datosComprobante.otro=e})),p.Pb(),p.Pb(),p.Nb(),p.Qb(10,"div",6),p.Qb(11,"span",7),p.Hc(12,"Verifique que los datos sean correctos."),p.Pb(),p.Lb(13,"br"),p.Qb(14,"button",8),p.Yb("click",(function(){return i.cerrarDlg()})),p.Hc(15,"Listo"),p.Pb(),p.Pb(),p.Pb()),2&e&&(p.zb(4),p.kc("ngForOf",i.listTipoComprobante),p.zb(3),p.kc("ngModel",i.datosComprobante.dni),p.zb(2),p.kc("ngModel",i.datosComprobante.otro))},directives:[o.s,T.c,n.v,be.a,n.c,n.p,n.s,k.b,M.o,Q.a],styles:[""]}),e})();function Bn(e,i){1&e&&(p.Qb(0,"p",5),p.Hc(1,"Importante, indique su nombre."),p.Pb())}const Nn=function(e){return{"text-nom-cliente":e}};let An=(()=>{class e{constructor(e){this.infoTokenService=e,this.isNombreValid=new p.n,this.isValidNombre=!1}ngOnInit(){this.infoCliente=this.infoTokenService.getInfoUs(),this.nombreCliente=this.infoCliente.nombres,this.saveNomCliente(this.nombreCliente)}saveNomCliente(e){e=e.toLocaleLowerCase().indexOf("invitado")>-1?"":e,this.infoTokenService.setNombres(e),this.infoCliente=this.infoTokenService.getInfoUs(),this.nombreCliente=this.infoCliente.nombres,this.isValidNombre=""!==this.nombreCliente,this.isNombreValid.emit(this.isValidNombre)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(m.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-text-nom-cliente"]],inputs:{sizeTextBg:"sizeTextBg"},outputs:{isNombreValid:"isNombreValid"},decls:5,vars:5,consts:[[1,"div-text-nombre"],["class","text-danger fw-600",4,"ngIf"],[1,"w-100"],["autocomplete","off","matInput","","placeholder","Su Nombre","name","nombreCliente",3,"ngClass","ngModel","ngModelChange","keyup"],["nomCliente",""],[1,"text-danger","fw-600"]],template:function(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",0),p.Fc(1,Bn,2,0,"p",1),p.Qb(2,"mat-form-field",2),p.Qb(3,"input",3,4),p.Yb("ngModelChange",(function(e){return i.nombreCliente=e}))("keyup",(function(){p.wc(e);const t=p.tc(4);return i.saveNomCliente(t.value)})),p.Pb(),p.Pb(),p.Pb()}2&e&&(p.zb(1),p.kc("ngIf",!i.isValidNombre),p.zb(2),p.kc("ngClass",p.pc(3,Nn,i.sizeTextBg))("ngModel",i.nombreCliente))},directives:[o.t,T.c,be.a,n.c,o.q,n.p,n.s],styles:[".text-nom-cliente[_ngcontent-%COMP%]{font-size:20px;text-align:center}.div-text-nombre[_ngcontent-%COMP%]{background:#cce8ff;border-radius:5px;padding:10px}"]}),e})();const Vn=function(e){return{"propina-selected":e}};function qn(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",2),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc().itemCheck(t)})),p.Hc(1),p.Pb()}if(2&e){const e=i.$implicit;p.kc("ngClass",p.pc(2,Vn,e.checked)),p.zb(1),p.Ic(e.descripcion)}}let $n=(()=>{class e{constructor(e,i){this.infoTokenService=e,this.establecimientoService=i,this.selectedPropina=new p.n}set listSubtotales(e){this._listSubtotales=e}ngOnInit(){this.propinaSelected=this.infoTokenService.infoUsToken.propina,this.simbolo_moneda=this.establecimientoService.getSimboloMoneda(),this.loadPropina()}loadPropina(){this.listPropina=[],this.listPropina.push({idpropina:1,value:0,descripcion:this.simbolo_moneda+" 0",checked:!0}),this.listPropina.push({idpropina:2,value:1,descripcion:this.simbolo_moneda+" 1",checked:!1}),this.listPropina.push({idpropina:3,value:2,descripcion:this.simbolo_moneda+" 2",checked:!1}),this.listPropina.push({idpropina:4,value:3,descripcion:this.simbolo_moneda+" 3",checked:!1}),this.listPropina.push({idpropina:5,value:5,descripcion:this.simbolo_moneda+" 5",checked:!1}),this.selectedPropina.emit(this.propinaSelected)}itemCheck(e){this.listPropina.map(e=>e.checked=!1),e.checked=!0,this.propinaSelected=e,this.infoTokenService.setPropina(e);const i=this._listSubtotales[this._listSubtotales.length-1];let t=this._listSubtotales.filter(e=>-3===e.id)[0];t?(t.importe=parseFloat(e.value.toString()).toFixed(2),i.importe=this.getTotalSubtotales()):(t={},t.id=-3,t.descripcion="Propina",t.esImpuesto=0,t.visible=!1,t.quitar=!1,t.tachado=!1,t.visible_cpe=!1,t.importe=parseFloat(e.value.toString()).toFixed(2),this._listSubtotales.pop(),this._listSubtotales.push(t),i.importe=this.getTotalSubtotales(),this._listSubtotales.push(i)),localStorage.setItem("sys::st",btoa(JSON.stringify(this._listSubtotales))),this.infoTokenService.setPropina(e),this.selectedPropina.emit(e)}getTotalSubtotales(){return this._listSubtotales.filter(e=>"TOTAL"!==e.descripcion).map(e=>parseFloat(e.importe)).reduce((e,i)=>e+i,0)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(m.a),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-propina-delivery"]],inputs:{listSubtotales:"listSubtotales"},outputs:{selectedPropina:"selectedPropina"},decls:2,vars:1,consts:[[1,"d-flex","content-propina"],["matRipple","","class","item-propina",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-propina",3,"ngClass","click"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Fc(1,qn,2,4,"div",1),p.Pb()),2&e&&(p.zb(1),p.kc("ngForOf",i.listPropina))},directives:[o.s,M.o,o.q],styles:[".item-propina[_ngcontent-%COMP%]{padding:5px;border:1px solid;border-radius:5px;font-size:12px;background-color:#fff;margin-left:5px}.propina-selected[_ngcontent-%COMP%]{background-color:#000;color:#fff}"]}),e})();function Un(e,i){1&e&&(p.Ob(0),p.Qb(1,"div",30),p.Qb(2,"div",31),p.Lb(3,"i",32),p.Qb(4,"span",33),p.Hc(5,"Comercio cuenta con su propio reparto."),p.Pb(),p.Pb(),p.Pb(),p.Nb())}function Kn(e,i){1&e&&(p.Ob(0),p.Qb(1,"p",10),p.Hc(2,"El comercio incluir\xe1 cubierto en tu pedido."),p.Pb(),p.Nb())}function Yn(e,i){1&e&&(p.Qb(0,"p",10),p.Hc(1,"Ay\xfadanos a reducir el desperdicio de pl\xe1stico. Solicita cubiertos solo cuando lo necesites."),p.Pb())}function Jn(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",30),p.Qb(1,"div",17),p.Qb(2,"div"),p.Qb(3,"span",34),p.Hc(4,"Cubiertos "),p.Lb(5,"i",35),p.Pb(),p.Fc(6,Kn,3,0,"ng-container",36),p.Fc(7,Yn,2,0,"ng-template",null,37,p.Gc),p.Pb(),p.Qb(9,"mat-slide-toggle",38),p.Yb("ngModelChange",(function(i){return p.wc(e),p.cc().isCubierto=i})),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.tc(8),i=p.cc();p.zb(6),p.kc("ngIf",i.isCubierto)("ngIfElse",e),p.zb(3),p.kc("ngModel",i.isCubierto)}}function Gn(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",39),p.Qb(1,"app-text-nom-cliente",40),p.Yb("isNombreValid",(function(i){p.wc(e);const t=p.cc();return t.nombreClienteValido=i,t.verificarFormValid()})),p.Pb(),p.Pb()}if(2&e){const e=p.cc();p.kc("matRippleColor",e.rippleColor),p.zb(1),p.kc("sizeTextBg",!1)}}function Wn(e,i){if(1&e&&(p.Qb(0,"span",44),p.Hc(1),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.Jc(" ",e.dirEstablecimiento.distancia_km," km ")}}function Zn(e,i){if(1&e&&(p.Qb(0,"p",45),p.Hc(1),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.Jc(" ",e.msjErrorDir," ")}}const Xn=function(e){return{"text-danger":e}};function es(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",9),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogDireccion()})),p.Qb(1,"div"),p.Qb(2,"span",10),p.Hc(3,"Direccion de entrega:"),p.Pb(),p.Qb(4,"p",19),p.Qb(5,"strong",41),p.Hc(6),p.Pb(),p.Fc(7,Wn,2,1,"span",42),p.Lb(8,"br"),p.Hc(9),p.Pb(),p.Fc(10,Zn,2,1,"p",43),p.Pb(),p.Qb(11,"div"),p.Qb(12,"button",14),p.Qb(13,"span",15),p.Hc(14,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc();p.kc("matRippleColor",e.rippleColor),p.zb(5),p.kc("ngClass",p.pc(6,Xn,""===e.direccionCliente.direccion)),p.zb(1),p.Ic(e.direccionCliente.titulo),p.zb(1),p.kc("ngIf",""!=e.direccionCliente.direccion),p.zb(2),p.Jc(" ",e.direccionCliente.direccion," "),p.zb(1),p.kc("ngIf",e.msjErrorDir.length>0)}}function is(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",46),p.Qb(1,"span",19),p.Hc(2,"Propina: "),p.Qb(3,"i",47,48),p.Yb("click",(function(){return p.wc(e),p.tc(4).toggle()})),p.Pb(),p.Pb(),p.Qb(5,"app-comp-propina-delivery",49),p.Yb("selectedPropina",(function(i){return p.wc(e),p.cc().selectedPropinaRepartidor(i)})),p.Pb(),p.Pb()}if(2&e){const e=p.cc();p.zb(5),p.kc("listSubtotales",e._listSubtotales)}}function ts(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",50),p.Qb(1,"span",51),p.Hc(2,"Importante: especifique persona o datos de contacto."),p.Pb(),p.Qb(3,"mat-form-field",52),p.Qb(4,"input",53),p.Yb("ngModelChange",(function(i){return p.wc(e),p.cc().valInputDatoAdicianal=i})),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=p.cc();p.zb(4),p.kc("placeholder",e.titleInputDatoAdicional)("required",e.isComercioSolidaridad)("ngModel",e.valInputDatoAdicianal)}}function os(e,i){if(1&e&&p.Lb(0,"img",61),2&e){const e=p.cc().$implicit;p.mc("src","../assets/images/",e.icon,"",p.xc),p.lc("matTooltip",e.motivo)}}function ns(e,i){if(1&e&&(p.Qb(0,"div",59),p.Fc(1,os,1,2,"img",60),p.Pb()),2&e){const e=i.$implicit;p.zb(1),p.kc("ngIf",e.visible)}}function ss(e,i){1&e&&p.Lb(0,"i",62)}function as(e,i){if(1&e&&(p.Ob(0,56),p.Fc(1,ns,2,1,"div",57),p.Fc(2,ss,1,0,"i",58),p.Nb()),2&e){const e=p.cc(2);p.zb(1),p.kc("ngForOf",e.listIconsEntrega),p.zb(1),p.kc("ngIf",e.isCalculandoDistanciaA)}}function cs(e,i){if(1&e&&(p.Qb(0,"li",54),p.Qb(1,"div",52),p.Hc(2),p.dc(3,"titlecase"),p.Fc(4,as,3,2,"ng-container",55),p.Pb(),p.Qb(5,"div"),p.Hc(6),p.dc(7,"number"),p.Pb(),p.Pb()),2&e){const e=i.$implicit,t=p.cc();p.kc("matRippleColor",t.rippleColor),p.zb(2),p.Jc(" ",p.ec(3,4,e.descripcion)," "),p.zb(2),p.kc("ngIf",e.isDeliveryApp),p.zb(2),p.Jc(" ",p.fc(7,6,e.importe,"0.2"),"")}}function rs(e,i){if(1&e&&(p.Qb(0,"span"),p.Hc(1),p.dc(2,"number"),p.Pb()),2&e){const e=p.cc();p.zb(1),p.Jc(" Importe minimo S/. ",p.fc(2,1,e.montoMinimoPedido,".2")," ")}}function ds(e,i){1&e&&(p.Qb(0,"p",63),p.Hc(1,"Costo de entrega y propina es 100% para el repartidor."),p.Pb())}const ls=function(e){return{"fw-600":e}};let bs=(()=>{class e{constructor(e,i,t,o,n,s,a,c,r,d,l,b){this.miPedidoService=e,this.infoTokenService=i,this.verifyClientService=t,this.establecimientoService=o,this.calcDistanceService=n,this.dialog=s,this.dialogTelefono=a,this.dialogTipoComprobante=c,this.dialogDireccion=r,this.dialogTiempoEntrega=d,this.utilService=l,this.dialogDireccionClienteDelivery=b,this.isComercioCerrado=!1,this.isComercioAceptaPedidoProgramado=!1,this.isComercioRepartidoresPropios=!1,this.isComercioPapayaSoloPedidosApp=!1,this.isRecojoLocalCheked=!1,this.isAceptaRecojoLocal=!0,this.isValidForm=!1,this.isTiempoEntregaValid=!1,this.msjErrorDir="",this.rippleColor="rgb(255,238,88, 0.3)",this.montoMinimoPedido=10,this.resData={idcliente:"",dni:"",nombre:"",f_nac:"",direccion:"",telefono:"",paga_con:"",dato_adicional:"",referencia:"",tipoComprobante:{},importeTotal:0,metodoPago:{},propina:{},direccionEnvioSelected:{},establecimiento:{},subTotales:{},pasoRecoger:!1,costoTotalDelivery:0,tiempoEntregaProgamado:{},solicitaCubiertos:0},this.isComercioSolidaridad=!1,this.titleInputDatoAdicional="Dato importante",this.valInputDatoAdicianal="",this.isHabilitadoTarjeta=!0,this.isRain=!1,this.listIconsEntrega=[],this.isCalculandoDistanciaA=!1,this.isRestaurante=!1,this.isCubierto=!1,this.isReady=new p.n,this.dataDelivery=new p.n,this.nombreClienteValido=!1,this.isShowNombreClienteLoginInvitado=!1}set listSubtotales(e){this._listSubtotales=e,this.loadData()}ngOnInit(){this.loadData();const e=this.establecimientoService.get();if(this.montoMinimoPedido=e.pwa_delivery_importe_min,this.tipoComprobanteSelected=this.infoTokenService.infoUsToken.tipoComprobante,this.propinaSelected=this.infoTokenService.infoUsToken.propina,this.isShowNombreClienteLoginInvitado=this.verifyClientService.getDataClient().isLoginByInvitado||!1,this.isShowNombreClienteLoginInvitado){let e=this.infoTokenService.infoUsToken.nombres;e=e.toLocaleLowerCase().indexOf("invitado")>-1?"":e,this.isShowNombreClienteLoginInvitado=""===e,this.nombreClienteValido=!this.isShowNombreClienteLoginInvitado}else{let e=this.infoTokenService.infoUsToken.nombres;e=e.toLocaleLowerCase().indexOf("invitado")>-1?"":e,this.nombreClienteValido=""!==e}this.isComercioSolidaridad=1===e.pwa_delivery_comercio_solidaridad,this.titleInputDatoAdicional=this.isComercioSolidaridad?"Contacto":"Alg\xfan dato importante?",this.isComercioRepartidoresPropios=1===e.pwa_delivery_servicio_propio,this.isComercioPapayaSoloPedidosApp=1===e.pwa_delivery_reparto_solo_app;try{this.listIconsEntrega=JSON.parse(JSON.stringify(e.icons_entrega))}catch(i){this.listIconsEntrega=[]}this.dirEstablecimiento.distancia_km||this.calcularCostoEntrega(this.direccionCliente),this.simbolo_moneda=this.establecimientoService.getSimboloMoneda()}getTiempoEntrega(){return this.tiempoEntregaSelected=new dn.a,this.infoTokenService.infoUsToken.tiempoEntrega?(this.tiempoEntregaSelected=this.infoTokenService.infoUsToken.tiempoEntrega,void(this.isTiempoEntregaValid=this.tiempoEntregaSelected.valid)):this.isComercioCerrado?(this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.tiempoEntregaSelected.iddia=(new Date).getDay(),void(this.infoTokenService.infoUsToken.tiempoEntrega=this.tiempoEntregaSelected)):(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value=this.infoEstablecimiento.tiempo_aprox_entrega,this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,void(this.isTiempoEntregaValid=!0))}loadData(){this.dirEstablecimiento=this.establecimientoService.get(),this.isComercioCerrado=1===this.dirEstablecimiento.cerrado,this.isComercioAceptaPedidoProgramado=1===this.dirEstablecimiento.pwa_delivery_habilitar_pedido_programado,this.direccionClienteIni=new Ln.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.isHabilitadoTarjeta=1===this.establecimientoService.get().pwa_delivery_acepta_tarjeta,this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(this.isHabilitadoTarjeta),this.infoToken=this.infoTokenService.getInfoUs(),this.direccionCliente=this.infoToken.direccionEnvioSelected?this.infoToken.direccionEnvioSelected:this.direccionClienteIni,this.infoEstablecimiento=this.establecimientoService.get(),this.getTiempoEntrega(),this.isRestaurante=1===this.infoEstablecimiento.idsede_categoria,this.isAceptaRecojoLocal=1===this.infoEstablecimiento.pwa_delivery_habilitar_recojo_local,this.resData.telefono=this.infoToken.telefono,this.isValidForm=!!this.infoToken.telefono&&this.infoToken.telefono.length>=5,this.isValidForm=!!this.metodoPagoSelected.idtipo_pago&&this.isValidForm,this.isValidForm&&setTimeout(()=>{this.verificarNum(this.infoToken.telefono)},500)}verificarNum(e){var i,t;this.resData.telefono=e,this.verificarFormValid(),this.propinaSelected=this.infoTokenService.infoUsToken.propina;const o=this._listSubtotales[this._listSubtotales.length-1].importe,n=this.metodoPagoSelected.importe?this.metodoPagoSelected.importe:"";this.isValidForm&&(this.resData.nombre=this.infoToken.nombres,this.resData.direccion=null===(i=this.infoToken.direccionEnvioSelected)||void 0===i?void 0:i.direccion,this.resData.referencia=this.utilService.addslashes(null===(t=this.infoToken.direccionEnvioSelected)||void 0===t?void 0:t.referencia),this.resData.direccionEnvioSelected=this.infoToken.direccionEnvioSelected,this.resData.idcliente=this.infoToken.idcliente.toString(),this.resData.paga_con=this.metodoPagoSelected.descripcion+"  "+n,this.resData.telefono=e,this.resData.metodoPago=this.metodoPagoSelected,this.resData.tipoComprobante=this.tipoComprobanteSelected,this.resData.tiempoEntregaProgamado=this.tiempoEntregaSelected,this.resData.establecimiento=this.infoEstablecimiento,this.resData.importeTotal=o,this.resData.subTotales=this._listSubtotales,this.resData.propina=this.propinaSelected,this.infoToken.telefono=e,this.infoTokenService.setTelefono(e),this.resData.pasoRecoger=this.isRecojoLocalCheked,this.resData.dato_adicional=this.valInputDatoAdicianal,this.resData.costoTotalDelivery=this.infoEstablecimiento.costo_total_servicio_delivery,this.resData.solicitaCubiertos=this.isCubierto?1:0,this.dataDelivery.emit(this.resData)),this.verificarMontoMinimo()}verificarMontoMinimo(){var e,i;const t=this._listSubtotales[this._listSubtotales.length-1].importe;this.resData.importeTotal=t,this.verificarFormValid(),this.propinaSelected=this.infoTokenService.infoUsToken.propina;const o=this.metodoPagoSelected.importe?this.metodoPagoSelected.importe:"";this.isValidForm&&(this.resData.nombre=this.infoToken.nombres,this.resData.direccion=null===(e=this.infoToken.direccionEnvioSelected)||void 0===e?void 0:e.direccion,this.resData.referencia=this.utilService.addslashes(null===(i=this.infoToken.direccionEnvioSelected)||void 0===i?void 0:i.referencia),this.resData.direccionEnvioSelected=this.infoToken.direccionEnvioSelected,this.resData.idcliente=this.infoToken.idcliente.toString(),this.resData.paga_con=this.metodoPagoSelected.descripcion+"  "+o,this.resData.telefono=this.infoToken.telefono,this.resData.metodoPago=this.metodoPagoSelected,this.resData.tiempoEntregaProgamado=this.tiempoEntregaSelected,this.resData.tipoComprobante=this.tipoComprobanteSelected,this.resData.establecimiento=this.infoEstablecimiento,this.resData.propina=this.propinaSelected,this.resData.importeTotal=t,this.resData.subTotales=this._listSubtotales,this.resData.pasoRecoger=this.isRecojoLocalCheked,this.resData.dato_adicional=this.valInputDatoAdicianal,this.resData.costoTotalDelivery=this.infoEstablecimiento.costo_total_servicio_delivery,this.resData.solicitaCubiertos=this.isCubierto?1:0,this.infoTokenService.set(),this.dataDelivery.emit(this.resData))}verificarFormValid(){this.isValidForm=this.isTiempoEntregaValid,this.isValidForm=!!(this.resData.importeTotal>=this.montoMinimoPedido&&this.isValidForm),this.isValidForm=!!this.metodoPagoSelected.idtipo_pago&&this.isValidForm,this.isValidForm=!(!this.direccionCliente.ciudad&&!this.isRecojoLocalCheked)&&this.isValidForm,this.isValidForm=this.resData.telefono.trim().length>=5&&this.isValidForm,this.isValidForm=this.isValidForm&&!this.isCalculandoDistanciaA,this.isValidForm=this.isValidForm&&this.nombreClienteValido,this.isReady.emit(this.isValidForm)}openDialogMetodoPago(){const e=new S.e;e.width="380px",e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={importeTotalPagar:this._listSubtotales[this._listSubtotales.length-1].importe},this.dialog.open(rn.a,e).afterClosed().subscribe(e=>{this.metodoPagoSelected=e,localStorage.setItem("sys:mps",btoa(JSON.stringify(e))),this.verificarFormValid(),this.verificarMontoMinimo()})}openDialogTipoComprobnate(){const e=new S.e;e.width="380px",e.disableClose=!0,e.hasBackdrop=!0,this.dialogTipoComprobante.open(jn,e).afterClosed().subscribe(e=>{this.tipoComprobanteSelected=e})}openDialogsendSMS(){const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open(En.a,e).afterClosed().subscribe(e=>{this.isValidForm=e.verificado,e.verificado&&(this.infoToken.telefono=e.numberphone,this.infoTokenService.setTelefono(e.numberphone),this.verifyClientService.setTelefono(e.numberphone),this.resData.telefono=this.infoToken.telefono),this.verificarMontoMinimo()})}recalcularTotales(){if(this.isRecojoLocalCheked){this.propinaSelected={idpropina:1,value:0,descripcion:this.simbolo_moneda+" 0",checked:!0},this.infoTokenService.setPropina(this.propinaSelected),this._listSubtotalesTmp=JSON.parse(JSON.stringify(this._listSubtotales));const e=this._listSubtotales[this._listSubtotales.length-1];this._listSubtotales=this._listSubtotales.filter(e=>{if((isNaN(parseInt(e.id,0))?1:e.id)>=0&&"TOTAL"!==e.descripcion&&"ENTREGA"!==e.descripcion.toUpperCase())return e});const i=this._listSubtotales.map(e=>parseFloat(e.importe)).reduce((e,i)=>e+i,0);e.importe=i,this._listSubtotales.push(e)}else this._listSubtotales=this._listSubtotalesTmp;localStorage.setItem("sys::st",btoa(JSON.stringify(this._listSubtotales))),this.infoTokenService.setPasoRecoger(this.isRecojoLocalCheked),this.verificarMontoMinimo()}selectedPropinaRepartidor(e){this.propinaSelected=e,this.resData.propina=e}openDialogDireccion(){const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={idcliente:this.infoTokenService.infoUsToken.idcliente},this.dialogDireccionClienteDelivery.open(fn.a,e).afterClosed().subscribe(e=>{if(e){if(this.msjErrorDir="",this.direccionCliente=e,this.direccionCliente.ciudad.toLocaleLowerCase()!==this.infoEstablecimiento.ciudad.toLocaleLowerCase())return this.direccionCliente.codigo=null,this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.",void this.verificarMontoMinimo();this.infoToken.direccionEnvioSelected=this.direccionCliente,this.direccionCliente.idcliente_pwa_direccion=null===this.direccionCliente.idcliente_pwa_direccion?0:this.direccionCliente.idcliente_pwa_direccion,this.calcularCostoEntrega(this.direccionCliente)}})}openDialogDireccion_anterior(){const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0,idClienteBuscar:this.infoTokenService.infoUsToken.idcliente},this.dialogDireccion.open(cn.a,e).afterClosed().subscribe(e=>{if(e){if(this.msjErrorDir="",this.direccionCliente=e,this.direccionCliente.ciudad.toLocaleLowerCase()!==this.infoEstablecimiento.ciudad.toLocaleLowerCase())return this.direccionCliente.codigo=null,this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.",void this.verificarMontoMinimo();this.infoToken.direccionEnvioSelected=this.direccionCliente,this.direccionCliente.idcliente_pwa_direccion=null===this.direccionCliente.idcliente_pwa_direccion?0:this.direccionCliente.idcliente_pwa_direccion,this.calcularCostoEntrega(this.direccionCliente)}})}calcularCostoEntrega(e){this.isReady.emit(!1),this.isCalculandoDistanciaA=!0,this.calcDistanceService.calculateRouteObserver(e,this.dirEstablecimiento,!1).subscribe(e=>{this.establecimientoService.set(this.dirEstablecimiento),this.infoEstablecimiento.c_servicio=this.dirEstablecimiento.c_servicio,this.resData.costoTotalDelivery=this.dirEstablecimiento.c_servicio;const i=this.miPedidoService.getArrSubTotales(this.dirEstablecimiento.rulesSubTotales);localStorage.setItem("sys::st",btoa(JSON.stringify(i))),this._listSubtotales=i,this.isCalculandoDistanciaA=!1,this.verificarMontoMinimo()})}openDialogTiempoEntrega(){const e=new S.e;e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTipoComprobante.open(ln.a,e).afterClosed().subscribe(e=>{e&&(this.infoTokenService.setTiempoEntrega(e),this.tiempoEntregaSelected=e,this.isTiempoEntregaValid=!0,this.verificarMontoMinimo())})}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(a.a),p.Kb(m.a),p.Kb(l.a),p.Kb(b.a),p.Kb(Re.a),p.Kb(S.b),p.Kb(S.b),p.Kb(S.b),p.Kb(S.b),p.Kb(S.b),p.Kb(w.a),p.Kb(S.b))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-confirmar-delivery"]],inputs:{listSubtotales:"listSubtotales"},outputs:{isReady:"isReady",dataDelivery:"dataDelivery"},decls:72,vars:33,consts:[[1,"text-left","h-100"],[4,"ngIf"],["class","border-bottom m-0 p-3",4,"ngIf"],["matRipple","",1,"border-bottom","m-0","p-3",3,"hidden","matRippleColor"],["labelPosition","before",3,"ngModel","ngModelChange","change"],["aria-hidden","true",1,"fa","fa-home","pr-2"],[1,"mr-1",3,"ngClass"],["class","border-bottom m-0 p-3","matRipple","",3,"matRippleColor",4,"ngIf"],["class","border-bottom m-0 p-3 d-flex justify-content-between align-items-center","matRipple","",3,"matRippleColor","click",4,"ngIf"],["matRipple","",1,"border-bottom","m-0","p-3","d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"fw-100","fs-12","text-secondary"],[1,"fa","fa-clock-o","pl-2"],[1,"m-0"],[1,"fs-14",3,"ngClass"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],["matRipple","",1,"border-bottom","m-0","p-3",3,"matRippleColor","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"m-0","fs-14"],[1,"fw-100","fs-12","text-danger",3,"hidden"],["matRipple","",1,"border-bottom","m-0","p-3","div-metodo-pago",3,"matRippleColor","click"],["class","m-0 p-3 d-flex justify-content-between",4,"ngIf"],["class","p-3",4,"ngIf"],[1,"m-0","p-3"],[1,"div-total","w-100"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],[1,"pb-2","text-right"],["class","fs-11 text-info fw-100",4,"ngIf"],[1,"border-bottom","m-0","p-3"],[1,"div-info"],["aria-hidden","true",1,"fa","fa-motorcycle","pr-1"],[1,"fs-11"],[1,"fw-600","fs-14"],[1,"fa","fa-cutlery"],[4,"ngIf","ngIfElse"],["elseTemplateCubierto",""],["name","isCubierto",3,"ngModel","ngModelChange"],["matRipple","",1,"border-bottom","m-0","p-3",3,"matRippleColor"],[3,"sizeTextBg","isNombreValid"],[3,"ngClass"],["class","fw-100 text-info pl-2",4,"ngIf"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],[1,"fw-100","text-info","pl-2"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"m-0","p-3","d-flex","justify-content-between"],["matTooltip","El 100% va para el repartidor","matTooltipPosition","above","aria-label","Button that shows a tooltip",1,"fa","fa-question-circle",3,"click"],["tooltip","matTooltip"],[3,"listSubtotales","selectedPropina"],[1,"p-3"],[1,"text-info"],[1,"w-100"],["matInput","",3,"placeholder","required","ngModel","ngModelChange"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"],["class","d-flex",4,"ngIf"],[1,"d-flex"],["class","d-inline",4,"ngFor","ngForOf"],["class","fa fa-spinner fa-spin fa-fw ml-3",4,"ngIf"],[1,"d-inline"],["class","img-ico-entrega pl-2 text-secondary","alt","itemIcon.motivo",3,"src","matTooltip",4,"ngIf"],["alt","itemIcon.motivo",1,"img-ico-entrega","pl-2","text-secondary",3,"src","matTooltip"],[1,"fa","fa-spinner","fa-spin","fa-fw","ml-3"],[1,"fs-11","text-info","fw-100"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Fc(1,Un,6,0,"ng-container",1),p.Fc(2,Jn,10,3,"div",2),p.Qb(3,"div",3),p.Qb(4,"mat-checkbox",4),p.Yb("ngModelChange",(function(e){return i.isRecojoLocalCheked=e}))("change",(function(){return i.recalcularTotales()})),p.Lb(5,"i",5),p.Qb(6,"span",6),p.Hc(7,"Paso a recoger en el Local"),p.Pb(),p.Pb(),p.Pb(),p.Fc(8,Gn,2,2,"div",7),p.Fc(9,es,15,8,"div",8),p.Qb(10,"div",9),p.Yb("click",(function(){return i.openDialogTiempoEntrega()})),p.Qb(11,"div"),p.Qb(12,"span",10),p.Hc(13," Entgrega:"),p.Pb(),p.Lb(14,"i",11),p.Qb(15,"p",12),p.Qb(16,"span",13),p.Hc(17),p.Qb(18,"strong"),p.Hc(19),p.dc(20,"titlecase"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(21,"div"),p.Qb(22,"button",14),p.Qb(23,"span",15),p.Hc(24,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(25,"div",16),p.Yb("click",(function(){return i.openDialogsendSMS()})),p.Qb(26,"div",17),p.Qb(27,"div"),p.Qb(28,"span",18),p.Hc(29,"Es necesario el numero de su telefono"),p.Pb(),p.Qb(30,"p",19),p.Hc(31,"Telefono: "),p.Qb(32,"strong"),p.Hc(33),p.Pb(),p.Pb(),p.Qb(34,"span",20),p.Hc(35,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),p.Pb(),p.Pb(),p.Qb(36,"button",14),p.Qb(37,"span",15),p.Hc(38,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(39,"div",9),p.Yb("click",(function(){return i.openDialogTipoComprobnate()})),p.Qb(40,"p",19),p.Hc(41,"Comprobante: "),p.Qb(42,"strong"),p.Hc(43),p.Pb(),p.Pb(),p.Qb(44,"button",14),p.Qb(45,"span",15),p.Hc(46,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Qb(47,"div",21),p.Yb("click",(function(){return i.openDialogMetodoPago()})),p.Qb(48,"div",17),p.Qb(49,"p",19),p.Hc(50,"Metodo de pago: "),p.Qb(51,"strong"),p.Hc(52),p.Pb(),p.Pb(),p.Qb(53,"button",14),p.Qb(54,"span",15),p.Hc(55,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Qb(56,"span",20),p.Hc(57,"Especifique un metodo de pago."),p.Pb(),p.Pb(),p.Fc(58,is,6,1,"div",22),p.Fc(59,ts,5,3,"div",23),p.Lb(60,"br"),p.Qb(61,"div",24),p.Qb(62,"div",25),p.Qb(63,"ul",26),p.Fc(64,cs,8,9,"li",27),p.Pb(),p.Pb(),p.Qb(65,"div",28),p.Qb(66,"span",18),p.Fc(67,rs,3,4,"span",1),p.Pb(),p.Fc(68,ds,2,0,"p",29),p.Pb(),p.Lb(69,"br"),p.Pb(),p.Lb(70,"br"),p.Lb(71,"br"),p.Pb()),2&e&&(p.zb(1),p.kc("ngIf",i.isComercioRepartidoresPropios&&!i.isComercioPapayaSoloPedidosApp),p.zb(1),p.kc("ngIf",i.isRestaurante),p.zb(1),p.kc("hidden",!i.isAceptaRecojoLocal)("matRippleColor",i.rippleColor),p.zb(1),p.kc("ngModel",i.isRecojoLocalCheked),p.zb(2),p.kc("ngClass",p.pc(29,ls,i.isRecojoLocalCheked)),p.zb(2),p.kc("ngIf",i.isShowNombreClienteLoginInvitado),p.zb(1),p.kc("ngIf",!i.isRecojoLocalCheked),p.zb(1),p.kc("matRippleColor",i.rippleColor),p.zb(6),p.kc("ngClass",p.pc(31,Xn,!i.isTiempoEntregaValid)),p.zb(1),p.Jc(" ",i.tiempoEntregaSelected.descripcion,": "),p.zb(2),p.Jc("",p.ec(20,27,i.tiempoEntregaSelected.value)," "),p.zb(6),p.kc("matRippleColor",i.rippleColor),p.zb(3),p.kc("hidden",i.infoToken.telefono.length>=5),p.zb(5),p.Ic(i.infoToken.telefono),p.zb(1),p.kc("hidden",i.infoToken.telefono.length>=5),p.zb(5),p.kc("matRippleColor",i.rippleColor),p.zb(4),p.Ic(i.tipoComprobanteSelected.descripcion),p.zb(4),p.kc("matRippleColor",i.rippleColor),p.zb(5),p.Ic(i.metodoPagoSelected.descripcion),p.zb(4),p.kc("hidden",i.metodoPagoSelected.idtipo_pago),p.zb(2),p.kc("ngIf",!i.isRecojoLocalCheked),p.zb(1),p.kc("ngIf",i.isComercioSolidaridad),p.zb(5),p.kc("ngForOf",i._listSubtotales),p.zb(2),p.kc("hidden",i.isValidForm),p.zb(1),p.kc("ngIf",i.resData.importeTotal<i.montoMinimoPedido),p.zb(1),p.kc("ngIf",!i.isComercioRepartidoresPropios||i.isComercioPapayaSoloPedidosApp))},directives:[o.t,M.o,Q.a,n.p,n.s,o.q,o.s,sn.a,An,I.b,$n,T.c,be.a,n.c,n.A],pipes:[o.F,o.g],styles:[".div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.img-ico-entrega[_ngcontent-%COMP%]{height:22px}.div-info[_ngcontent-%COMP%]{background:#faebd7;padding:5px;border-radius:5px}.div-metodo-pago[_ngcontent-%COMP%]{background:#d0f1ff}"]}),e})();var ms=t("08dK"),ps=t("x9WS"),hs=t("eiAt"),us=t("9jt1"),fs=t("Bzl0"),gs=t("LW3Q"),vs=t("kash"),Cs=t("22RU");const Ps=function(e){return{"propina-selected":e}};function Ss(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",3),p.Yb("click",(function(){p.wc(e);const t=i.$implicit;return p.cc(2).selectedItem(t)})),p.Lb(1,"img",4),p.Qb(2,"p"),p.Hc(3),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit;p.kc("ngClass",p.pc(3,Ps,e.selected)),p.zb(1),p.mc("src","./assets/images/icon-app/",e.img,"",p.xc),p.zb(2),p.Ic(e.descripcion)}}function ks(e,i){if(1&e&&(p.Qb(0,"div",1),p.Fc(1,Ss,4,5,"div",2),p.Pb()),2&e){const e=p.cc();p.zb(1),p.kc("ngForOf",e.listVehiculo)}}let xs=(()=>{class e{constructor(e){this.crudService=e,this.optionSelected=new p.n,this.listVehiculo=null}ngOnInit(){this.selectedFirst=!this.selectedFirst||this.selectedFirst,this.loadTipoVehiculo()}loadTipoVehiculo(){this.crudService.getAll("delivery","get-tipo-vehiculo",!1,!1,!1).subscribe(e=>{this.listVehiculo=e.data,this.selectedFirst&&this.selectedItem(this.listVehiculo[0])})}selectedItem(e){this.listVehiculo.map(e=>e.selected=!1),e.selected=!0,this.itemSelected=e,this.optionSelected.emit(this.itemSelected)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(y.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-tipo-vehiculo"]],inputs:{selectedFirst:"selectedFirst"},outputs:{optionSelected:"optionSelected"},decls:1,vars:1,consts:[["class","content-op",4,"ngIf"],[1,"content-op"],["matRipple","","class","item-propina",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-propina",3,"ngClass","click"],["alt","",3,"src"]],template:function(e,i){1&e&&p.Fc(0,ks,2,1,"div",0),2&e&&p.kc("ngIf",i.listVehiculo)},directives:[o.t,o.s,M.o,o.q],styles:["p[_ngcontent-%COMP%]{margin:0}.content-op[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:15px}.item-propina[_ngcontent-%COMP%]{text-align:center;padding:10px;border:1px solid #9e9e9e;border-radius:5px;font-size:12px;background-color:#fff;margin-left:5px;min-width:90px;-webkit-transition:all .3s;transition:all .3s}.propina-selected[_ngcontent-%COMP%]{background-color:#708090;color:#fff}"]}),e})();function _s(e,i){if(1&e&&(p.Qb(0,"p",39),p.Hc(1),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.Jc(" ",e.msjErrorDir," ")}}function ws(e,i){1&e&&p.Lb(0,"i",40)}function Is(e,i){1&e&&p.Lb(0,"i",41)}const ys=function(e){return{fadeInRight:e}},Qs=function(e){return{"text-danger":e}};function Ts(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",2),p.Qb(2,"div",3),p.Qb(3,"p",4),p.Hc(4,"Pide lo que quieras."),p.Pb(),p.Qb(5,"p",5),p.Hc(6,"Buscaremos en su ciudad para llevarte lo que necesitas. "),p.Pb(),p.Lb(7,"hr"),p.Qb(8,"div"),p.Qb(9,"p",6),p.Hc(10,"Tipo de movilidad que requiere."),p.Pb(),p.Qb(11,"app-tipo-vehiculo",7),p.Yb("optionSelected",(function(i){return p.wc(e),p.cc().vehiculoSelected(i)})),p.Pb(),p.Pb(),p.Lb(12,"hr"),p.Qb(13,"div",8),p.Qb(14,"p",9),p.Hc(15,"Que compraremos?."),p.Pb(),p.Qb(16,"app-comp-caja-texto",10),p.Yb("textChanged",(function(i){return p.wc(e),p.cc().textChanged(i)})),p.Pb(),p.Lb(17,"hr"),p.Qb(18,"p",9),p.Hc(19,"Costo estimado de la compra."),p.Pb(),p.Qb(20,"app-comp-op-costo-estimado",7),p.Yb("optionSelected",(function(i){return p.wc(e),p.cc().costoSelected(i)})),p.Pb(),p.Lb(21,"hr"),p.Qb(22,"div",11),p.Qb(23,"button",12),p.Yb("click",(function(){return p.wc(e),p.cc().goNext()})),p.Hc(24,"Listo, continuar"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(25,"div",13),p.Qb(26,"p"),p.Qb(27,"i",14),p.Yb("click",(function(){return p.wc(e),p.cc().goNext()})),p.Pb(),p.Hc(28," Pide lo que quieras"),p.Pb(),p.Lb(29,"hr"),p.Qb(30,"div"),p.Qb(31,"p",9),p.Hc(32,"De d\xf3nde lo compramos? "),p.Qb(33,"span",15),p.Hc(34,"(Opcional)"),p.Pb(),p.Pb(),p.Qb(35,"mat-form-field",16),p.Qb(36,"input",17),p.Yb("ngModelChange",(function(i){return p.wc(e),p.cc().datosFormUno.donde_compramos=i})),p.Pb(),p.Pb(),p.Pb(),p.Qb(37,"p",9),p.Hc(38,"A d\xf3nde lo llevamos?"),p.Pb(),p.Qb(39,"div",18),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogDireccion()})),p.Qb(40,"p",19),p.Qb(41,"strong",20),p.Hc(42),p.Pb(),p.Lb(43,"br"),p.Hc(44),p.Pb(),p.Qb(45,"p",21),p.Hc(46),p.Pb(),p.Fc(47,_s,2,1,"p",22),p.Pb(),p.Lb(48,"hr"),p.Qb(49,"div",23),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogTiempoEntrega()})),p.Qb(50,"div"),p.Qb(51,"p",9),p.Hc(52,"Cuando lo entregamos?"),p.Pb(),p.Qb(53,"p",24),p.Qb(54,"span",25),p.Hc(55),p.Qb(56,"strong"),p.Hc(57),p.dc(58,"titlecase"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(59,"div"),p.Lb(60,"i",26),p.Pb(),p.Pb(),p.Lb(61,"hr"),p.Qb(62,"div",18),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogMetodoPago()})),p.Qb(63,"div",27),p.Qb(64,"p",28),p.Hc(65,"Metodo de pago: "),p.Qb(66,"strong"),p.Hc(67),p.Pb(),p.Pb(),p.Qb(68,"button",29),p.Qb(69,"span",30),p.Hc(70,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Qb(71,"span",31),p.Hc(72,"Especifique un metodo de pago."),p.Pb(),p.Pb(),p.Lb(73,"hr"),p.Qb(74,"div",18),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogsendSMS()})),p.Qb(75,"span",32),p.Hc(76,"Es necesario el numero de su telefono"),p.Pb(),p.Qb(77,"p",28),p.Hc(78,"Telefono contacto: "),p.Qb(79,"strong"),p.Hc(80),p.Pb(),p.Pb(),p.Qb(81,"span",31),p.Hc(82,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),p.Pb(),p.Pb(),p.Lb(83,"hr"),p.Lb(84,"br"),p.Qb(85,"div",33),p.Qb(86,"div",34),p.Hc(87,"Costo de entrega"),p.Pb(),p.Qb(88,"div",35),p.Fc(89,ws,1,0,"i",36),p.Hc(90),p.dc(91,"number"),p.Pb(),p.Pb(),p.Qb(92,"p",37),p.Hc(93,"Entrega sin contacto: cuando sea posible, seleccione pagar con Yape."),p.Pb(),p.Lb(94,"br"),p.Lb(95,"hr"),p.Qb(96,"div",11),p.Qb(97,"button",12),p.Yb("click",(function(){return p.wc(e),p.cc().enviarPedidoLoQ()})),p.Fc(98,Is,1,0,"i",38),p.Hc(99," Listo, Enviar. "),p.Pb(),p.Pb(),p.Lb(100,"br"),p.Lb(101,"br"),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc();p.zb(2),p.kc("hidden",e.isShowFinalize),p.zb(21),p.kc("disabled",!e.isFormValid),p.zb(2),p.kc("hidden",!e.isShowFinalize)("ngClass",p.pc(31,ys,e.isShowFinalize)),p.zb(11),p.kc("ngModel",e.datosFormUno.donde_compramos),p.zb(3),p.kc("matRippleColor",e.rippleColor),p.zb(2),p.kc("ngClass",p.pc(33,Qs,""===e.direccionCliente.direccion)),p.zb(1),p.Ic(e.direccionCliente.titulo),p.zb(2),p.Jc(" ",e.direccionCliente.direccion,""),p.zb(2),p.Jc(" ",e.direccionCliente.referencia," "),p.zb(1),p.kc("ngIf",e.msjErrorDir.length>0),p.zb(2),p.kc("matRippleColor",e.rippleColor),p.zb(5),p.kc("ngClass",p.pc(35,Qs,!e.isTiempoEntregaValid)),p.zb(1),p.Jc(" ",e.tiempoEntregaSelected.descripcion,": "),p.zb(2),p.Jc("",p.ec(58,26,e.tiempoEntregaSelected.value)," "),p.zb(5),p.kc("matRippleColor",e.rippleColor),p.zb(5),p.Ic(e.metodoPagoSelected.descripcion),p.zb(4),p.kc("hidden",e.metodoPagoSelected.idtipo_pago),p.zb(3),p.kc("matRippleColor",e.rippleColor),p.zb(1),p.kc("hidden",e.infoToken.telefono.length>=5),p.zb(5),p.Ic(e.infoToken.telefono),p.zb(1),p.kc("hidden",e.infoToken.telefono.length>=5),p.zb(8),p.kc("ngIf",e.isCalculandoDistanciaA),p.zb(1),p.Jc(" S/. ",p.fc(91,28,e.importe_pagar,".2"),""),p.zb(7),p.kc("disabled",!e.isFormValidDos||e.isLoading),p.zb(1),p.kc("ngIf",e.isLoading)}}function Os(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",42),p.Qb(1,"div",43),p.Lb(2,"i",44),p.Lb(3,"br"),p.Qb(4,"p",4),p.Hc(5," Pedido enviado. "),p.Pb(),p.Qb(6,"p",45),p.Hc(7,"Atenderemos su pedido lo mas pronto posible. En breve un repartidor se comunicara con usted para cumplir con su pedido."),p.Pb(),p.Lb(8,"hr"),p.Qb(9,"button",46),p.Yb("click",(function(){return p.wc(e),p.cc().goZona()})),p.Hc(10,"Listo"),p.Pb(),p.Pb(),p.Pb()}}let Ms=(()=>{class e{constructor(e,i,t,o,n,s,a,c,r,d,l){this.infoTokenService=e,this.plazaDelivery=i,this.calcDistanceService=t,this.crudService=o,this.dialogDireccion=n,this.dialogTelefono=s,this.dialogTiempoEntrega=a,this.dialog=c,this.router=r,this.utilService=d,this.establecimientoService=l,this.lasCiudad="",this.importe_pagar=4,this.isLoading=!1,this.isEnviado=!1,this.isExpress=!1,this.isCalculandoDistanciaA=!1,this.isShowFinalize=!1,this.systemOS="",this.msjErrorDir="",this.isFormValid=!1,this.isFormValidDos=!1,this.isTiempoEntregaValid=!0}ngOnInit(){this.systemOS=this.utilService.getOS(),this.msjErrorDir="",this.infoToken=this.infoTokenService.getInfoUs(),this.direccionClienteIni=new Ln.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.tiempoEntregaSelected=new dn.a,this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(!1),this.datosFormUno={},this.datosFormUno.que_compramos="",this.datosFormUno.telefono=this.infoToken.telefono,this.direccionCliente=this.infoToken.direccionEnvioSelected?this.infoToken.direccionEnvioSelected:this.direccionClienteIni,this.scrollTopInit(),this.getDatosSede()}getTiempoEntrega(){const e=(new Date).getHours();if(this.laPlazaDelivery.options.s_hfin){const i=this.laPlazaDelivery.options.s_hfin.split(":")[0];this.isTiempoEntregaValid=e<=parseInt(i,0)}this.tiempoEntregaSelected.modificado?this.isTiempoEntregaValid=!0:this.isTiempoEntregaValid?(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value="10 a 15 Minutos",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0):(this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0)}getDatosSede(){if(this.direccionCliente.ciudad)return this.direccionCliente.ciudad===this.lasCiudad?(this.getTiempoEntrega(),this.calcularDistanciaEntrega(),void this.setDiasHoraEstablecimineto()):void this.plazaDelivery.loadDatosPlazaByCiudad(this.direccionCliente.ciudad).subscribe(e=>{this.laPlazaDelivery=e,this.lasCiudad=this.laPlazaDelivery.ciudad,this.laPlazaDelivery.latitude=this.laPlazaDelivery.centro.lat,this.laPlazaDelivery.longitude=this.laPlazaDelivery.centro.lon,this.calcularDistanciaEntrega(),this.setDiasHoraEstablecimineto(),this.getTiempoEntrega()})}vehiculoSelected(e){this.datosFormUno.vehiculo=e,this.validFormUno(),this.calcCostoServicio()}costoSelected(e){this.datosFormUno.costo_producto=e,this.validFormUno()}textChanged(e){this.datosFormUno.que_compramos=this.utilService.addslashes_space(e),this.validFormUno()}validFormUno(){this.isFormValid=this.datosFormUno.vehiculo&&this.datosFormUno.costo_producto&&""!==this.datosFormUno.que_compramos}validFormDos(){this.isFormValidDos=this.isFormValid,this.isFormValidDos=!!this.metodoPagoSelected.idtipo_pago&&this.isFormValidDos,this.isFormValidDos=!!this.direccionCliente.ciudad&&this.isFormValidDos,this.isFormValidDos=this.datosFormUno.telefono.trim().length>=5&&this.isFormValidDos,this.isFormValidDos=this.isFormValidDos&&!this.isCalculandoDistanciaA}openDialogMetodoPago(){const e=new S.e;e.width="380px",e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={importeTotalPagar:3},this.dialog.open(rn.a,e).afterClosed().subscribe(e=>{this.metodoPagoSelected=e,this.validFormDos()})}openDialogTiempoEntrega(){const e=new S.e;e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTiempoEntrega.open(ln.a,e).afterClosed().subscribe(e=>{e&&(this.infoTokenService.setTiempoEntrega(e),this.tiempoEntregaSelected=e,this.isTiempoEntregaValid=!0)})}openDialogsendSMS(){const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open(En.a,e).afterClosed().subscribe(e=>{e.verificado&&(this.infoToken.telefono=e.numberphone,this.infoTokenService.setTelefono(e.numberphone),this.datosFormUno.telefono=this.infoToken.telefono,this.validFormDos())})}openDialogDireccion(){const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0},this.dialogDireccion.open(cn.a,e).afterClosed().subscribe(e=>{e&&(this.msjErrorDir="",this.direccionCliente=e,this.getDatosSede(),this.validFormDos())})}calcularDistanciaEntrega(){if(this.isCalculandoDistanciaA=!0,this.direccionCliente.ciudad.toLocaleLowerCase()!==this.laPlazaDelivery.ciudad.toLocaleLowerCase())return this.direccionCliente.codigo=null,void(this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.");this.calcDistanceService.calculateRouteObserver(this.direccionCliente,this.laPlazaDelivery,!1).subscribe(e=>{this.isCalculandoDistanciaA=!1,this.laPlazaDelivery=this.laPlazaDelivery,this.validFormDos(),this.calcCostoServicio()})}calcCostoServicio(){this.laPlazaDelivery&&(this.importe_pagar=this.laPlazaDelivery.options.costo_mandado+(this.laPlazaDelivery.c_servicio-this.laPlazaDelivery.c_minimo)+this.datosFormUno.vehiculo.costo_adicional)}enviarPedidoLoQ(){try{this.isLoading=!0,this.isEnviado=!1,this.datosFormUno.importe_pagar=this.importe_pagar,this.datosFormUno.idcliente=this.infoToken.idcliente,this.datosFormUno.direccionCliente=this.direccionCliente,this.datosFormUno.metodoPago=this.metodoPagoSelected,this.datosFormUno.ciudad=this.laPlazaDelivery.ciudad,this.datosFormUno.tiempoEntrega=this.tiempoEntregaSelected,this.datosFormUno.distancia_km=this.laPlazaDelivery.distancia_km,this.datosFormUno.distancia_mt=this.laPlazaDelivery.distancia_mt,this.datosFormUno.systemOS=this.systemOS,this.datosFormUno.is_express=0}catch(e){console.log(e)}this.crudService.postFree({dataInfo:this.datosFormUno},"delivery","set-pedido-mandado",!1).subscribe(e=>{setTimeout(()=>{this.isLoading=!1,this.isEnviado=!0},1500)})}goZona(){this.router.navigate(["./zona-delivery/establecimientos"])}goNext(){this.isShowFinalize=!this.isShowFinalize,this.scrollTopInit()}scrollTopInit(){try{document.getElementById("contentmaster").scrollTop=0}catch(e){}}setDiasHoraEstablecimineto(){this.laPlazaDelivery.hora_ini=this.laPlazaDelivery.options.s_hini,this.laPlazaDelivery.hora_fin=this.laPlazaDelivery.options.s_hfin,this.laPlazaDelivery.dias_atienden=this.laPlazaDelivery.options.s_dias,this.laPlazaDelivery.pwa_delivery_habilitar_pedido_programado=1,this.laPlazaDelivery.tiempo_aprox_entrega=this.laPlazaDelivery.options.s_tiempo_aprox,this.establecimientoService.set(this.laPlazaDelivery)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(m.a),p.Kb(Cs.a),p.Kb(Re.a),p.Kb(y.a),p.Kb(S.b),p.Kb(S.b),p.Kb(S.b),p.Kb(S.b),p.Kb(Ge.d),p.Kb(w.a),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-pide-lo-que-quieras"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["pedidoEnviado",""],["id","divcontent",1,"p-4","div-content"],[1,"animated","fadeInUp",3,"hidden"],[1,"fs-18"],[1,"fw-100","fs-14"],[1,"fs-16"],[3,"optionSelected"],["id","div-1"],[1,"fs-16","pb-2"],["placeholder_txt","Lista del mercado, medicinas, ferreteria, alg\xfan antojo, etc...",3,"textChanged"],[1,"text-center","w-100"],["mat-raised-button","","color","primary",1,"w-50",3,"disabled","click"],["id","div-2 animated fadeIn",3,"hidden","ngClass"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"fw-600","fs-12"],[1,"w-100"],["matInput","","placeholder","Bodega, supermercado, farmacia... ",3,"ngModel","ngModelChange"],["matRipple","",1,"m-0",3,"matRippleColor","click"],[1,"fs-13"],[3,"ngClass"],[1,"fs-12","text-secondary","fw-600"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],["matRipple","",1,"d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14",3,"ngClass"],["aria-hidden","true",1,"fa","fa-caret-down"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-0","fs-16"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],[1,"fw-100","fs-12","text-danger",3,"hidden"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"d-flex","justify-content-between"],[1,"fs-17","fw-600"],[1,"fs-18","fw-600","text-right"],["class","fa fa-spinner fa-spin fa-fw",4,"ngIf"],[1,"fs-12","fw-100","text-secondary"],["class","fa fa-spinner fa-spin fa-fw mr-2",4,"ngIf"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-spinner","fa-spin","fa-fw","mr-2"],[1,"p-3","m-0","d-flex","align-items-center","div-enviado"],[1,"div-listo"],[1,"fa","fa-check","fa-3x","text-success"],[1,"fs-12","text-secondary"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,i){if(1&e&&(p.Fc(0,Ts,102,37,"ng-container",0),p.Fc(1,Os,11,0,"ng-template",null,1,p.Gc)),2&e){const e=p.tc(2);p.kc("ngIf",!i.isEnviado)("ngIfElse",e)}},directives:[o.t,xs,vs.a,gs.a,k.b,o.q,T.c,be.a,n.c,n.p,n.s,M.o],pipes:[o.F,o.g],styles:["p[_ngcontent-%COMP%]{margin:0}.div-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.div-enviado[_ngcontent-%COMP%]{text-align:center;height:80vh;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.div-listo[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:5px}"]}),e})();function Ds(e,i){if(1&e&&(p.Qb(0,"p",37),p.Hc(1),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.Jc(" ",e.msjErrorDir," ")}}function zs(e,i){if(1&e&&(p.Qb(0,"p",37),p.Hc(1),p.Pb()),2&e){const e=p.cc(2);p.zb(1),p.Jc(" ",e.msjErrorDir," ")}}function Fs(e,i){1&e&&p.Lb(0,"i",38)}function Rs(e,i){1&e&&p.Lb(0,"i",39)}const Ls=function(e){return{"text-danger":e}};function Es(e,i){if(1&e){const e=p.Rb();p.Ob(0),p.Qb(1,"div",2),p.Qb(2,"div",3),p.Qb(3,"p",4),p.Hc(4,"Envios Express."),p.Pb(),p.Qb(5,"p",5),p.Hc(6,"Llevaremos cualquier art\xedculo o paquete de un lugar a otro de la ciudad. "),p.Qb(7,"span",6),p.Hc(8,'Si deseas que compremos algo por ti, utiliza la opcion "Lo que quieras" \xf3 en los comercios afiliados.'),p.Pb(),p.Pb(),p.Lb(9,"hr"),p.Qb(10,"div"),p.Qb(11,"p",7),p.Hc(12,"Tipo de movilidad que requiere."),p.Pb(),p.Qb(13,"app-tipo-vehiculo",8),p.Yb("optionSelected",(function(i){return p.wc(e),p.cc().vehiculoSelected(i)})),p.Pb(),p.Pb(),p.Lb(14,"hr"),p.Qb(15,"div",9),p.Qb(16,"p",10),p.Hc(17,"Articulo o paquete."),p.Pb(),p.Qb(18,"app-comp-caja-texto",11),p.Yb("textChanged",(function(i){return p.wc(e),p.cc().textChanged(i)})),p.Pb(),p.Lb(19,"hr"),p.Qb(20,"div",12),p.Qb(21,"button",13),p.Yb("click",(function(){return p.wc(e),p.cc().goNext()})),p.Hc(22,"Listo, continuar"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(23,"div",14),p.Qb(24,"p"),p.Qb(25,"i",15),p.Yb("click",(function(){return p.wc(e),p.cc().goNext()})),p.Pb(),p.Hc(26," Envios Express"),p.Pb(),p.Lb(27,"hr"),p.Qb(28,"p",10),p.Hc(29,"De d\xf3nde lo recogemos?"),p.Pb(),p.Qb(30,"div",16),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogDireccion(0)})),p.Qb(31,"p",17),p.Qb(32,"strong",18),p.Hc(33),p.Pb(),p.Lb(34,"br"),p.Hc(35),p.Pb(),p.Qb(36,"p",19),p.Hc(37),p.Pb(),p.Fc(38,Ds,2,1,"p",20),p.Pb(),p.Lb(39,"hr"),p.Qb(40,"p",10),p.Hc(41,"A d\xf3nde lo llevamos?"),p.Pb(),p.Qb(42,"div",16),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogDireccion(1)})),p.Qb(43,"p",17),p.Qb(44,"strong",18),p.Hc(45),p.Pb(),p.Lb(46,"br"),p.Hc(47),p.Pb(),p.Qb(48,"p",19),p.Hc(49),p.Pb(),p.Fc(50,zs,2,1,"p",20),p.Pb(),p.Lb(51,"hr"),p.Qb(52,"div",21),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogTiempoEntrega()})),p.Qb(53,"div"),p.Qb(54,"p",10),p.Hc(55,"Cuando lo entregamos?"),p.Pb(),p.Qb(56,"p",22),p.Qb(57,"span",23),p.Hc(58),p.Qb(59,"strong"),p.Hc(60),p.dc(61,"titlecase"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(62,"div"),p.Lb(63,"i",24),p.Pb(),p.Pb(),p.Lb(64,"hr"),p.Qb(65,"div",16),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogMetodoPago()})),p.Qb(66,"div",25),p.Qb(67,"p",26),p.Hc(68,"Metodo de pago: "),p.Qb(69,"strong"),p.Hc(70),p.Pb(),p.Pb(),p.Qb(71,"button",27),p.Qb(72,"span",28),p.Hc(73,"Cambiar"),p.Pb(),p.Pb(),p.Pb(),p.Qb(74,"span",29),p.Hc(75,"Especifique un metodo de pago."),p.Pb(),p.Pb(),p.Lb(76,"hr"),p.Qb(77,"div",16),p.Yb("click",(function(){return p.wc(e),p.cc().openDialogsendSMS()})),p.Qb(78,"span",30),p.Hc(79,"Es necesario el numero de su telefono"),p.Pb(),p.Qb(80,"p",26),p.Hc(81,"Telefono contacto: "),p.Qb(82,"strong"),p.Hc(83),p.Pb(),p.Pb(),p.Qb(84,"span",29),p.Hc(85,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),p.Pb(),p.Pb(),p.Lb(86,"hr"),p.Lb(87,"br"),p.Qb(88,"div",31),p.Qb(89,"div",32),p.Hc(90,"Costo de entrega"),p.Pb(),p.Qb(91,"div",33),p.Fc(92,Fs,1,0,"i",34),p.Hc(93),p.dc(94,"number"),p.Pb(),p.Pb(),p.Qb(95,"p",35),p.Hc(96,"Entrega sin contacto: cuando sea posible, seleccione pagar con Yape."),p.Pb(),p.Lb(97,"br"),p.Lb(98,"hr"),p.Qb(99,"div",12),p.Qb(100,"button",13),p.Yb("click",(function(){return p.wc(e),p.cc().enviarPedidoExpress()})),p.Fc(101,Rs,1,0,"i",36),p.Hc(102," Listo, Enviar. "),p.Pb(),p.Pb(),p.Lb(103,"br"),p.Lb(104,"br"),p.Pb(),p.Pb(),p.Nb()}if(2&e){const e=p.cc();p.zb(2),p.kc("hidden",e.isShowFinalize),p.zb(19),p.kc("disabled",!e.isFormValid),p.zb(2),p.kc("hidden",!e.isShowFinalize),p.zb(7),p.kc("matRippleColor",e.rippleColor),p.zb(2),p.kc("ngClass",p.pc(35,Ls,""===e.direccionA.direccion)),p.zb(1),p.Ic(e.direccionA.titulo),p.zb(2),p.Jc(" ",e.direccionA.direccion,""),p.zb(2),p.Jc(" ",e.direccionA.referencia," "),p.zb(1),p.kc("ngIf",e.msjErrorDir.length>0),p.zb(4),p.kc("matRippleColor",e.rippleColor),p.zb(2),p.kc("ngClass",p.pc(37,Ls,""===e.direccionB.direccion)),p.zb(1),p.Ic(e.direccionB.titulo),p.zb(2),p.Jc(" ",e.direccionB.direccion,""),p.zb(2),p.Jc(" ",e.direccionB.referencia," "),p.zb(1),p.kc("ngIf",e.msjErrorDir.length>0),p.zb(2),p.kc("matRippleColor",e.rippleColor),p.zb(5),p.kc("ngClass",p.pc(39,Ls,!e.isTiempoEntregaValid)),p.zb(1),p.Jc(" ",e.tiempoEntregaSelected.descripcion,": "),p.zb(2),p.Jc("",p.ec(61,30,e.tiempoEntregaSelected.value)," "),p.zb(5),p.kc("matRippleColor",e.rippleColor),p.zb(5),p.Ic(e.metodoPagoSelected.descripcion),p.zb(4),p.kc("hidden",e.metodoPagoSelected.idtipo_pago),p.zb(3),p.kc("matRippleColor",e.rippleColor),p.zb(1),p.kc("hidden",e.infoToken.telefono.length>=5),p.zb(5),p.Ic(e.infoToken.telefono),p.zb(1),p.kc("hidden",e.infoToken.telefono.length>=5),p.zb(8),p.kc("ngIf",e.isCalculandoDistancia),p.zb(1),p.Jc(" S/. ",p.fc(94,32,e.importe_pagar,".2"),""),p.zb(7),p.kc("disabled",!e.isFormValidDos||e.isLoading),p.zb(1),p.kc("ngIf",e.isLoading)}}function Hs(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",40),p.Qb(1,"div",41),p.Lb(2,"i",42),p.Lb(3,"br"),p.Qb(4,"p",4),p.Hc(5," Pedido enviado. "),p.Pb(),p.Qb(6,"p",43),p.Hc(7,"Atenderemos su pedido lo mas pronto posible. Un repartidor se comunicara con usted para cumplir con su pedido."),p.Pb(),p.Lb(8,"hr"),p.Qb(9,"button",44),p.Yb("click",(function(){return p.wc(e),p.cc().goZona()})),p.Hc(10,"Listo"),p.Pb(),p.Pb(),p.Pb()}}let js=(()=>{class e{constructor(e,i,t,o,n,s,a,c,r,d,l){this.infoTokenService=e,this.plazaDelivery=i,this.calcDistanceService=t,this.crudService=o,this.dialogDireccion=n,this.dialogTelefono=s,this.dialogTiempoEntrega=a,this.dialog=c,this.router=r,this.utilService=d,this.establecimientoService=l,this.lasCiudad="",this.importe_pagar=3,this.isLoading=!1,this.isEnviado=!1,this.isCalculandoDistancia=!1,this.isShowFinalize=!1,this.isTiempoEntregaValid=!0,this.systemOS="",this.msjErrorDir="",this.isFormValid=!1,this.isFormValidDos=!1}ngOnInit(){this.systemOS=this.utilService.getOS(),this.msjErrorDir="",this.infoToken=this.infoTokenService.getInfoUs(),this.direccionClienteIni=new Ln.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(!1),this.datosFormUno={},this.datosFormUno.descripcion_paquete="",this.datosFormUno.telefono=this.infoToken.telefono,this.direccionA=this.direccionClienteIni,this.direccionB=this.direccionClienteIni,this.tiempoEntregaSelected=new dn.a,this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.getDatosSede()}getTiempoEntrega(){const e=(new Date).getHours();if(this.laPlazaDelivery.options.s_hfin){const i=this.laPlazaDelivery.options.s_hfin.split(":")[0];this.isTiempoEntregaValid=e<=parseInt(i,0)}this.tiempoEntregaSelected.modificado?this.isTiempoEntregaValid=!0:this.isTiempoEntregaValid?(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value="10 a 15 Minutos",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,this.isTiempoEntregaValid=!0):(this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,this.isTiempoEntregaValid=!1)}getDatosSede(){if(this.direccionA.ciudad)return this.direccionA.ciudad===this.lasCiudad?(this.calcularDistanciaEntrega(),this.setDiasHoraEstablecimineto(),void this.getTiempoEntrega()):void this.plazaDelivery.loadDatosPlazaByCiudad(this.direccionA.ciudad).subscribe(e=>{this.laPlazaDelivery=e,this.lasCiudad=this.laPlazaDelivery.ciudad,this.laPlazaDelivery.latitude=this.laPlazaDelivery.centro.lat,this.laPlazaDelivery.longitude=this.laPlazaDelivery.centro.lon,this.calcularDistanciaEntrega(),this.setDiasHoraEstablecimineto(),this.getTiempoEntrega()})}setDiasHoraEstablecimineto(){this.laPlazaDelivery.hora_ini=this.laPlazaDelivery.options.s_hini,this.laPlazaDelivery.hora_fin=this.laPlazaDelivery.options.s_hfin,this.laPlazaDelivery.dias_atienden=this.laPlazaDelivery.options.s_dias,this.laPlazaDelivery.pwa_delivery_habilitar_pedido_programado=1,this.laPlazaDelivery.tiempo_aprox_entrega=this.laPlazaDelivery.options.s_tiempo_aprox,this.establecimientoService.set(this.laPlazaDelivery)}vehiculoSelected(e){this.datosFormUno.vehiculo=e,this.validFormUno(),this.calcCostoServicio()}textChanged(e){this.datosFormUno.descripcion_paquete=this.utilService.addslashes_space(e),this.validFormUno()}validFormUno(){this.isFormValid=this.datosFormUno.vehiculo&&""!==this.datosFormUno.descripcion_paquete}validFormDos(){this.isFormValidDos=this.isFormValid,this.isFormValidDos=!!this.metodoPagoSelected.idtipo_pago&&this.isFormValidDos,this.isFormValidDos=!!this.direccionA.ciudad&&this.isFormValidDos,this.isFormValidDos=!!this.direccionB.ciudad&&this.isFormValidDos,this.isFormValidDos=this.datosFormUno.telefono.trim().length>=5&&this.isFormValidDos,this.isFormValidDos=this.isFormValidDos&&!this.isCalculandoDistancia}openDialogMetodoPago(){const e=new S.e;e.width="380px",e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={importeTotalPagar:3},this.dialog.open(rn.a,e).afterClosed().subscribe(e=>{this.metodoPagoSelected=e,this.validFormDos()})}openDialogsendSMS(){const e=new S.e;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open(En.a,e).afterClosed().subscribe(e=>{e.verificado&&(this.infoToken.telefono=e.numberphone,this.infoTokenService.setTelefono(e.numberphone),this.datosFormUno.telefono=this.infoToken.telefono,this.validFormDos())})}openDialogTiempoEntrega(){const e=new S.e;e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTiempoEntrega.open(ln.a,e).afterClosed().subscribe(e=>{e&&(this.infoTokenService.setTiempoEntrega(e),this.tiempoEntregaSelected=e,this.isTiempoEntregaValid=!0)})}openDialogDireccion(e){const i=new S.e;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0},this.dialogDireccion.open(cn.a,i).afterClosed().subscribe(i=>{i&&(this.msjErrorDir="",0===e?this.direccionA=i:this.direccionB=i,this.getDatosSede(),this.validFormDos())})}calcularDistanciaEntrega(){if(!this.direccionA.ciudad||!this.direccionB.ciudad)return;if(this.direccionA.ciudad.toLocaleLowerCase()!==this.direccionB.ciudad.toLocaleLowerCase())return this.direccionA.codigo=null,void(this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.");const e=this.laPlazaDelivery;e.latitude=this.direccionB.latitude,e.longitude=this.direccionB.longitude,this.isCalculandoDistancia=!0,this.validFormDos(),this.calcDistanceService.calculateRouteObserver(this.direccionA,e,!1).subscribe(i=>{this.laPlazaDelivery=e,this.isCalculandoDistancia=!1,this.setDiasHoraEstablecimineto(),this.validFormDos(),this.calcCostoServicio()})}calcCostoServicio(){this.laPlazaDelivery&&(this.importe_pagar=this.laPlazaDelivery.options.costo_express+(this.laPlazaDelivery.c_servicio-this.laPlazaDelivery.c_minimo)+this.datosFormUno.vehiculo.costo_adicional)}enviarPedidoExpress(){try{this.isLoading=!0,this.isEnviado=!1,this.datosFormUno.importe_pagar=this.importe_pagar,this.datosFormUno.idcliente=this.infoToken.idcliente,this.datosFormUno.direccionA=this.direccionA,this.datosFormUno.direccionB=this.direccionB,this.datosFormUno.metodoPago=this.metodoPagoSelected,this.datosFormUno.tiempoEntrega=this.tiempoEntregaSelected,this.datosFormUno.ciudad=this.laPlazaDelivery.ciudad,this.datosFormUno.distancia_km=this.laPlazaDelivery.distancia_km,this.datosFormUno.distancia_mt=this.laPlazaDelivery.distancia_mt,this.datosFormUno.systemOS=this.systemOS,this.datosFormUno.is_express=1}catch(e){console.log(e)}this.crudService.postFree({dataInfo:this.datosFormUno},"delivery","set-pedido-mandado",!1).subscribe(e=>{setTimeout(()=>{this.isLoading=!1,this.isEnviado=!0},1500)})}goZona(){this.router.navigate(["./zona-delivery/establecimientos"])}goNext(){this.isShowFinalize=!this.isShowFinalize,document.getElementById("contentmaster").scrollTop=0}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(m.a),p.Kb(Cs.a),p.Kb(Re.a),p.Kb(y.a),p.Kb(S.b),p.Kb(S.b),p.Kb(S.b),p.Kb(S.b),p.Kb(Ge.d),p.Kb(w.a),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-pide-express"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["pedidoEnviado",""],[1,"p-4","div-content"],[1,"animated","fadeInUp",3,"hidden"],[1,"fs-18"],[1,"fw-100","fs-14"],[1,"text-secondary","fs-12"],[1,"fs-16"],[3,"optionSelected"],["id","div-1"],[1,"fs-16","pb-2"],["placeholder_txt","Que articulo o paquete te gustaria enviar?",3,"textChanged"],[1,"text-center","w-100"],["mat-raised-button","","color","primary",1,"w-50",3,"disabled","click"],["id","div-2 animated fadeIn",3,"hidden"],[1,"fa","fa-arrow-left","pr-2",3,"click"],["matRipple","",1,"m-0",3,"matRippleColor","click"],[1,"fs-13"],[3,"ngClass"],[1,"fs-12","text-secondary","fw-600"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],["matRipple","",1,"d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14",3,"ngClass"],["aria-hidden","true",1,"fa","fa-caret-down"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-0","fs-16"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],[1,"fw-100","fs-12","text-danger",3,"hidden"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"d-flex","justify-content-between"],[1,"fs-17","fw-600"],[1,"fs-18","fw-600","text-right"],["class","fa fa-spinner fa-spin fa-fw",4,"ngIf"],[1,"fs-12","fw-100","text-secondary"],["class","fa fa-spinner fa-spin fa-fw mr-2",4,"ngIf"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-spinner","fa-spin","fa-fw","mr-2"],[1,"p-3","m-0","d-flex","align-items-center","div-enviado"],[1,"div-listo"],[1,"fa","fa-check","fa-3x","text-success"],[1,"fs-12","text-secondary"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,i){if(1&e&&(p.Fc(0,Es,105,41,"ng-container",0),p.Fc(1,Hs,11,0,"ng-template",null,1,p.Gc)),2&e){const e=p.tc(2);p.kc("ngIf",!i.isEnviado)("ngIfElse",e)}},directives:[o.t,xs,vs.a,k.b,M.o,o.q],pipes:[o.F,o.g],styles:["p[_ngcontent-%COMP%]{margin:0}.div-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.div-enviado[_ngcontent-%COMP%]{text-align:center;height:80vh;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.div-listo[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:5px}"]}),e})();var Bs=t("DXvS"),Ns=t("DYek"),As=t("Bq5b"),Vs=t("qmRn");class qs{}function $s(e,i){if(1&e&&(p.Qb(0,"span",11),p.Hc(1),p.Pb()),2&e){const e=p.cc();p.zb(1),p.Jc(" M\xe1ximo hasta las ",e.parametros.hora_max," ")}}const Us=function(e){return{"text-danger":e}};let Ks=(()=>{class e{constructor(){this.changeHora=new p.n,this.isHourValid=!1,this.setHoraControl={h:0,m:0,ap:"AM"},this.hora=new Date,this.hora_show="",this.hora_min="00:00 am",this.hora_max="23:59 pm",this.selectedAP="AM"}ngOnInit(){this.hora_min=this.getHoraShow(0),this.hora_show=this.getHoraShow(this.parametros.addMin),this.parametros.showHoraMinMax&&(this.hora_min=this.parametros.hora_min),this.setearHoraControl(this.hora_show),this.responseHora()}getHoraShow(e){this.hora.setMinutes(this.hora.getHours()+e);const i=this.hora.getHours()>=12?"PM":"AM";return`${this.hora.getHours()}:${this.hora.getMinutes()} ${i}`}setearHoraControl(e){const i=e.split(":"),t=i[1].split(" ");this.setHoraControl.h=i[0],this.setHoraControl.m=t[0],this.setHoraControl.ap=t[1]}getAmPm(e){const i=parseInt(e.split(":")[0],0);return`${e} ${i>=12?"PM":"AM"}`}responseHora(){console.log("aa");let e=this.setHoraControl.h;"pm"===this.setHoraControl.ap.toLocaleLowerCase()&&(e=e<12?12+e:e);let i=`${this.setHoraControl.h}:${this.setHoraControl.m} ${this.setHoraControl.ap}`;this.isHourValid=this.getHourSelectedIsValid(`${e}:${this.setHoraControl.m} ${this.setHoraControl.ap}`),i=this.isHourValid?i:"",this.changeHora.emit(i)}changeAm(e){}getHoraPmFormat12(e){const i=e.split(":")[0];this.hora_show=i+":00 PM"}getHourSelectedIsValid(e){return""!==e&&parseInt(this.parametros.hora_max.split(":")[0],0)>parseInt(e.split(":")[0],0)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-get-hora"]],inputs:{parametros:"parametros"},outputs:{changeHora:"changeHora"},decls:16,vars:8,consts:[["matRipple",""],[1,"text-secondary",3,"ngClass"],[1,"d-flex"],[1,"text-center","DivHora"],["type","number","matInput","","placeholder","Hora","max","12","maxlength","2","name","h",3,"ngModel","ngModelChange","keyup"],["type","number","matInput","","placeholder","Min","max","60","maxlength","2","name","m",3,"ngModel","ngModelChange","keyup"],[1,"DivHora","text-center"],["name","ap",3,"ngModel","ngModelChange","selectionChange"],["value","AM"],["value","PM"],["class","text-info fs-12 fw-100",4,"ngIf"],[1,"text-info","fs-12","fw-100"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"p",1),p.Hc(2),p.Pb(),p.Qb(3,"div",2),p.Qb(4,"mat-form-field",3),p.Qb(5,"input",4),p.Yb("ngModelChange",(function(e){return i.setHoraControl.h=e}))("keyup",(function(){return i.responseHora()})),p.Pb(),p.Pb(),p.Qb(6,"mat-form-field",3),p.Qb(7,"input",5),p.Yb("ngModelChange",(function(e){return i.setHoraControl.m=e}))("keyup",(function(){return i.responseHora()})),p.Pb(),p.Pb(),p.Qb(8,"mat-form-field",6),p.Qb(9,"mat-select",7),p.Yb("ngModelChange",(function(e){return i.setHoraControl.ap=e}))("selectionChange",(function(){return i.responseHora()})),p.Qb(10,"mat-option",8),p.Hc(11,"AM"),p.Pb(),p.Qb(12,"mat-option",9),p.Hc(13,"PM"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Fc(14,$s,2,1,"span",10),p.Lb(15,"br"),p.Pb()),2&e&&(p.zb(1),p.kc("ngClass",p.pc(6,Us,!i.isHourValid)),p.zb(1),p.Ic(i.parametros.titulo),p.zb(3),p.kc("ngModel",i.setHoraControl.h),p.zb(2),p.kc("ngModel",i.setHoraControl.m),p.zb(2),p.kc("ngModel",i.setHoraControl.ap),p.zb(5),p.kc("ngIf",i.parametros.showHoraMinMax&&!i.isHourValid))},directives:[M.o,o.q,T.c,n.v,be.a,n.c,n.k,n.p,n.s,O.a,M.j,o.t],styles:["p[_ngcontent-%COMP%]{margin:0}.DivHora[_ngcontent-%COMP%]{max-width:60px}.top-1[_ngcontent-%COMP%]{top:-1px}"]}),e})(),Ys=(()=>{class e{constructor(e,i,t){this.infoToken=e,this.miPedidoService=i,this.establecimientoService=t,this.dataReserva=new p.n,this.isReady=new p.n,this.frmConfirma={},this.opcionesFrmCliente=new Vs.a,this.compHoraParams=new qs,this.isFormValid=!1,this.countTotalItemsPedido=0}ngOnInit(){this.infoEstablecimineto=this.establecimientoService.get(),this.opcionesFrmCliente.showDirreccionA=!1,this.opcionesFrmCliente.telefono=!0,this.opcionesFrmCliente.calDistanciaCentro=!1,this.opcionesFrmCliente.tituloDirA="",this.compHoraParams.titulo="Hora de llegada",this.compHoraParams.tituloHora="Indique aqui la hora",this.compHoraParams.addMin=30,this.compHoraParams.hora_min=this.infoEstablecimineto.hora_ini,this.compHoraParams.hora_max=this.infoEstablecimineto.hora_fin,this.compHoraParams.showHoraMinMax=!0,this.isFormValid=!!this.infoToken.infoUsToken.telefono,this.frmConfirma={nombre_reserva:this.infoToken.infoUsToken.nombres,empresa:"",referencia:"",telefono:this.infoToken.infoUsToken.telefono,hora_reserva:"",num_personas:0,reserva:!0,solo_llevar:!1,delivery:!1},this.miPedidoService.countItemsObserve$.subscribe(e=>{this.countTotalItemsPedido=e,this.frmConfirma.num_personas=this.countTotalItemsPedido,this.emitData()})}frmClienteResponse(e){this.frmConfirma.telefono=e.telefono,this.isFormValid=!!e.telefono,this.emitData()}setHora(e){this.isFormValid=""!==e,this.frmConfirma.hora_reserva=e,this.emitData()}emitData(){this.dataReserva.emit({formIsValid:this.isFormValid,formData:this.frmConfirma,fromReserva:!0}),this.isReady.emit(this.isFormValid)}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(m.a),p.Kb(a.a),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-datos-reserva"]],outputs:{dataReserva:"dataReserva",isReady:"isReady"},decls:18,vars:5,consts:[[1,"w-100"],[1,"w-100","text-center"],["readonly","","matInput","","placeholder","Reserva a nombre de:","name","nombre_reserva",3,"ngModel","ngModelChange"],["matInput","","placeholder","(Opcional) Empresa o Institucion:","name","empresa",3,"ngModel","ngModelChange","keyup"],["type","number","matInput","","placeholder","Numero de personas:","name","num_personas",3,"ngModel","ngModelChange","keyup"],[1,"w-100","d-flex","justify-content-center"],[3,"parametros","changeHora"],[1,"fs-12",3,"opciones","frmResponse"]],template:function(e,i){1&e&&(p.Qb(0,"div"),p.Qb(1,"h5"),p.Hc(2,"Datos de la Reserva"),p.Pb(),p.Lb(3,"hr"),p.Qb(4,"div",0),p.Qb(5,"mat-form-field",1),p.Qb(6,"input",2),p.Yb("ngModelChange",(function(e){return i.frmConfirma.nombre_reserva=e})),p.Pb(),p.Pb(),p.Pb(),p.Qb(7,"div",0),p.Qb(8,"mat-form-field",1),p.Qb(9,"input",3),p.Yb("ngModelChange",(function(e){return i.frmConfirma.empresa=e}))("keyup",(function(){return i.emitData()})),p.Pb(),p.Pb(),p.Pb(),p.Qb(10,"div",0),p.Qb(11,"mat-form-field",1),p.Qb(12,"input",4),p.Yb("ngModelChange",(function(e){return i.frmConfirma.num_personas=e}))("keyup",(function(){return i.emitData()})),p.Pb(),p.Pb(),p.Pb(),p.Qb(13,"div",5),p.Qb(14,"app-comp-get-hora",6),p.Yb("changeHora",(function(e){return i.setHora(e)})),p.Pb(),p.Pb(),p.Lb(15,"hr"),p.Qb(16,"app-comp-get-datos-cliente",7),p.Yb("frmResponse",(function(e){return i.frmClienteResponse(e)})),p.Pb(),p.Lb(17,"hr"),p.Pb()),2&e&&(p.zb(6),p.kc("ngModel",i.frmConfirma.nombre_reserva),p.zb(3),p.kc("ngModel",i.frmConfirma.empresa),p.zb(3),p.kc("ngModel",i.frmConfirma.num_personas),p.zb(2),p.kc("parametros",i.compHoraParams),p.zb(2),p.kc("opciones",i.opcionesFrmCliente))},directives:[T.c,be.a,n.c,n.p,n.s,n.v,Ks,Bs.a],styles:[""]}),e})();function Js(e,i){if(1&e&&(p.Qb(0,"div",12),p.Qb(1,"span",13),p.Hc(2),p.Pb(),p.Qb(3,"span",13),p.Hc(4),p.Pb(),p.Pb()),2&e){const e=p.cc().$implicit,i=p.cc();p.zb(1),p.kc("hidden",i.isDeliveryCliente),p.zb(1),p.Ic(e.descripcion),p.zb(1),p.kc("hidden",!i.isDeliveryCliente),p.zb(1),p.Ic(e.descripcion)}}const Gs=function(e){return{"pl-4":e}};function Ws(e,i){if(1&e&&(p.Qb(0,"li",26),p.Qb(1,"div",27),p.Qb(2,"span",28),p.Hc(3),p.dc(4,"number"),p.Pb(),p.Hc(5),p.Pb(),p.Pb()),2&e){const e=i.$implicit,t=p.cc(6);p.kc("matRippleColor",t.rippleColorSubItem),p.zb(1),p.kc("ngClass",p.pc(7,Gs,t.isHayCuentaBusqueda)),p.zb(2),p.Ic(p.fc(4,4,e.cantidad_seleccionada,"2.")),p.zb(2),p.Jc(" ",e.des," ")}}function Zs(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"div"),p.Qb(2,"ul",24),p.Fc(3,Ws,6,9,"li",25),p.Pb(),p.Pb(),p.Nb()),2&e){const e=p.cc().$implicit;p.zb(3),p.kc("ngForOf",e.subitems_view)}}function Xs(e,i){if(1&e){const e=p.Rb();p.Qb(0,"div",18),p.Qb(1,"div",19),p.Qb(2,"div",20),p.Yb("click",(function(){p.wc(e);const t=i.$implicit,o=p.cc(2).$implicit;return p.cc(2).openDlgItemToResumen(o,t)})),p.Qb(3,"p",21),p.Hc(4),p.dc(5,"titlecase"),p.Qb(6,"span",13),p.Hc(7),p.Pb(),p.Pb(),p.Fc(8,Zs,4,1,"ng-container",15),p.Qb(9,"p",22),p.Hc(10),p.dc(11,"number"),p.Pb(),p.Pb(),p.Qb(12,"div"),p.Qb(13,"app-comp-ctrl-add-fast",23),p.Yb("objResponse",(function(i){p.wc(e);const t=p.cc(2).$implicit,o=p.cc().$implicit;return p.cc().resultCantItemMercado(i,o,t)})),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){const e=i.$implicit,t=p.cc(4);p.zb(4),p.Jc(" ",p.ec(5,10,e.des)," "),p.zb(2),p.kc("hidden",!e.indicaciones),p.zb(1),p.Jc("( ",e.indicaciones," )"),p.zb(1),p.kc("ngIf",e.subitems_view),p.zb(2),p.Kc("",t.simbolo_moneda," ",p.fc(11,12,e.precio_print,"0.2"),""),p.zb(3),p.kc("objItem",e)("cantidad_show",e.cantidad_seleccionada)("comprimir",!1)("limitAdd",e.cantidad)}}function ea(e,i){if(1&e&&(p.Ob(0),p.Qb(1,"div",16),p.Qb(2,"span",4),p.Hc(3),p.dc(4,"titlecase"),p.Pb(),p.Pb(),p.Fc(5,Xs,14,15,"div",17),p.Nb()),2&e){const e=p.cc().$implicit;p.zb(3),p.Ic(p.ec(4,2,e.des)),p.zb(2),p.kc("ngForOf",e.items)}}function ia(e,i){if(1&e&&(p.Qb(0,"div",14),p.Fc(1,ea,6,4,"ng-container",15),p.Pb()),2&e){const e=i.$implicit;p.zb(1),p.kc("ngIf",e.count_items>0)}}function ta(e,i){if(1&e&&(p.Qb(0,"div"),p.Qb(1,"div",9),p.Fc(2,Js,5,4,"div",10),p.Fc(3,ia,2,1,"div",11),p.Pb(),p.Pb()),2&e){const e=i.$implicit,t=p.cc();p.zb(2),p.kc("ngIf",!t.isDeliveryCliente),p.zb(1),p.kc("ngForOf",e.secciones)}}function oa(e,i){if(1&e&&p.Lb(0,"img",36),2&e){const e=p.cc().$implicit;p.mc("src","../assets/images/",e.icon,"",p.xc),p.lc("matTooltip",e.motivo)}}function na(e,i){if(1&e&&(p.Qb(0,"div",34),p.Fc(1,oa,1,2,"img",35),p.Pb()),2&e){const e=i.$implicit;p.zb(1),p.kc("ngIf",e.visible)}}function sa(e,i){if(1&e&&(p.Ob(0,32),p.Fc(1,na,2,1,"div",33),p.Nb()),2&e){const e=p.cc(2);p.zb(1),p.kc("ngForOf",e.listIconsEntrega)}}function aa(e,i){if(1&e&&(p.Qb(0,"li",29),p.Qb(1,"div",30),p.Hc(2),p.dc(3,"titlecase"),p.Fc(4,sa,2,1,"ng-container",31),p.Pb(),p.Qb(5,"div"),p.Hc(6),p.dc(7,"number"),p.Pb(),p.Pb()),2&e){const e=i.$implicit;p.zb(2),p.Jc(" ",p.ec(3,3,e.descripcion)," "),p.zb(2),p.kc("ngIf",e.isDeliveryApp),p.zb(2),p.Ic(p.fc(7,5,e.importe,"0.2"))}}let ca=(()=>{class e{constructor(e,i,t,o,n){this.miPedidoService=e,this.infoToken=i,this.dialog=t,this.navigatorService=o,this.establecimientoService=n,this.miPedido=new Ae.a,this.objNewItemTiposConsumo=[],this.destroy$=new le.Subject,this.listIconsEntrega=[]}ngOnInit(){this.isDeliveryCliente=this.infoToken.isDelivery(),this.miPedido=this.miPedidoService.getMiPedido(),this.simbolo_moneda=this.establecimientoService.getSimboloMoneda();const e=this.establecimientoService.get();try{this.listIconsEntrega=JSON.parse(JSON.stringify(e.icons_entrega))}catch(i){this.listIconsEntrega=[]}this.miPedidoService.miPedidoObserver$.pipe(Object(Ye.a)(this.destroy$)).subscribe(e=>{this.miPedido=e})}ngAfterViewInit(){setTimeout(()=>{},500)}resultCantItemMercado(e,i,t){this.objNewItemTiposConsumo=[];const o=this.miPedidoService.findItemCarta(e);this.objItemTipoConsumoSelected=o.itemtiposconsumo,this.miPedidoService.setObjSeccionSeleced(t),this.miPedidoService.setobjItemTipoConsumoSelected(this.objItemTipoConsumoSelected),e.itemtiposconsumo=this.objItemTipoConsumoSelected;const n=this.objItemTipoConsumoSelected.filter(e=>e.idtipo_consumo===i.idtipo_consumo)[0],s=e.isSuma_selected?0:1;e.cantidad=e.cantidad?e.cantidad:NaN,o.cantidad=this.getCantidadItemCarta(e),this.miPedidoService.addItem2(n,o,s)}openDlgItemToResumen(e,i){const t=new S.e,o=this.miPedidoService.findItemCarta(i);t.autoFocus=!1,t.data={idTpcItemResumenSelect:null,seccion:e,item:o,objItemTipoConsumoSelected:o.itemtiposconsumo},t.panelClass=["my-dialog-orden-detalle","margen-0","margen-0"],this.dialog.open(De,t).afterClosed().subscribe(e=>{})}getCantidadItemCarta(e){return parseInt(this.miPedidoService.findItemCarta(e).cantidad.toString(),0)}goBackCarta(){this.navigatorService.setPageActive("carta")}}return e.\u0275fac=function(i){return new(i||e)(p.Kb(a.a),p.Kb(m.a),p.Kb(S.b),p.Kb(c.a),p.Kb(b.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-comp-list-item-pedido-cliente"]],inputs:{arrSubtotales:"arrSubtotales"},decls:13,vars:2,consts:[[1,"p-3","div-content-list"],[1,"d-flex","justify-content-between","mb-2"],[1,"fw-600","fs-17"],[1,"fa","fa-arrow-left","mr-2",3,"click"],[1,"fs-13"],[4,"ngFor","ngForOf"],[1,"div-tp-consumo","mt-3","mb-5"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item",4,"ngFor","ngForOf"],[1,"div-tp-consumo"],["class","div-plr titulo-tpc",4,"ngIf"],["let","i=index","class","secciones",4,"ngFor","ngForOf"],[1,"div-plr","titulo-tpc"],[3,"hidden"],["let","i=index",1,"secciones"],[4,"ngIf"],[1,"div-plr","titulo-seccion"],["class","div-seccion","matRipple","",4,"ngFor","ngForOf"],["matRipple","",1,"div-seccion"],[1,"item"],[1,"seccion-item",3,"click"],[1,"fs-14"],[1,"fw-600","fs-14"],[1,"div-control-add-fast",3,"objItem","cantidad_show","comprimir","limitAdd","objResponse"],[1,"w-100","m-0","ml-2"],["class","d-flex div-plr li-item fw-100 fs-13 text-secondary subitem-content-resumen","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"d-flex","div-plr","li-item","fw-100","fs-13","text-secondary","subitem-content-resumen",3,"matRippleColor"],[1,"d-flex","w-100","sub-item",3,"ngClass"],[1,"fw-600","mr-1"],[1,"d-flex","div-plr","li-item"],[1,"w-100"],["class","d-flex",4,"ngIf"],[1,"d-flex"],["class","d-inline",4,"ngFor","ngForOf"],[1,"d-inline"],["class","img-ico-entrega pl-2 text-secondary","alt","itemIcon.motivo",3,"src","matTooltip",4,"ngIf"],["alt","itemIcon.motivo",1,"img-ico-entrega","pl-2","text-secondary",3,"src","matTooltip"]],template:function(e,i){1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Qb(2,"div"),p.Qb(3,"span",2),p.Hc(4,"Mi Pedido"),p.Pb(),p.Pb(),p.Qb(5,"div"),p.Qb(6,"i",3),p.Yb("click",(function(){return i.goBackCarta()})),p.Pb(),p.Qb(7,"span",4),p.Hc(8,"Atr\xe1s"),p.Pb(),p.Pb(),p.Pb(),p.Fc(9,ta,4,2,"div",5),p.Qb(10,"div",6),p.Qb(11,"ul",7),p.Fc(12,aa,8,8,"li",8),p.Pb(),p.Pb(),p.Pb()),2&e&&(p.zb(9),p.kc("ngForOf",i.miPedido.tipoconsumo),p.zb(3),p.kc("ngForOf",i.arrSubtotales))},directives:[o.s,o.t,M.o,me.a,o.q,I.b],pipes:[o.F,o.g],styles:[".div-content-list[_ngcontent-%COMP%]{background:#eee}.div-tp-consumo[_ngcontent-%COMP%]{border-radius:5px;background:#fff;box-shadow:0 0 5px 0 #c1c1c1}.titulo-tpc[_ngcontent-%COMP%]{background:#bdbdbd;padding:5px;border-radius:5px 5px 0 0}.titulo-seccion[_ngcontent-%COMP%]{background:#d1d1d1;padding:5px}.div-border-titulo[_ngcontent-%COMP%]{border-radius:5px 5px 0 0}.div-seccion[_ngcontent-%COMP%]{padding:5px;border-bottom:1px solid #e0e0e0}.div-seccion[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.sub-item[_ngcontent-%COMP%]{padding:5px;background:#faebd7;border-radius:5px}.seccion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.ul-total[_ngcontent-%COMP%]{padding:5px;font-size:14px}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800;border-bottom:0}.img-ico-entrega[_ngcontent-%COMP%]{height:22px}"]}),e})();var ra=t("KEx+");let da=(()=>{class e{}return e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({factory:function(i){return new(i||e)},imports:[[o.c,n.j,Ho,jo.a,s.a]]}),e})();p.yc(qi,[o.q,o.r,o.s,o.t,o.A,o.w,o.x,o.y,o.z,o.u,o.v,n.F,n.u,n.E,n.c,n.v,n.y,n.a,n.B,n.C,n.x,n.p,n.q,n.A,n.l,n.k,n.w,n.b,n.d,n.s,n.t,n.r,Ge.i,Ge.e,Ge.g,Ge.f,Ge.k,k.b,k.a,Ko.b,M.o,Gt.a,Yo.b,Yo.c,T.b,T.c,T.f,T.g,T.h,T.i,T.j,be.a,be.c,se.c,se.d,se.a,se.f,se.e,se.b,v.a,U.a,U.c,S.f,S.d,S.j,S.g,S.c,Q.a,Q.c,Jo.b,Go.a,Go.j,Go.b,Go.d,Go.e,Go.h,Go.i,Go.c,Go.f,Wo.a,Wo.c,Wo.d,Wo.g,Wo.h,Wo.f,Wo.e,Zo.a,Zo.f,Zo.n,Zo.d,Zo.m,Zo.l,Zo.b,Zo.e,Zo.k,Zo.i,Zo.h,Zo.g,Zo.o,Zo.c,Jt.b,Jt.a,I.b,I.d,Xo.a,en.a,en.b,en.c,en.d,en.e,en.f,tn.a,tn.d,tn.c,M.j,M.i,O.a,O.c,on.a,on.h,on.d,on.b,M.g,on.c,on.g,M.m,on.i,on.f,nn.a,sn.c,sn.a,ne,P,an.a,Dn,pe,zn.a,Fn.a,Rn.a,bs,rn.a,En.a,jn,$n,ms.a,ps.a,hs.a,us.a,cn.a,ln.a,fs.a,gs.a,vs.a,Ms,js,xs,me.a,Bs.a,Ns.a,As.a,Ys,Ks,je,ca,An,F,G,jt,Xi,L,ra.a,f,eo,Kt,Mo,Ro,Rt,qi,po,Lo,x,Uo,De,Vo],[o.b,o.G,o.p,o.k,o.E,o.g,o.C,o.F,o.d,o.f,o.i,o.j,o.l])}}]);