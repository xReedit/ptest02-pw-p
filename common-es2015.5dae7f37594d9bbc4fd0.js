(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3jVI":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("fXoL"),n=i("ofXK");function r(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div"),s.Rb(1,"div",1),s.Zb("click",(function(){s.xc(e);const i=t.$implicit;return s.dc().xNextPregunta(i)})),s.Rb(2,"div",2),s.Mb(3,"img",3),s.Rb(4,"span"),s.Gc(5),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=t.$implicit;s.zb(3),s.nc("src","assets/images/encuesta-img/",e.img,"",s.yc),s.zb(2),s.Hc(e.descripcion)}}let o=(()=>{class e{constructor(){this.NextPregunta=new s.n}ngOnInit(){}xNextPregunta(e){setTimeout(()=>{this.NextPregunta.emit(e)},300)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Fb({type:e,selectors:[["app-encuesta-opcion"]],inputs:{ListOption:"ListOption"},outputs:{NextPregunta:"NextPregunta"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"divBtn","text-center",3,"click"],[1,"op"],["alt","btnOption",1,"btnIco",3,"src"]],template:function(e,t){1&e&&s.Ec(0,r,6,2,"div",0),2&e&&s.lc("ngForOf",t.ListOption)},directives:[n.s],styles:[".btnIco[_ngcontent-%COMP%]{opacity:.7;padding:10px;cursor:pointer;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.btnIco[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:1}.divBtn[_ngcontent-%COMP%]{display:grid}.divBtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.op[_ngcontent-%COMP%]{text-align:center;line-height:1}.op[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65px}"]}),e})()},Bq5b:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("fXoL"),n=i("+lji"),r=i("ofXK"),o=i("FKr1");function a(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",2),s.Rb(1,"div",3),s.Zb("click",(function(){s.xc(e);const i=t.$implicit;return s.dc().selectedCiudad(i)})),s.Rb(2,"span"),s.Gc(3),s.Qb(),s.Rb(4,"span"),s.Mb(5,"i",4),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=t.$implicit;s.zb(3),s.Ic(" ",e.ciudad,"")}}let c=(()=>{class e{constructor(e){this.crudService=e,this.cuidadSelected=new s.n}ngOnInit(){this.loadCiudades()}loadCiudades(){this.crudService.getAll("delivery","get-ciudades-delivery",!1,!1,!1).subscribe(e=>{console.log("res",e),this.listCiudadesServicio=e.data,this.isOnlyReserva&&(this.listCiudadesServicio=this.listCiudadesServicio.filter(e=>1===e.isreserva))})}selectedCiudad(e){this.cuidadSelected.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(n.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-select-ciudad-delivery"]],inputs:{isOnlyReserva:"isOnlyReserva"},outputs:{cuidadSelected:"cuidadSelected"},decls:2,vars:1,consts:[[1,"p-2"],["class","pb-2 border-bottom",4,"ngFor","ngForOf"],[1,"pb-2","border-bottom"],["matRipple","",1,"d-flex","justify-content-between","p-2","align-items-center",3,"click"],[1,"fa","fa-arrow-right"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Ec(1,a,6,1,"div",1),s.Qb()),2&e&&(s.zb(1),s.lc("ngForOf",t.listCiudadesServicio))},directives:[r.s,o.n],styles:[""]}),e})()},FDOz:function(e,t,i){"use strict";i.d(t,"a",(function(){return y})),i.d(t,"b",(function(){return p})),i("mrSG");var s=i("fXoL"),n=i("tyNb"),r=i("EY2u");const o=[];let a=(()=>{let e=class{constructor(e){this.router=e,this.trees=o}add(e){this.trees.push(e)}remove(e){this.trees.splice(this.trees.indexOf(e),1)}shouldPrefetch(e){const t=this.router.parseUrl(e);return this.trees.some(c.bind(null,t))}};return e.\u0275fac=function(t){return new(t||e)(s.Vb(n.d))},e.\u0275prov=s.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();function c(e,t){return function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(i=>t[i]===e[i])}(t.queryParams,e.queryParams)&&function e(t,i,s){if(t.segments.length>s.length)return!!d(t.segments.slice(0,s.length),s)&&!i.hasChildren();if(t.segments.length===s.length){if(!d(t.segments,s))return!1;if(!i.hasChildren())return!0;for(const s in i.children){if(!t.children[s])break;if(e(t.children[s],i.children[s],i.children[s].segments))return!0}return!1}{const r=s.slice(0,t.segments.length),o=s.slice(t.segments.length);return!!d(t.segments,r)&&!!t.children[n.c]&&e(t.children[n.c],i,o)}}(t.root,e.root,e.root.segments)}function d(e,t){return e.length===t.length&&e.every((e,i)=>e.path===t[i].path||e.path.startsWith(":")||t[i].path.startsWith(":"))}const u="undefined"!=typeof window?window.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)}:()=>{},l=()=>"undefined"!=typeof window&&!!window.IntersectionObserver,h=new s.q("LinkHandler");let f=(()=>{let e=class{constructor(e,t){this.loader=e,this.queue=t,this.elementLink=new Map,this.observer=l()?new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target,i=this.elementLink.get(t);this.queue.add(i.urlTree),this.observer.unobserve(t),u(()=>{this.loader.preload().subscribe(()=>{}),this.queue.remove(i.urlTree)})}})}):null}register(e){this.elementLink.set(e.element,e),this.observer.observe(e.element)}unregister(e){this.elementLink.has(e.element)&&(this.observer.unobserve(e.element),this.elementLink.delete(e.element))}supported(){return l()}};return e.\u0275fac=function(t){return new(t||e)(s.Vb(n.j),s.Vb(a))},e.\u0275prov=s.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),b=(()=>{let e=class{constructor(e,t){this.loader=e,this.queue=t}register(e){this.queue.add(e.urlTree),u(()=>this.loader.preload().subscribe(()=>{}))}unregister(e){}supported(){return!0}};return e.\u0275fac=function(t){return new(t||e)(s.Vb(n.j),s.Vb(a))},e.\u0275prov=s.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),p=(()=>{let e=class{constructor(e,t,i,s){this.linkHandlers=e,this.el=t,this.linkHandler=this.linkHandlers.filter(e=>e.supported()).shift(),this.rl=i||s}ngOnChanges(e){e.routerLink&&(this.linkHandler.unregister(this),this.linkHandler.register(this))}ngOnDestroy(){this.linkHandler.unregister(this)}get element(){return this.el.nativeElement}get urlTree(){return this.rl.urlTree}};return e.\u0275fac=function(t){return new(t||e)(s.Lb(h),s.Lb(s.l),s.Lb(n.e,8),s.Lb(n.g,8))},e.\u0275dir=s.Gb({type:e,selectors:[["","routerLink",""]],inputs:{routerLink:"routerLink"},features:[s.xb]}),e})(),g=(()=>{let e=class{constructor(e,t){this.queue=e,this.router=t,this.loading=new Set}preload(e,t){if(this.loading.has(e))return r.a;const i="undefined"!=typeof window?navigator.connection:void 0;if(i&&((i.effectiveType||"").includes("2g")||i.saveData))return r.a;if(e.data&&!1===e.data.preload)return r.a;const s=m(this.router.config,e);return this.queue.shouldPrefetch(s)?(this.loading.add(e),t()):r.a}};return e.\u0275fac=function(t){return new(t||e)(s.Vb(a),s.Vb(n.d))},e.\u0275prov=s.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();const m=(e,t)=>{e=e.slice();const i=new Map,s=new Set;for(;e.length;){const n=e.shift();if(s.add(n),n===t)break;let r=n.children||[];const o=n._loadedConfig;o&&o.routes&&(r=r.concat(o.routes)),r.forEach(t=>{s.has(t)||(i.set(t,n),e.push(t))})}let n="",r=t;for(;r;)n=v(r)?`/${r.path}${n}`:`/(${r.outlet}:${r.path}${n})`,r=i.get(r);return n};function v(e){return e.outlet===n.c||!e.outlet}let y=(()=>{let e=class{};return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},providers:[{provide:h,useClass:f,multi:!0},{provide:h,useClass:b,multi:!0},a,g]}),e})()},OzqD:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("A8zI"),n=i("eI2u"),r=i("+lji"),o=i("zOUh"),a=i("7RJT"),c=i("fXoL");let d=(()=>{class e{constructor(e,t,i){this.listenStatusService=e,this.crudService=t,this.infoTokenService=i,this.estadoPedido=new s.a,this.keyStorage="sys::status",this.timeInterval=null,this.timeNow=new Date,this.hayPedidoPendiente=!1,this.timeRestanteAproxSource=new a.BehaviorSubject(0),this.timeRestanteAprox$=this.timeRestanteAproxSource.asObservable(),this.hayCuentaClienteSource=new a.BehaviorSubject(null),this.hayCuentaCliente$=this.hayCuentaClienteSource.asObservable(),this.deserializar(),this.dataPost={idsede:this.infoTokenService.getInfoUs().idsede,idcliente:this.infoTokenService.getInfoUs().idcliente}}deserializar(){let e=localStorage.getItem(this.keyStorage);e="{}"===e?null:e,this.estadoPedido=e?JSON.parse(e):new s.a}get(){this.deserializar(),this.getCuentaTotales()}getCuentaTotales(){let e=0;return this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe(t=>{0!==t.data.length?(e=t.data[0].importe||0,this.setImporte(e),this.estadoPedido.hayPedidoCliente=!0,this.calcTimeAprox(),this.notifyChange()):this.estadoPedido.hayPedidoCliente=!1}),e}getCuenta(){this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente",!1).subscribe(e=>{if(0!==e.data.length)return this.estadoPedido.hayPedidoCliente=!0,this.calcTimeAprox(),this.hayCuentaClienteSource.next(e),this.notifyChange(),e;this.estadoPedido.hayPedidoCliente=!1})}getImporteCuenta(){return new Promise(e=>{this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe(t=>{e(t.success?t.data[0].importe:0)})})}getObj(){return this.estadoPedido||this.deserializar(),this.estadoPedido}setEstado(e){this.deserializar(),this.estadoPedido.estado=e,this.notifyChange()}setImporte(e){this.deserializar(),this.estadoPedido.importe=e,this.notifyChange()}setHoraInitPedido(e){this.deserializar(),this.estadoPedido.horaInt=e,this.notifyChange()}setTimeAprox(e){this.deserializar(),this.estadoPedido.isTiempoAproxCumplido=e,this.notifyChange()}setHayPedidoPendiente(e){this.deserializar(),this.estadoPedido.hayPedidoClientePendiente=e,this.notifyChange()}setisPagada(e){this.deserializar(),this.estadoPedido.isPagada=e,this.notifyChange()}setisRegisterPago(e){this.deserializar(),this.estadoPedido.isRegisterOnePago=e,this.notifyChange()}calcTimeAprox(){this.crudService.postFree(this.dataPost,"pedido","calc-time-despacho",!1).subscribe(e=>{this.estadoPedido.estado=0,this.estadoPedido.numMinAprox=e.data[0].rpt,this.estadoPedido.isTiempoAproxCumplido=!1,this.notifyChange(),this.getTimeAprox()})}getTimeAprox(){return 0===this.estadoPedido.estado?this.timeInterval=setTimeout(()=>{let e=this.calTimeMin();e<=0?(this.estadoPedido.estado=1,this.notifyChange(),this.clearTimeout(),clearTimeout(this.timeInterval),e=0):this.getTimeAprox(),this.timeRestanteAproxSource.next(e)},2e3):this.clearTimeout(),0}calTimeMin(){let e=(new Date).getTime()-this.estadoPedido.horaInt;return e=Math.round(e%864e5%36e5/6e4),e=this.estadoPedido.numMinAprox-e,isNaN(e)?0:e}clearTimeout(){clearTimeout(this.timeInterval),this.timeInterval=null}notifyChange(){this.listenStatusService.setEstadoPedido(this.estadoPedido),localStorage.setItem(this.keyStorage,JSON.stringify(this.estadoPedido))}}return e.\u0275fac=function(t){return new(t||e)(c.Vb(n.a),c.Vb(r.a),c.Vb(o.a))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},PCNd:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("ofXK"),n=i("FDOz"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[s.c,n.a],n.a]}),e})()},W2jQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("0IaG"),n=i("fXoL");let r=(()=>{class e{constructor(e,t){switch(this.dialogRef=e,this.msj="",this.titleBtnCancel="No",this.titleBtnSuccess="Si, por favor",t?t.idMjs:0){case 0:this.msj="Desea que se le notifique cuando su pedido este listo?";break;case 1:this.msj="Desea saber cuando tenga descuentos y/o ofertas?"}}ngOnInit(){}cerrarDlg(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(s.i),n.Lb(s.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-dialog-desicion"]],decls:10,vars:3,consts:[[1,"p-3"],[1,"fw-100","fs-15"],[1,"d-flex"],[1,"btn","btn-success",3,"click"],[1,"ml-2","btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(n.Rb(0,"div",0),n.Rb(1,"span",1),n.Gc(2),n.Qb(),n.Mb(3,"hr"),n.Rb(4,"div",2),n.Rb(5,"button",3),n.Zb("click",(function(){return t.cerrarDlg(!0)})),n.Gc(6),n.Qb(),n.Rb(7,"button",4),n.Zb("click",(function(){return t.cerrarDlg(!1)})),n.Gc(8),n.Qb(),n.Qb(),n.Mb(9,"br"),n.Qb()),2&e&&(n.zb(2),n.Hc(t.msj),n.zb(4),n.Hc(t.titleBtnSuccess),n.zb(2),n.Hc(t.titleBtnCancel))},styles:[""]}),e})()},dDDv:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("+lji"),n=i("zOUh"),r=i("NEqF"),o=i("fXoL"),a=i("Jho9");let c=(()=>{class e{constructor(e,t,i){this.swPush=e,this.crudService=t,this.infoTokenService=i,this.swPush.notificationClicks.subscribe(e=>{alert("aaaaaaaaaaa"),console.log("clic notification",e)})}getIsTienePermiso(){return"granted"===Notification.permission}suscribirse(){console.log("llego a suscribirse estado this.swPush.isEnabled: ",this.swPush.isEnabled),this.keySuscribtion()}keySuscribtion(){this.swPush.requestSubscription({serverPublicKey:r.h}).then(e=>{console.log("suscrito a notificaciones push",e),this.saveSuscripcion(e)}).catch(console.error)}saveSuscripcion(e){this.crudService.postFree({suscripcion:e,idcliente:this.infoTokenService.infoUsToken.idcliente},"push","suscripcion",!1).subscribe(e=>console.log(e))}}return e.\u0275fac=function(t){return new(t||e)(o.Vb(a.b),o.Vb(s.a),o.Vb(n.a))},e.\u0275prov=o.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"nYx/":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("zOUh"),n=i("+lji"),r=i("yFR0"),o=i("HDdC"),a=i("JOr0"),c=i("fXoL");let d=(()=>{class e{constructor(e,t,i,s){this.infoTokenService=e,this.crudService=t,this.socketService=i,this.establecimiento=s,this.infoToken=this.infoTokenService.getInfoUs()}getSubtotales(){this.objTotales=JSON.parse(atob(localStorage.getItem("sys::st")))}registrarPago(e,t,i,s=!1){this.getSubtotales();const n={idcliente:this.infoToken.idcliente,idorg:this.establecimiento.get().idorg,idsede:this.establecimiento.get().idsede,mesa:this.infoToken.numMesaLector,importe:e},r={idcliente:n.idcliente,idorg:n.idorg,idsede:n.idsede,mesa:n.mesa,importe:n.importe,isdelivery:s,objSubTotal:this.objTotales,objTransaction:t,objCliente:i,objOperacion:n};return new o.a(e=>{this.crudService.postFree(r,"transaction","registrar-pago",!1).subscribe(t=>{this.socketService.emit("notificar-pago-pwa",r),this.setIdPwaPago(t.data[0].idregistro_pago),e.next(t.data[0].idregistro_pago)})})}setIdPwaPago(e){localStorage.setItem("sys::irp",e.toString())}getIdPwaPago(){let e=parseInt(localStorage.getItem("sys::irp"),0);return e=e?0:e,localStorage.removeItem("sys::irp"),e}getIpClient(){let e="";return this.crudService.getFree("https://api.ipify.org?format=jsonp&callback=?").subscribe(t=>{e=t.ip}),e}getDataTrasaction(){return this.loadDataTransaction(),this.responseTransaction.isSuccess=!(this.responseTransaction&&!this.responseTransaction.error),this.responseTransaction}setIdRegistroPagoTransaction(e){this.loadDataTransaction(),this.responseTransaction.idregistro_pago=e,this.upDataTransaction()}loadDataTransaction(){this.responseTransaction=JSON.parse(localStorage.getItem("sys::transaction-response"))}upDataTransaction(){localStorage.setItem("sys::transaction-response",JSON.stringify(this.responseTransaction))}removeLocalDataTransaction(){localStorage.removeItem("sys::transaction-response"),this.responseTransaction=null}}return e.\u0275fac=function(t){return new(t||e)(c.Vb(s.a),c.Vb(n.a),c.Vb(r.a),c.Vb(a.a))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);