(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{OzqD:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("A8zI"),i=n("eI2u"),o=n("+lji"),c=n("zOUh"),r=n("7RJT"),s=n("CcnG"),l=function(){function e(e,t,n){this.listenStatusService=e,this.crudService=t,this.infoTokenService=n,this.estadoPedido=new a.a,this.keyStorage="sys::status",this.timeInterval=null,this.timeNow=new Date,this.hayPedidoPendiente=!1,this.timeRestanteAproxSource=new r.BehaviorSubject(0),this.timeRestanteAprox$=this.timeRestanteAproxSource.asObservable(),this.hayCuentaClienteSource=new r.BehaviorSubject(null),this.hayCuentaCliente$=this.hayCuentaClienteSource.asObservable(),this.deserializar(),this.dataPost={idsede:this.infoTokenService.getInfoUs().idsede,idcliente:this.infoTokenService.getInfoUs().idcliente}}return e.prototype.deserializar=function(){var e=localStorage.getItem(this.keyStorage);this.estadoPedido=(e="{}"===e?null:e)?JSON.parse(e):new a.a},e.prototype.get=function(){this.deserializar(),this.getCuentaTotales()},e.prototype.getCuentaTotales=function(){var e=this,t=0;return this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe(function(n){0!==n.data.length?(e.setImporte(t=n.data[0].importe||0),e.estadoPedido.hayPedidoCliente=!0,e.calcTimeAprox(),console.log("cuenta cliente totales",n),e.notifyChange()):e.estadoPedido.hayPedidoCliente=!1}),t},e.prototype.getCuenta=function(){var e=this;this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente",!1).subscribe(function(t){if(0!==t.data.length)return e.estadoPedido.hayPedidoCliente=!0,e.calcTimeAprox(),console.log("cuenta cliente",t),e.hayCuentaClienteSource.next(t),e.notifyChange(),t;e.estadoPedido.hayPedidoCliente=!1})},e.prototype.getImporteCuenta=function(){var e=this;return new Promise(function(t){e.crudService.postFree(e.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe(function(e){t(e.success?e.data[0].importe:0)})})},e.prototype.getObj=function(){return this.estadoPedido||this.deserializar(),this.estadoPedido},e.prototype.setEstado=function(e){this.deserializar(),this.estadoPedido.estado=e,this.notifyChange()},e.prototype.setImporte=function(e){this.deserializar(),this.estadoPedido.importe=e,this.notifyChange()},e.prototype.setHoraInitPedido=function(e){this.deserializar(),this.estadoPedido.horaInt=e,this.notifyChange()},e.prototype.setTimeAprox=function(e){this.deserializar(),this.estadoPedido.isTiempoAproxCumplido=e,this.notifyChange()},e.prototype.setHayPedidoPendiente=function(e){this.deserializar(),this.estadoPedido.hayPedidoClientePendiente=e,this.notifyChange()},e.prototype.setisPagada=function(e){this.deserializar(),this.estadoPedido.isPagada=e,this.notifyChange()},e.prototype.setisRegisterPago=function(e){this.deserializar(),this.estadoPedido.isRegisterOnePago=e,this.notifyChange()},e.prototype.calcTimeAprox=function(){var e=this;this.crudService.postFree(this.dataPost,"pedido","calc-time-despacho",!1).subscribe(function(t){e.estadoPedido.estado=0,e.estadoPedido.numMinAprox=t.data[0].rpt,e.estadoPedido.isTiempoAproxCumplido=!1,e.notifyChange(),console.log("this.estadoPedido",e.estadoPedido),e.getTimeAprox()})},e.prototype.getTimeAprox=function(){var e=this;return 0===this.estadoPedido.estado?this.timeInterval=setTimeout(function(){var t=e.calTimeMin();t<=0?(e.estadoPedido.estado=1,e.notifyChange(),e.clearTimeout(),clearTimeout(e.timeInterval),t=0):e.getTimeAprox(),e.timeRestanteAproxSource.next(t)},2e3):this.clearTimeout(),0},e.prototype.calTimeMin=function(){var e=(new Date).getTime()-this.estadoPedido.horaInt;return e=Math.round(e%864e5%36e5/6e4),e=this.estadoPedido.numMinAprox-e,isNaN(e)?0:e},e.prototype.clearTimeout=function(){clearTimeout(this.timeInterval),this.timeInterval=null},e.prototype.notifyChange=function(){this.listenStatusService.setEstadoPedido(this.estadoPedido),localStorage.setItem(this.keyStorage,JSON.stringify(this.estadoPedido))},e.ngInjectableDef=s.Ub({factory:function(){return new e(s.Vb(i.a),s.Vb(o.a),s.Vb(c.a))},token:e,providedIn:"root"}),e}()},Z5h4:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var a=n("CcnG"),i=(n("de3e"),n("Ip0R"),n("M2Lx")),o=(n("Fzqc"),n("Wf4p")),c=(n("ZYjt"),n("dWZg")),r=n("wFw1"),s=(n("gIcY"),n("lLAP"),a.sb({encapsulation:2,styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.91026}50%{animation-timing-function:cubic-bezier(0,0,.2,.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0,0,0,1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(.4,0,1,1);stroke-dashoffset:0}to{stroke-dashoffset:-22.91026}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}100%,32.8%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0,0,.2,.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}@media (-ms-high-contrast:active){.mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0,0,.2,.1),opacity 90ms cubic-bezier(0,0,.2,.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.mat-checkbox-persistent-ripple{width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media (hover:none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.91026;stroke-dasharray:22.91026;stroke-width:2.13333px}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0);border-radius:2px}@media (-ms-high-contrast:active){.mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0s mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0s mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:.3s linear 0s mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}"],data:{}}));function l(e){return a.Qb(2,[a.Mb(671088640,1,{_inputElement:0}),a.Mb(671088640,2,{ripple:0}),(e()(),a.ub(2,0,[["label",1]],null,16,"label",[["class","mat-checkbox-layout"]],[[1,"for",0]],null,null,null,null)),(e()(),a.ub(3,0,null,null,10,"div",[["class","mat-checkbox-inner-container"]],[[2,"mat-checkbox-inner-container-no-side-margin",null]],null,null,null,null)),(e()(),a.ub(4,0,[[1,0],["input",1]],null,0,"input",[["class","mat-checkbox-input cdk-visually-hidden"],["type","checkbox"]],[[8,"id",0],[8,"required",0],[8,"checked",0],[1,"value",0],[8,"disabled",0],[1,"name",0],[8,"tabIndex",0],[8,"indeterminate",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-checked",0]],[[null,"change"],[null,"click"]],function(e,t,n){var a=!0,i=e.component;return"change"===t&&(a=!1!==i._onInteractionEvent(n)&&a),"click"===t&&(a=!1!==i._onInputClick(n)&&a),a},null,null)),(e()(),a.ub(5,0,null,null,3,"div",[["class","mat-checkbox-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),a.tb(6,212992,[[2,4]],0,o.f,[a.k,a.A,c.a,[2,o.d],[2,r.a]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),a.Jb(7,{enterDuration:0}),(e()(),a.ub(8,0,null,null,0,"div",[["class","mat-ripple-element mat-checkbox-persistent-ripple"]],null,null,null,null,null)),(e()(),a.ub(9,0,null,null,0,"div",[["class","mat-checkbox-frame"]],null,null,null,null,null)),(e()(),a.ub(10,0,null,null,3,"div",[["class","mat-checkbox-background"]],null,null,null,null,null)),(e()(),a.ub(11,0,null,null,1,":svg:svg",[[":xml:space","preserve"],["class","mat-checkbox-checkmark"],["focusable","false"],["version","1.1"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(e()(),a.ub(12,0,null,null,0,":svg:path",[["class","mat-checkbox-checkmark-path"],["d","M4.1,12.7 9,17.6 20.3,6.3"],["fill","none"],["stroke","white"]],null,null,null,null,null)),(e()(),a.ub(13,0,null,null,0,"div",[["class","mat-checkbox-mixedmark"]],null,null,null,null,null)),(e()(),a.ub(14,0,[["checkboxLabel",1]],null,4,"span",[["class","mat-checkbox-label"]],null,[[null,"cdkObserveContent"]],function(e,t,n){var a=!0;return"cdkObserveContent"===t&&(a=!1!==e.component._onLabelTextChange()&&a),a},null,null)),a.tb(15,1196032,null,0,i.a,[i.b,a.k,a.A],null,{event:"cdkObserveContent"}),(e()(),a.ub(16,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(e()(),a.Ob(-1,null,["\xa0"])),a.Fb(null,0)],function(e,t){var n=t.component,i=e(t,7,0,150);e(t,6,0,!0,20,i,n._isRippleDisabled(),a.Gb(t,2))},function(e,t){var n=t.component;e(t,2,0,n.inputId),e(t,3,0,!a.Gb(t,14).textContent||!a.Gb(t,14).textContent.trim()),e(t,4,1,[n.inputId,n.required,n.checked,n.value,n.disabled,n.name,n.tabIndex,n.indeterminate,n.ariaLabel||null,n.ariaLabelledby,n._getAriaChecked()]),e(t,5,0,a.Gb(t,6).unbounded)})}},"nYx/":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("zOUh"),i=n("+lji"),o=n("yFR0"),c=n("CcnG"),r=function(){function e(e,t,n){this.infoTokenService=e,this.crudService=t,this.socketService=n,this.infoToken=this.infoTokenService.getInfoUs()}return e.prototype.getSubtotales=function(){this.objTotales=JSON.parse(atob(localStorage.getItem("sys::st")))},e.prototype.registrarPago=function(e,t,n){var a=this;this.getSubtotales();var i={idcliente:this.infoToken.idcliente,idorg:this.infoToken.idorg,idsede:this.infoToken.idsede,mesa:this.infoToken.numMesaLector,importe:e},o={idcliente:i.idcliente,idorg:i.idorg,idsede:i.idsede,mesa:i.mesa,importe:i.importe,objSubTotal:this.objTotales,objTransaction:t,objCliente:n,objOperacion:i};this.crudService.postFree(o,"transaction","registrar-pago",!1).subscribe(function(e){a.setIdRegistroPagoTransaction(e.data[0].idregistro_pago),a.socketService.emit("notificar-pago-pwa",o)})},e.prototype.getIpClient=function(){var e="";return this.crudService.getFree("https://api.ipify.org?format=jsonp&callback=?").subscribe(function(t){e=t.ip}),e},e.prototype.getDataTrasaction=function(){return this.loadDataTransaction(),this.responseTransaction.isSuccess=!(this.responseTransaction&&!this.responseTransaction.error),this.responseTransaction},e.prototype.setIdRegistroPagoTransaction=function(e){this.loadDataTransaction(),this.responseTransaction.idregistro_pago=e,this.upDataTransaction()},e.prototype.loadDataTransaction=function(){this.responseTransaction=JSON.parse(localStorage.getItem("sys::transaction-response"))},e.prototype.upDataTransaction=function(){localStorage.setItem("sys::transaction-response",JSON.stringify(this.responseTransaction))},e.prototype.removeLocalDataTransaction=function(){localStorage.removeItem("sys::transaction-response"),this.responseTransaction=null},e.ngInjectableDef=c.Ub({factory:function(){return new e(c.Vb(a.a),c.Vb(i.a),c.Vb(o.a))},token:e,providedIn:"root"}),e}()},"wne+":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("CcnG"),i=function(){function e(){}return e.prototype.primeraConMayusculas=function(e){return(e=e.toLowerCase()).charAt(0).toUpperCase()+e.slice(1)},e.prototype.reformatDate=function(e){var t=e.split("-");return t[2]+"/"+t[1]+"/"+t[0]},e.ngInjectableDef=a.Ub({factory:function(){return new e},token:e,providedIn:"root"}),e}()}}]);