{"version":3,"sources":["webpack:///src/app/pages/encuesta/encuesta/encuesta.component.html","webpack:///src/app/pages/encuesta/encuesta.module.ts","webpack:///src/app/pages/encuesta/encuesta.routing.ts","webpack:///src/app/pages/encuesta/encuesta/encuesta.component.css","webpack:///src/app/pages/encuesta/encuesta/encuesta.component.ts"],"names":["EncuestaModule","declarations","imports","routes","path","component","data","titulo","children","redirectTo","EncuestaRoutingModule","forChild","exports","EncuestaComponent","infoTokenService","crudService","navigatorService","socketService","listenStatusService","establecimientoService","nomSede","ciudadSede","countFin","selectedTabEncuesta","intervalConteo","isBtnPagoShow","ListRespuestas","xIdEncuesta","countOption","infoToken","getInfoUs","infoSede","get","nombre","ciudad","dataPost","idsede","loadOpciones","loadEncuesta","disabledBack","history","pushState","location","href","window","onpopstate","go","isBtnPagoShow$","subscribe","res","postFree","success","length","cerrarSession","_data","preguntas","idencuesta","titulo_inicio","inicio","titulo_fin","fin","listPreguntas","listOption","event","pregunta","txt_comentario","isComentario","obligatorio","rpt","idencuesta_pregunta","idencuesta_respuesta","iscomentario","comentario","push","guardarEncuesta","cuentaRegresiva","_dataSend","item","i","conteoFinEncuesta","setTimeout","isSocketOpenReconect","closeConnection","selector","template"],"mappings":"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","file":"pages-encuesta-encuesta-module-es5.js","sourcesContent":["export default \"<div class=\\\"animated fadeIn\\\">\\n    <div class=\\\"text-center p-3 encabezado-encuesta\\\">\\n        <p class=\\\"fs-17 fw-600 m-0\\\">{{nomSede}}</p>\\n        <span class=\\\"fs-14 fw-100 p-0\\\">{{ciudadSede}}</span>        \\n    </div>\\n    <!-- <hr> -->\\n    <div class=\\\"text-center xcontainer-centrado p-3 hv-50\\\">\\n        <!-- <div> \\n            <div>\\n                <div>\\n                    <div class=\\\"opitem\\\" id=\\\"item-i\\\" *ngIf=\\\"ini_visible\\\" #opitem>\\n                        <p class=\\\"fs-17 fw-600\\\">{{titulo_inicio}}</p>\\n                        <img src=\\\"assets/images/reactions_1.gif\\\" width=\\\"100%\\\" alt=\\\".\\\">\\n                    </div>\\n\\n                    <div *ngFor=\\\"let item of listPreguntas\\\">\\n                        <div class=\\\"opitem\\\" id=\\\"item-i\\\" #opitem>\\n                            <p class=\\\"fs-17 fw-600\\\">{{item.pregunta}}</p>\\n                            <app-encuesta-opcion class=\\\"d-flex\\\" [ListOption] = \\\"listOption\\\"></app-encuesta-opcion>\\n                        </div>\\n                    </div>\\n\\n                    <div class=\\\"opitem\\\" id=\\\"item-i\\\" #opitem>\\n                        <p class=\\\"fs-17 fw-600\\\">{{titulo_fin}}</p>                        \\n                    </div>\\n\\n                </div>                \\n            </div>                   \\n\\n            <hr>\\n\\n            <button mat-flat-button color=\\\"primary\\\">Listo, Comenzar</button>            \\n\\n        </div>     -->\\n\\n        <mat-tab-group [disableRipple]=\\\"true\\\" [dynamicHeight]=\\\"false\\\" [selectedIndex]=\\\"selectedTabEncuesta\\\" class=\\\"contain-size\\\">\\n            <mat-tab disabled class=\\\"overflow-hidden\\\">\\n                <br><br>\\n                <div class=\\\"overflow-hidden\\\">\\n                    <p class=\\\"fs-17 fw-600\\\">{{titulo_inicio}}</p>\\n                    <img src=\\\"assets/images/reactions_1.gif\\\" width=\\\"100%\\\" alt=\\\".\\\">\\n                    <br><br><br>\\n                    <button mat-flat-button color=\\\"primary\\\" (click)=\\\"pasarTab()\\\">Ok, Empezar</button>   \\n                </div>\\n            </mat-tab>\\n\\n            <mat-tab disabled *ngFor=\\\"let item of listPreguntas\\\">\\n                <br><br>\\n                <div class=\\\"overflow-hidden\\\">\\n                    <div #opitem>\\n                        <p class=\\\"fs-17 fw-600\\\">{{item.pregunta}}</p>\\n                        <ng-container *ngIf=\\\"item.obligatorio === '1'; else elseTemplate\\\">\\n                            <div>\\n                                <textarea id=\\\"txt_comentario\\\" style=\\\"width: 70%;\\\" id=\\\"txt_comentario\\\" cols=\\\"100\\\" rows=\\\"3\\\" #txt_comentario></textarea>\\n                                <br><br>\\n                                <button mat-flat-button color=\\\"primary\\\" (click)=\\\"pasarTab(listOption, item, txt_comentario.value)\\\">Listo, Enviar</button>   \\n                            </div>\\n                        </ng-container>\\n                        <ng-template #elseTemplate>\\n                            <app-encuesta-opcion class=\\\"d-flex\\\" [ListOption] = \\\"listOption\\\" (NextPregunta)=\\\"pasarTab($event, item)\\\"></app-encuesta-opcion>\\n                        </ng-template>\\n                        \\n                    </div>\\n                </div>\\n            </mat-tab>\\n\\n            <mat-tab disabled>\\n                <br><br>\\n                <div class=\\\"overflow-hidden\\\">\\n                    <p class=\\\"fs-17 fw-600\\\">{{titulo_fin}}</p>        \\n                    <br>\\n                    <p class=\\\"text-secondary fs-50 fw-100\\\">{{countFin | number: '2.'}}</p>  \\n                </div>\\n            </mat-tab>\\n          </mat-tab-group>\\n    </div>\\n\\n    <footer class=\\\"xfooter text-center bg-white p-3\\\" *ngIf=\\\"selectedTabEncuesta === 0\\\">\\n        <button mat-flat-button color=\\\"accent\\\" (click)=\\\"cerrarSession()\\\">En otro momento, gracias.</button>\\n    </footer>\\n</div>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { EncuestaRoutingModule } from './encuesta.routing';\nimport { MaterialModule } from 'src/app/core/material/material.module';\nimport { ComponentesModule } from 'src/app/componentes/componentes.module';\nimport { EncuestaComponent } from './encuesta/encuesta.component';\n\n\n\n@NgModule({\n  declarations: [\n    EncuestaComponent\n  ],\n  imports: [\n    CommonModule,\n    EncuestaRoutingModule,\n    MaterialModule,\n    ComponentesModule\n  ]\n})\nexport class EncuestaModule { }\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { EncuestaComponent } from './encuesta/encuesta.component';\r\n\r\nconst routes: Routes = [{\r\n    path: '', component: EncuestaComponent,\r\n    data: { titulo: 'Inicio' },\r\n    children: [\r\n        {\r\n            path: '', redirectTo: 'inicio'\r\n        }\r\n    ]\r\n}];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class EncuestaRoutingModule { }\r\n","export default \".encabezado-encuesta {\\r\\n    position: fixed;\\r\\n    top: 0;\\r\\n    width: 100%;\\r\\n    background: #3F51B5;\\r\\n    color: #f5f5f5;\\r\\n}\\r\\n\\r\\n.contain-size {\\r\\n    contain: size;\\r\\n}\\r\\n\\r\\n.mat-tab-header-pagination.mat-tab-header-pagination-disabled {\\r\\n    display: none !important;\\r\\n}\\r\\n\\r\\n.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination {\\r\\n    display: none !important;\\r\\n}\\r\\n\\r\\n::ng-deep .mat-tab-header-pagination {\\r\\n    display: none !important;\\r\\n}\\r\\n\\r\\n.hv-50 {\\r\\n    height: 45vh;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZW5jdWVzdGEvZW5jdWVzdGEvZW5jdWVzdGEuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGVBQWU7SUFDZixNQUFNO0lBQ04sV0FBVztJQUNYLG1CQUFtQjtJQUNuQixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLHdCQUF3QjtBQUM1Qjs7QUFFQTtJQUNJLHdCQUF3QjtBQUM1Qjs7QUFFQTtJQUNJLHdCQUF3QjtBQUM1Qjs7QUFFQTtJQUNJLFlBQVk7QUFDaEIiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9lbmN1ZXN0YS9lbmN1ZXN0YS9lbmN1ZXN0YS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVuY2FiZXphZG8tZW5jdWVzdGEge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kOiAjM0Y1MUI1O1xyXG4gICAgY29sb3I6ICNmNWY1ZjU7XHJcbn1cclxuXHJcbi5jb250YWluLXNpemUge1xyXG4gICAgY29udGFpbjogc2l6ZTtcclxufVxyXG5cclxuLm1hdC10YWItaGVhZGVyLXBhZ2luYXRpb24ubWF0LXRhYi1oZWFkZXItcGFnaW5hdGlvbi1kaXNhYmxlZCB7XHJcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5tYXQtdGFiLWhlYWRlci1wYWdpbmF0aW9uLWNvbnRyb2xzLWVuYWJsZWQgLm1hdC10YWItaGVhZGVyLXBhZ2luYXRpb24ge1xyXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG46Om5nLWRlZXAgLm1hdC10YWItaGVhZGVyLXBhZ2luYXRpb24ge1xyXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4uaHYtNTAge1xyXG4gICAgaGVpZ2h0OiA0NXZoO1xyXG59Il19 */\";","import { Component, OnInit, ViewChildren, QueryList, ElementRef } from '@angular/core';\nimport { InfoTockenService } from 'src/app/shared/services/info-token.service';\nimport { UsuarioTokenModel } from 'src/app/modelos/usuario.token.model';\nimport { CrudHttpService } from 'src/app/shared/services/crud-http.service';\nimport { NavigatorLinkService } from 'src/app/shared/services/navigator-link.service';\nimport { MipedidoService } from 'src/app/shared/services/mipedido.service';\nimport { throwMatDialogContentAlreadyAttachedError } from '@angular/material/dialog';\nimport { SocketService } from 'src/app/shared/services/socket.service';\nimport { ListenStatusService } from 'src/app/shared/services/listen-status.service';\nimport { EstablecimientoService } from 'src/app/shared/services/establecimiento.service';\nimport { DeliveryEstablecimiento } from 'src/app/modelos/delivery.establecimiento';\n\n@Component({\n  selector: 'app-encuesta',\n  templateUrl: './encuesta.component.html',\n  styleUrls: ['./encuesta.component.css']\n})\nexport class EncuestaComponent implements OnInit   {\n  nomSede = '';\n  ciudadSede = '';\n  infoToken: UsuarioTokenModel;\n  titulo_inicio: '';\n  titulo_fin: '';\n  listPreguntas: any;\n  listOption: any;\n  countFin = 4;\n\n  selectedTabEncuesta = 0;\n\n  private intervalConteo = null;\n  private isBtnPagoShow = false; // si el boton de pago ha sido visible entonces recarga la pagina de pago\n\n  private dataPost: any;\n  private ListRespuestas: any = [];\n  private xIdEncuesta = 0;\n  private countOption = 1; // inicio y fin\n\n  private infoSede: DeliveryEstablecimiento;\n\n  constructor(\n    private infoTokenService: InfoTockenService,\n    private crudService: CrudHttpService,\n    private navigatorService: NavigatorLinkService,\n    private socketService: SocketService,\n    private listenStatusService: ListenStatusService,\n    private establecimientoService: EstablecimientoService\n  ) { }\n\n  ngOnInit() {\n    this.infoToken = this.infoTokenService.getInfoUs();\n    // console.log(this.infoToken);\n    // this.nomSede = localStorage.getItem('sys::s').split('|');\n    this.infoSede = this.establecimientoService.get();\n    this.nomSede = this.infoSede.nombre;\n    this.ciudadSede = this.infoSede.ciudad;\n\n    this.dataPost = {\n      idsede: this.infoSede.idsede,\n      // idsede: this.infoToken.idsede,\n      // idcliente: this.infoTokenService.getInfoUs().idcliente\n    };\n\n    this.loadOpciones();\n\n    this.loadEncuesta();\n\n    // deshabilitar boton back navegator\n    this.navigatorService.disabledBack = true;\n    history.pushState(null, null, location.href);\n    window.onpopstate = function () {\n        history.go(1);\n    };\n\n    // escucha si bnPago show para reload\n    this.listenStatusService.isBtnPagoShow$.subscribe((res: boolean) => { this.isBtnPagoShow = res; });\n  }\n\n  private loadEncuesta(): void {\n\n    this.crudService.postFree(this.dataPost, 'encuesta', 'la-encuesta', false).subscribe( (res: any) => {\n      // console.log(res);\n      if ( res.success ) {\n        if ( res.data.length === 0 ) {\n          this.cerrarSession();\n          return;\n        }\n        const _data = res.data[0].preguntas;\n        this.xIdEncuesta = _data.idencuesta;\n        this.titulo_inicio = _data.inicio;\n        this.titulo_fin = _data.fin;\n        this.listPreguntas = _data.preguntas;\n\n        this.countOption += this.listPreguntas.length;\n      } else {\n        this.cerrarSession();\n      }\n    });\n  }\n\n  private loadOpciones(): void {\n    this.crudService.postFree(this.dataPost, 'encuesta', 'las-opciones', false).subscribe( (res: any) => {\n\n      if ( res.success ) {\n        this.listOption = res.data;\n      }\n\n\n\n    });\n  }\n\n  pasarTab(event: any = null, pregunta: any = null, txt_comentario: string = null) {\n\n\n    if ( !event ) { this.selectedTabEncuesta ++; return; } // inicio\n\n    const isComentario = pregunta.obligatorio === '1' ? true : false;\n\n    const rpt = {\n      idencuesta_pregunta: pregunta.idencuesta_pregunta,\n      idencuesta_respuesta: event.idencuesta_respuesta || 0,\n      iscomentario: isComentario,\n      comentario: txt_comentario || ''\n    };\n\n    this.ListRespuestas.push(rpt);\n\n\n\n    this.selectedTabEncuesta ++;\n\n    if ( isComentario ) {\n      this.guardarEncuesta();\n    }\n\n\n\n    if ( this.countOption === this.selectedTabEncuesta ) {\n\n      this.cuentaRegresiva();\n    }\n  }\n\n  private guardarEncuesta(): void {\n    const _dataSend = {item: this.ListRespuestas, i: this.xIdEncuesta };\n    this.crudService.postFree(_dataSend, 'encuesta', 'guardar', false).subscribe( (res: any) => {\n\n    });\n  }\n\n  private cuentaRegresiva() {\n    if ( this.countFin <= 0 ) {\n      this.intervalConteo = null;\n      this.cerrarSession();\n    } else {\n      this.conteoFinEncuesta();\n    }\n  }\n\n  private conteoFinEncuesta(): void {\n    this.intervalConteo =  setTimeout(() => {\n      this.countFin --;\n      this.cuentaRegresiva();\n    }, 1000);\n  }\n\n  private cerrarSession(): void {\n    this.navigatorService.cerrarSession(this.isBtnPagoShow);\n    // this.miPedidoService.cerrarSession();\n    this.infoTokenService.cerrarSession();\n\n    // para cargar nuevamente al ingresar\n    this.socketService.isSocketOpenReconect = true;\n    this.socketService.closeConnection();\n  }\n\n}\n"]}