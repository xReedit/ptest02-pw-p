(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ADEv:function(t,e,n){"use strict";n.r(e),n.d(e,"EncuestaModule",(function(){return P}));var i=n("ofXK"),s=n("tyNb"),c=n("zOUh"),o=n("+lji"),a=n("/sn2"),r=n("yFR0"),b=n("eI2u"),u=n("fXoL"),l=n("cCzN"),d=n("Xlwt");function p(t,e){if(1&t){const t=u.Sb();u.Rb(0,"div"),u.Rb(1,"div",1),u.Yb("click",(function(){u.uc(t);const n=e.$implicit;return u.cc().xNextPregunta(n)})),u.Rb(2,"div",2),u.Mb(3,"img",3),u.Rb(4,"span"),u.Cc(5),u.Qb(),u.Qb(),u.Qb(),u.Qb()}if(2&t){const t=e.$implicit;u.zb(3),u.kc("src","assets/images/encuesta-img/",t.img,"",u.vc),u.zb(2),u.Dc(t.descripcion)}}let h=(()=>{class t{constructor(){this.NextPregunta=new u.n}ngOnInit(){}xNextPregunta(t){setTimeout(()=>{this.NextPregunta.emit(t)},300)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Fb({type:t,selectors:[["app-encuesta-opcion"]],inputs:{ListOption:"ListOption"},outputs:{NextPregunta:"NextPregunta"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"divBtn","text-center",3,"click"],[1,"op"],["alt","btnOption",1,"btnIco",3,"src"]],template:function(t,e){1&t&&u.Ac(0,p,6,2,"div",0),2&t&&u.ic("ngForOf",e.ListOption)},directives:[i.m],styles:[".btnIco[_ngcontent-%COMP%]{opacity:.7;padding:10px;cursor:pointer;transition:transform .2s}.btnIco[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:1}.divBtn[_ngcontent-%COMP%]{display:grid}.divBtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.op[_ngcontent-%COMP%]{text-align:center;line-height:1}.op[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65px}"]}),t})();function g(t,e){if(1&t){const t=u.Sb();u.Pb(0),u.Rb(1,"div"),u.Mb(2,"textarea",18,19),u.Mb(4,"br"),u.Mb(5,"br"),u.Rb(6,"button",10),u.Yb("click",(function(){u.uc(t);const e=u.rc(3),n=u.cc().$implicit,i=u.cc();return i.pasarTab(i.listOption,n,e.value)})),u.Cc(7,"Listo, Enviar"),u.Qb(),u.Qb(),u.Ob()}}function f(t,e){if(1&t){const t=u.Sb();u.Rb(0,"app-encuesta-opcion",20),u.Yb("NextPregunta",(function(e){u.uc(t);const n=u.cc().$implicit;return u.cc().pasarTab(e,n)})),u.Qb()}if(2&t){const t=u.cc(2);u.ic("ListOption",t.listOption)}}function m(t,e){if(1&t&&(u.Rb(0,"mat-tab",12),u.Mb(1,"br"),u.Mb(2,"br"),u.Rb(3,"div",7),u.Rb(4,"div",null,15),u.Rb(6,"p",8),u.Cc(7),u.Qb(),u.Ac(8,g,8,0,"ng-container",16),u.Ac(9,f,1,1,"ng-template",null,17,u.Bc),u.Qb(),u.Qb(),u.Qb()),2&t){const t=e.$implicit,n=u.rc(10);u.zb(7),u.Dc(t.pregunta),u.zb(1),u.ic("ngIf","1"===t.obligatorio)("ngIfElse",n)}}function v(t,e){if(1&t){const t=u.Sb();u.Rb(0,"footer",21),u.Rb(1,"button",22),u.Yb("click",(function(){return u.uc(t),u.cc().cerrarSession()})),u.Cc(2,"En otro momento, gracias."),u.Qb(),u.Qb()}}const O=[{path:"",component:(()=>{class t{constructor(t,e,n,i,s){this.infoTokenService=t,this.crudService=e,this.navigatorService=n,this.socketService=i,this.listenStatusService=s,this.nomSede=[],this.countFin=4,this.selectedTabEncuesta=0,this.intervalConteo=null,this.isBtnPagoShow=!1,this.ListRespuestas=[],this.xIdEncuesta=0,this.countOption=1}ngOnInit(){this.infoToken=this.infoTokenService.getInfoUs(),this.nomSede=localStorage.getItem("sys::s").split("|"),this.dataPost={idsede:this.infoToken.idsede},this.loadOpciones(),this.loadEncuesta(),this.navigatorService.disabledBack=!0,history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},this.listenStatusService.isBtnPagoShow$.subscribe(t=>{this.isBtnPagoShow=t})}loadEncuesta(){this.crudService.postFree(this.dataPost,"encuesta","la-encuesta",!1).subscribe(t=>{if(t.success){const e=t.data[0].preguntas;this.xIdEncuesta=e.idencuesta,this.titulo_inicio=e.inicio,this.titulo_fin=e.fin,this.listPreguntas=e.preguntas,this.countOption+=this.listPreguntas.length}})}loadOpciones(){this.crudService.postFree(this.dataPost,"encuesta","las-opciones",!1).subscribe(t=>{t.success&&(this.listOption=t.data)})}pasarTab(t=null,e=null,n=null){if(!t)return void this.selectedTabEncuesta++;const i="1"===e.obligatorio;this.ListRespuestas.push({idencuesta_pregunta:e.idencuesta_pregunta,idencuesta_respuesta:t.idencuesta_respuesta||0,iscomentario:i,comentario:n||""}),this.selectedTabEncuesta++,i&&this.guardarEncuesta(),this.countOption===this.selectedTabEncuesta&&this.cuentaRegresiva()}guardarEncuesta(){this.crudService.postFree({item:this.ListRespuestas,i:this.xIdEncuesta},"encuesta","guardar",!1).subscribe(t=>{})}cuentaRegresiva(){this.countFin<=0?(this.intervalConteo=null,this.cerrarSession()):this.conteoFinEncuesta()}conteoFinEncuesta(){this.intervalConteo=setTimeout(()=>{this.countFin--,this.cuentaRegresiva()},1e3)}cerrarSession(){this.navigatorService.cerrarSession(this.isBtnPagoShow),this.infoTokenService.cerrarSession(),this.socketService.isSocketOpenReconect=!0,this.socketService.closeConnection()}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(c.a),u.Lb(o.a),u.Lb(a.a),u.Lb(r.a),u.Lb(b.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-encuesta"]],decls:32,vars:13,consts:[[1,"animated","fadeIn"],[1,"text-center","p-3","encabezado-encuesta"],[1,"fs-17","fw-600","m-0"],[1,"fs-14","fw-100","p-0"],[1,"text-center","xcontainer-centrado","p-3","hv-50"],[1,"contain-size",3,"disableRipple","dynamicHeight","selectedIndex"],["disabled","",1,"overflow-hidden"],[1,"overflow-hidden"],[1,"fs-17","fw-600"],["src","assets/images/reactions_1.gif","width","100%","alt","."],["mat-flat-button","","color","primary",3,"click"],["disabled","",4,"ngFor","ngForOf"],["disabled",""],[1,"text-secondary","fs-50","fw-100"],["class","xfooter text-center bg-white p-3",4,"ngIf"],["opitem",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],["id","txt_comentario","id","txt_comentario","cols","100","rows","3",2,"width","70%"],["txt_comentario",""],[1,"d-flex",3,"ListOption","NextPregunta"],[1,"xfooter","text-center","bg-white","p-3"],["mat-flat-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(u.Rb(0,"div",0),u.Rb(1,"div",1),u.Rb(2,"p",2),u.Cc(3),u.Qb(),u.Rb(4,"span",3),u.Cc(5),u.Qb(),u.Qb(),u.Rb(6,"div",4),u.Rb(7,"mat-tab-group",5),u.Rb(8,"mat-tab",6),u.Mb(9,"br"),u.Mb(10,"br"),u.Rb(11,"div",7),u.Rb(12,"p",8),u.Cc(13),u.Qb(),u.Mb(14,"img",9),u.Mb(15,"br"),u.Mb(16,"br"),u.Mb(17,"br"),u.Rb(18,"button",10),u.Yb("click",(function(){return e.pasarTab()})),u.Cc(19,"Ok, Empezar"),u.Qb(),u.Qb(),u.Qb(),u.Ac(20,m,11,3,"mat-tab",11),u.Rb(21,"mat-tab",12),u.Mb(22,"br"),u.Mb(23,"br"),u.Rb(24,"div",7),u.Rb(25,"p",8),u.Cc(26),u.Qb(),u.Mb(27,"br"),u.Rb(28,"p",13),u.Cc(29),u.dc(30,"number"),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Ac(31,v,3,0,"footer",14),u.Qb()),2&t&&(u.zb(3),u.Dc(e.nomSede[0]),u.zb(2),u.Dc(e.nomSede[1]),u.zb(2),u.ic("disableRipple",!0)("dynamicHeight",!1)("selectedIndex",e.selectedTabEncuesta),u.zb(6),u.Dc(e.titulo_inicio),u.zb(7),u.ic("ngForOf",e.listPreguntas),u.zb(6),u.Dc(e.titulo_fin),u.zb(3),u.Dc(u.fc(30,10,e.countFin,"2.")),u.zb(2),u.ic("ngIf",0===e.selectedTabEncuesta))},directives:[l.b,l.a,d.a,i.m,i.n,h],pipes:[i.f],styles:[".encabezado-encuesta[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;background:#3f51b5;color:#f5f5f5}.contain-size[_ngcontent-%COMP%]{contain:size}.mat-tab-header-pagination-controls-enabled[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-header-pagination.mat-tab-header-pagination-disabled[_ngcontent-%COMP%],   .mat-tab-header-pagination{display:none!important}.hv-50[_ngcontent-%COMP%]{height:45vh}"]}),t})(),data:{titulo:"Inicio"},children:[{path:"",redirectTo:"inicio"}]}];let R=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[s.g.forChild(O)],s.g]}),t})();var S=n("rsRi"),x=n("lSLK");let P=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[i.c,R,S.a,x.a]]}),t})()}}]);