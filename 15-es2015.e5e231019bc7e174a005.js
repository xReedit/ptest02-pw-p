(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"/sn2":function(l,n,t){"use strict";var e=t("iInd"),i=t("pLZG"),s=t("7o/Q");class a{constructor(l,n){this.bufferSize=l,this.startBufferEvery=n,this.subscriberClass=n&&l!==n?o:u}call(l,n){return n.subscribe(new this.subscriberClass(l,this.bufferSize,this.startBufferEvery))}}class u extends s.a{constructor(l,n){super(l),this.bufferSize=n,this.buffer=[]}_next(l){const n=this.buffer;n.push(l),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])}_complete(){const l=this.buffer;l.length>0&&this.destination.next(l),super._complete()}}class o extends s.a{constructor(l,n,t){super(l),this.bufferSize=n,this.startBufferEvery=t,this.buffers=[],this.count=0}_next(l){const{bufferSize:n,startBufferEvery:t,buffers:e,count:i}=this;this.count++,i%t==0&&e.push([]);for(let s=e.length;s--;){const t=e[s];t.push(l),t.length===n&&(e.splice(s,1),this.destination.next(t))}}_complete(){const{buffers:l,destination:n}=this;for(;l.length>0;){let t=l.shift();t.length>0&&n.next(t)}super._complete()}}var r=t("7RJT"),c=t("zOUh"),b=t("eI2u"),d=t("8Y7J");t.d(n,"a",function(){return h});let h=(()=>{class l{constructor(l,n,t){this.router=l,this.infoTokenService=n,this.listenService=t,this.disabledBack=!1,this.resNavigatorSource=new r.BehaviorSubject([]),this.resNavigatorSourceObserve$=this.resNavigatorSource.asObservable(),this.pageActive="carta",this.resNavigator=[],this.historyNavigator=[],this.lastUrlHistory="",this.listenEventNavigator()}listenEventNavigator(){this.router.events.pipe(Object(i.a)(l=>l instanceof e.d),function(l,n=null){return function(l){return l.lift(new a(2,n))}}(0,1)).subscribe(l=>{if(null!=l&&"popstate"===l[1].navigationTrigger){if(this.disabledBack)return!1;const n=l[0].url.indexOf(";")?l[0].url.substr(1).split(";")[1].split("=")[1]:l[0].url;n.length>0&&(this.lastUrlHistory=n,this.managerGoBack(n,""))}})}setPageActive(l){this.pageActive=l,this.lastUrlHistory="carta"!==l?l:this.lastUrlHistory;const n=this.findPageActiveInHistory(l);this.addLink(n?n.url:l),this.resNavigator.pageActive=l,this.resNavigator.url=n?n.url:l,this.resNavigatorSource.next(this.resNavigator)}saveHistoryPageActive(l,n){this.historyNavigator[l]=[],this.historyNavigator[l].key=l,this.historyNavigator[l].url=n}findPageActiveInHistory(l){return Object.values(this.historyNavigator).filter(n=>n.key===l)[0]}addLink(l){this.router.navigate([".",{state:l}]),this.saveHistoryPageActive(this.pageActive,l)}cerrarSession(l=!1){this.infoTokenService.isDelivery()?this.router.navigate(["../zona-delivery"]):this.router.navigate(["../"]).then(()=>{l&&window.location.reload()})}managerGoBack(l,n){let t="";switch(console.log("managerGoBack",l),l){case"carta-i-secciones-items":t="carta",this.addLink("carta-i-secciones");break;case"carta-i-secciones":t="carta",this.addLink("carta-i-");break;case"carta-i-":t="carta-o-",this.addLink("carta-o-"),console.log("=========================== listo para salir"),this.listoParaSalir();break;case"mipedido-confirma":t="mipedido",this.addLink("mipedido");break;case"mipedido":t="carta",this.addLink("carta"),this.listoParaSalir();break;case"estado":case"carta":t="carta";break;case"lanzar-encuesta":t="lanzar-encuesta"}""!==t&&(this.pageActive=t,this.setPageActive(t))}_router(l){this.router.navigate([l])}disableGoBack(){this.disabledBack=!0,history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)}}listoParaSalir(){this.infoTokenService.isDelivery()&&this.listenService.setIsOutEstablecimientoDelivery(!0)}}return l.ngInjectableDef=d.Sb({factory:function(){return new l(d.Tb(e.l),d.Tb(c.a),d.Tb(b.a))},token:l,providedIn:"root"}),l})()},aVxZ:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class i{}var s=t("pMnS"),a=t("bujt"),u=t("Fwaw"),o=t("5GAg"),r=t("omvX"),c=t("SVse");class b{constructor(){this.NextPregunta=new e.m}ngOnInit(){}xNextPregunta(l){setTimeout(()=>{this.NextPregunta.emit(l)},300)}}var d=e.qb({encapsulation:0,styles:[[".btnIco[_ngcontent-%COMP%]{opacity:.7;padding:10px;cursor:pointer;transition:transform .2s}.btnIco[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:1}.divBtn[_ngcontent-%COMP%]{display:grid}.divBtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.op[_ngcontent-%COMP%]{text-align:center;line-height:1}.op[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65px}"]],data:{}});function h(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,4,"div",[["class","divBtn text-center"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.xNextPregunta(l.context.$implicit)&&e),e},null,null)),(l()(),e.sb(2,0,null,null,3,"div",[["class","op"]],null,null,null,null,null)),(l()(),e.sb(3,0,null,null,0,"img",[["alt","btnOption"],["class","btnIco"]],[[8,"src",4]],null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Mb(5,null,["",""]))],null,function(l,n){l(n,3,0,e.wb(1,"assets/images/encuesta-img/",n.context.$implicit.img,"")),l(n,5,0,n.context.$implicit.descripcion)})}function p(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,h)),e.rb(1,278528,null,0,c.m,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,1,0,n.component.ListOption)},null)}var g=t("Rlre"),f=t("rWV4"),v=t("zOUh"),m=t("+lji"),C=t("/sn2"),O=t("yFR0"),S=t("eI2u");class k{constructor(l,n,t,e,i){this.infoTokenService=l,this.crudService=n,this.navigatorService=t,this.socketService=e,this.listenStatusService=i,this.nomSede=[],this.countFin=4,this.selectedTabEncuesta=0,this.intervalConteo=null,this.isBtnPagoShow=!1,this.ListRespuestas=[],this.xIdEncuesta=0,this.countOption=1}ngOnInit(){this.infoToken=this.infoTokenService.getInfoUs(),console.log(this.infoToken),this.nomSede=localStorage.getItem("sys::s").split("|"),this.dataPost={idsede:this.infoToken.idsede},this.loadOpciones(),this.loadEncuesta(),this.navigatorService.disabledBack=!0,history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},this.listenStatusService.isBtnPagoShow$.subscribe(l=>{this.isBtnPagoShow=l})}loadEncuesta(){this.crudService.postFree(this.dataPost,"encuesta","la-encuesta",!1).subscribe(l=>{if(l.success){const n=l.data[0].preguntas;this.xIdEncuesta=n.idencuesta,this.titulo_inicio=n.inicio,this.titulo_fin=n.fin,this.listPreguntas=n.preguntas,this.countOption+=this.listPreguntas.length}})}loadOpciones(){this.crudService.postFree(this.dataPost,"encuesta","las-opciones",!1).subscribe(l=>{console.log("las opciones",l),l.success&&(this.listOption=l.data)})}pasarTab(l=null,n=null,t=null){if(!l)return void this.selectedTabEncuesta++;const e="1"===n.obligatorio;this.ListRespuestas.push({idencuesta_pregunta:n.idencuesta_pregunta,idencuesta_respuesta:l.idencuesta_respuesta||0,iscomentario:e,comentario:t||""}),this.selectedTabEncuesta++,e&&this.guardarEncuesta(),console.log("countOption",this.countOption),console.log("selectedTabEncuesta",this.selectedTabEncuesta),this.countOption===this.selectedTabEncuesta&&(console.log("terminar encuesta"),this.cuentaRegresiva())}guardarEncuesta(){this.crudService.postFree({item:this.ListRespuestas,i:this.xIdEncuesta},"encuesta","guardar",!1).subscribe(l=>{console.log("guardado",l)})}cuentaRegresiva(){this.countFin<=0?(this.intervalConteo=null,this.cerrarSession()):this.conteoFinEncuesta()}conteoFinEncuesta(){this.intervalConteo=setTimeout(()=>{this.countFin--,this.cuentaRegresiva()},1e3)}cerrarSession(){this.navigatorService.cerrarSession(this.isBtnPagoShow),this.infoTokenService.cerrarSession(),this.socketService.isSocketOpenReconect=!0,this.socketService.closeConnection()}}var x=e.qb({encapsulation:0,styles:[[".encabezado-encuesta[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;background:#3f51b5;color:#f5f5f5}.contain-size[_ngcontent-%COMP%]{contain:size}.mat-tab-header-pagination-controls-enabled[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-header-pagination.mat-tab-header-pagination-disabled[_ngcontent-%COMP%]{display:none!important}  .mat-tab-header-pagination{display:none!important}.hv-50[_ngcontent-%COMP%]{height:45vh}"]],data:{}});function y(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,null,null,null,null,null,null,null)),(l()(),e.sb(1,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.sb(2,0,[["txt_comentario",1]],null,0,"textarea",[["cols","100"],["id","txt_comentario"],["rows","3"],["style","width: 70%;"]],null,null,null,null,null)),(l()(),e.sb(3,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,2,"button",[["color","primary"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var i=!0,s=l.component;return"click"===n&&(i=!1!==s.pasarTab(s.listOption,l.parent.context.$implicit,e.Eb(l,2).value)&&i),i},a.b,a.a)),e.rb(6,180224,null,0,u.b,[e.k,o.d,[2,r.a]],{color:[0,"color"]},null),(l()(),e.Mb(-1,0,["Listo, Enviar"]))],function(l,n){l(n,6,0,"primary")},function(l,n){l(n,5,0,e.Eb(n,6).disabled||null,"NoopAnimations"===e.Eb(n,6)._animationMode)})}function P(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"app-encuesta-opcion",[["class","d-flex"]],null,[[null,"NextPregunta"]],function(l,n,t){var e=!0;return"NextPregunta"===n&&(e=!1!==l.component.pasarTab(t,l.parent.context.$implicit)&&e),e},p,d)),e.rb(1,114688,null,0,b,[],{ListOption:[0,"ListOption"]},{NextPregunta:"NextPregunta"})],function(l,n){l(n,1,0,n.component.listOption)},null)}function w(l){return e.Ob(0,[(l()(),e.sb(0,16777216,null,null,12,"mat-tab",[["disabled",""]],null,null,null,g.d,g.a)),e.rb(1,770048,[[1,4]],2,f.c,[e.O],{disabled:[0,"disabled"]},null),e.Kb(603979776,4,{templateLabel:0}),e.Kb(335544320,5,{_explicitContent:0}),(l()(),e.sb(4,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.sb(5,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.sb(6,0,null,0,6,"div",[["class","overflow-hidden"]],null,null,null,null,null)),(l()(),e.sb(7,0,[["opitem",1]],null,5,"div",[],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,1,"p",[["class","fs-17 fw-600"]],null,null,null,null,null)),(l()(),e.Mb(9,null,["",""])),(l()(),e.hb(16777216,null,null,1,null,y)),e.rb(11,16384,null,0,c.n,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.hb(0,[["elseTemplate",2]],null,0,null,P)),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,1,0,""),l(n,11,0,"1"===n.context.$implicit.obligatorio,e.Eb(n,12))},function(l,n){l(n,9,0,n.context.$implicit.pregunta)})}function E(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"footer",[["class","xfooter text-center bg-white p-3"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"button",[["color","accent"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.cerrarSession()&&e),e},a.b,a.a)),e.rb(2,180224,null,0,u.b,[e.k,o.d,[2,r.a]],{color:[0,"color"]},null),(l()(),e.Mb(-1,0,["En otro momento, gracias."]))],function(l,n){l(n,2,0,"accent")},function(l,n){l(n,1,0,e.Eb(n,2).disabled||null,"NoopAnimations"===e.Eb(n,2)._animationMode)})}function _(l){return e.Ob(0,[e.Gb(0,c.f,[e.t]),(l()(),e.sb(1,0,null,null,42,"div",[["class","animated fadeIn"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,4,"div",[["class","text-center p-3 encabezado-encuesta"]],null,null,null,null,null)),(l()(),e.sb(3,0,null,null,1,"p",[["class","fs-17 fw-600 m-0"]],null,null,null,null,null)),(l()(),e.Mb(4,null,["",""])),(l()(),e.sb(5,0,null,null,1,"span",[["class","fs-14 fw-100 p-0"]],null,null,null,null,null)),(l()(),e.Mb(6,null,["",""])),(l()(),e.sb(7,0,null,null,34,"div",[["class","text-center xcontainer-centrado p-3 hv-50"]],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,33,"mat-tab-group",[["class","contain-size mat-tab-group"]],[[2,"mat-tab-group-dynamic-height",null],[2,"mat-tab-group-inverted-header",null]],null,null,g.c,g.b)),e.rb(9,3325952,null,1,f.f,[e.k,e.h,[2,f.a],[2,r.a]],{disableRipple:[0,"disableRipple"],dynamicHeight:[1,"dynamicHeight"],selectedIndex:[2,"selectedIndex"]},null),e.Kb(603979776,1,{_tabs:1}),(l()(),e.sb(11,16777216,null,null,15,"mat-tab",[["class","overflow-hidden"],["disabled",""]],null,null,null,g.d,g.a)),e.rb(12,770048,[[1,4]],2,f.c,[e.O],{disabled:[0,"disabled"]},null),e.Kb(603979776,2,{templateLabel:0}),e.Kb(335544320,3,{_explicitContent:0}),(l()(),e.sb(15,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.sb(16,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.sb(17,0,null,0,9,"div",[["class","overflow-hidden"]],null,null,null,null,null)),(l()(),e.sb(18,0,null,null,1,"p",[["class","fs-17 fw-600"]],null,null,null,null,null)),(l()(),e.Mb(19,null,["",""])),(l()(),e.sb(20,0,null,null,0,"img",[["alt","."],["src","assets/images/reactions_1.gif"],["width","100%"]],null,null,null,null,null)),(l()(),e.sb(21,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(22,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(23,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(24,0,null,null,2,"button",[["color","primary"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.pasarTab()&&e),e},a.b,a.a)),e.rb(25,180224,null,0,u.b,[e.k,o.d,[2,r.a]],{color:[0,"color"]},null),(l()(),e.Mb(-1,0,["Ok, Empezar"])),(l()(),e.hb(16777216,null,null,1,null,w)),e.rb(28,278528,null,0,c.m,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.sb(29,16777216,null,null,12,"mat-tab",[["disabled",""]],null,null,null,g.d,g.a)),e.rb(30,770048,[[1,4]],2,f.c,[e.O],{disabled:[0,"disabled"]},null),e.Kb(603979776,6,{templateLabel:0}),e.Kb(335544320,7,{_explicitContent:0}),(l()(),e.sb(33,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.sb(34,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.sb(35,0,null,0,6,"div",[["class","overflow-hidden"]],null,null,null,null,null)),(l()(),e.sb(36,0,null,null,1,"p",[["class","fs-17 fw-600"]],null,null,null,null,null)),(l()(),e.Mb(37,null,["",""])),(l()(),e.sb(38,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(39,0,null,null,2,"p",[["class","text-secondary fs-50 fw-100"]],null,null,null,null,null)),(l()(),e.Mb(40,null,["",""])),e.Ib(41,2),(l()(),e.hb(16777216,null,null,1,null,E)),e.rb(43,16384,null,0,c.n,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,9,0,!0,!1,t.selectedTabEncuesta),l(n,12,0,""),l(n,25,0,"primary"),l(n,28,0,t.listPreguntas),l(n,30,0,""),l(n,43,0,0===t.selectedTabEncuesta)},function(l,n){var t=n.component;l(n,4,0,t.nomSede[0]),l(n,6,0,t.nomSede[1]),l(n,8,0,e.Eb(n,9).dynamicHeight,"below"===e.Eb(n,9).headerPosition),l(n,19,0,t.titulo_inicio),l(n,24,0,e.Eb(n,25).disabled||null,"NoopAnimations"===e.Eb(n,25)._animationMode),l(n,37,0,t.titulo_fin);var i=e.Nb(n,40,0,l(n,41,0,e.Eb(n,0),t.countFin,"2."));l(n,40,0,i)})}function I(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"app-encuesta",[],null,null,null,_,x)),e.rb(1,114688,null,0,k,[v.a,m.a,C.a,O.a,S.a],null,null)],function(l,n){l(n,1,0)},null)}var T=e.ob("app-encuesta",k,I,{},{},[]),M=t("t68o"),N=t("xYTU"),L=t("POq0"),B=t("Xd0L"),z=t("QQfA"),A=t("IP0z"),F=t("s6ns"),H=t("qJ5m"),R=t("s7LF"),j=t("LSHg"),K=t("iInd");const U={titulo:"Inicio"};class q{}var $=t("cUpR"),G=t("/HVE"),J=t("Gi4r"),V=t("oapL"),D=t("HsOI"),Q=t("ZwOa"),Z=t("zMNK"),Y=t("8P0U"),W=t("BzsH"),X=t("hOhj"),ll=t("r0V8"),nl=t("dFDH"),tl=t("qJ50"),el=t("5Bek"),il=t("c9fC"),sl=t("igqZ"),al=t("elxJ"),ul=t("rsRi"),ol=t("lSLK");t.d(n,"EncuestaModuleNgFactory",function(){return rl});var rl=e.pb(i,[],function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[s.a,T,M.a,N.a,N.b]],[3,e.j],e.w]),e.Cb(4608,c.p,c.o,[e.t,[2,c.E]]),e.Cb(4608,L.c,L.c,[]),e.Cb(4608,B.a,B.a,[]),e.Cb(4608,z.a,z.a,[z.g,z.c,e.j,z.f,z.d,e.q,e.y,c.d,A.b,[2,c.i]]),e.Cb(5120,z.h,z.i,[z.a]),e.Cb(5120,F.c,F.d,[z.a]),e.Cb(135680,F.e,F.e,[z.a,e.q,[2,c.i],[2,F.b],F.c,[3,F.e],z.c]),e.Cb(5120,H.b,H.a,[[3,H.b]]),e.Cb(4608,R.e,R.e,[]),e.Cb(4608,R.v,R.v,[]),e.Cb(4608,j.t,j.t,[]),e.Cb(4608,j.u,j.u,[]),e.Cb(4608,j.n,j.m,[[2,j.k],j.t,j.u,e.t]),e.Cb(1073742336,c.c,c.c,[]),e.Cb(1073742336,K.n,K.n,[[2,K.s],[2,K.l]]),e.Cb(1073742336,q,q,[]),e.Cb(1073742336,A.a,A.a,[]),e.Cb(1073742336,B.e,B.e,[[2,B.b],[2,$.f]]),e.Cb(1073742336,G.b,G.b,[]),e.Cb(1073742336,B.g,B.g,[]),e.Cb(1073742336,u.c,u.c,[]),e.Cb(1073742336,J.a,J.a,[]),e.Cb(1073742336,V.c,V.c,[]),e.Cb(1073742336,L.d,L.d,[]),e.Cb(1073742336,D.d,D.d,[]),e.Cb(1073742336,Q.b,Q.b,[]),e.Cb(1073742336,Z.g,Z.g,[]),e.Cb(1073742336,o.a,o.a,[]),e.Cb(1073742336,f.k,f.k,[]),e.Cb(1073742336,Y.c,Y.c,[]),e.Cb(1073742336,W.b,W.b,[]),e.Cb(1073742336,X.b,X.b,[]),e.Cb(1073742336,z.e,z.e,[]),e.Cb(1073742336,F.j,F.j,[]),e.Cb(1073742336,ll.d,ll.d,[]),e.Cb(1073742336,ll.c,ll.c,[]),e.Cb(1073742336,nl.e,nl.e,[]),e.Cb(1073742336,tl.e,tl.e,[]),e.Cb(1073742336,H.c,H.c,[]),e.Cb(1073742336,el.c,el.c,[]),e.Cb(1073742336,il.d,il.d,[]),e.Cb(1073742336,sl.c,sl.c,[]),e.Cb(1073742336,al.d,al.d,[]),e.Cb(1073742336,ul.a,ul.a,[]),e.Cb(1073742336,R.u,R.u,[]),e.Cb(1073742336,R.r,R.r,[]),e.Cb(1073742336,R.i,R.i,[]),e.Cb(1073742336,j.a,j.a,[]),e.Cb(1073742336,ol.a,ol.a,[]),e.Cb(1073742336,i,i,[]),e.Cb(1024,K.j,function(){return[[{path:"",component:k,data:U,children:[{path:"",redirectTo:"inicio"}]}]]},[]),e.Cb(256,j.k,{apiKey:"AIzaSyAknWQFyVH1RpR2OAL0vRTHTapaIpfKSqo",libraries:["places"]},[])])})}}]);