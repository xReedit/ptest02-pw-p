(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{mnjd:function(i,e,t){"use strict";t.r(e),t.d(e,"ZonaEstablecimientosModule",(function(){return ye}));var o=t("ofXK"),n=t("tyNb"),c=t("AA5P"),a=t("0IaG"),s=t("N6vS"),r=t("eI2u"),d=t("yFR0"),l=t("zOUh"),b=t("/sn2");class p{}var h=t("fXoL"),f=t("+lji"),g=t("ojS6"),u=t("kmnG"),m=t("qFsG"),v=t("3Pt+"),C=t("bTqV");function R(i,e){if(1&i&&(h.Rb(0,"div"),h.Rb(1,"span",6),h.Fc(2),h.Qb(),h.Qb()),2&i){const i=h.dc(2);h.zb(2),h.Hc(" ",i.dataCalificado.titulo," ")}}function x(i,e){if(1&i&&(h.Rb(0,"div"),h.Rb(1,"span",7),h.Fc(2),h.Qb(),h.Mb(3,"br"),h.Mb(4,"br"),h.Qb()),2&i){const i=h.dc(2);h.zb(2),h.Gc(i.dataCalificado.nombre)}}function S(i,e){1&i&&h.Mb(0,"i",12)}function w(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",8),h.Rb(1,"mat-form-field",2),h.Rb(2,"textarea",9),h.Zb("ngModelChange",(function(e){return h.xc(i),h.dc(2).comentario=e})),h.Qb(),h.Qb(),h.Mb(3,"br"),h.Rb(4,"button",10),h.Zb("click",(function(){return h.xc(i),h.dc(2).goAgradecimiento()})),h.Dc(5,S,1,0,"i",11),h.Fc(6," Listo "),h.Qb(),h.Qb()}if(2&i){const i=h.dc(2);h.zb(2),h.lc("ngModel",i.comentario),h.zb(2),h.lc("disabled",i.countFin<3||0==i.dataCalificado.calificacion),h.zb(1),h.lc("ngIf",i.countFin<3)}}function F(i,e){if(1&i){const i=h.Sb();h.Pb(0),h.Rb(1,"div",2),h.Dc(2,R,3,1,"div",3),h.Dc(3,x,5,1,"div",3),h.Qb(),h.Rb(4,"star-rating",4),h.Zb("ratingChange",(function(e){return h.xc(i),h.dc().onRatingChange(e)})),h.Qb(),h.Dc(5,w,7,3,"div",5),h.Ob()}if(2&i){const i=h.dc();h.zb(2),h.lc("ngIf",i.dataCalificado.showTitulo),h.zb(1),h.lc("ngIf",i.dataCalificado.showNombre),h.zb(1),h.lc("starType","svg"),h.zb(1),h.lc("ngIf",i.dataCalificado.showTxtComentario)}}function y(i,e){1&i&&(h.Rb(0,"div",13),h.Rb(1,"span"),h.Fc(2," Muchas gracias, su calificaci\xf3n se tomara en cuenta."),h.Qb(),h.Mb(3,"hr"),h.Rb(4,"button",14),h.Fc(5,"Ok"),h.Qb(),h.Qb())}let k=(()=>{class i{constructor(i){this.crudService=i,this.countFin=3,this.intervalConteo=null,this.comentario=""}ngOnInit(){this.dataCalificado.calificacion=0}onRatingChange(i){this.dataCalificado.calificacion=i.rating,this.dataCalificado.showTxtComentario||this.goAgradecimiento()}goAgradecimiento(){this.dataCalificado.showMsjTankyou&&(this.countFin=2,this.cuentaRegresivaCalificacion())}cuentaRegresivaCalificacion(){this.countFin<=0?(this.intervalConteo=null,this.guardarCalificacion()):this.conteoFinEncuesta()}conteoFinEncuesta(){this.intervalConteo=setTimeout(()=>{this.countFin--,this.cuentaRegresivaCalificacion()},1e3)}guardarCalificacion(){this.dataCalificado.comentario=this.comentario,this.crudService.postFree({dataCalificacion:this.dataCalificado},"delivery","calificar-servicio",!1).subscribe(i=>console.log(i))}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(f.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-comp-calificacion"]],inputs:{dataCalificado:"dataCalificado"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["msjAgradece",""],[1,"text-center"],[4,"ngIf"],["size","large","speed","slow",3,"starType","ratingChange"],["class","text-center pt-2",4,"ngIf"],[1,"fw-600","fs-13","text-secondary"],[1,"fs-15"],[1,"text-center","pt-2"],["matInput","","placeholder","Escribe un comentario","maxlength","200",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"disabled","click"],["class","fa fa-spinner fa-spin fa-fw",4,"ngIf"],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"text-center","fs-18","fw-100"],["mat-flat-button","","color","primary","mat-dialog-close",""]],template:function(i,e){if(1&i&&(h.Dc(0,F,6,4,"ng-container",0),h.Dc(1,y,6,0,"ng-template",null,1,h.Ec)),2&i){const i=h.uc(2);h.lc("ngIf",e.countFin>0)("ngIfElse",i)}},directives:[o.n,g.a,u.b,m.a,v.b,v.i,v.m,v.p,C.a,a.c],styles:[".rating[_ngcontent-%COMP%]{outline:none}"]}),i})(),Q=(()=>{class i{constructor(i,e){this.dialogRef=i,this._dataCalificado=e.dataCalificado}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(a.f),h.Lb(a.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-dialog-calificacion"]],decls:2,vars:1,consts:[[1,"p-3"],[3,"dataCalificado"]],template:function(i,e){1&i&&(h.Rb(0,"div",0),h.Mb(1,"app-comp-calificacion",1),h.Qb()),2&i&&(h.zb(1),h.lc("dataCalificado",e._dataCalificado))},directives:[k],styles:[""]}),i})();var D=t("JOr0"),P=t("IYfF"),z=t("XhcP"),_=t("FKr1"),M=t("FDOz"),I=t("wZkO");function E(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",29),h.Zb("click",(function(){return h.xc(i),h.dc().registarDirCliente()})),h.Rb(1,"span",30),h.Fc(2,"Bienvenido, para ver los comercios en tu zona:"),h.Qb(),h.Rb(3,"div",31),h.Mb(4,"img",32),h.Rb(5,"span",33),h.Fc(6," Indica direcci\xf3n de entrega "),h.Qb(),h.Qb(),h.Qb()}}const T=function(i){return{fadeOutUp:i}};function O(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",34),h.Zb("click",(function(){return h.xc(i),h.dc().goCalificarComercio(0)})),h.Rb(1,"span",35),h.Mb(2,"i",36),h.Fc(3," Califique al comercio de su \xfaltimo pedido."),h.Qb(),h.Qb()}if(2&i){const i=h.dc();h.lc("ngClass",h.qc(1,T,!i.isShowCalificar))}}function L(i,e){1&i&&(h.Rb(0,"div",41),h.Mb(1,"i",42),h.Rb(2,"span",43),h.Fc(3,"Inicio"),h.Qb(),h.Qb())}function U(i,e){1&i&&(h.Rb(0,"div",41),h.Mb(1,"i",44),h.Rb(2,"span",43),h.Fc(3,"Mis Pedidos"),h.Qb(),h.Qb())}function j(i,e){1&i&&(h.Rb(0,"div",41),h.Mb(1,"i",45),h.Rb(2,"span",43),h.Fc(3,"Soporte"),h.Qb(),h.Qb())}function Z(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",37),h.Rb(1,"div",38),h.Rb(2,"mat-tab-group",39),h.Zb("selectedTabChange",(function(e){return h.xc(i),h.dc().clickTab(e.index)})),h.Rb(3,"mat-tab"),h.Dc(4,L,4,0,"ng-template",40),h.Qb(),h.Rb(5,"mat-tab"),h.Dc(6,U,4,0,"ng-template",40),h.Qb(),h.Rb(7,"mat-tab"),h.Dc(8,j,4,0,"ng-template",40),h.Qb(),h.Qb(),h.Qb(),h.Qb()}}const q=function(){return["../"]};let V=(()=>{class i{constructor(i,e,t,o,n,c,a,s,r,d){this.infoTokenService=i,this.verifyClientService=e,this.dialogDireccion=t,this.dialog=o,this.listenService=n,this.router=c,this.socketService=a,this.navigartoService=s,this.establecientoService=r,this.authService=d,this.nomDireccionCliente="Establecer una direccion de entrega",this.isSelectedDireccion=!1,this.isClienteLogueado=!1,this.showPanelRigth=!1,this.listPedidoCalificar=[],this.numComerciosCalificar=0,this.isShowCalificar=!1,this.telefonoSoporte="934746830"}ngOnInit(){this.infoTokenService.converToJSON(),this.infoClient=this.verifyClientService.getDataClient(),this.isClienteLogueado=this.infoClient.isCliente,this.isClienteLogueado&&(this.setDireccion(this.infoClient.direccionEnvioSelected),this.socketService.connect(this.infoClient,0,!0),this.listenService.isChangeDireccionDelivery$.subscribe(i=>{i&&this.setDireccion(i)})),this.loadComerciosXCalificar()}loadComerciosXCalificar(){this.establecientoService.getComerciosXCalifcar(this.infoClient.idcliente).subscribe(i=>{this.listPedidoCalificar=i,this.numComerciosCalificar=this.listPedidoCalificar.length,this.isShowCalificar=this.numComerciosCalificar>0})}openDialogDireccion(){this.isClienteLogueado?this.dialogDireccion.open(s.a,{panelClass:["my-dialog-orden-detalle","my-dialog-scrool"]}).afterClosed().subscribe(i=>{i&&(this.verifyClientService.setDireccionDeliverySelected(i),this.setDireccion(i))}):this.registarDirCliente()}setDireccion(i){if(i){this.isSelectedDireccion=!0;const e=i.direccion.split(",");this.nomDireccionCliente=e[0]+" "+e[1]}}clickTab(i){let e="/establecimientos";switch(i){case 0:e="/establecimientos";break;case 1:e="/pedidos";break;case 2:return void this.redirectWhatsAppSoporte()}this.router.navigate(["zona-delivery"+e]),this.showPanelRigth=!1}redirectWhatsAppSoporte(){window.open("https://api.whatsapp.com/send?phone=51"+this.telefonoSoporte,"_blank")}goBack(){window.location.href.indexOf("/zona-delivery/establecimientos")>-1?this.navigartoService.__router("../"):window.history.back()}goCalificarComercio(i){const e=this.listPedidoCalificar[i];if(e){const t=new p;t.idcliente=this.infoClient.idcliente,t.idpedido=e.idpedido,t.idsede=e.idsede,t.tipo=3,t.showNombre=!0,t.showTitulo=!0,t.showTxtComentario=!0,t.nombre=e.nomestablecimiento,t.titulo="Como calificas al comercio?",t.showMsjTankyou=!0;const o=new a.d;o.disableClose=!0,o.hasBackdrop=!0,o.data={dataCalificado:t},this.dialog.open(Q,o).afterClosed().subscribe(e=>{i++,this.isShowCalificar=i<this.numComerciosCalificar,this.goCalificarComercio(i)})}}registarDirCliente(){this.verifyClientService.setIsDelivery(!0),this.router.navigate(["/login-client"])}cerrarAllSession(){localStorage.clear(),this.authService.setLocalToken("")}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(l.a),h.Lb(c.a),h.Lb(a.b),h.Lb(a.b),h.Lb(r.a),h.Lb(n.d),h.Lb(d.a),h.Lb(b.a),h.Lb(D.a),h.Lb(P.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-main"]],decls:45,vars:11,consts:[[1,"example-container"],["mode","over","position","end",1,"example-sidenav",3,"opened","closedStart"],["drawer",""],[2,"min-width","250px"],[1,"p-3","border-bottom"],[1,"w-100","text-center"],["src","assets/icons/icon-72x72.png"],[1,"pt-1","fw-600","fs-12","text-secondary","m-0"],[1,"pt-1","fw-100","fs-11","text-secondary","m-0"],[1,"p-3","border-bottom","w-100",3,"click"],[1,"fw-600","fs-13"],[1,"fa","fa-arrow-left","pr-2"],[1,"fs-13"],["matRipple","",1,"border-bottom","p-3","xCursor",3,"click"],["matRipple","",1,"border-bottom","p-3","xCursor"],["matRipple","",1,"border-bottom","p-3","xCursor","d-flex","justify-content-between",3,"routerLink","click"],[1,"fa","fa-key"],["matRipple","",1,"border-bottom","p-3","xCursor",3,"routerLink"],[1,"animated","fadeIn","overflow-hidden"],[1,"header-app-1","p-3","d-flex","justify-content-between"],[1,"fa","fa-arrow-left",3,"click"],["matRipple","",1,"text-center",3,"click"],[1,"pl-2","fs-13","fw-100","text-puntos"],[1,"d-flex"],["aria-hidden","true",1,"fa","fa-user-circle-o","pl-2",3,"click"],["id","contentmaster",1,"content-body"],["matRipple","","class","content-paso-ini text-center xCursor border",3,"click",4,"ngIf"],["matRipple","","class","content-paso-ini text-center xCursor border animated fadeInDown",3,"ngClass","click",4,"ngIf"],["class","xfooter-zona-delivery",4,"ngIf"],["matRipple","",1,"content-paso-ini","text-center","xCursor","border",3,"click"],[1,"text-secondary","fs-12"],[1,"bg-warnig"],["src","../assets/images/placeholder.png","alt",""],[1,"text-secondary","fw-600","fs-13"],["matRipple","",1,"content-paso-ini","text-center","xCursor","border","animated","fadeInDown",3,"ngClass","click"],[1,"text-secondary","fs-12","d-flex","align-items-center"],[1,"fa","fa-star","text-warning","fa-spin","fa-2x","mr-2"],[1,"xfooter-zona-delivery"],[1,"tabs-group"],["color","accent","headerPosition","below","mat-stretch-tabs","",1,"fondo-tab-group",3,"selectedTabChange"],["mat-tab-label",""],[1,"header-tab-cliente"],["aria-hidden","true",1,"fa","fa-home"],[1,"fs-10"],["aria-hidden","true",1,"fa","fa-sticky-note"],["aria-hidden","true",1,"fa","fa-whatsapp"]],template:function(i,e){if(1&i){const i=h.Sb();h.Rb(0,"mat-drawer-container",0),h.Rb(1,"mat-drawer",1,2),h.Zb("closedStart",(function(){return e.showPanelRigth=!1})),h.Rb(3,"div",3),h.Rb(4,"div",4),h.Rb(5,"div",5),h.Mb(6,"img",6),h.Rb(7,"p",7),h.Fc(8,"Papaya Express"),h.Qb(),h.Rb(9,"p",8),h.Fc(10,"papaya.com.pe"),h.Qb(),h.Qb(),h.Qb(),h.Rb(11,"div",9),h.Zb("click",(function(){return h.xc(i),h.uc(2).toggle()})),h.Rb(12,"span",10),h.Mb(13,"i",11),h.Fc(14,"Opciones"),h.Qb(),h.Qb(),h.Rb(15,"div",12),h.Rb(16,"div",13),h.Zb("click",(function(){h.xc(i);const t=h.uc(2);return e.clickTab(0),t.toggle()})),h.Fc(17," Ir al Inicio "),h.Qb(),h.Rb(18,"div",13),h.Zb("click",(function(){h.xc(i);const t=h.uc(2);return e.clickTab(1),t.toggle()})),h.Fc(19," Mis pedidos "),h.Qb(),h.Rb(20,"div",14),h.Fc(21," Descuentos y promociones "),h.Qb(),h.Rb(22,"div",15),h.Zb("click",(function(){return e.cerrarAllSession()})),h.Rb(23,"div"),h.Fc(24," Cerrar Session "),h.Qb(),h.Rb(25,"div"),h.Mb(26,"i",16),h.Qb(),h.Qb(),h.Rb(27,"div",17),h.Fc(28," Cerrar "),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(29,"div",18),h.Rb(30,"div",19),h.Rb(31,"i",20),h.Zb("click",(function(){return e.goBack()})),h.Qb(),h.Rb(32,"div",21),h.Zb("click",(function(){return e.openDialogDireccion()})),h.Rb(33,"span",22),h.Fc(34),h.Qb(),h.Qb(),h.Rb(35,"div",23),h.Rb(36,"i",24),h.Zb("click",(function(){return h.xc(i),h.uc(2).toggle()})),h.Qb(),h.Qb(),h.Qb(),h.Rb(37,"div",25),h.Dc(38,E,7,0,"div",26),h.Dc(39,O,4,3,"div",27),h.Mb(40,"router-outlet"),h.Mb(41,"br"),h.Mb(42,"br"),h.Qb(),h.Dc(43,Z,9,0,"div",28),h.ec(44,"async"),h.Qb(),h.Qb()}2&i&&(h.zb(1),h.lc("opened",e.showPanelRigth),h.zb(21),h.lc("routerLink",h.pc(9,q)),h.zb(5),h.lc("routerLink",h.pc(10,q)),h.zb(7),h.Gc(e.nomDireccionCliente),h.zb(4),h.lc("ngIf",!e.isClienteLogueado),h.zb(1),h.lc("ngIf",e.isShowCalificar),h.zb(4),h.lc("ngIf",h.fc(44,7,e.listenService.isShowFooterZonaDelivery$)))},directives:[z.b,z.a,_.n,n.e,M.b,o.n,n.h,o.l,I.b,I.a,I.c],pipes:[o.b],styles:[".fondo-ini[_ngcontent-%COMP%]{position:relative;text-align:center;background:-webkit-gradient(linear,left bottom,left top,from(#00acc1),to(#3f51b5));background:linear-gradient(0deg,#00acc1,#3f51b5);color:#fff}.d-inline-box[_ngcontent-%COMP%]{display:-webkit-inline-box}.fondo-tab-group[_ngcontent-%COMP%]{background:#3f51b5;width:100%;z-index:1}.header-tab-cliente[_ngcontent-%COMP%]{display:grid!important;color:#fff}.xfooter-zona-delivery[_ngcontent-%COMP%]{bottom:0;text-align:center}.header-app-1[_ngcontent-%COMP%], .xfooter-zona-delivery[_ngcontent-%COMP%]{position:fixed;width:100%;background:#3f51b5}.header-app-1[_ngcontent-%COMP%]{color:#fff;top:0;left:0;z-index:1;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline}.content-body[_ngcontent-%COMP%]{margin-top:56px;height:-webkit-calc(100vh - 56px);height:calc(100vh - 56px);overflow:auto;background-color:#eee}.content-paso-ini[_ngcontent-%COMP%]{background:#fff;padding:10px;border-radius:10px;max-width:30%;margin:20px auto 0;min-width:300px}"]}),i})();var A=t("bv9b");function $(i,e){1&i&&(h.Rb(0,"div",26),h.Rb(1,"div",27),h.Mb(2,"mat-progress-bar",28),h.Rb(3,"span",29),h.Fc(4,"Obteniendo datos..."),h.Qb(),h.Qb(),h.Qb())}function H(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",30),h.Rb(1,"div",31),h.Zb("click",(function(){return h.xc(i),h.dc().goComercioCategoria(4)})),h.Mb(2,"img",32),h.Rb(3,"div",33),h.Rb(4,"span",34),h.Fc(5,"Mercados"),h.Qb(),h.Qb(),h.Qb(),h.Rb(6,"div",31),h.Zb("click",(function(){return h.xc(i),h.dc().goComercioCategoria(1)})),h.Mb(7,"img",35),h.Rb(8,"div",33),h.Rb(9,"span",34),h.Fc(10,"Comida"),h.Qb(),h.Qb(),h.Qb(),h.Qb()}}function B(i,e){if(1&i&&(h.Pb(0),h.Rb(1,"div",9),h.Mb(2,"img",39),h.Qb(),h.Rb(3,"p",11),h.Fc(4),h.Qb(),h.Ob()),2&i){const i=h.dc().$implicit,e=h.dc(2);h.zb(2),h.oc("src","",e.imgIcoCategoria,"",i.img,"",h.yc),h.zb(2),h.Gc(i.descripcion)}}function G(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",8),h.Zb("click",(function(){h.xc(i);const t=e.$implicit;return h.dc(2).goComercioCategoria(t.idsede_categoria)})),h.Dc(1,B,5,3,"ng-container",38),h.Qb()}if(2&i){const i=e.$implicit;h.zb(1),h.lc("ngIf",i.visible)}}function N(i,e){if(1&i&&(h.Rb(0,"div",36),h.Dc(1,G,2,1,"div",37),h.Qb()),2&i){const i=h.dc();h.zb(1),h.lc("ngForOf",i.listIcoCategoria)}}function J(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",36),h.Rb(1,"div",14),h.Mb(2,"img",40),h.Rb(3,"p",41),h.Fc(4," Pedir en Papaya Express no solo es pedir lo mejor de la ciudad, sino tambi\xe9n apoyar a los negocios locales. "),h.Qb(),h.Rb(5,"p",42),h.Fc(6,"Pide seguro, pide Papaya Express! Te lo llevamos al toque!"),h.Qb(),h.Qb(),h.Mb(7,"hr"),h.Rb(8,"button",43),h.Zb("click",(function(){return h.xc(i),h.dc().goComercios()})),h.Fc(9,"Pedir ahora "),h.Mb(10,"i",44),h.Qb(),h.Qb()}}let W=(()=>{class i{constructor(i,e,t,o){this.crudService=i,this.router=e,this.verifyClientService=t,this.listenService=o,this.loaderPage=!0,this.imgIcoCategoria="assets/images/icon-app/",this.vistaInicio=0,this.isClienteLogueado=!1}ngOnInit(){const i=this.verifyClientService.getDataClient();this.isClienteLogueado=i.isCliente,this.vistaInicio=i.direccionEnvioSelected&&i.direccionEnvioSelected.options?i.direccionEnvioSelected.options.vista:0,this.xLoadCategoria(),this.listenService.isChangeDireccionDelivery$.subscribe(i=>{var e;i&&(this.vistaInicio=(null===(e=null==i?void 0:i.options)||void 0===e?void 0:e.vista)?i.options.vista:0)}),this.listenService.setIsShowFooterZonaDelivery(!0)}xLoadCategoria(){this.loaderPage=!0,this.crudService.getAll("delivery","get-categorias",!1,!1,!1).subscribe(i=>{this.listIcoCategoria=i.data.map(i=>(i.visible=""!==i.img,i));const e=JSON.stringify(this.listIcoCategoria);localStorage.setItem("sys:allcat",btoa(e)),this.loaderPage=!1})}goComercioCategoria(i){if(!this.isClienteLogueado)return void this.registarDirCliente();const e=JSON.stringify(this.listIcoCategoria.filter(e=>e.idsede_categoria===i)[0].arritems);localStorage.setItem("sys:subcat",btoa(e)),localStorage.setItem("sys::cat",i.toString()),setTimeout(()=>{this.router.navigate(["/zona-delivery/categorias"])},300)}registarDirCliente(){this.verifyClientService.setIsDelivery(!0),this.router.navigate(["/login-client"])}goComercios(){0!==this.vistaInicio&&(localStorage.setItem("sys:subcat","0"),localStorage.setItem("sys::cat","-1"),setTimeout(()=>{this.router.navigate(["/zona-delivery/categorias"])},300))}checkOut(i){this.isClienteLogueado?setTimeout(()=>{switch(this.listenService.setIsShowFooterZonaDelivery(!1),i){case 0:this.router.navigate(["/zona-delivery/checkout"]);break;case 1:this.router.navigate(["/zona-delivery/checkout-b"])}},300):this.registarDirCliente()}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(f.a),h.Lb(n.d),h.Lb(c.a),h.Lb(r.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-establecimientos"]],decls:52,vars:4,consts:[["class","animated fadeIn div-loader-2",4,"ngIf"],[1,"animated","fadeInUp"],[1,"p-3"],["class","d-flex text-center text-white justify-content-center",4,"ngIf"],[1,"div-otros","d-flex","justify-content-center"],[1,"div-categorias","mb-3","fs-13","text-dark","text-left","bg-white"],["class","div-content-ico",4,"ngIf"],[1,"div-categorias","mb-3","fs-13","text-dark","text-left","bg-white","d-flex","justify-content-around","w-100"],["matRipple","",1,"div-ico-circle",3,"click"],[1,"img-ico-circle-border"],["src","assets/images/icon-app/icon-p-5.png","alt","loquesea"],[1,"fs-12","fw-600"],["src","assets/images/icon-app/icon-p-6.png","alt","loquesea"],[1,"div-categorias","mb-3","fs-13","text-dark","text-left","bg-aviso"],[1,"text-center"],[1,"fw-600"],[1,"fs-12","fw-100","p-1"],[1,"d-flex","align-items-center"],[1,"pr-4"],["src","assets/images/001-bio-5.png","alt","bio-1"],[1,"w-80"],["src","assets/images/001-bio-2.png","alt","bio-2"],["src","assets/images/001-bio-1.png","alt","bio-3"],["src","assets/images/001-bio-3.png","alt","bio-4"],[1,"pl-4"],["src","assets/images/0001-bio-6.png","alt","bio-5"],[1,"animated","fadeIn","div-loader-2"],[1,"loader"],["mode","indeterminate"],[1,"pt-2"],[1,"d-flex","text-center","text-white","justify-content-center"],["matRipple","",1,"div-ico",3,"click"],["src","assets/images/icon-app/icon-p-4.jpg","alt","",1,"img-ico"],[1,"titulo"],[1,"pl-1","fw-100","fs-13"],["src","assets/images/icon-app/icon-p-2.PNG","alt","",1,"img-ico"],[1,"div-content-ico"],["matRipple","","class","div-ico-circle",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["alt","",3,"src"],["src","assets/images/delivery-man-1.jpg","alt","icon-man"],[1,"fw-600","text-secondary"],[1,"fw-100"],[1,"btn","btn-success",3,"click"],[1,"pl-2","fa","fa-arrow-right"]],template:function(i,e){1&i&&(h.Dc(0,$,5,0,"div",0),h.Rb(1,"div",1),h.Rb(2,"div",2),h.Dc(3,H,11,0,"div",3),h.Qb(),h.Rb(4,"div",4),h.Rb(5,"div",5),h.Dc(6,N,2,1,"div",6),h.Dc(7,J,11,0,"div",6),h.Qb(),h.Qb(),h.Rb(8,"div",4),h.Rb(9,"div",7),h.Rb(10,"div",8),h.Zb("click",(function(){return e.checkOut(0)})),h.Rb(11,"div",9),h.Mb(12,"img",10),h.Qb(),h.Rb(13,"p",11),h.Fc(14,"Lo que quieras"),h.Qb(),h.Qb(),h.Rb(15,"div",8),h.Zb("click",(function(){return e.checkOut(1)})),h.Rb(16,"div",9),h.Mb(17,"img",12),h.Qb(),h.Rb(18,"p",11),h.Fc(19,"Envios Express"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(20,"div",4),h.Rb(21,"div",13),h.Rb(22,"div",14),h.Rb(23,"p",15),h.Fc(24,"Importante"),h.Qb(),h.Qb(),h.Mb(25,"hr"),h.Rb(26,"div",16),h.Rb(27,"div",17),h.Rb(28,"div",18),h.Mb(29,"img",19),h.Qb(),h.Rb(30,"div",20),h.Fc(31," Al recibir su pedido verifique que el repartidor tenga los implementos de bioseguridad. "),h.Qb(),h.Qb(),h.Mb(32,"hr"),h.Rb(33,"div",17),h.Rb(34,"div",18),h.Mb(35,"img",21),h.Qb(),h.Rb(36,"div",20),h.Fc(37," El repartidor desinfectara el pedido antes de entregarlo. Si su pedido es comida tendr\xe1 un precinto de seguridad. "),h.Qb(),h.Qb(),h.Mb(38,"hr"),h.Rb(39,"div",17),h.Rb(40,"div",18),h.Mb(41,"img",22),h.Qb(),h.Rb(42,"div",20),h.Fc(43," Para recibir su pedido tendr\xe1 que utilizar mascarilla. "),h.Qb(),h.Qb(),h.Mb(44,"hr"),h.Rb(45,"div",17),h.Rb(46,"div",18),h.Mb(47,"img",23),h.Qb(),h.Rb(48,"div",20),h.Fc(49," Entrega sin contacto: Cuando sea posible utiliza el pago con tarjeta o Yape en tu pedido. "),h.Qb(),h.Rb(50,"div",24),h.Mb(51,"img",25),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Qb()),2&i&&(h.lc("ngIf",e.loaderPage),h.zb(3),h.lc("ngIf",0===e.vistaInicio),h.zb(3),h.lc("ngIf",0===e.vistaInicio),h.zb(1),h.lc("ngIf",1===e.vistaInicio))},directives:[o.n,_.n,A.a,o.m],styles:[".div-ico[_ngcontent-%COMP%]{width:180px;padding:10px;text-align:left}.img-ico[_ngcontent-%COMP%]{width:100%;height:110px;-o-object-fit:cover;object-fit:cover;-webkit-transition:all .1s;transition:all .1s;border-radius:10px}.div-ico[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{top:-28px;position:relative;padding:2px;background:rgba(66,66,66,.8);border-radius:0 0 10px 10px}.div-otros[_ngcontent-%COMP%]{margin-top:-50px;padding:1.6rem}.bg-transparente[_ngcontent-%COMP%]{background:hsla(0,0%,98%,.6)!important}.div-content-ico[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.div-ico-circle[_ngcontent-%COMP%]{float:left;text-align:center}.img-ico-circle-border[_ngcontent-%COMP%]{display:inline-block;border-radius:50%;background:#fff;padding:15px;-webkit-filter:drop-shadow(1px 1px 3px #757575);filter:drop-shadow(1px 1px 3px #757575);border:1px solid #eee;margin:10px;max-width:64px}.div-categorias[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:5px;border:1px solid #e0e0e0;max-width:450px}.bg-aviso[_ngcontent-%COMP%]{background-color:#fafad2}.bg-info-2[_ngcontent-%COMP%]{background:#bbdefb}"]}),i})();var X=t("mrSG"),Y=t("HWNa"),K=t("ds6q"),ii=t("1G5W"),ei=t("nx09"),ti=t("7jE7");function oi(i,e){1&i&&(h.Rb(0,"div",5),h.Rb(1,"div",6),h.Mb(2,"mat-progress-bar",7),h.Rb(3,"span",8),h.Fc(4,"Obteniendo datos..."),h.Qb(),h.Qb(),h.Qb())}function ni(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",9),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogDireccion()})),h.Mb(1,"img",10),h.Rb(2,"p",8),h.Fc(3,"Para comenzar, establesca una direcci\xf3n de entrega."),h.Qb(),h.Qb()}}function ci(i,e){1&i&&(h.Rb(0,"div",11),h.Mb(1,"img",12),h.Rb(2,"p",8),h.Fc(3,"El servicio a\xfan no esta disponible en este lugar."),h.Qb(),h.Qb())}const ai=function(i){return{active:i}};function si(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",19),h.Zb("click",(function(){h.xc(i);const t=e.$implicit;return h.dc(3).aplicarFitroSubCategoria(t)})),h.Rb(1,"span",20),h.Fc(2),h.Qb(),h.Qb()}if(2&i){const i=e.$implicit;h.lc("ngClass",h.qc(2,ai,i.selected)),h.zb(2),h.Gc(i.descripcion)}}function ri(i,e){if(1&i&&(h.Rb(0,"div",17),h.Dc(1,si,3,4,"div",18),h.Qb()),2&i){const i=h.dc(2);h.zb(1),h.lc("ngForOf",i.listSubCatFiltros)}}function di(i,e){if(1&i){const i=h.Sb();h.Rb(0,"app-item-comercio",22),h.Zb("itemSelected",(function(e){return h.xc(i),h.dc(3).itemSelected(e)})),h.Qb()}if(2&i){const i=h.dc().$implicit;h.lc("itemEstablecimiento",i)}}function li(i,e){if(1&i&&(h.Rb(0,"div"),h.Dc(1,di,1,1,"app-item-comercio",21),h.Qb()),2&i){const i=e.$implicit;h.zb(1),h.lc("ngIf",i.visible)}}function bi(i,e){if(1&i&&(h.Rb(0,"div",13),h.Dc(1,ri,2,1,"div",14),h.Rb(2,"div",15),h.Dc(3,li,2,1,"div",16),h.Qb(),h.Mb(4,"br"),h.Mb(5,"br"),h.Qb()),2&i){const i=h.dc();h.zb(1),h.lc("ngIf",i.listSubCatFiltros.length>1),h.zb(2),h.lc("ngForOf",i.listEstablecimientos)}}let pi=(()=>{class i{constructor(i,e,t,o,n,c,a,s,r,d){this.crudService=i,this.router=e,this.verifyClientService=t,this.listenService=o,this.dialogDireccion=n,this.calcDistanceService=c,this.establecimientoService=a,this.socketService=s,this.infoTokenService=r,this.pedidoService=d,this.loaderPage=!0,this.isNullselectedDireccion=!0,this.isSelectedDireccion=!1,this.listSubCatFiltros=[],this.isMismaDireccionSelectd=!1,this.unsubscribe$=new K.Subject}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){var i,e;(null===(e=null===(i=this.infoTokenService)||void 0===i?void 0:i.infoUsToken)||void 0===e?void 0:e.tiempoEntrega)&&(this.infoTokenService.infoUsToken.tiempoEntrega=null,this.infoTokenService.set()),this.idcategoria_selected=localStorage.getItem("sys::cat"),"-1"!==this.idcategoria_selected?(this.listSubCatFiltros=JSON.parse(atob(localStorage.getItem("sys:subcat"))),this.listSubCatFiltros.map(i=>i.selected=!1),this.listSubCatFiltros.unshift({id:0,descripcion:"Todos",selected:!0})):this.listSubCatFiltros=[],this.infoClient=this.verifyClientService.getDataClient(),this.listenService.isChangeDireccionDelivery$.pipe(Object(ii.a)(this.unsubscribe$)).subscribe(i=>{i&&(this.codigo_postal_actual=i.codigo||"0",this.ciudad_actual=i.ciudad,this.isNullselectedDireccion=!1,this.direccionCliente=i,this.isMismaDireccionSelectd=!!this.infoClient.direccionEnvioSelected&&this.infoClient.direccionEnvioSelected.idcliente_pwa_direccion===this.direccionCliente.idcliente_pwa_direccion,this.infoClient.direccionEnvioSelected=this.direccionCliente,this.loadEstablecimientos())}),setTimeout(()=>{this.isNullselectedDireccion&&this.openDialogDireccion()},800)}loadEstablecimientos(){this.loaderPage=!0;const i={idsede_categoria:this.idcategoria_selected,codigo_postal:this.ciudad_actual};this.listEstablecimientos=[],this.crudService.postFree(i,"delivery","get-establecimientos",!1).subscribe(i=>{this.listEstablecimientos=i.data,this.listEstablecimientos.map(i=>{i.visible=!0}),this.setCalcDistanciaComercio(),setTimeout(()=>{this.loaderPage=!1},500)})}setCalcDistanciaComercio(){return Object(X.a)(this,void 0,void 0,(function*(){let i=this.establecimientoService.getEstableciminetosCache();i=i.filter(i=>i.idcliente_pwa_direccion===this.direccionCliente.idcliente_pwa_direccion)[0],i=i?i.listEstablecimientos:[];const e=this.listEstablecimientos.length;let t,o,n=!1;for(let c=0;c<e;c++)n=!1,t=this.listEstablecimientos[c],o=i.filter(i=>i.idsede===t.idsede)[0],o&&(t.distancia_km=o.distancia_km,t.c_servicio=this.calcDistanceService.calCostoDistancia(t,o.distancia_km),n=t.c_servicio<=15),0!==t.cerrado||n||(this.calcDistanceService.calculateRouteNoApi(this.direccionCliente,t,!1),t.calcApiGoogle=!1,i.push(t));this.establecimientoService.setEstableciminetosCache({idcliente_pwa_direccion:this.direccionCliente.idcliente_pwa_direccion,listEstablecimientos:i})}))}sleep(i){return new Promise(e=>setTimeout(e,i))}itemSelected(i){this.socketService.closeConnection(),this.verifyClientService.setIdSede(i.idsede),this.verifyClientService.setIdOrg(i.idorg),this.verifyClientService.setIsDelivery(!0),this.establecimientoService.set(i),this.pedidoService.resetAllNewPedido(),this.router.navigate(["/callback-auth"])}openDialogDireccion(){this.dialogDireccion.open(s.a,{panelClass:["my-dialog-orden-detalle","my-dialog-scrool"]}).afterClosed().subscribe(i=>{i&&(this.direccionCliente=i,this.verifyClientService.setDireccionDeliverySelected(this.direccionCliente))})}aplicarFitroSubCategoria(i){this.listSubCatFiltros.map(i=>i.selected=!1),i.selected=!0,0!==i.id?this.listEstablecimientos.map(i=>(i.visible=!1,i.idsede_subcategoria_filtro="",i.idsede_subcategoria.split(",").map(e=>{i.idsede_subcategoria_filtro+=`.${e}.`}),i)).filter(e=>e.idsede_subcategoria_filtro.indexOf("."+i.id+".")>-1).map(i=>i.visible=!0):this.listEstablecimientos.map(i=>{i.visible=!0})}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(f.a),h.Lb(n.d),h.Lb(c.a),h.Lb(r.a),h.Lb(a.b),h.Lb(Y.a),h.Lb(D.a),h.Lb(d.a),h.Lb(l.a),h.Lb(ei.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-categorias"]],decls:5,vars:4,consts:[["class","animated fadeIn div-loader-2",4,"ngIf"],[1,"animated","fadeInUp"],["class","div-img-gps p-3",3,"click",4,"ngIf"],["class","div-img-gps p-3",4,"ngIf"],["class","p-2 content-master-establecimiento",4,"ngIf"],[1,"animated","fadeIn","div-loader-2"],[1,"loader"],["mode","indeterminate"],[1,"pt-2"],[1,"div-img-gps","p-3",3,"click"],["src","assets/images/_establesca_direccion.png","alt","direccione"],[1,"div-img-gps","p-3"],["src","assets/images/_no_disponible.png","alt","no-disponible"],[1,"p-2","content-master-establecimiento"],["class","scrolling-wrapper p-2 mb-2 border-bottom content-categoria-filtro",4,"ngIf"],[1,"content-all-comercio"],[4,"ngFor","ngForOf"],[1,"scrolling-wrapper","p-2","mb-2","border-bottom","content-categoria-filtro"],["class","btn-link-cat-filtro",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn-link-cat-filtro",3,"ngClass","click"],[1,"text-secondary"],[3,"itemEstablecimiento","itemSelected",4,"ngIf"],[3,"itemEstablecimiento","itemSelected"]],template:function(i,e){1&i&&(h.Dc(0,oi,5,0,"div",0),h.Rb(1,"div",1),h.Dc(2,ni,4,0,"div",2),h.Dc(3,ci,4,0,"div",3),h.Dc(4,bi,6,2,"div",4),h.Qb()),2&i&&(h.lc("ngIf",e.loaderPage),h.zb(2),h.lc("ngIf",e.isNullselectedDireccion),h.zb(1),h.lc("ngIf",e.listEstablecimientos&&0===e.listEstablecimientos.length),h.zb(1),h.lc("ngIf",e.listEstablecimientos))},directives:[o.n,A.a,o.m,o.l,ti.a],styles:[".content-all-comercio[_ngcontent-%COMP%]{width:100%;overflow-x:auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.div-img-gps[_ngcontent-%COMP%]{text-align:center}.content-op-filter[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.btn-link-cat-filtro[_ngcontent-%COMP%]{padding:5px}.content-categoria-filtro[_ngcontent-%COMP%]{top:0;bottom:0}.scrolling-wrapper[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;white-space:nowrap;padding-bottom:7px}.btn-link-cat-filtro[_ngcontent-%COMP%]{display:inline-block;padding:8px;background:#e0e0e0;margin:5px;border-radius:10px;font-size:13px}.btn-link-cat-filtro.active[_ngcontent-%COMP%]{font-weight:600;background:#81d4fa}@media only screen and (min-width:600px){.scrolling-wrapper[_ngcontent-%COMP%]{width:300px;overflow-x:hidden;overflow-y:auto;white-space:normal;height:-webkit-calc(100vh - 140px);height:calc(100vh - 140px);border-right:1px solid #dee2e6!important;border-bottom:0 solid #dee2e6!important}.btn-link-cat-filtro[_ngcontent-%COMP%]{display:table}.content-master-establecimiento[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex}.content-categoria-filtro[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky}}"]}),i})();function hi(i,e){1&i&&(h.Rb(0,"div",9),h.Rb(1,"div",10),h.Mb(2,"mat-progress-bar",11),h.Rb(3,"span",12),h.Fc(4,"Obteniendo datos..."),h.Qb(),h.Qb(),h.Qb())}function fi(i,e){if(1&i){const i=h.Sb();h.Pb(0),h.Rb(1,"div",13),h.Rb(2,"button",14),h.Zb("click",(function(){return h.xc(i),h.dc().recargarLista()})),h.Fc(3," Recargar Lista ..."),h.Qb(),h.Qb(),h.Ob()}}function gi(i,e){if(1&i&&(h.Rb(0,"div"),h.Mb(1,"hr"),h.Rb(2,"p",27),h.Fc(3),h.ec(4,"titlecase"),h.Qb(),h.Qb()),2&i){const i=h.dc().$implicit;h.zb(3),h.Hc("Repartidor Asignado: ",h.fc(4,1,i.nom_repartidor),"")}}const ui=function(i){return{"text-success":i}};function mi(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",17),h.Zb("click",(function(){h.xc(i);const t=e.$implicit;return h.dc(2).openDetalle(t)})),h.Rb(1,"div",18),h.Rb(2,"p",19),h.Fc(3,"Pedido: "),h.Rb(4,"span",20),h.Fc(5),h.Qb(),h.Qb(),h.Rb(6,"p",21),h.Fc(7),h.Qb(),h.Qb(),h.Mb(8,"hr"),h.Rb(9,"div",22),h.Rb(10,"div",23),h.Rb(11,"p",24),h.Fc(12),h.Qb(),h.Rb(13,"p"),h.Fc(14),h.Qb(),h.Qb(),h.Rb(15,"div",25),h.Rb(16,"p"),h.Fc(17),h.Qb(),h.Qb(),h.Qb(),h.Dc(18,gi,5,3,"div",26),h.Qb()}if(2&i){const i=e.$implicit;h.zb(5),h.Hc("#",i.idpedido,""),h.zb(1),h.lc("ngClass",h.qc(9,ui,"1"===i.pwa_delivery_status)),h.zb(1),h.Gc(i.estado),h.zb(5),h.Ic("",i.fecha," ",i.hora,""),h.zb(2),h.Ic("",i.ciudad," | ",i.nombre,""),h.zb(3),h.Hc("S/.",i.total_r,""),h.zb(1),h.lc("ngIf",i.nom_repartidor)}}function vi(i,e){if(1&i&&(h.Rb(0,"div",15),h.Dc(1,mi,19,11,"div",16),h.Qb()),2&i){const i=h.dc();h.zb(1),h.lc("ngForOf",i.listMisPedidos)}}let Ci=(()=>{class i{constructor(i,e,t,o,n){this.infoTokenService=i,this.verifyClientService=e,this.crudService=t,this.socketSerrvice=o,this.router=n,this.loaderPage=!0,this.destroy$=new K.Subject,this.telefonoSoporte="934746830"}ngOnInit(){this.infoTokenService.getInfoUs(),this.infoTokenService.infoUsToken?(this.infoUser=this.infoTokenService.infoUsToken,this.conectServices()):this.verifyClientService.verifyClient().subscribe(i=>{this.infoUser=i,this.infoTokenService.infoUsToken=i,this.infoTokenService.set(),this.infoTokenService.converToJSON(),this.conectServices()})}conectServices(){this.loadMisPedidos(),this.listenChangeStatus()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}listenChangeStatus(){this.socketSerrvice.onDeliveryPedidoChangeStatus().pipe(Object(ii.a)(this.destroy$)).subscribe(i=>{this.loadMisPedidos()})}loadMisPedidos(){this.loaderPage=!1;const i={idcliente:this.infoUser.idcliente};this.listMisPedidos=[],this.crudService.postFree(i,"delivery","get-mis-pedidos",!1).subscribe(i=>{console.log(i),i.success&&(this.listMisPedidos=i.data,this.listMisPedidos.map(i=>{switch(i.arrDatosDelivery=JSON.parse(i.arrDatosDelivery),i.direccionEnvioSelected=JSON.parse(i.direccionEnvioSelected),i.pwa_delivery_status){case"0":i.estado="Preparando";break;case"1":i.estado="Asignado y preparando";break;case"3":i.estado="En Camino";break;case"4":i.estado="Entregado"}return i}),setTimeout(()=>{this.loaderPage=!1},500))})}openDetalle(i){this.infoTokenService.setOtro(i),this.router.navigate(["/zona-delivery/pedido-detalle"])}redirectWhatsAppSoporte(){window.open("https://api.whatsapp.com/send?phone=51"+this.telefonoSoporte,"_blank")}recargarLista(){window.location.reload()}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(l.a),h.Lb(c.a),h.Lb(f.a),h.Lb(d.a),h.Lb(n.d))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-mis-ordenes"]],decls:13,vars:3,consts:[["class","animated fadeIn div-loader-2",4,"ngIf"],[1,"animated","fadeInUp","p-3"],[1,"max-w","d-flex","justify-content-between","align-items-center"],[1,"fs-18"],[1,"text-center",3,"click"],["aria-hidden","true",1,"fa","fa-whatsapp"],[1,"fs-10"],[4,"ngIf","ngIfElse"],["elseTemplateList",""],[1,"animated","fadeIn","div-loader-2"],[1,"loader"],["mode","indeterminate"],[1,"pt-2"],[1,"max-w","text-center"],[1,"btn","btn-secondary",3,"click"],[1,"max-w"],["matRipple","","class","div-flat-white-borde mb-3 fs-13 text-dark text-left",3,"click",4,"ngFor","ngForOf"],["matRipple","",1,"div-flat-white-borde","mb-3","fs-13","text-dark","text-left",3,"click"],[1,"d-flex","justify-content-between"],[1,"fw-100"],[1,"fw-600"],[1,"fw-600",3,"ngClass"],[1,"row"],[1,"col-9"],[1,"fs-12","text-secondary"],[1,"col-3","text-right"],[4,"ngIf"],[1,"fs-12","text-secondary","fw-600"]],template:function(i,e){if(1&i&&(h.Dc(0,hi,5,0,"div",0),h.Rb(1,"div",1),h.Rb(2,"div",2),h.Rb(3,"p",3),h.Fc(4,"\xdaltimos 5 Pedidos"),h.Qb(),h.Rb(5,"div",4),h.Zb("click",(function(){return e.redirectWhatsAppSoporte()})),h.Mb(6,"i",5),h.Rb(7,"p",6),h.Fc(8,"Soporte"),h.Qb(),h.Qb(),h.Qb(),h.Mb(9,"hr"),h.Dc(10,fi,4,0,"ng-container",7),h.Dc(11,vi,2,1,"ng-template",null,8,h.Ec),h.Qb()),2&i){const i=h.uc(12);h.lc("ngIf",e.loaderPage),h.zb(10),h.lc("ngIf",0===e.listMisPedidos.length)("ngIfElse",i)}},directives:[o.n,A.a,o.m,_.n,o.l],pipes:[o.w],styles:["p[_ngcontent-%COMP%]{margin:0}"]}),i})();var Ri=t("IW2O"),xi=t("pxUr");const Si=function(){return{height:30,width:30}},wi=function(i){return{url:"./assets/images/placeholder.png",scaledSize:i}},Fi=function(){return{height:25,width:25}},yi=function(i){return{url:"./assets/images/delivery-man.png",scaledSize:i}};let ki=(()=>{class i{constructor(){this.displayDirections=!0,this.zoom=13}ngOnInit(){this.zoom=13}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=h.Fb({type:i,selectors:[["app-mapa-solo"]],inputs:{origin:"origin",destination:"destination"},decls:4,vars:15,consts:[[1,"border"],[3,"zoom","latitude","longitude"],[3,"latitude","longitude","iconUrl"]],template:function(i,e){1&i&&(h.Rb(0,"div",0),h.Rb(1,"agm-map",1),h.Mb(2,"agm-marker",2),h.Mb(3,"agm-marker",2),h.Qb(),h.Qb()),2&i&&(h.zb(1),h.lc("zoom",e.zoom)("latitude",e.destination.latitude)("longitude",e.destination.longitude),h.zb(1),h.lc("latitude",e.destination.latitude)("longitude",e.destination.longitude)("iconUrl",h.qc(10,wi,h.pc(9,Si))),h.zb(1),h.lc("latitude",e.origin.latitude)("longitude",e.origin.longitude)("iconUrl",h.qc(13,yi,h.pc(12,Fi))))},directives:[xi.b,xi.c],styles:["agm-map[_ngcontent-%COMP%]{height:230px}"]}),i})();function Qi(i,e){if(1&i&&(h.Rb(0,"li",20),h.Rb(1,"div",21),h.Fc(2),h.ec(3,"number"),h.Qb(),h.Rb(4,"div",22),h.Fc(5),h.ec(6,"number"),h.Qb(),h.Qb()),2&i){const i=e.$implicit,t=h.dc(9);h.lc("matRippleColor",t.rippleColorSubItem),h.zb(2),h.Ic(" ",h.gc(3,5,i.cantidad_seleccionada,"2.")," ",i.des," "),h.zb(2),h.lc("hidden",0===i.precio),h.zb(1),h.Hc(" + ",h.gc(6,8,i.precio,"0.2")," ")}}function Di(i,e){if(1&i&&(h.Pb(0),h.Rb(1,"div"),h.Rb(2,"ul",13),h.Dc(3,Qi,7,11,"li",19),h.Qb(),h.Qb(),h.Ob()),2&i){const i=h.dc(2).$implicit;h.zb(3),h.lc("ngForOf",i.subitems_view)}}function Pi(i,e){if(1&i&&(h.Pb(0),h.Rb(1,"li",14),h.Rb(2,"div",15),h.Fc(3),h.ec(4,"number"),h.Qb(),h.Rb(5,"div",16),h.Fc(6),h.ec(7,"lowercase"),h.Rb(8,"span",17),h.Fc(9),h.Qb(),h.Qb(),h.Rb(10,"div",18),h.Fc(11),h.ec(12,"number"),h.Qb(),h.Qb(),h.Dc(13,Di,4,1,"ng-container",7),h.Ob()),2&i){const i=h.dc().$implicit,e=h.dc(6);h.zb(1),h.lc("matRippleColor",e.rippleColor),h.zb(2),h.Gc(h.gc(4,7,i.cantidad_seleccionada,"2.")),h.zb(3),h.Hc("",h.fc(7,10,i.des)," "),h.zb(2),h.lc("hidden",!i.indicaciones),h.zb(1),h.Hc("( ",i.indicaciones," )"),h.zb(2),h.Gc(h.gc(12,12,i.precio_print,"0.2")),h.zb(2),h.lc("ngIf",i.subitems_view)}}function zi(i,e){if(1&i&&(h.Rb(0,"div"),h.Dc(1,Pi,14,15,"ng-container",7),h.Qb()),2&i){const i=e.$implicit;h.zb(1),h.lc("ngIf",i.cantidad_seleccionada>0)}}function _i(i,e){if(1&i&&(h.Pb(0),h.Rb(1,"div",11),h.Rb(2,"span"),h.Fc(3),h.ec(4,"titlecase"),h.Qb(),h.Rb(5,"div",12),h.Fc(6),h.Qb(),h.Qb(),h.Rb(7,"ul",13),h.Dc(8,zi,2,1,"div",10),h.Qb(),h.Ob()),2&i){const i=h.dc().$implicit;h.zb(3),h.Gc(h.fc(4,3,i.des)),h.zb(3),h.Gc(i.count_items),h.zb(2),h.lc("ngForOf",i.items)}}function Mi(i,e){if(1&i&&(h.Rb(0,"div"),h.Dc(1,_i,9,5,"ng-container",7),h.Qb()),2&i){const i=e.$implicit;h.zb(1),h.lc("ngIf",i.count_items>0)}}function Ii(i,e){if(1&i&&(h.Pb(0),h.Rb(1,"div",8),h.Rb(2,"span"),h.Fc(3,"Detalle del pedido"),h.Qb(),h.Rb(4,"div",9),h.Fc(5),h.Qb(),h.Qb(),h.Dc(6,Mi,2,1,"div",10),h.Ob()),2&i){const i=h.dc().$implicit;h.zb(5),h.Gc(i.count_items_seccion),h.zb(1),h.lc("ngForOf",i.secciones)}}function Ei(i,e){if(1&i&&(h.Rb(0,"div",6),h.Dc(1,Ii,7,2,"ng-container",7),h.Qb()),2&i){const i=e.$implicit;h.zb(1),h.lc("ngIf",i.count_items_seccion>0)}}function Ti(i,e){if(1&i&&(h.Rb(0,"li",14),h.Rb(1,"div",13),h.Fc(2),h.ec(3,"titlecase"),h.Qb(),h.Rb(4,"div"),h.Fc(5),h.ec(6,"number"),h.Qb(),h.Qb()),2&i){const i=e.$implicit,t=h.dc(2);h.lc("matRippleColor",t.rippleColor),h.zb(2),h.Gc(h.fc(3,3,i.descripcion)),h.zb(3),h.Gc(h.gc(6,5,i.importe,"0.2"))}}function Oi(i,e){if(1&i&&(h.Rb(0,"div",1),h.Dc(1,Ei,2,1,"div",2),h.Rb(2,"div",3),h.Rb(3,"ul",4),h.Dc(4,Ti,7,8,"li",5),h.Qb(),h.Qb(),h.Qb()),2&i){const i=h.dc();h.zb(1),h.lc("ngForOf",i._miPedido.tipoconsumo),h.zb(3),h.lc("ngForOf",i._arrSubtotales)}}let Li=(()=>{class i{constructor(i,e){this.crudService=i,this.miPedidoService=e}ngOnInit(){this.loadPedido()}loadPedido(){const i={mesa:0,idsede:this.infoPedido.idsede,idorg:this.infoPedido.idorg,idpedido:this.infoPedido.idpedido};this.crudService.postFree(i,"pedido","lacuenta-zona-delivery",!1).subscribe(e=>{this._miPedido=this.miPedidoService.darFormatoPedido(e),this.crudService.postFree(i,"pedido","lacuenta-pedido-totales",!1).subscribe(i=>{this._arrSubtotales=i.data})})}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(f.a),h.Lb(ei.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-comp-pedido-detalle"]],inputs:{infoPedido:"infoPedido"},decls:1,vars:1,consts:[["class","w-100 div-resumen-pedido",4,"ngIf"],[1,"w-100","div-resumen-pedido"],["class","xCursor",4,"ngFor","ngForOf"],[1,"div-total"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],[1,"xCursor"],[4,"ngIf"],[1,"div-plr","titulo-tpc"],[1,"countItem","countTpc"],[4,"ngFor","ngForOf"],[1,"div-plr","titulo-seccion"],[1,"countItem","countSeccion"],[1,"w-100"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"],[1,"pr-2","fw-100"],[1,"w-100","fw-100"],[3,"hidden"],[1,"fw-100"],["class","d-flex div-plr li-item fw-100 fs-12 text-secondary subitem-content-resumen","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"d-flex","div-plr","li-item","fw-100","fs-12","text-secondary","subitem-content-resumen",3,"matRippleColor"],[1,"d-flex","w-100","pl-4"],[1,"fs-11","text-right",2,"width","45px",3,"hidden"]],template:function(i,e){1&i&&h.Dc(0,Oi,5,2,"div",0),2&i&&h.lc("ngIf",e._miPedido)},directives:[o.n,o.m,_.n],pipes:[o.w,o.f,o.k],styles:[".div-plr[_ngcontent-%COMP%]{padding-left:7px;padding-right:7px}.div-content-all[_ngcontent-%COMP%]{top:0;position:-webkit-sticky;position:sticky}.titulo-tpc[_ngcontent-%COMP%]{background:#424242;color:#e0e0e0}.titulo-seccion[_ngcontent-%COMP%], .titulo-tpc[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.titulo-seccion[_ngcontent-%COMP%]{background:#ffebcd}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.countItem[_ngcontent-%COMP%]{padding:4px 7px;border-radius:90%;line-height:1;font-size:12px;margin-top:2px}.countTpc[_ngcontent-%COMP%]{float:right;background:#212121;color:#bdbdbd}.countSeccion[_ngcontent-%COMP%]{float:right;color:#616161;background:#ffcc80}"]}),i})();function Ui(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",13),h.Rb(1,"div",14),h.Zb("click",(function(){return h.xc(i),h.dc().callPhone()})),h.Mb(2,"i",15),h.Fc(3," LLamar"),h.Qb(),h.Rb(4,"div",16),h.Zb("click",(function(){return h.xc(i),h.dc().redirectWhatsApp()})),h.Mb(5,"i",17),h.Fc(6," Enviar Mensaje"),h.Qb(),h.Qb()}}function ji(i,e){if(1&i){const i=h.Sb();h.Pb(0),h.Rb(1,"div",18),h.Rb(2,"p",19),h.Fc(3,"Por favor revise su pedido antes de confirmar."),h.Qb(),h.Rb(4,"button",20),h.Zb("click",(function(){return h.xc(i),h.dc(2).openDialogCalificacion()})),h.Fc(5,"Listo, recibi conforme."),h.Qb(),h.Qb(),h.Ob()}}function Zi(i,e){if(1&i&&(h.Rb(0,"div"),h.Dc(1,ji,6,0,"ng-container",12),h.Qb()),2&i){const i=h.dc();h.zb(1),h.lc("ngIf","3"==i.dataPedido.pwa_delivery_status||1===i.dataPedido.pwa_delivery_servicio_propio)}}let qi=(()=>{class i{constructor(i,e,t,o,n){this.infoTokenService=i,this.socketService=e,this.dialog=t,this.calcDistanciaService=o,this.router=n,this.estadoPedido="",this.showTelefonoRepartidor=!1,this.destroy$=new K.Subject}ngOnInit(){this.dataPedido=this.infoTokenService.infoUsToken.otro,this.direccionCliente=this.infoTokenService.infoUsToken.otro.direccionEnvioSelected||this.infoTokenService.infoUsToken.direccionEnvioSelected,this.direccionCliente="object"!=typeof this.direccionCliente?JSON.parse(this.direccionCliente):this.direccionCliente,this.origin||(this.origin={latitude:parseFloat(this.infoTokenService.infoUsToken.otro.latitude),longitude:parseFloat(this.infoTokenService.infoUsToken.otro.longitude)}),this.destination={latitude:this.direccionCliente.latitude,longitude:this.direccionCliente.longitude},"4"!==this.dataPedido.pwa_delivery_status&&this.listenUbicacionRepartidor(),this.readEstadoPedido(this.dataPedido.pwa_delivery_status)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}listenUbicacionRepartidor(){this.socketService.onDeliveryUbicacionRepartidor().pipe(Object(Ri.takeUntil)(this.destroy$)).subscribe(i=>{if(4===this.dataPedido.pwa_delivery_status)return;const e=i,t=this.calcDistanciaService.calcDistancia(e,this.destination);this.readEstadoPedido(t?3:1),"4"!==this.estadoPedido&&(this.origin=e)}),this.socketService.onDeliveryPedidoChangeStatus().pipe(Object(Ri.takeUntil)(this.destroy$)).subscribe(i=>{"4"!==this.estadoPedido&&this.readEstadoPedido(i)})}readEstadoPedido(i){let e="";switch(this.showTelefonoRepartidor=!1,this.dataPedido.pwa_delivery_status=i,i.toString()){case"0":e="Preparando";break;case"1":e="Asignado y preparando",this.showTelefonoRepartidor=!0;break;case"3":e="En Camino",this.showTelefonoRepartidor=!0;break;case"4":e="Entregado",this.showTelefonoRepartidor=!1}this.estadoPedido=e}redirectWhatsApp(){window.open("https://api.whatsapp.com/send?phone=51"+this.dataPedido.telefono_repartidor,"_blank")}callPhone(){window.open("tel:"+this.dataPedido.telefono_repartidor)}openDialogCalificacion(){const i=new p;i.idrepartidor=this.dataPedido.idrepartidor,i.idcliente=this.dataPedido.idcliente,i.idpedido=this.dataPedido.idpedido,i.tipo=1,i.showNombre=!0,i.nombre=this.dataPedido.nom_repartidor+" "+this.dataPedido.ap_repartidor,i.titulo="Como calificas a nuestro repartidor?",i.showTitulo=!0,i.showMsjTankyou=!0;const e=new a.d;e.disableClose=!0,e.hasBackdrop=!0,e.data={dataCalificado:i},this.dialog.open(Q,e).afterClosed().subscribe(i=>{this.socketService.emit("repartidor-notifica-fin-pedido",this.dataPedido),this.dataPedido.pwa_delivery_status=4,this.infoTokenService.set(),this.showTelefonoRepartidor=!1,this.estadoPedido="Entregado",this.router.navigate(["/zona-delivery/establecimientos"])})}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(l.a),h.Lb(d.a),h.Lb(a.b),h.Lb(Y.a),h.Lb(n.d))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-mi-orden-detalle"]],decls:28,vars:14,consts:[[1,"animated","fadeInRight","p-3","text-dark","text-left"],[1,"div-flat-white-borde","mb-3"],[3,"origin","destination"],[1,"div-flat-white-borde","fs-13"],[1,"d-flex","justify-content-between"],[1,"fw-600"],[1,"fw-100"],[1,"w-50","text-right"],[1,"fw-600","fs-20"],["class","row text-center",4,"ngIf"],[1,"div-flat-white-borde","mb-3","fs-13"],[3,"infoPedido"],[4,"ngIf"],[1,"row","text-center"],["matRipple","",1,"col-6","border-right","text-info",3,"click"],["aria-hidden","true",1,"fa","fa-phone"],["matRipple","",1,"col-6","text-info",3,"click"],["aria-hidden","true",1,"fa","fa-commenting-o"],[1,"div-flat-white-borde","mb-3","fs-13","text-center"],[1,"text-secondary","fs-13"],["mat-flat-button","","color","primary",3,"click"]],template:function(i,e){1&i&&(h.Rb(0,"div",0),h.Rb(1,"div",1),h.Rb(2,"h4"),h.Fc(3),h.Qb(),h.Rb(4,"div"),h.Mb(5,"app-mapa-solo",2),h.Qb(),h.Rb(6,"div",3),h.Rb(7,"div",4),h.Rb(8,"div"),h.Rb(9,"span",5),h.Fc(10,"Repartidor: "),h.Qb(),h.Mb(11,"br"),h.Rb(12,"div",6),h.Rb(13,"span"),h.Fc(14),h.ec(15,"titlecase"),h.ec(16,"titlecase"),h.Qb(),h.Mb(17,"br"),h.Rb(18,"span"),h.Fc(19),h.Qb(),h.Qb(),h.Qb(),h.Rb(20,"div",7),h.Rb(21,"span",8),h.Fc(22),h.Qb(),h.Qb(),h.Qb(),h.Mb(23,"hr"),h.Dc(24,Ui,7,0,"div",9),h.Qb(),h.Qb(),h.Rb(25,"div",10),h.Mb(26,"app-comp-pedido-detalle",11),h.Qb(),h.Dc(27,Zi,2,1,"div",12),h.Qb()),2&i&&(h.zb(3),h.Hc("Pedido # ",e.dataPedido.idpedido,""),h.zb(2),h.lc("origin",e.origin)("destination",e.destination),h.zb(9),h.Ic("",h.fc(15,10,e.dataPedido.nom_repartidor)," ",h.fc(16,12,e.dataPedido.ap_repartidor)," "),h.zb(5),h.Hc(" ",e.dataPedido.telefono_repartidor," "),h.zb(3),h.Hc(" ",e.estadoPedido," "),h.zb(2),h.lc("ngIf",e.dataPedido.idrepartidor&&"4"!==e.dataPedido.pwa_delivery_status),h.zb(2),h.lc("infoPedido",e.dataPedido),h.zb(1),h.lc("ngIf","4"!==e.dataPedido.pwa_delivery_status&&e.dataPedido.idrepartidor))},directives:[ki,o.n,Li,_.n,C.a],pipes:[o.w],styles:[""]}),i})();var Vi=t("2dOp"),Ai=t("Ln/Y"),$i=t("e9Tq"),Hi=t("22RU"),Bi=t("wne+"),Gi=t("MWJo"),Ni=t("/Qaf");const Ji=function(i){return{"propina-selected":i}};function Wi(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",3),h.Zb("click",(function(){h.xc(i);const t=e.$implicit;return h.dc(2).selectedItem(t)})),h.Mb(1,"img",4),h.Rb(2,"p"),h.Fc(3),h.Qb(),h.Qb()}if(2&i){const i=e.$implicit;h.lc("ngClass",h.qc(3,Ji,i.selected)),h.zb(1),h.nc("src","./assets/images/icon-app/",i.img,"",h.yc),h.zb(2),h.Gc(i.descripcion)}}function Xi(i,e){if(1&i&&(h.Rb(0,"div",1),h.Dc(1,Wi,4,5,"div",2),h.Qb()),2&i){const i=h.dc();h.zb(1),h.lc("ngForOf",i.listVehiculo)}}let Yi=(()=>{class i{constructor(i){this.crudService=i,this.optionSelected=new h.n,this.listVehiculo=null}ngOnInit(){this.selectedFirst=!this.selectedFirst||this.selectedFirst,this.loadTipoVehiculo()}loadTipoVehiculo(){this.crudService.getAll("delivery","get-tipo-vehiculo",!1,!1,!1).subscribe(i=>{this.listVehiculo=i.data,this.selectedFirst&&this.selectedItem(this.listVehiculo[0])})}selectedItem(i){this.listVehiculo.map(i=>i.selected=!1),i.selected=!0,this.itemSelected=i,this.optionSelected.emit(this.itemSelected)}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(f.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-tipo-vehiculo"]],inputs:{selectedFirst:"selectedFirst"},outputs:{optionSelected:"optionSelected"},decls:1,vars:1,consts:[["class","content-op",4,"ngIf"],[1,"content-op"],["matRipple","","class","item-propina",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-propina",3,"ngClass","click"],["alt","",3,"src"]],template:function(i,e){1&i&&h.Dc(0,Xi,2,1,"div",0),2&i&&h.lc("ngIf",e.listVehiculo)},directives:[o.n,o.m,_.n,o.l],styles:["p[_ngcontent-%COMP%]{margin:0}.content-op[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:15px}.item-propina[_ngcontent-%COMP%]{text-align:center;padding:10px;border:1px solid #9e9e9e;border-radius:5px;font-size:12px;background-color:#fff;margin-left:5px;min-width:90px;-webkit-transition:all .3s;transition:all .3s}.propina-selected[_ngcontent-%COMP%]{background-color:#708090;color:#fff}"]}),i})(),Ki=(()=>{class i{constructor(){this.textChanged=new h.n,this.label_txt="Buscamos en la ciudad para llevarselo lo que necesecita"}ngOnInit(){}changeText(i){this.textChanged.emit(i)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=h.Fb({type:i,selectors:[["app-comp-caja-texto"]],inputs:{placeholder_txt:"placeholder_txt"},outputs:{textChanged:"textChanged"},decls:3,vars:1,consts:[["rows","5","matInput","",1,"text-area-nota",3,"placeholder","keyup"],["txtComent",""]],template:function(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div"),h.Rb(1,"textarea",0,1),h.Zb("keyup",(function(){h.xc(i);const t=h.uc(2);return e.changeText(t.value)})),h.Qb(),h.Qb()}2&i&&(h.zb(1),h.mc("placeholder",e.placeholder_txt))},directives:[m.a],styles:[".text-area-nota[_ngcontent-%COMP%]{width:100%;border-radius:8px;border:1px solid #d3d3d3;padding:5px;font-size:14px;background:#fff}"]}),i})();const ie=function(i){return{"propina-selected":i}};function ee(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",2),h.Zb("click",(function(){h.xc(i);const t=e.$implicit;return h.dc().selectedItem(t)})),h.Rb(1,"p",3),h.Fc(2),h.Qb(),h.Rb(3,"p",4),h.Fc(4),h.Qb(),h.Qb()}if(2&i){const i=e.$implicit;h.lc("ngClass",h.qc(3,ie,i.selected)),h.zb(2),h.Hc("",i.descripcion," "),h.zb(2),h.Hc(" ",i.showImporte," ")}}let te=(()=>{class i{constructor(){this.optionSelected=new h.n}ngOnInit(){this.loadOpaciones()}loadOpaciones(){this.listOpciones=[],this.listOpciones.push({id:0,value:20,showImporte:"S/. 25.00",descripcion:"Menos que",selected:!1}),this.listOpciones.push({id:1,value:50,showImporte:"S/. 50.00",descripcion:"Menos o igual que",selected:!1}),this.listOpciones.push({id:2,value:100,showImporte:"S/. 70.00",descripcion:"M\xe1s que",selected:!1})}selectedItem(i){this.listOpciones.map(i=>i.selected=!1),i.selected=!0,this.itemSelected=i,this.optionSelected.emit(this.itemSelected)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=h.Fb({type:i,selectors:[["app-comp-op-costo-estimado"]],outputs:{optionSelected:"optionSelected"},decls:2,vars:1,consts:[[1,"content-op"],["matRipple","","class","item-propina",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-propina",3,"ngClass","click"],[1,"fw-600"],[1,"fs-14"]],template:function(i,e){1&i&&(h.Rb(0,"div",0),h.Dc(1,ee,5,5,"div",1),h.Qb()),2&i&&(h.zb(1),h.lc("ngForOf",e.listOpciones))},directives:[o.m,_.n,o.l],styles:["p[_ngcontent-%COMP%]{margin:0}.content-op[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:15px}.item-propina[_ngcontent-%COMP%]{text-align:center;padding:10px;border:1px solid #9e9e9e;border-radius:5px;font-size:12px;background-color:#fff;margin-left:5px;-webkit-transition:all .3s;transition:all .3s}.propina-selected[_ngcontent-%COMP%]{background-color:#708090;color:#fff}"]}),i})();function oe(i,e){if(1&i&&(h.Rb(0,"p",39),h.Fc(1),h.Qb()),2&i){const i=h.dc(2);h.zb(1),h.Hc(" ",i.msjErrorDir," ")}}function ne(i,e){1&i&&h.Mb(0,"i",40)}function ce(i,e){1&i&&h.Mb(0,"i",41)}const ae=function(i){return{fadeInRight:i}},se=function(i){return{"text-danger":i}};function re(i,e){if(1&i){const i=h.Sb();h.Pb(0),h.Rb(1,"div",2),h.Rb(2,"div",3),h.Rb(3,"p",4),h.Fc(4,"Pide lo que quieras."),h.Qb(),h.Rb(5,"p",5),h.Fc(6,"Buscaremos en su ciudad para llevarte lo que necesitas. "),h.Qb(),h.Mb(7,"hr"),h.Rb(8,"div"),h.Rb(9,"p",6),h.Fc(10,"Tipo de movilidad que requiere."),h.Qb(),h.Rb(11,"app-tipo-vehiculo",7),h.Zb("optionSelected",(function(e){return h.xc(i),h.dc().vehiculoSelected(e)})),h.Qb(),h.Qb(),h.Mb(12,"hr"),h.Rb(13,"div",8),h.Rb(14,"p",9),h.Fc(15,"Que compraremos?."),h.Qb(),h.Rb(16,"app-comp-caja-texto",10),h.Zb("textChanged",(function(e){return h.xc(i),h.dc().textChanged(e)})),h.Qb(),h.Mb(17,"hr"),h.Rb(18,"p",9),h.Fc(19,"Costo estimado de la compra."),h.Qb(),h.Rb(20,"app-comp-op-costo-estimado",7),h.Zb("optionSelected",(function(e){return h.xc(i),h.dc().costoSelected(e)})),h.Qb(),h.Mb(21,"hr"),h.Rb(22,"div",11),h.Rb(23,"button",12),h.Zb("click",(function(){return h.xc(i),h.dc().goNext()})),h.Fc(24,"Listo, continuar"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(25,"div",13),h.Rb(26,"p"),h.Rb(27,"i",14),h.Zb("click",(function(){return h.xc(i),h.dc().goNext()})),h.Qb(),h.Fc(28," Pide lo que quieras"),h.Qb(),h.Mb(29,"hr"),h.Rb(30,"div"),h.Rb(31,"p",9),h.Fc(32,"De d\xf3nde lo compramos? "),h.Rb(33,"span",15),h.Fc(34,"(Opcional)"),h.Qb(),h.Qb(),h.Rb(35,"mat-form-field",16),h.Rb(36,"input",17),h.Zb("ngModelChange",(function(e){return h.xc(i),h.dc().datosFormUno.donde_compramos=e})),h.Qb(),h.Qb(),h.Qb(),h.Rb(37,"p",9),h.Fc(38,"A d\xf3nde lo llevamos?"),h.Qb(),h.Rb(39,"div",18),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogDireccion()})),h.Rb(40,"p",19),h.Rb(41,"strong",20),h.Fc(42),h.Qb(),h.Mb(43,"br"),h.Fc(44),h.Qb(),h.Rb(45,"p",21),h.Fc(46),h.Qb(),h.Dc(47,oe,2,1,"p",22),h.Qb(),h.Mb(48,"hr"),h.Rb(49,"div",23),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogTiempoEntrega()})),h.Rb(50,"div"),h.Rb(51,"p",9),h.Fc(52,"Cuando lo entregamos?"),h.Qb(),h.Rb(53,"p",24),h.Rb(54,"span",25),h.Fc(55),h.Rb(56,"strong"),h.Fc(57),h.ec(58,"titlecase"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(59,"div"),h.Mb(60,"i",26),h.Qb(),h.Qb(),h.Mb(61,"hr"),h.Rb(62,"div",18),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogMetodoPago()})),h.Rb(63,"div",27),h.Rb(64,"p",28),h.Fc(65,"Metodo de pago: "),h.Rb(66,"strong"),h.Fc(67),h.Qb(),h.Qb(),h.Rb(68,"button",29),h.Rb(69,"span",30),h.Fc(70,"Cambiar"),h.Qb(),h.Qb(),h.Qb(),h.Rb(71,"span",31),h.Fc(72,"Especifique un metodo de pago."),h.Qb(),h.Qb(),h.Mb(73,"hr"),h.Rb(74,"div",18),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogsendSMS()})),h.Rb(75,"span",32),h.Fc(76,"Es necesario el numero de su telefono"),h.Qb(),h.Rb(77,"p",28),h.Fc(78,"Telefono contacto: "),h.Rb(79,"strong"),h.Fc(80),h.Qb(),h.Qb(),h.Rb(81,"span",31),h.Fc(82,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),h.Qb(),h.Qb(),h.Mb(83,"hr"),h.Mb(84,"br"),h.Rb(85,"div",33),h.Rb(86,"div",34),h.Fc(87,"Costo de entrega"),h.Qb(),h.Rb(88,"div",35),h.Dc(89,ne,1,0,"i",36),h.Fc(90),h.ec(91,"number"),h.Qb(),h.Qb(),h.Rb(92,"p",37),h.Fc(93,"Entrega sin contacto: cuando sea posible, seleccione pagar con Yape."),h.Qb(),h.Mb(94,"br"),h.Mb(95,"hr"),h.Rb(96,"div",11),h.Rb(97,"button",12),h.Zb("click",(function(){return h.xc(i),h.dc().enviarPedidoLoQ()})),h.Dc(98,ce,1,0,"i",38),h.Fc(99," Listo, Enviar. "),h.Qb(),h.Qb(),h.Mb(100,"br"),h.Mb(101,"br"),h.Qb(),h.Qb(),h.Ob()}if(2&i){const i=h.dc();h.zb(2),h.lc("hidden",i.isShowFinalize),h.zb(21),h.lc("disabled",!i.isFormValid),h.zb(2),h.lc("hidden",!i.isShowFinalize)("ngClass",h.qc(31,ae,i.isShowFinalize)),h.zb(11),h.lc("ngModel",i.datosFormUno.donde_compramos),h.zb(3),h.lc("matRippleColor",i.rippleColor),h.zb(2),h.lc("ngClass",h.qc(33,se,""===i.direccionCliente.direccion)),h.zb(1),h.Gc(i.direccionCliente.titulo),h.zb(2),h.Hc(" ",i.direccionCliente.direccion,""),h.zb(2),h.Hc(" ",i.direccionCliente.referencia," "),h.zb(1),h.lc("ngIf",i.msjErrorDir.length>0),h.zb(2),h.lc("matRippleColor",i.rippleColor),h.zb(5),h.lc("ngClass",h.qc(35,se,!i.isTiempoEntregaValid)),h.zb(1),h.Hc(" ",i.tiempoEntregaSelected.descripcion,": "),h.zb(2),h.Hc("",h.fc(58,26,i.tiempoEntregaSelected.value)," "),h.zb(5),h.lc("matRippleColor",i.rippleColor),h.zb(5),h.Gc(i.metodoPagoSelected.descripcion),h.zb(4),h.lc("hidden",i.metodoPagoSelected.idtipo_pago),h.zb(3),h.lc("matRippleColor",i.rippleColor),h.zb(1),h.lc("hidden",i.infoToken.telefono.length>=5),h.zb(5),h.Gc(i.infoToken.telefono),h.zb(1),h.lc("hidden",i.infoToken.telefono.length>=5),h.zb(8),h.lc("ngIf",i.isCalculandoDistanciaA),h.zb(1),h.Hc(" S/. ",h.gc(91,28,i.importe_pagar,".2"),""),h.zb(7),h.lc("disabled",!i.isFormValidDos||i.isLoading),h.zb(1),h.lc("ngIf",i.isLoading)}}function de(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",42),h.Rb(1,"div",43),h.Mb(2,"i",44),h.Mb(3,"br"),h.Rb(4,"p",4),h.Fc(5," Pedido enviado. "),h.Qb(),h.Rb(6,"p",45),h.Fc(7,"Atenderemos su pedido lo mas pronto posible. En breve un repartidor se comunicara con usted para cumplir con su pedido."),h.Qb(),h.Mb(8,"hr"),h.Rb(9,"button",46),h.Zb("click",(function(){return h.xc(i),h.dc().goZona()})),h.Fc(10,"Listo"),h.Qb(),h.Qb(),h.Qb()}}let le=(()=>{class i{constructor(i,e,t,o,n,c,a,s,r,d,l){this.infoTokenService=i,this.plazaDelivery=e,this.calcDistanceService=t,this.crudService=o,this.dialogDireccion=n,this.dialogTelefono=c,this.dialogTiempoEntrega=a,this.dialog=s,this.router=r,this.utilService=d,this.establecimientoService=l,this.lasCiudad="",this.importe_pagar=4,this.isLoading=!1,this.isEnviado=!1,this.isExpress=!1,this.isCalculandoDistanciaA=!1,this.isShowFinalize=!1,this.systemOS="",this.msjErrorDir="",this.isFormValid=!1,this.isFormValidDos=!1,this.isTiempoEntregaValid=!0}ngOnInit(){this.systemOS=this.utilService.getOS(),this.msjErrorDir="",this.infoToken=this.infoTokenService.getInfoUs(),this.direccionClienteIni=new Vi.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.tiempoEntregaSelected=new Gi.a,this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(!1),this.datosFormUno={},this.datosFormUno.que_compramos="",this.datosFormUno.telefono=this.infoToken.telefono,this.direccionCliente=this.infoToken.direccionEnvioSelected?this.infoToken.direccionEnvioSelected:this.direccionClienteIni,this.scrollTopInit(),this.getDatosSede()}getTiempoEntrega(){const i=(new Date).getHours();if(this.laPlazaDelivery.options.s_hfin){const e=this.laPlazaDelivery.options.s_hfin.split(":")[0];this.isTiempoEntregaValid=i<=parseInt(e,0)}this.tiempoEntregaSelected.modificado?this.isTiempoEntregaValid=!0:this.isTiempoEntregaValid?(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value="10 a 15 Minutos",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0):(this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0)}getDatosSede(){if(this.direccionCliente.ciudad)return this.direccionCliente.ciudad===this.lasCiudad?(this.getTiempoEntrega(),this.calcularDistanciaEntrega(),void this.setDiasHoraEstablecimineto()):void this.plazaDelivery.loadDatosPlazaByCiudad(this.direccionCliente.ciudad).subscribe(i=>{this.laPlazaDelivery=i,this.lasCiudad=this.laPlazaDelivery.ciudad,this.laPlazaDelivery.latitude=this.laPlazaDelivery.centro.lat,this.laPlazaDelivery.longitude=this.laPlazaDelivery.centro.lon,this.calcularDistanciaEntrega(),this.setDiasHoraEstablecimineto(),this.getTiempoEntrega()})}vehiculoSelected(i){this.datosFormUno.vehiculo=i,this.validFormUno(),this.calcCostoServicio()}costoSelected(i){this.datosFormUno.costo_producto=i,this.validFormUno()}textChanged(i){this.datosFormUno.que_compramos=i,this.validFormUno()}validFormUno(){this.isFormValid=this.datosFormUno.vehiculo&&this.datosFormUno.costo_producto&&""!==this.datosFormUno.que_compramos}validFormDos(){this.isFormValidDos=this.isFormValid,this.isFormValidDos=!!this.metodoPagoSelected.idtipo_pago&&this.isFormValidDos,this.isFormValidDos=!!this.direccionCliente.ciudad&&this.isFormValidDos,this.isFormValidDos=this.datosFormUno.telefono.trim().length>=5&&this.isFormValidDos,this.isFormValidDos=this.isFormValidDos&&!this.isCalculandoDistanciaA}openDialogMetodoPago(){const i=new a.d;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,i.data={importeTotalPagar:3},this.dialog.open(Ai.a,i).afterClosed().subscribe(i=>{this.metodoPagoSelected=i,this.validFormDos()})}openDialogTiempoEntrega(){const i=new a.d;i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTiempoEntrega.open(Ni.a,i).afterClosed().subscribe(i=>{i&&(this.infoTokenService.setTiempoEntrega(i),this.tiempoEntregaSelected=i,this.isTiempoEntregaValid=!0)})}openDialogsendSMS(){const i=new a.d;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open($i.a,i).afterClosed().subscribe(i=>{i.verificado&&(this.infoToken.telefono=i.numberphone,this.infoTokenService.setTelefono(i.numberphone),this.datosFormUno.telefono=this.infoToken.telefono,this.validFormDos())})}openDialogDireccion(){const i=new a.d;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0},this.dialogDireccion.open(s.a,i).afterClosed().subscribe(i=>{i&&(this.msjErrorDir="",this.direccionCliente=i,this.getDatosSede(),this.validFormDos())})}calcularDistanciaEntrega(){if(this.isCalculandoDistanciaA=!0,this.direccionCliente.ciudad.toLocaleLowerCase()!==this.laPlazaDelivery.ciudad.toLocaleLowerCase())return this.direccionCliente.codigo=null,void(this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.");this.calcDistanceService.calculateRoute(this.direccionCliente,this.laPlazaDelivery,!1),setTimeout(()=>{this.isCalculandoDistanciaA=!1,this.laPlazaDelivery=this.laPlazaDelivery,this.validFormDos(),this.calcCostoServicio()},1600)}calcCostoServicio(){this.laPlazaDelivery&&(this.importe_pagar=this.laPlazaDelivery.options.costo_mandado+(this.laPlazaDelivery.c_servicio-this.laPlazaDelivery.c_minimo)+this.datosFormUno.vehiculo.costo_adicional)}enviarPedidoLoQ(){try{this.isLoading=!0,this.isEnviado=!1,this.datosFormUno.importe_pagar=this.importe_pagar,this.datosFormUno.idcliente=this.infoToken.idcliente,this.datosFormUno.direccionCliente=this.direccionCliente,this.datosFormUno.metodoPago=this.metodoPagoSelected,this.datosFormUno.ciudad=this.laPlazaDelivery.ciudad,this.datosFormUno.tiempoEntrega=this.tiempoEntregaSelected,this.datosFormUno.distancia_km=this.laPlazaDelivery.distancia_km,this.datosFormUno.distancia_mt=this.laPlazaDelivery.distancia_mt,this.datosFormUno.systemOS=this.systemOS,this.datosFormUno.is_express=0}catch(i){console.log(i)}this.crudService.postFree({dataInfo:this.datosFormUno},"delivery","set-pedido-mandado",!1).subscribe(i=>{setTimeout(()=>{this.isLoading=!1,this.isEnviado=!0},1500)})}goZona(){this.router.navigate(["./zona-delivery/establecimientos"])}goNext(){this.isShowFinalize=!this.isShowFinalize,this.scrollTopInit()}scrollTopInit(){try{document.getElementById("contentmaster").scrollTop=0}catch(i){}}setDiasHoraEstablecimineto(){this.laPlazaDelivery.hora_ini=this.laPlazaDelivery.options.s_hini,this.laPlazaDelivery.hora_fin=this.laPlazaDelivery.options.s_hfin,this.laPlazaDelivery.dias_atienden=this.laPlazaDelivery.options.s_dias,this.laPlazaDelivery.pwa_delivery_habilitar_pedido_programado=1,this.laPlazaDelivery.tiempo_aprox_entrega=this.laPlazaDelivery.options.s_tiempo_aprox,this.establecimientoService.set(this.laPlazaDelivery)}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(l.a),h.Lb(Hi.a),h.Lb(Y.a),h.Lb(f.a),h.Lb(a.b),h.Lb(a.b),h.Lb(a.b),h.Lb(a.b),h.Lb(n.d),h.Lb(Bi.a),h.Lb(D.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-comp-pide-lo-que-quieras"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["pedidoEnviado",""],["id","divcontent",1,"p-4","div-content"],[1,"animated","fadeInUp",3,"hidden"],[1,"fs-18"],[1,"fw-100","fs-14"],[1,"fs-16"],[3,"optionSelected"],["id","div-1"],[1,"fs-16","pb-2"],["placeholder_txt","Lista del mercado, medicinas, ferreteria, alg\xfan antojo, etc...",3,"textChanged"],[1,"text-center","w-100"],["mat-raised-button","","color","primary",1,"w-50",3,"disabled","click"],["id","div-2 animated fadeIn",3,"hidden","ngClass"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"fw-600","fs-12"],[1,"w-100"],["matInput","","placeholder","Bodega, supermercado, farmacia... ",3,"ngModel","ngModelChange"],["matRipple","",1,"m-0",3,"matRippleColor","click"],[1,"fs-13"],[3,"ngClass"],[1,"fs-12","text-secondary","fw-600"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],["matRipple","",1,"d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14",3,"ngClass"],["aria-hidden","true",1,"fa","fa-caret-down"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-0","fs-16"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],[1,"fw-100","fs-12","text-danger",3,"hidden"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"d-flex","justify-content-between"],[1,"fs-17","fw-600"],[1,"fs-18","fw-600","text-right"],["class","fa fa-spinner fa-spin fa-fw",4,"ngIf"],[1,"fs-12","fw-100","text-secondary"],["class","fa fa-spinner fa-spin fa-fw mr-2",4,"ngIf"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-spinner","fa-spin","fa-fw","mr-2"],[1,"p-3","m-0","d-flex","align-items-center","div-enviado"],[1,"div-listo"],[1,"fa","fa-check","fa-3x","text-success"],[1,"fs-12","text-secondary"],["mat-stroked-button","","color","primary",3,"click"]],template:function(i,e){if(1&i&&(h.Dc(0,re,102,37,"ng-container",0),h.Dc(1,de,11,0,"ng-template",null,1,h.Ec)),2&i){const i=h.uc(2);h.lc("ngIf",!e.isEnviado)("ngIfElse",i)}},directives:[o.n,Yi,Ki,te,C.a,o.l,u.b,m.a,v.b,v.m,v.p,_.n],pipes:[o.w,o.f],styles:["p[_ngcontent-%COMP%]{margin:0}.div-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.div-enviado[_ngcontent-%COMP%]{text-align:center;height:80vh;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.div-listo[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:5px}"]}),i})(),be=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=h.Fb({type:i,selectors:[["app-checkout"]],decls:2,vars:0,consts:[[1,"w-100"]],template:function(i,e){1&i&&(h.Rb(0,"div",0),h.Mb(1,"app-comp-pide-lo-que-quieras"),h.Qb())},directives:[le],styles:[""]}),i})();function pe(i,e){if(1&i&&(h.Rb(0,"p",37),h.Fc(1),h.Qb()),2&i){const i=h.dc(2);h.zb(1),h.Hc(" ",i.msjErrorDir," ")}}function he(i,e){if(1&i&&(h.Rb(0,"p",37),h.Fc(1),h.Qb()),2&i){const i=h.dc(2);h.zb(1),h.Hc(" ",i.msjErrorDir," ")}}function fe(i,e){1&i&&h.Mb(0,"i",38)}function ge(i,e){1&i&&h.Mb(0,"i",39)}const ue=function(i){return{"text-danger":i}};function me(i,e){if(1&i){const i=h.Sb();h.Pb(0),h.Rb(1,"div",2),h.Rb(2,"div",3),h.Rb(3,"p",4),h.Fc(4,"Envios Express."),h.Qb(),h.Rb(5,"p",5),h.Fc(6,"Llevaremos cualquier art\xedculo o paquete de un lugar a otro de la ciudad. "),h.Rb(7,"span",6),h.Fc(8,'Si deseas que compremos algo por ti, utiliza la opcion "Lo que quieras" \xf3 en los comercios afiliados.'),h.Qb(),h.Qb(),h.Mb(9,"hr"),h.Rb(10,"div"),h.Rb(11,"p",7),h.Fc(12,"Tipo de movilidad que requiere."),h.Qb(),h.Rb(13,"app-tipo-vehiculo",8),h.Zb("optionSelected",(function(e){return h.xc(i),h.dc().vehiculoSelected(e)})),h.Qb(),h.Qb(),h.Mb(14,"hr"),h.Rb(15,"div",9),h.Rb(16,"p",10),h.Fc(17,"Articulo o paquete."),h.Qb(),h.Rb(18,"app-comp-caja-texto",11),h.Zb("textChanged",(function(e){return h.xc(i),h.dc().textChanged(e)})),h.Qb(),h.Mb(19,"hr"),h.Rb(20,"div",12),h.Rb(21,"button",13),h.Zb("click",(function(){return h.xc(i),h.dc().goNext()})),h.Fc(22,"Listo, continuar"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(23,"div",14),h.Rb(24,"p"),h.Rb(25,"i",15),h.Zb("click",(function(){return h.xc(i),h.dc().goNext()})),h.Qb(),h.Fc(26," Envios Express"),h.Qb(),h.Mb(27,"hr"),h.Rb(28,"p",10),h.Fc(29,"De d\xf3nde lo recogemos?"),h.Qb(),h.Rb(30,"div",16),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogDireccion(0)})),h.Rb(31,"p",17),h.Rb(32,"strong",18),h.Fc(33),h.Qb(),h.Mb(34,"br"),h.Fc(35),h.Qb(),h.Rb(36,"p",19),h.Fc(37),h.Qb(),h.Dc(38,pe,2,1,"p",20),h.Qb(),h.Mb(39,"hr"),h.Rb(40,"p",10),h.Fc(41,"A d\xf3nde lo llevamos?"),h.Qb(),h.Rb(42,"div",16),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogDireccion(1)})),h.Rb(43,"p",17),h.Rb(44,"strong",18),h.Fc(45),h.Qb(),h.Mb(46,"br"),h.Fc(47),h.Qb(),h.Rb(48,"p",19),h.Fc(49),h.Qb(),h.Dc(50,he,2,1,"p",20),h.Qb(),h.Mb(51,"hr"),h.Rb(52,"div",21),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogTiempoEntrega()})),h.Rb(53,"div"),h.Rb(54,"p",10),h.Fc(55,"Cuando lo entregamos?"),h.Qb(),h.Rb(56,"p",22),h.Rb(57,"span",23),h.Fc(58),h.Rb(59,"strong"),h.Fc(60),h.ec(61,"titlecase"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Rb(62,"div"),h.Mb(63,"i",24),h.Qb(),h.Qb(),h.Mb(64,"hr"),h.Rb(65,"div",16),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogMetodoPago()})),h.Rb(66,"div",25),h.Rb(67,"p",26),h.Fc(68,"Metodo de pago: "),h.Rb(69,"strong"),h.Fc(70),h.Qb(),h.Qb(),h.Rb(71,"button",27),h.Rb(72,"span",28),h.Fc(73,"Cambiar"),h.Qb(),h.Qb(),h.Qb(),h.Rb(74,"span",29),h.Fc(75,"Especifique un metodo de pago."),h.Qb(),h.Qb(),h.Mb(76,"hr"),h.Rb(77,"div",16),h.Zb("click",(function(){return h.xc(i),h.dc().openDialogsendSMS()})),h.Rb(78,"span",30),h.Fc(79,"Es necesario el numero de su telefono"),h.Qb(),h.Rb(80,"p",26),h.Fc(81,"Telefono contacto: "),h.Rb(82,"strong"),h.Fc(83),h.Qb(),h.Qb(),h.Rb(84,"span",29),h.Fc(85,"A\xf1ade un n\xfamero de tel\xe9fono para que podamos contactarte e informarte de tu pedido."),h.Qb(),h.Qb(),h.Mb(86,"hr"),h.Mb(87,"br"),h.Rb(88,"div",31),h.Rb(89,"div",32),h.Fc(90,"Costo de entrega"),h.Qb(),h.Rb(91,"div",33),h.Dc(92,fe,1,0,"i",34),h.Fc(93),h.ec(94,"number"),h.Qb(),h.Qb(),h.Rb(95,"p",35),h.Fc(96,"Entrega sin contacto: cuando sea posible, seleccione pagar con Yape."),h.Qb(),h.Mb(97,"br"),h.Mb(98,"hr"),h.Rb(99,"div",12),h.Rb(100,"button",13),h.Zb("click",(function(){return h.xc(i),h.dc().enviarPedidoExpress()})),h.Dc(101,ge,1,0,"i",36),h.Fc(102," Listo, Enviar. "),h.Qb(),h.Qb(),h.Mb(103,"br"),h.Mb(104,"br"),h.Qb(),h.Qb(),h.Ob()}if(2&i){const i=h.dc();h.zb(2),h.lc("hidden",i.isShowFinalize),h.zb(19),h.lc("disabled",!i.isFormValid),h.zb(2),h.lc("hidden",!i.isShowFinalize),h.zb(7),h.lc("matRippleColor",i.rippleColor),h.zb(2),h.lc("ngClass",h.qc(35,ue,""===i.direccionA.direccion)),h.zb(1),h.Gc(i.direccionA.titulo),h.zb(2),h.Hc(" ",i.direccionA.direccion,""),h.zb(2),h.Hc(" ",i.direccionA.referencia," "),h.zb(1),h.lc("ngIf",i.msjErrorDir.length>0),h.zb(4),h.lc("matRippleColor",i.rippleColor),h.zb(2),h.lc("ngClass",h.qc(37,ue,""===i.direccionB.direccion)),h.zb(1),h.Gc(i.direccionB.titulo),h.zb(2),h.Hc(" ",i.direccionB.direccion,""),h.zb(2),h.Hc(" ",i.direccionB.referencia," "),h.zb(1),h.lc("ngIf",i.msjErrorDir.length>0),h.zb(2),h.lc("matRippleColor",i.rippleColor),h.zb(5),h.lc("ngClass",h.qc(39,ue,!i.isTiempoEntregaValid)),h.zb(1),h.Hc(" ",i.tiempoEntregaSelected.descripcion,": "),h.zb(2),h.Hc("",h.fc(61,30,i.tiempoEntregaSelected.value)," "),h.zb(5),h.lc("matRippleColor",i.rippleColor),h.zb(5),h.Gc(i.metodoPagoSelected.descripcion),h.zb(4),h.lc("hidden",i.metodoPagoSelected.idtipo_pago),h.zb(3),h.lc("matRippleColor",i.rippleColor),h.zb(1),h.lc("hidden",i.infoToken.telefono.length>=5),h.zb(5),h.Gc(i.infoToken.telefono),h.zb(1),h.lc("hidden",i.infoToken.telefono.length>=5),h.zb(8),h.lc("ngIf",i.isCalculandoDistancia),h.zb(1),h.Hc(" S/. ",h.gc(94,32,i.importe_pagar,".2"),""),h.zb(7),h.lc("disabled",!i.isFormValidDos||i.isLoading),h.zb(1),h.lc("ngIf",i.isLoading)}}function ve(i,e){if(1&i){const i=h.Sb();h.Rb(0,"div",40),h.Rb(1,"div",41),h.Mb(2,"i",42),h.Mb(3,"br"),h.Rb(4,"p",4),h.Fc(5," Pedido enviado. "),h.Qb(),h.Rb(6,"p",43),h.Fc(7,"Atenderemos su pedido lo mas pronto posible. Un repartidor se comunicara con usted para cumplir con su pedido."),h.Qb(),h.Mb(8,"hr"),h.Rb(9,"button",44),h.Zb("click",(function(){return h.xc(i),h.dc().goZona()})),h.Fc(10,"Listo"),h.Qb(),h.Qb(),h.Qb()}}let Ce=(()=>{class i{constructor(i,e,t,o,n,c,a,s,r,d,l){this.infoTokenService=i,this.plazaDelivery=e,this.calcDistanceService=t,this.crudService=o,this.dialogDireccion=n,this.dialogTelefono=c,this.dialogTiempoEntrega=a,this.dialog=s,this.router=r,this.utilService=d,this.establecimientoService=l,this.lasCiudad="",this.importe_pagar=3,this.isLoading=!1,this.isEnviado=!1,this.isCalculandoDistancia=!1,this.isShowFinalize=!1,this.isTiempoEntregaValid=!0,this.systemOS="",this.msjErrorDir="",this.isFormValid=!1,this.isFormValidDos=!1}ngOnInit(){this.systemOS=this.utilService.getOS(),this.msjErrorDir="",this.infoToken=this.infoTokenService.getInfoUs(),this.direccionClienteIni=new Vi.a,this.direccionClienteIni.titulo="Seleccione una direccion *",this.direccionClienteIni.direccion="",this.direccionClienteIni.referencia="",this.metodoPagoSelected=this.infoTokenService.setIniMetodoPagoSegunFiltro(!1),this.datosFormUno={},this.datosFormUno.descripcion_paquete="",this.datosFormUno.telefono=this.infoToken.telefono,this.direccionA=this.direccionClienteIni,this.direccionB=this.direccionClienteIni,this.tiempoEntregaSelected=new Gi.a,this.tiempoEntregaSelected.descripcion="Programa tu entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!1,this.isTiempoEntregaValid=!1,this.getDatosSede()}getTiempoEntrega(){const i=(new Date).getHours();if(this.laPlazaDelivery.options.s_hfin){const e=this.laPlazaDelivery.options.s_hfin.split(":")[0];this.isTiempoEntregaValid=i<=parseInt(e,0)}this.tiempoEntregaSelected.modificado?this.isTiempoEntregaValid=!0:this.isTiempoEntregaValid?(this.tiempoEntregaSelected.descripcion="Lo antes posible",this.tiempoEntregaSelected.value="10 a 15 Minutos",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,this.isTiempoEntregaValid=!0):(this.tiempoEntregaSelected.descripcion="Programa la entrega",this.tiempoEntregaSelected.value="",this.tiempoEntregaSelected.modificado=!1,this.tiempoEntregaSelected.valid=!0,this.isTiempoEntregaValid=!1)}getDatosSede(){if(this.direccionA.ciudad)return this.direccionA.ciudad===this.lasCiudad?(this.calcularDistanciaEntrega(),this.setDiasHoraEstablecimineto(),void this.getTiempoEntrega()):void this.plazaDelivery.loadDatosPlazaByCiudad(this.direccionA.ciudad).subscribe(i=>{this.laPlazaDelivery=i,this.lasCiudad=this.laPlazaDelivery.ciudad,this.laPlazaDelivery.latitude=this.laPlazaDelivery.centro.lat,this.laPlazaDelivery.longitude=this.laPlazaDelivery.centro.lon,this.calcularDistanciaEntrega(),this.setDiasHoraEstablecimineto(),this.getTiempoEntrega()})}setDiasHoraEstablecimineto(){this.laPlazaDelivery.hora_ini=this.laPlazaDelivery.options.s_hini,this.laPlazaDelivery.hora_fin=this.laPlazaDelivery.options.s_hfin,this.laPlazaDelivery.dias_atienden=this.laPlazaDelivery.options.s_dias,this.laPlazaDelivery.pwa_delivery_habilitar_pedido_programado=1,this.laPlazaDelivery.tiempo_aprox_entrega=this.laPlazaDelivery.options.s_tiempo_aprox,this.establecimientoService.set(this.laPlazaDelivery)}vehiculoSelected(i){this.datosFormUno.vehiculo=i,this.validFormUno(),this.calcCostoServicio()}textChanged(i){this.datosFormUno.descripcion_paquete=i,this.validFormUno()}validFormUno(){this.isFormValid=this.datosFormUno.vehiculo&&""!==this.datosFormUno.descripcion_paquete}validFormDos(){this.isFormValidDos=this.isFormValid,this.isFormValidDos=!!this.metodoPagoSelected.idtipo_pago&&this.isFormValidDos,this.isFormValidDos=!!this.direccionA.ciudad&&this.isFormValidDos,this.isFormValidDos=!!this.direccionB.ciudad&&this.isFormValidDos,this.isFormValidDos=this.datosFormUno.telefono.trim().length>=5&&this.isFormValidDos,this.isFormValidDos=this.isFormValidDos&&!this.isCalculandoDistancia}openDialogMetodoPago(){const i=new a.d;i.width="380px",i.disableClose=!0,i.hasBackdrop=!0,i.data={importeTotalPagar:3},this.dialog.open(Ai.a,i).afterClosed().subscribe(i=>{this.metodoPagoSelected=i,this.validFormDos()})}openDialogsendSMS(){const i=new a.d;i.disableClose=!0,i.hasBackdrop=!0,i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={idcliente:this.infoTokenService.infoUsToken.idcliente,numberphone:this.infoTokenService.infoUsToken.telefono?this.infoTokenService.infoUsToken.telefono:""},this.dialogTelefono.open($i.a,i).afterClosed().subscribe(i=>{i.verificado&&(this.infoToken.telefono=i.numberphone,this.infoTokenService.setTelefono(i.numberphone),this.datosFormUno.telefono=this.infoToken.telefono,this.validFormDos())})}openDialogTiempoEntrega(){const i=new a.d;i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],this.dialogTiempoEntrega.open(Ni.a,i).afterClosed().subscribe(i=>{i&&(this.infoTokenService.setTiempoEntrega(i),this.tiempoEntregaSelected=i,this.isTiempoEntregaValid=!0)})}openDialogDireccion(i){const e=new a.d;e.disableClose=!0,e.hasBackdrop=!0,e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={isGuardar:!!this.infoTokenService.infoUsToken.idcliente,isFromComercio:!0},this.dialogDireccion.open(s.a,e).afterClosed().subscribe(e=>{e&&(this.msjErrorDir="",0===i?this.direccionA=e:this.direccionB=e,this.getDatosSede(),this.validFormDos())})}calcularDistanciaEntrega(){if(!this.direccionA.ciudad||!this.direccionB.ciudad)return;if(this.direccionA.ciudad.toLocaleLowerCase()!==this.direccionB.ciudad.toLocaleLowerCase())return this.direccionA.codigo=null,void(this.msjErrorDir="Servicio no disponible en esta direcci\xf3n.");const i=this.laPlazaDelivery;i.latitude=this.direccionB.latitude,i.longitude=this.direccionB.longitude,this.isCalculandoDistancia=!0,this.validFormDos(),this.calcDistanceService.calculateRoute(this.direccionA,i,!1),setTimeout(()=>{this.laPlazaDelivery=i,this.isCalculandoDistancia=!1,this.setDiasHoraEstablecimineto(),this.validFormDos(),this.calcCostoServicio()},1600)}calcCostoServicio(){this.laPlazaDelivery&&(this.importe_pagar=this.laPlazaDelivery.options.costo_express+(this.laPlazaDelivery.c_servicio-this.laPlazaDelivery.c_minimo)+this.datosFormUno.vehiculo.costo_adicional)}enviarPedidoExpress(){try{this.isLoading=!0,this.isEnviado=!1,this.datosFormUno.importe_pagar=this.importe_pagar,this.datosFormUno.idcliente=this.infoToken.idcliente,this.datosFormUno.direccionA=this.direccionA,this.datosFormUno.direccionB=this.direccionB,this.datosFormUno.metodoPago=this.metodoPagoSelected,this.datosFormUno.tiempoEntrega=this.tiempoEntregaSelected,this.datosFormUno.ciudad=this.laPlazaDelivery.ciudad,this.datosFormUno.distancia_km=this.laPlazaDelivery.distancia_km,this.datosFormUno.distancia_mt=this.laPlazaDelivery.distancia_mt,this.datosFormUno.systemOS=this.systemOS,this.datosFormUno.is_express=1}catch(i){console.log(i)}this.crudService.postFree({dataInfo:this.datosFormUno},"delivery","set-pedido-mandado",!1).subscribe(i=>{setTimeout(()=>{this.isLoading=!1,this.isEnviado=!0},1500)})}goZona(){this.router.navigate(["./zona-delivery/establecimientos"])}goNext(){this.isShowFinalize=!this.isShowFinalize,document.getElementById("contentmaster").scrollTop=0}}return i.\u0275fac=function(e){return new(e||i)(h.Lb(l.a),h.Lb(Hi.a),h.Lb(Y.a),h.Lb(f.a),h.Lb(a.b),h.Lb(a.b),h.Lb(a.b),h.Lb(a.b),h.Lb(n.d),h.Lb(Bi.a),h.Lb(D.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-comp-pide-express"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["pedidoEnviado",""],[1,"p-4","div-content"],[1,"animated","fadeInUp",3,"hidden"],[1,"fs-18"],[1,"fw-100","fs-14"],[1,"text-secondary","fs-12"],[1,"fs-16"],[3,"optionSelected"],["id","div-1"],[1,"fs-16","pb-2"],["placeholder_txt","Que articulo o paquete te gustaria enviar?",3,"textChanged"],[1,"text-center","w-100"],["mat-raised-button","","color","primary",1,"w-50",3,"disabled","click"],["id","div-2 animated fadeIn",3,"hidden"],[1,"fa","fa-arrow-left","pr-2",3,"click"],["matRipple","",1,"m-0",3,"matRippleColor","click"],[1,"fs-13"],[3,"ngClass"],[1,"fs-12","text-secondary","fw-600"],["class","text-danger fs-12 fw-100 m-0",4,"ngIf"],["matRipple","",1,"d-flex","justify-content-between","align-items-center",3,"matRippleColor","click"],[1,"m-0"],[1,"fs-14",3,"ngClass"],["aria-hidden","true",1,"fa","fa-caret-down"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-0","fs-16"],[1,"btn","btn-sm","btn-secondary"],[1,"fw-100","fs-10"],[1,"fw-100","fs-12","text-danger",3,"hidden"],[1,"text-danger","fs-12","fw-100",3,"hidden"],[1,"d-flex","justify-content-between"],[1,"fs-17","fw-600"],[1,"fs-18","fw-600","text-right"],["class","fa fa-spinner fa-spin fa-fw",4,"ngIf"],[1,"fs-12","fw-100","text-secondary"],["class","fa fa-spinner fa-spin fa-fw mr-2",4,"ngIf"],[1,"text-danger","fs-12","fw-100","m-0"],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-spinner","fa-spin","fa-fw","mr-2"],[1,"p-3","m-0","d-flex","align-items-center","div-enviado"],[1,"div-listo"],[1,"fa","fa-check","fa-3x","text-success"],[1,"fs-12","text-secondary"],["mat-stroked-button","","color","primary",3,"click"]],template:function(i,e){if(1&i&&(h.Dc(0,me,105,41,"ng-container",0),h.Dc(1,ve,11,0,"ng-template",null,1,h.Ec)),2&i){const i=h.uc(2);h.lc("ngIf",!e.isEnviado)("ngIfElse",i)}},directives:[o.n,Yi,Ki,C.a,_.n,o.l],pipes:[o.w,o.f],styles:["p[_ngcontent-%COMP%]{margin:0}.div-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.div-enviado[_ngcontent-%COMP%]{text-align:center;height:80vh;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.div-listo[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:5px}"]}),i})();const Re=[{path:"",component:V,data:{titulo:"Inicio"},children:[{path:"",redirectTo:"establecimientos"},{path:"categorias",component:pi,data:{titulo:"Categorias"}},{path:"establecimientos",component:W,data:{titulo:"Establecimientos"}},{path:"pedidos",component:Ci,data:{titulo:"Mis Pedidos"}},{path:"pedido-detalle",component:qi,data:{titulo:"Pedido Detalle"}},{path:"checkout",component:be,data:{titulo:"Checkout"}},{path:"checkout-b",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=h.Fb({type:i,selectors:[["app-checkout-b"]],decls:2,vars:0,consts:[[1,"w-100"]],template:function(i,e){1&i&&(h.Rb(0,"div",0),h.Mb(1,"app-comp-pide-express"),h.Qb())},directives:[Ce],styles:[""]}),i})(),data:{titulo:"Checkout"}}]}];let xe=(()=>{class i{}return i.\u0275mod=h.Jb({type:i}),i.\u0275inj=h.Ib({factory:function(e){return new(e||i)},imports:[[n.g.forChild(Re)],n.g]}),i})();var Se=t("rsRi"),we=t("lSLK"),Fe=t("PCNd");let ye=(()=>{class i{}return i.\u0275mod=h.Jb({type:i}),i.\u0275inj=h.Ib({factory:function(e){return new(e||i)},imports:[[o.c,xe,Se.a,we.a,Fe.a]]}),i})()}}]);