function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{ADEv:function(t,e,n){"use strict";n.r(e),n.d(e,"EncuestaModule",(function(){return y}));var i=n("ofXK"),a=n("tyNb"),c=n("zOUh"),s=n("+lji"),o=n("/sn2"),r=n("yFR0"),u=n("eI2u"),b=n("fXoL"),l=n("wZkO"),d=n("bTqV");function p(t,e){if(1&t){var n=b.Sb();b.Rb(0,"div"),b.Rb(1,"div",1),b.Yb("click",(function(){b.uc(n);var t=e.$implicit;return b.cc().xNextPregunta(t)})),b.Rb(2,"div",2),b.Mb(3,"img",3),b.Rb(4,"span"),b.Cc(5),b.Qb(),b.Qb(),b.Qb(),b.Qb()}if(2&t){var i=e.$implicit;b.zb(3),b.kc("src","assets/images/encuesta-img/",i.img,"",b.vc),b.zb(2),b.Dc(i.descripcion)}}var f,h=((f=function(){function t(){_classCallCheck(this,t),this.NextPregunta=new b.n}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"xNextPregunta",value:function(t){var e=this;setTimeout((function(){e.NextPregunta.emit(t)}),300)}}]),t}()).\u0275fac=function(t){return new(t||f)},f.\u0275cmp=b.Fb({type:f,selectors:[["app-encuesta-opcion"]],inputs:{ListOption:"ListOption"},outputs:{NextPregunta:"NextPregunta"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"divBtn","text-center",3,"click"],[1,"op"],["alt","btnOption",1,"btnIco",3,"src"]],template:function(t,e){1&t&&b.Ac(0,p,6,2,"div",0),2&t&&b.ic("ngForOf",e.ListOption)},directives:[i.m],styles:[".btnIco[_ngcontent-%COMP%]{opacity:.7;padding:10px;cursor:pointer;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.btnIco[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:1}.divBtn[_ngcontent-%COMP%]{display:grid}.divBtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#757575}.op[_ngcontent-%COMP%]{text-align:center;line-height:1}.op[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65px}"]}),f);function g(t,e){if(1&t){var n=b.Sb();b.Pb(0),b.Rb(1,"div"),b.Mb(2,"textarea",18,19),b.Mb(4,"br"),b.Mb(5,"br"),b.Rb(6,"button",10),b.Yb("click",(function(){b.uc(n);var t=b.rc(3),e=b.cc().$implicit,i=b.cc();return i.pasarTab(i.listOption,e,t.value)})),b.Cc(7,"Listo, Enviar"),b.Qb(),b.Qb(),b.Ob()}}function v(t,e){if(1&t){var n=b.Sb();b.Rb(0,"app-encuesta-opcion",20),b.Yb("NextPregunta",(function(t){b.uc(n);var e=b.cc().$implicit;return b.cc().pasarTab(t,e)})),b.Qb()}if(2&t){var i=b.cc(2);b.ic("ListOption",i.listOption)}}function m(t,e){if(1&t&&(b.Rb(0,"mat-tab",12),b.Mb(1,"br"),b.Mb(2,"br"),b.Rb(3,"div",7),b.Rb(4,"div",null,15),b.Rb(6,"p",8),b.Cc(7),b.Qb(),b.Ac(8,g,8,0,"ng-container",16),b.Ac(9,v,1,1,"ng-template",null,17,b.Bc),b.Qb(),b.Qb(),b.Qb()),2&t){var n=e.$implicit,i=b.rc(10);b.zb(7),b.Dc(n.pregunta),b.zb(1),b.ic("ngIf","1"===n.obligatorio)("ngIfElse",i)}}function C(t,e){if(1&t){var n=b.Sb();b.Rb(0,"footer",21),b.Rb(1,"button",22),b.Yb("click",(function(){return b.uc(n),b.cc().cerrarSession()})),b.Cc(2,"En otro momento, gracias."),b.Qb(),b.Qb()}}var k,O,R,S=[{path:"",component:(k=function(){function t(e,n,i,a,c){_classCallCheck(this,t),this.infoTokenService=e,this.crudService=n,this.navigatorService=i,this.socketService=a,this.listenStatusService=c,this.nomSede=[],this.countFin=4,this.selectedTabEncuesta=0,this.intervalConteo=null,this.isBtnPagoShow=!1,this.ListRespuestas=[],this.xIdEncuesta=0,this.countOption=1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.infoToken=this.infoTokenService.getInfoUs(),this.nomSede=localStorage.getItem("sys::s").split("|"),this.dataPost={idsede:this.infoToken.idsede},this.loadOpciones(),this.loadEncuesta(),this.navigatorService.disabledBack=!0,history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},this.listenStatusService.isBtnPagoShow$.subscribe((function(e){t.isBtnPagoShow=e}))}},{key:"loadEncuesta",value:function(){var t=this;this.crudService.postFree(this.dataPost,"encuesta","la-encuesta",!1).subscribe((function(e){if(e.success){var n=e.data[0].preguntas;t.xIdEncuesta=n.idencuesta,t.titulo_inicio=n.inicio,t.titulo_fin=n.fin,t.listPreguntas=n.preguntas,t.countOption+=t.listPreguntas.length}}))}},{key:"loadOpciones",value:function(){var t=this;this.crudService.postFree(this.dataPost,"encuesta","las-opciones",!1).subscribe((function(e){e.success&&(t.listOption=e.data)}))}},{key:"pasarTab",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t){var i="1"===e.obligatorio;this.ListRespuestas.push({idencuesta_pregunta:e.idencuesta_pregunta,idencuesta_respuesta:t.idencuesta_respuesta||0,iscomentario:i,comentario:n||""}),this.selectedTabEncuesta++,i&&this.guardarEncuesta(),this.countOption===this.selectedTabEncuesta&&this.cuentaRegresiva()}else this.selectedTabEncuesta++}},{key:"guardarEncuesta",value:function(){this.crudService.postFree({item:this.ListRespuestas,i:this.xIdEncuesta},"encuesta","guardar",!1).subscribe((function(t){}))}},{key:"cuentaRegresiva",value:function(){this.countFin<=0?(this.intervalConteo=null,this.cerrarSession()):this.conteoFinEncuesta()}},{key:"conteoFinEncuesta",value:function(){var t=this;this.intervalConteo=setTimeout((function(){t.countFin--,t.cuentaRegresiva()}),1e3)}},{key:"cerrarSession",value:function(){this.navigatorService.cerrarSession(this.isBtnPagoShow),this.infoTokenService.cerrarSession(),this.socketService.isSocketOpenReconect=!0,this.socketService.closeConnection()}}]),t}(),k.\u0275fac=function(t){return new(t||k)(b.Lb(c.a),b.Lb(s.a),b.Lb(o.a),b.Lb(r.a),b.Lb(u.a))},k.\u0275cmp=b.Fb({type:k,selectors:[["app-encuesta"]],decls:32,vars:13,consts:[[1,"animated","fadeIn"],[1,"text-center","p-3","encabezado-encuesta"],[1,"fs-17","fw-600","m-0"],[1,"fs-14","fw-100","p-0"],[1,"text-center","xcontainer-centrado","p-3","hv-50"],[1,"contain-size",3,"disableRipple","dynamicHeight","selectedIndex"],["disabled","",1,"overflow-hidden"],[1,"overflow-hidden"],[1,"fs-17","fw-600"],["src","assets/images/reactions_1.gif","width","100%","alt","."],["mat-flat-button","","color","primary",3,"click"],["disabled","",4,"ngFor","ngForOf"],["disabled",""],[1,"text-secondary","fs-50","fw-100"],["class","xfooter text-center bg-white p-3",4,"ngIf"],["opitem",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],["id","txt_comentario","id","txt_comentario","cols","100","rows","3",2,"width","70%"],["txt_comentario",""],[1,"d-flex",3,"ListOption","NextPregunta"],[1,"xfooter","text-center","bg-white","p-3"],["mat-flat-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(b.Rb(0,"div",0),b.Rb(1,"div",1),b.Rb(2,"p",2),b.Cc(3),b.Qb(),b.Rb(4,"span",3),b.Cc(5),b.Qb(),b.Qb(),b.Rb(6,"div",4),b.Rb(7,"mat-tab-group",5),b.Rb(8,"mat-tab",6),b.Mb(9,"br"),b.Mb(10,"br"),b.Rb(11,"div",7),b.Rb(12,"p",8),b.Cc(13),b.Qb(),b.Mb(14,"img",9),b.Mb(15,"br"),b.Mb(16,"br"),b.Mb(17,"br"),b.Rb(18,"button",10),b.Yb("click",(function(){return e.pasarTab()})),b.Cc(19,"Ok, Empezar"),b.Qb(),b.Qb(),b.Qb(),b.Ac(20,m,11,3,"mat-tab",11),b.Rb(21,"mat-tab",12),b.Mb(22,"br"),b.Mb(23,"br"),b.Rb(24,"div",7),b.Rb(25,"p",8),b.Cc(26),b.Qb(),b.Mb(27,"br"),b.Rb(28,"p",13),b.Cc(29),b.dc(30,"number"),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Ac(31,C,3,0,"footer",14),b.Qb()),2&t&&(b.zb(3),b.Dc(e.nomSede[0]),b.zb(2),b.Dc(e.nomSede[1]),b.zb(2),b.ic("disableRipple",!0)("dynamicHeight",!1)("selectedIndex",e.selectedTabEncuesta),b.zb(6),b.Dc(e.titulo_inicio),b.zb(7),b.ic("ngForOf",e.listPreguntas),b.zb(6),b.Dc(e.titulo_fin),b.zb(3),b.Dc(b.fc(30,10,e.countFin,"2.")),b.zb(2),b.ic("ngIf",0===e.selectedTabEncuesta))},directives:[l.b,l.a,d.a,i.m,i.n,h],pipes:[i.f],styles:[".encabezado-encuesta[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;background:#3f51b5;color:#f5f5f5}.contain-size[_ngcontent-%COMP%]{contain:size}.mat-tab-header-pagination-controls-enabled[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-header-pagination.mat-tab-header-pagination-disabled[_ngcontent-%COMP%],   .mat-tab-header-pagination{display:none!important}.hv-50[_ngcontent-%COMP%]{height:45vh}"]}),k),data:{titulo:"Inicio"},children:[{path:"",redirectTo:"inicio"}]}],w=((O=function t(){_classCallCheck(this,t)}).\u0275mod=b.Jb({type:O}),O.\u0275inj=b.Ib({factory:function(t){return new(t||O)},imports:[[a.g.forChild(S)],a.g]}),O),P=n("rsRi"),_=n("lSLK"),y=((R=function t(){_classCallCheck(this,t)}).\u0275mod=b.Jb({type:R}),R.\u0275inj=b.Ib({factory:function(t){return new(t||R)},imports:[[i.c,w,P.a,_.a]]}),R)}}]);