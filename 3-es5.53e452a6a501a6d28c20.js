!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2dOp":function(e,i,a){"use strict";a.d(i,"a",(function(){return r}));var r=t((function e(){n(this,e)}))},"6eTy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cpa=function(e,t){var n=(0,i.headingDistanceTo)(e.location,t.location),c=n.distance,s=n.heading,l=c*Math.sin((0,a.degToRad)(s)),d=c*Math.cos((0,a.degToRad)(s)),u={position:{x:0,y:0},vector:{x:e.speed*Math.sin((0,a.degToRad)(e.heading)),y:e.speed*Math.cos((0,a.degToRad)(e.heading))}},f={position:{x:l,y:d},vector:{x:t.speed*Math.sin((0,a.degToRad)(t.heading)),y:t.speed*Math.cos((0,a.degToRad)(t.heading))}};return{time:r(u,f),distance:o(u,f)}},t.cpaTime=r,t.cpaDistance=o;var i=n("RvDl"),a=n("9TDR");function r(e,t){var n=d(e.vector,t.vector),i=c(n,n);return i<1e-8?0:-c(d(e.position,t.position),n)/i}function o(e,t){var n,i=r(e,t);return n=d(s(e.position,l(i,e.vector)),s(t.position,l(i,t.vector))),Math.sqrt(c(n,n))}function c(e,t){return e.x*t.x+e.y*t.y}function s(e,t){return{x:e.x+t.x,y:e.y+t.y}}function l(e,t){return{x:e*t.x,y:e*t.y}}function d(e,t){return{x:e.x-t.x,y:e.y-t.y}}},"9TDR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.degToRad=function(e){return e*Math.PI/180},t.radToDeg=function(e){return 180*e/Math.PI},t.knotsToMeterPerSecond=function(e){return.514444*e},t.meterPerSecondToKnots=function(e){return e/.514444},t.knotsToKmPerHour=function(e){return 1.852*e},t.kmPerHourToKnots=function(e){return e/1.852}},"Pg/a":function(e,i,a){"use strict";a.d(i,"a",(function(){return _}));var r=a("fXoL"),o=a("3Pt+"),c=a("AA5P"),s=a("+lji"),l=a("2dOp"),d=a("JOr0"),u=a("nx09"),f=a("zOUh"),h=a("wne+"),b=a("pxUr"),g=a("bSwM"),p=a("ofXK"),m=a("kmnG"),v=a("qFsG"),C=a("QibW"),k=a("bTqV"),y=a("0IaG"),M=["search"],S=["registerForm"];function w(e,t){if(1&e){var n=r.Rb();r.Ob(0),r.Qb(1,"mat-form-field",3),r.Qb(2,"input",36,37),r.Yb("ngModelChange",(function(e){return r.wc(n),r.cc().dataCliente.direccion=e}))("keydown.enter",(function(e){return r.wc(n),e.preventDefault()}))("keyup",(function(){r.wc(n);var e=r.tc(3);return r.cc().checkDireccion(e.value)})),r.Pb(),r.Pb(),r.Nb()}if(2&e){var i=r.cc();r.zb(2),r.kc("ngModel",i.dataCliente.direccion)}}function P(e,t){if(1&e){var n=r.Rb();r.Qb(0,"div",9),r.Qb(1,"mat-form-field",3),r.Lb(2,"input",38,39),r.Pb(),r.Qb(4,"button",40),r.Yb("click",(function(){r.wc(n);var e=r.tc(3);return r.cc().getDirCoordenadas(e.value)})),r.Lb(5,"span",41),r.Pb(),r.Pb()}}function I(e,t){if(1&e){var n=r.Rb();r.Qb(0,"div",42),r.Qb(1,"button",43),r.Yb("click",(function(){return r.wc(n),r.cc().confirmarDireccion()})),r.Hc(2,"Confirmar"),r.Pb(),r.Pb()}}function T(e,t){1&e&&r.Mb(0)}function L(e,t){1&e&&r.Hc(0," Listo Guardar ")}function D(e,t){1&e&&(r.Ob(0),r.Lb(1,"i",45),r.Hc(2," Guardando ... "),r.Nb())}function Q(e,t){1&e&&(r.Lb(0,"i",46),r.Hc(1," Hecho "))}function x(e,t){if(1&e&&(r.Fc(0,D,3,0,"ng-container",7),r.Fc(1,Q,2,0,"ng-template",null,44,r.Gc)),2&e){var n=r.tc(2),i=r.cc();r.kc("ngIf",1===i.loader)("ngIfElse",n)}}function O(e,t){if(1&e){var n=r.Rb();r.Qb(0,"button",47),r.Yb("click",(function(){return r.wc(n),r.cc().recargarPage()})),r.Lb(1,"span",48),r.Hc(2," Recargar "),r.Pb()}}function R(e,t){1&e&&(r.Qb(0,"p",49),r.Hc(1,"Indique direccion y una referencia."),r.Pb())}function F(e,t){1&e&&(r.Qb(0,"p",50),r.Hc(1,"El servicio no esta disponible en esta ubicaci\xf3n."),r.Pb())}var _=function(){var e=function(){function e(t,i,a,o,c,s,l,d,u){var f=this;n(this,e),this.formBuilder=t,this.mapsAPILoader=i,this.ngZone=a,this.verifyClientService=o,this.crudService=c,this.miPedidoService=s,this.inforTokenService=l,this.utilService=d,this.establecimientoService=u,this.loader=0,this.dirInCoordenadas=!1,this.isUsCliente=!0,this.countMoveMap=0,this.isChangeDireccion=!0,this.checkekFirstOption=!0,this.isGuardarDireccion=!0,this.dataMaps=new r.n,this.saveDireccionOk=new r.n,this.isDireccionValid=!0,this.mapCenter={},this._componentRestrictions={country:"pe"},this.markerClicked=function(e){f.map&&f.map.setCenter({lat:e.latitude,lng:e.longitude})}}return t(e,[{key:"ngOnInit",value:function(){this.dataCliente=new l.a,this.inforTokenService.getInfoUs(),this.isUsCliente=this.inforTokenService.getInfoUs().isCliente,this.loadForm()}},{key:"ngAfterViewInit",value:function(){this.loadInitComponent()}},{key:"loadInitComponent",value:function(){var e=this;this.mapsAPILoader.load().then((function(){e.setCurrentLocation(),e.geoCoder=new google.maps.Geocoder;var t=new google.maps.places.Autocomplete(e.searchElementRef.nativeElement,{componentRestrictions:e._componentRestrictions});t.addListener("place_changed",(function(){e.ngZone.run((function(){var n=t.getPlace();e.countMoveMap=0,e.dataMapa=n,e.address=n.formatted_address,null!=n.geometry&&(e.latitude=n.geometry.location.lat(),e.longitude=n.geometry.location.lng(),e.zoom=17,e.isChangeDireccion=!1,e.mapCenter.lat=e.latitude,e.mapCenter.lng=e.longitude,setTimeout((function(){e.isChangeDireccion=!0}),500))}))}))}))}},{key:"setCurrentLocation",value:function(){var e=this;if(!1===this.isUsCliente)return this.dataInfoSede=this.miPedidoService.objDatosSede.datossede[0],this.latitude=this.dataInfoSede.latitude,this.longitude=this.dataInfoSede.longitude,void(this.zoom=17);"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(t){e.latitude=t.coords.latitude,e.longitude=t.coords.longitude,e.zoom=17,e.getAddress(e.latitude,e.longitude)}))}},{key:"markerDragEnd",value:function(e){this.latitude=e.coords.lat,this.longitude=e.coords.lng}},{key:"getDirCoordenadas",value:function(e){var t=e.split(","),n=parseFloat(t[0]),i=parseFloat(t[1]);this.latitude=n,this.longitude=i,this.isChangeDireccion=!0,this.getAddress(n,i)}},{key:"getAddress",value:function(e,t){var n=this;this.geoCoder.geocode({location:{lat:e,lng:t}},(function(e,t){if("OK"===t&&e[0]&&(n.zoom=17,n.address=e[0].formatted_address,n.dataMapa=e[0],n.isChangeDireccion&&(n.dataCliente.direccion=n.address),n.dirInCoordenadas&&n.registerForm.controls.direccion.patchValue(n.dataCliente.direccion),!n.isUsCliente)){var i=n.searchTypeMap("locality");n.isDireccionValid=i.toLowerCase().trim()===n.dataInfoSede.ciudad.toLowerCase().trim()}}))}},{key:"loadForm",value:function(){var e=this;this.registerForm=this.formBuilder.group({direccion:["",o.D.required],referencia:[this.dataCliente.referencia,o.D.required],longitude:[this.longitude,o.D.required],latitude:[this.latitude,o.D.required],titulo:this.dataCliente.titulo||"Casa"}),this.registerForm.statusChanges.subscribe((function(t){"VALID"===t&&e.guardarDireccion()}))}},{key:"checkDireccion",value:function(e){""===e.trim()&&(this.longitude=null,this.latitude=null)}},{key:"guardarDireccion",value:function(){this.isDireccionValid&&(this.dataCliente.direccion=this.address,this.dataCliente.idcliente=this.isUsCliente?this.verifyClientService.getDataClient().idcliente:this.idClienteBuscar,this.dataCliente.longitude=this.mapCenter.lng,this.dataCliente.latitude=this.mapCenter.lat,this.dataCliente.referencia=this.utilService.addslashes(this.dataCliente.referencia),this.dataCliente.ciudad=this.searchTypeMap("locality"),this.dataCliente.provincia=this.searchTypeMap("administrative_area_level_2"),this.dataCliente.departamento=this.searchTypeMap("administrative_area_level_1"),this.dataCliente.pais=this.searchTypeMap("country"),this.dataCliente.codigo=this.searchTypeMap("postal_code"))}},{key:"saveDireccion",value:function(){var e=this;if(this.loader=1,this.dataCliente.titulo=this.dataCliente.titulo||"Casa",!this.isGuardarDireccion)return this.loader=2,this.dataCliente.idcliente_pwa_direccion=null,void this.saveDireccionOk.emit(this.dataCliente);this.isUsCliente&&this.countMoveMap>1?(this.getAddress(this.mapCenter.lat,this.mapCenter.lng),setTimeout((function(){e.guardarDireccion(),e.setBdDireccion()}),1500)):this.setBdDireccion()}},{key:"setBdDireccion",value:function(){var e=this;this.dataCliente.referencia=this.utilService.addslashes(this.dataCliente.referencia),this.crudService.postFree(this.dataCliente,"cliente","new-direccion",!1).subscribe((function(t){setTimeout((function(){e.loader=2,setTimeout((function(){e.dataCliente.idcliente_pwa_direccion=t.data[0].idcliente_pwa_direccion,e.saveDireccionOk.emit(e.dataCliente),e.countMoveMap=1}),500)}),1e3)}))}},{key:"searchTypeMap",value:function(e){var t="";return this.dataMapa.address_components.map((function(n){n.types.map((function(i){if(i===e)return t=n.long_name}))})),t}},{key:"mapReady",value:function(e){this.map=e}},{key:"idleMap",value:function(){this.countMoveMap++}},{key:"centerChange",value:function(e){e&&(this.mapCenter.lat=e.lat,this.mapCenter.lng=e.lng)}},{key:"clickmap",value:function(){this.isChangeDireccion=!0}},{key:"confirmarDireccion",value:function(){this.countMoveMap=1,this.getAddress(this.mapCenter.lat,this.mapCenter.lng)}},{key:"recargarPage",value:function(){window.location.reload()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(o.e),r.Kb(b.d),r.Kb(r.z),r.Kb(c.a),r.Kb(s.a),r.Kb(u.a),r.Kb(f.a),r.Kb(h.a),r.Kb(d.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-agregar-direccion"]],viewQuery:function(e,t){var n;1&e&&(r.Mc(M,!0),r.Mc(S,!0),r.Mc(M,!0)),2&e&&(r.sc(n=r.Zb())&&(t.searchElementRef=n.first),r.sc(n=r.Zb())&&(t.myForm=n.first),r.sc(n=r.Zb())&&(t.agmMap=n.first))},inputs:{idClienteBuscar:"idClienteBuscar",isGuardarDireccion:"isGuardarDireccion"},outputs:{dataMaps:"dataMaps",saveDireccionOk:"saveDireccionOk"},decls:57,vars:20,consts:[[1,"bg-warning","pt-3","pr-3","pl-3","p-1"],[1,"fs-13"],[3,"formGroup"],[1,"w-100"],[1,"p-3"],[1,"text-secondary","fw-100","fs-11"],[1,"fs-11","mt-2","text-info",3,"change"],[4,"ngIf","ngIfElse"],["elseTemplateCoordenadas",""],[1,"w-100","d-flex","justify-content-between"],["matInput","","maxlength","150","placeholder","Referencia / piso / oficina","formControlName","referencia",1,"input-headline",3,"ngModel","ngModelChange"],[1,"btn-in-input","btn","btn-sm","btn-info",3,"disabled","click"],["hidden","true"],["matInput","","placeholder","Referencia / piso / oficina","formControlName","longitude",1,"input-headline",3,"ngModel","ngModelChange"],["matInput","","placeholder","Referencia / piso / oficina","formControlName","latitude",1,"input-headline",3,"ngModel","ngModelChange"],["id","map_canvas",1,"border"],[3,"latitude","longitude","zoom","centerChange","mapClick","idle"],[1,"centerMarker"],["class","btn-confirmar-dir",4,"ngIf"],[1,"fw-600","fs-13"],[1,"fs-13",3,"ngModel","ngModelChange"],["radioGroup","matRadioGroup"],["value","Casa",1,"pr-3",3,"checked"],["value","Trabajo",1,"pr-3"],["value","Novi@",1,"pr-3"],["value","Otro",1,"pr-3"],[1,"text-center","pb-3"],["mat-flat-button","","mat-dialog-close","",1,"mr-3"],[1,"fa","fa-arrow-left"],["mat-flat-button","","color","primary",3,"disabled","click"],[4,"ngIf","ngIfThen","ngIfElse"],["thenTemplate",""],["elseTemplate",""],["class","mt-2","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["class","fw-600 text-danger fs-14",4,"ngIf"],["class","fw-600 text-danger fs-16",4,"ngIf"],["matInput","","placeholder","Direccion","formControlName","direccion","autocorrect","off","autocapitalize","off","spellcheck","off","type","text","id","search",1,"input-headline",3,"ngModel","ngModelChange","keydown.enter","keyup"],["search",""],["matInput","","placeholder","Coordenadas",1,"input-headline"],["text_coordenadas",""],[1,"btn-in-input","btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-search"],[1,"btn-confirmar-dir"],[1,"btn","btn-success",3,"click"],["elseTemplateHecho",""],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-check"],["mat-flat-button","","color","primary",1,"mt-2",3,"click"],[1,"fa","fa-refresh","mr-1"],[1,"fw-600","text-danger","fs-14"],[1,"fw-600","text-danger","fs-16"]],template:function(e,t){if(1&e&&(r.Qb(0,"div",0),r.Qb(1,"p",1),r.Hc(2,"Indique la direccion exacta de entrega. "),r.Qb(3,"strong"),r.Hc(4,"Se tomara como referencia el punto que especifica en el mapa."),r.Pb(),r.Pb(),r.Pb(),r.Qb(5,"div"),r.Qb(6,"form",2),r.Qb(7,"div",3),r.Qb(8,"div",4),r.Qb(9,"span",5),r.Hc(10,"Escriba el nombre de la calle numero y ciudad. No es necesario escribir: Jiron, jr, pasaje, av, etc."),r.Pb(),r.Qb(11,"div"),r.Qb(12,"mat-checkbox",6),r.Yb("change",(function(){return t.dirInCoordenadas=!t.dirInCoordenadas})),r.Hc(13,"Ingresar direccion en coordenadas: Lat, Lng."),r.Pb(),r.Pb(),r.Fc(14,w,4,1,"ng-container",7),r.Fc(15,P,6,0,"ng-template",null,8,r.Gc),r.Qb(17,"div",9),r.Qb(18,"mat-form-field",3),r.Qb(19,"input",10),r.Yb("ngModelChange",(function(e){return t.dataCliente.referencia=e})),r.Pb(),r.Pb(),r.Qb(20,"button",11),r.Yb("click",(function(){return t.saveDireccion()})),r.Hc(21,"Listo"),r.Pb(),r.Pb(),r.Qb(22,"div",12),r.Qb(23,"mat-form-field",3),r.Qb(24,"input",13),r.Yb("ngModelChange",(function(e){return t.longitude=e})),r.Pb(),r.Pb(),r.Qb(25,"mat-form-field",3),r.Qb(26,"input",14),r.Yb("ngModelChange",(function(e){return t.latitude=e})),r.Pb(),r.Pb(),r.Pb(),r.Qb(27,"div",15),r.Qb(28,"agm-map",16),r.Yb("centerChange",(function(e){return t.centerChange(e)}))("mapClick",(function(){return t.clickmap()}))("idle",(function(){return t.idleMap()})),r.Pb(),r.Lb(29,"div",17),r.Fc(30,I,3,0,"div",18),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(31,"div",4),r.Qb(32,"p",19),r.Hc(33,"Esta es la direcci\xf3n de mi:"),r.Pb(),r.Qb(34,"mat-radio-group",20,21),r.Yb("ngModelChange",(function(e){return t.dataCliente.titulo=e})),r.Qb(36,"mat-radio-button",22),r.Hc(37,"Casa"),r.Pb(),r.Qb(38,"mat-radio-button",23),r.Hc(39,"Trabajo"),r.Pb(),r.Qb(40,"mat-radio-button",24),r.Hc(41,"Novi@"),r.Pb(),r.Qb(42,"mat-radio-button",25),r.Hc(43,"Otro"),r.Pb(),r.Pb(),r.Pb(),r.Qb(44,"div",26),r.Qb(45,"button",27),r.Lb(46,"i",28),r.Hc(47," Atras "),r.Pb(),r.Qb(48,"button",29),r.Yb("click",(function(){return t.saveDireccion()})),r.Fc(49,T,1,0,"ng-container",30),r.Fc(50,L,1,0,"ng-template",null,31,r.Gc),r.Fc(52,x,3,2,"ng-template",null,32,r.Gc),r.Pb(),r.Fc(54,O,3,0,"button",33),r.Pb(),r.Fc(55,R,2,0,"p",34),r.Fc(56,F,2,0,"p",35),r.Pb()),2&e){var n=r.tc(16),i=r.tc(51),a=r.tc(53);r.zb(6),r.kc("formGroup",t.registerForm),r.zb(8),r.kc("ngIf",!t.dirInCoordenadas)("ngIfElse",n),r.zb(5),r.kc("ngModel",t.dataCliente.referencia),r.zb(1),r.kc("disabled",!t.registerForm.valid||t.loader>0||!t.isDireccionValid),r.zb(4),r.kc("ngModel",t.longitude),r.zb(2),r.kc("ngModel",t.latitude),r.zb(2),r.kc("latitude",t.latitude)("longitude",t.longitude)("zoom",t.zoom),r.zb(2),r.kc("ngIf",t.countMoveMap>1),r.zb(4),r.kc("ngModel",t.dataCliente.titulo),r.zb(2),r.kc("checked",t.checkekFirstOption),r.zb(12),r.kc("disabled",!t.registerForm.valid||t.loader>0||!t.isDireccionValid),r.zb(1),r.kc("ngIf",0===t.loader)("ngIfThen",i)("ngIfElse",a),r.zb(5),r.kc("ngIf",!t.registerForm.valid),r.zb(1),r.kc("ngIf",!t.registerForm.valid),r.zb(1),r.kc("ngIf",!t.isDireccionValid)}},directives:[o.F,o.q,o.i,g.a,p.t,m.c,v.a,o.c,o.k,o.p,o.h,b.b,C.b,o.s,C.a,k.b,y.d],styles:["agm-map[_ngcontent-%COMP%]{height:300px}.btn-in-input[_ngcontent-%COMP%]{top:17px;position:relative;width:50px;height:30px;margin-left:10px}.input-headline[_ngcontent-%COMP%]{font-size:13px;line-height:13px}#map_canvas[_ngcontent-%COMP%]{position:relative}#map_canvas[_ngcontent-%COMP%]   .centerMarker[_ngcontent-%COMP%]{position:absolute;background:url(//maps.gstatic.com/mapfiles/markers2/marker.png) no-repeat;top:50%;left:50%;z-index:1;margin-left:-10px;margin-top:-34px;height:34px;width:20px;cursor:pointer}.btn-confirmar-dir[_ngcontent-%COMP%]{width:100%;text-align:center;position:absolute;bottom:10px}"]}),e}()},RvDl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EARTH_RADIUS=void 0,t.isEqual=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!(!e||!t)&&Math.abs(p(e)-p(t))<=n&&Math.abs(g(e)-g(t))<=n},t.isLatLon=s,t.isLatLng=l,t.isLatitudeLongitude=d,t.isLonLatTuple=u,t.getLocationType=f,t.createLocation=h,t.toLatLon=function(e){if(u(e))return{lat:e[1],lon:e[0]};if(s(e))return{lat:e.lat,lon:e.lon};if(l(e))return{lat:e.lat,lon:e.lng};if(d(e))return{lat:e.latitude,lon:e.longitude};throw new Error("Unknown location format "+JSON.stringify(e))},t.toLatLng=function(e){if(u(e))return{lat:e[1],lng:e[0]};if(s(e))return{lat:e.lat,lng:e.lon};if(l(e))return{lat:e.lat,lng:e.lng};if(d(e))return{lat:e.latitude,lng:e.longitude};throw new Error("Unknown location format "+JSON.stringify(e))},t.toLatitudeLongitude=function(e){if(u(e))return{latitude:e[1],longitude:e[0]};if(s(e))return{latitude:e.lat,longitude:e.lon};if(l(e))return{latitude:e.lat,longitude:e.lng};if(d(e))return{latitude:e.latitude,longitude:e.longitude};throw new Error("Unknown location format "+JSON.stringify(e))},t.toLonLatTuple=b,t.getLongitude=g,t.getLatitude=p,t.moveTo=m,t.headingDistanceTo=v,t.headingTo=function(e,t){return v(e,t).heading},t.distanceTo=C,t.insideBoundingBox=function(e,t){var n=p(e),i=g(e),a=g(t.topLeft),r=p(t.topLeft),o=g(t.bottomRight),c=p(t.bottomRight),s=Math.min(r,c),l=Math.max(r,c),d=Math.min(a,o),u=Math.max(a,o);return i>=d&&i<=u&&n>=s&&n<=l},t.insidePolygon=function(e,t){if(!t||!Array.isArray(t))throw new TypeError("Invalid polygon. Array with locations expected");if(0===t.length)throw new TypeError("Invalid polygon. Non-empty Array expected");return(0,a.default)(b(e),t.map(b))},t.insideCircle=function(e,t,n){return C(t,e)<=n},t.normalizeHeading=function(e){var t=e%360;return t<0&&(t+=360),t>=360&&(t-=360),t},t.normalizeLatitude=k,t.normalizeLongitude=y,t.normalizeLocation=function(e){if(u(e))return[y(e[0]),k(e[1])];if(s(e))return{lat:k(e.lat),lon:y(e.lon)};if(l(e))return{lat:k(e.lat),lng:y(e.lng)};if(d(e))return{latitude:k(e.latitude),longitude:y(e.longitude)};throw new Error("Unknown location format "+JSON.stringify(e))},t.average=function(e){if(!Array.isArray(e)||0===e.length)return null;var t=e[0];return h(M(e.map(p)),M(e.map(g)),f(t))},t.getBoundingBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||0===e.length)return{topLeft:null,bottomRight:null};var n=f(e[0]),i=Math.max.apply(Math,o(e.map(p))),a=Math.min.apply(Math,o(e.map(g))),r=Math.min.apply(Math,o(e.map(p))),c=Math.max.apply(Math,o(e.map(g))),s=h(i,a,n),l=h(r,c,n);if(null===t||0===t)return{topLeft:s,bottomRight:l};var d=Math.SQRT2*t;return{topLeft:m(s,{heading:315,distance:d}),bottomRight:m(l,{heading:135,distance:d})}};var i,a=(i=n("cQc6"))&&i.__esModule?i:{default:i},r=n("9TDR");function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=t.EARTH_RADIUS=6378137;function s(e){return!!e&&"number"==typeof e.lat&&"number"==typeof e.lon}function l(e){return!!e&&"number"==typeof e.lat&&"number"==typeof e.lng}function d(e){return!!e&&"number"==typeof e.latitude&&"number"==typeof e.longitude}function u(e){return Array.isArray(e)&&"number"==typeof e[0]&&"number"==typeof e[1]}function f(e){if(u(e))return"LonLatTuple";if(s(e))return"LatLon";if(l(e))return"LatLng";if(d(e))return"LatitudeLongitude";throw new Error("Unknown location format "+JSON.stringify(e))}function h(e,t,n){if("LonLatTuple"===n)return[t,e];if("LatLon"===n)return{lat:e,lon:t};if("LatLng"===n)return{lat:e,lng:t};if("LatitudeLongitude"===n)return{latitude:e,longitude:t};throw new Error("Unknown location format "+JSON.stringify(location))}function b(e){if(u(e))return[e[0],e[1]];if(s(e))return[e.lon,e.lat];if(l(e))return[e.lng,e.lat];if(d(e))return[e.longitude,e.latitude];throw new Error("Unknown location format "+JSON.stringify(e))}function g(e){if(u(e))return e[0];if(s(e))return e.lon;if(l(e))return e.lng;if(d(e))return e.longitude;throw new Error("Unknown location format "+JSON.stringify(e))}function p(e){if(u(e))return e[1];if(s(e))return e.lat;if(l(e))return e.lat;if(d(e))return e.latitude;throw new Error("Unknown location format "+JSON.stringify(e))}function m(e,t){var n=p(e),i=g(e),a=t.heading,o=t.distance,s=o*Math.cos((0,r.degToRad)(a))/c,l=o*Math.sin((0,r.degToRad)(a))/(c*Math.cos((0,r.degToRad)(n)));return h(n+(0,r.radToDeg)(s),i+(0,r.radToDeg)(l),f(e))}function v(e,t){var n=p(e),i=g(e),a=p(t),o=g(t),s=(0,r.degToRad)(n),l=(0,r.degToRad)(a),d=(0,r.degToRad)(a-n),u=(0,r.degToRad)(o-i),f=Math.sin(d/2)*Math.sin(d/2)+Math.cos(s)*Math.cos(l)*Math.sin(u/2)*Math.sin(u/2),h=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),b=c*h,m=Math.sin(u)*Math.cos(l),v=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(u);return{distance:b,heading:(0,r.radToDeg)(Math.atan2(m,v))}}function C(e,t){return v(e,t).distance}function k(e){return Math.asin(Math.sin(e/180*Math.PI))*(180/Math.PI)}function y(e){var t=e%360;return t>180&&(t-=360),t<=-180&&(t+=360),t}function M(e){return function(e){return e.reduce((function(e,t){return e+t}),0)}(e)/e.length}},VhxH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("9TDR");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var a=n("RvDl");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var r=n("6eTy");Object.defineProperty(t,"cpa",{enumerable:!0,get:function(){return r.cpa}})},cQc6:function(e,t){e.exports=function(e,t){for(var n=e[0],i=e[1],a=!1,r=0,o=t.length-1;r<t.length;o=r++){var c=t[r][0],s=t[r][1],l=t[o][1];s>i!=l>i&&n<(t[o][0]-c)*(i-s)/(l-s)+c&&(a=!a)}return a}},e9Tq:function(e,i,a){"use strict";a.d(i,"a",(function(){return P}));var r=a("0IaG"),o=a("+lji"),c=a("yFR0"),s=a("AA5P"),l=a("fXoL"),d=a("kmnG"),u=a("qFsG"),f=a("ofXK"),h=a("FKr1"),b=a("bTqV");function g(e,t){1&e&&(l.Qb(0,"p",13),l.Hc(1,"N\xfamero no valido."),l.Pb())}function p(e,t){1&e&&(l.Qb(0,"span",14),l.Hc(1,"nuevamente"),l.Pb())}function m(e,t){if(1&e){var n=l.Rb();l.Ob(0),l.Qb(1,"div",15),l.Qb(2,"button",16),l.Yb("click",(function(){return l.wc(n),l.cc().enviarCodigoSMS(0)})),l.Lb(3,"i",17),l.Hc(4," Whatsapp"),l.Pb(),l.Qb(5,"button",18),l.Yb("click",(function(){return l.wc(n),l.cc().enviarCodigoSMS(1)})),l.Lb(6,"i",19),l.Hc(7," SMS"),l.Pb(),l.Pb(),l.Nb()}if(2&e){var i=l.cc();l.zb(2),l.kc("disabled",!i.isValidForm),l.zb(3),l.kc("disabled",!i.isValidForm)}}function v(e,t){if(1&e&&(l.Qb(0,"div"),l.Qb(1,"p",20),l.Hc(2),l.dc(3,"number"),l.Pb(),l.Pb()),2&e){var n=l.cc();l.zb(2),l.Jc("",l.fc(3,1,n.numSegundosActivarBtn,"2.")," Enviando Mensaje...")}}function C(e,t){1&e&&(l.Ob(0),l.Hc(1," Verificar Codigo "),l.Nb())}function k(e,t){1&e&&(l.Ob(0),l.Lb(1,"i",28),l.Hc(2," Verificando ... "),l.Nb())}function y(e,t){1&e&&(l.Lb(0,"i",29),l.Hc(1," Hecho "))}function M(e,t){if(1&e&&(l.Fc(0,k,3,0,"ng-container",10),l.Fc(1,y,2,0,"ng-template",null,27,l.Gc)),2&e){var n=l.tc(2),i=l.cc(2);l.kc("ngIf",1===i.loader)("ngIfElse",n)}}function S(e,t){1&e&&(l.Qb(0,"p",30),l.Hc(1,"Codigo ingresado incorrecto."),l.Pb())}function w(e,t){if(1&e){var n=l.Rb();l.Qb(0,"div",0),l.Qb(1,"p",21),l.Hc(2,"En breve recibiras un mensaje. Escribelo el c\xf3digo aqu\xed:"),l.Pb(),l.Qb(3,"mat-form-field",4),l.Lb(4,"input",22,23),l.Pb(),l.Lb(6,"br"),l.Qb(7,"button",24),l.Yb("click",(function(){l.wc(n);var e=l.tc(5);return l.cc().verificarCodigoSMS(e.value)})),l.Fc(8,C,2,0,"ng-container",10),l.Fc(9,M,3,2,"ng-template",null,25,l.Gc),l.Pb(),l.Fc(11,S,2,0,"p",26),l.Pb()}if(2&e){var i=l.tc(10),a=l.cc();l.zb(7),l.kc("disabled",0!==a.loader&&3!==a.loader),l.zb(1),l.kc("ngIf",0===a.loader||3===a.loader)("ngIfElse",i),l.zb(3),l.kc("ngIf",a.loader>0&&!a.isVerificacionOk)}}var P=function(){var e=function(){function e(t,i,a,r,o){var c;n(this,e),this.dialogRef=t,this.crudService=a,this.socketService=r,this.verifyClientService=o,this.isValidForm=!1,this.isSendSMS=!1,this.isNumberSuccess=0,this.loader=0,this.isVerificacionOk=!1,this.intentoVerificacion=0,this.numSegundosActivarBtn=15,this.isContandoShow=!1,this.isClienteNoRegister=!1,this.data=i,-1===(null===(c=this.data)||void 0===c?void 0:c.idcliente)&&(this.isClienteNoRegister=!0)}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.socketService.isSocketOpen||(this.infoClient=this.verifyClientService.getDataClient(),this.socketService.connect(this.infoClient,0,!1,!1)),this.socketService.onMsjVerificacionResponse().subscribe((function(t){e.isNumberSuccess=t.msj?1:2,e.isSendSMS=!0,e.isContandoShow=!1,e.detenerContadorBtnSend()}))}},{key:"enviarCodigoSMS",value:function(e){this.isClienteNoRegister?this.buscarClienteTelefono(e):this.sendSMS(e)}},{key:"sendWhatsApp",value:function(){}},{key:"sendSMS",value:function(e){var t=this;if(this.isVerificacionOk=!1,this.isSendSMS=!1,this.isContandoShow=!1,this.isNumberSuccess=0,this.numSegundosActivarBtn=15,0===e)return this.data.idsocket=this.socketService.getIdSocket(),this.socketService.isSocketOpen||this.socketService.connect(this.infoClient,0,!1,!1),setTimeout((function(){t.socketService.emit("msj-confirma-telefono",t.data)}),500),this.isContandoShow=!0,this.contadorActvarBtnSend(),void this.intentoVerificacion++;this.contadorActvarBtnSend(),this.crudService.postSMS(this.data,"delivery","send-sms-confirmation",!1).subscribe((function(e){t.isNumberSuccess=e.msj?1:2,t.isSendSMS=e.msj,t.detenerContadorBtnSend(),t.intentoVerificacion++}))}},{key:"verificarCodigoSMS",value:function(e){var t=this;this.loader=1,this.crudService.postFree({idcliente:this.isClienteNoRegister?-2:this.data.idcliente,codigo:e,numberphone:this.data.numberphone},"delivery","verificar-codigo-sms",!1).subscribe((function(e){t.isVerificacionOk=1===e.data[0].response,setTimeout((function(){t.loader=t.isVerificacionOk?2:3,t.data.verificado=t.isVerificacionOk,t.isVerificacionOk&&setTimeout((function(){t.cerrarDlg()}),1e3)}),1e3)}))}},{key:"verificarNum",value:function(e){this.isValidForm=e.trim().length>=9,this.data.numberphone=e,this.data.verificado=!1}},{key:"contadorActvarBtnSend",value:function(){var e=this;this.isContandoShow=!0,this.conteoInterval=setInterval((function(){e.numSegundosActivarBtn>0?e.numSegundosActivarBtn--:(e.numSegundosActivarBtn=15,e.isSendSMS=!0,e.isContandoShow=!1,e.intentoVerificacion=1,clearInterval(e.conteoInterval))}),1e3)}},{key:"detenerContadorBtnSend",value:function(){this.numSegundosActivarBtn=15,this.isSendSMS=!0,this.isContandoShow=!1,clearInterval(this.conteoInterval)}},{key:"buscarClienteTelefono",value:function(e){var t=this;this.crudService.postFree({telefono:this.data.numberphone},"delivery","search-cliente-by-phone",!1).subscribe((function(n){t.data.isClienteTelefono=!0,t.data.cliente=n.data.length>0?n.data[0]:null,n.data.length>0&&(t.isClienteNoRegister=!1,t.data.idcliente=t.data.cliente.idcliente),t.sendSMS(e)}))}},{key:"cerrarDlg",value:function(){this.dialogRef.close(this.data)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Kb(r.i),l.Kb(r.a),l.Kb(o.a),l.Kb(c.a),l.Kb(s.a))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-dialog-verificar-telefono"]],decls:20,vars:6,consts:[[1,"p-4"],[1,"fs-18","fw-600"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"fa","fa-phone","ml-2"],[1,"w-100"],["type","number","matInput","","placeholder","Telefono","autocomplete","off","required","",3,"value","keyup"],["telefono",""],["class","text-danger",4,"ngIf"],[1,"m-0","pb-1"],["class","fw-600",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplateMsjVerificacion",""],["class","p-4",4,"ngIf"],[1,"text-danger"],[1,"fw-600"],[1,"d-flex"],["matRipple","",1,"btn","btn-success","mr-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-whatsapp","pr-1"],["matRipple","",1,"btn","btn-info",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-comment","pr-1"],[1,"fw-600","text-info"],[1,"text-success","fs-600"],["type","number","matInput","","name","txtCodigo","placeholder","C\xf3digo de verificaci\xf3n","autocomplete","off"],["txtCodigo",""],["mat-flat-button","","color","primary",3,"disabled","click"],["elseTemplate",""],["class","text-danger fw-600 pt-2",4,"ngIf"],["elseTemplateHecho",""],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-check"],[1,"text-danger","fw-600","pt-2"]],template:function(e,t){if(1&e){var n=l.Rb();l.Qb(0,"div",0),l.Qb(1,"div"),l.Qb(2,"p",1),l.Qb(3,"i",2),l.Yb("click",(function(){return t.cerrarDlg()})),l.Pb(),l.Hc(4," N\xfamero de celular "),l.Lb(5,"i",3),l.Pb(),l.Pb(),l.Qb(6,"mat-form-field",4),l.Qb(7,"input",5,6),l.Yb("keyup",(function(){l.wc(n);var e=l.tc(8);return t.verificarNum(e.value)})),l.Pb(),l.Pb(),l.Fc(9,g,2,0,"p",7),l.Lb(10,"br"),l.Qb(11,"p",8),l.Hc(12," Enviar "),l.Fc(13,p,2,0,"span",9),l.Hc(14," c\xf3digo de verificaci\xf3n por: "),l.Pb(),l.Fc(15,m,8,2,"ng-container",10),l.Fc(16,v,4,4,"ng-template",null,11,l.Gc),l.Pb(),l.Lb(18,"hr"),l.Fc(19,w,12,4,"div",12)}if(2&e){var i=l.tc(17);l.zb(7),l.kc("value",t.data.numberphone),l.zb(2),l.kc("ngIf",2===t.isNumberSuccess),l.zb(4),l.kc("ngIf",t.intentoVerificacion>0&&!t.isContandoShow),l.zb(2),l.kc("ngIf",!t.isContandoShow)("ngIfElse",i),l.zb(4),l.kc("ngIf",t.isSendSMS)}},directives:[d.c,u.a,f.t,h.o,b.b],pipes:[f.g],styles:[""]}),e}()},lkOP:function(e,i,a){"use strict";a.d(i,"a",(function(){return f}));var r=a("fXoL"),o=a("AA5P"),c=a("+lji"),s=a("0IaG"),l=a("ofXK"),d=a("FKr1");function u(e,t){if(1&e){var n=r.Rb();r.Qb(0,"li",1),r.Yb("click",(function(){r.wc(n);var e=t.$implicit;return r.cc().selected(e)})),r.Qb(1,"div",2),r.Qb(2,"p",3),r.Hc(3),r.Pb(),r.Qb(4,"p",4),r.Hc(5),r.Pb(),r.Qb(6,"p",5),r.Hc(7),r.Pb(),r.Pb(),r.Pb()}if(2&e){var i=t.$implicit;r.zb(3),r.Ic(i.titulo),r.zb(2),r.Ic(i.direccion),r.zb(2),r.Ic(i.referencia)}}var f=function(){var e=function(){function e(t,i,a){n(this,e),this.data=t,this.crudService=i,this.verifyClientService=a,this.direccionSelected=new r.n}return t(e,[{key:"ngOnInit",value:function(){this.infoClienteLogueado=this.verifyClientService.getDataClient(),this.idClienteDirecciones=this.idClienteBuscar?this.idClienteBuscar:this.infoClienteLogueado.idcliente,this.loadDireccion()}},{key:"loadDireccion",value:function(){var e=this;this.listDirecciones=[],this.idClienteDirecciones&&"0"!==this.idClienteDirecciones.toString()&&this.crudService.postFree({idcliente:this.idClienteDirecciones},"delivery","get-direccion-cliente",!1).subscribe((function(t){e.listDirecciones=t.data}))}},{key:"selected",value:function(e){this.direccionSelected.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(s.a),r.Kb(c.a),r.Kb(o.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-seleccionar-direccion"]],inputs:{idClienteBuscar:"idClienteBuscar"},outputs:{direccionSelected:"direccionSelected"},decls:2,vars:1,consts:[["class","li-item","matRipple","",3,"click",4,"ngFor","ngForOf"],["matRipple","",1,"li-item",3,"click"],[1,"p-3"],[1,"fw-600","fs-14"],[1,"fw-100","fs-13"],[1,"fw-600","fs-12","text-secondary"]],template:function(e,t){1&e&&(r.Qb(0,"ul"),r.Fc(1,u,8,3,"li",0),r.Pb()),2&e&&(r.zb(1),r.kc("ngForOf",t.listDirecciones))},directives:[l.s,d.o],styles:["p[_ngcontent-%COMP%]{margin-bottom:0}.li-item[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}"]}),e}()}}])}();