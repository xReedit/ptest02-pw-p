function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{FDOz:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return g})),n("mrSG");var i=n("fXoL"),r=n("tyNb"),a=n("EY2u"),o=[],s=function(){var e=function(){function e(t){_classCallCheck(this,e),this.router=t,this.trees=o}return _createClass(e,[{key:"add",value:function(e){this.trees.push(e)}},{key:"remove",value:function(e){this.trees.splice(this.trees.indexOf(e),1)}},{key:"shouldPrefetch",value:function(e){var t=this.router.parseUrl(e);return this.trees.some(u.bind(null,t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Vb(r.d))},e.\u0275prov=i.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e}();function u(e,t){return function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return t[n]===e[n]}))}(t.queryParams,e.queryParams)&&function e(t,n,i){if(t.segments.length>i.length)return!!c(t.segments.slice(0,i.length),i)&&!n.hasChildren();if(t.segments.length===i.length){if(!c(t.segments,i))return!1;if(!n.hasChildren())return!0;for(var a in n.children){if(!t.children[a])break;if(e(t.children[a],n.children[a],n.children[a].segments))return!0}return!1}var o=i.slice(0,t.segments.length),s=i.slice(t.segments.length);return!!c(t.segments,o)&&!!t.children[r.c]&&e(t.children[r.c],n,s)}(t.root,e.root,e.root.segments)}function c(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path||e.path.startsWith(":")||t[n].path.startsWith(":")}))}var l="undefined"!=typeof window?window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)}:function(){},d=function(){return"undefined"!=typeof window&&!!window.IntersectionObserver},h=new i.q("LinkHandler"),f=function(){var e=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.loader=t,this.queue=n,this.elementLink=new Map,this.observer=d()?new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=e.target,n=i.elementLink.get(t);i.queue.add(n.urlTree),i.observer.unobserve(t),l((function(){i.loader.preload().subscribe((function(){})),i.queue.remove(n.urlTree)}))}}))})):null}return _createClass(e,[{key:"register",value:function(e){this.elementLink.set(e.element,e),this.observer.observe(e.element)}},{key:"unregister",value:function(e){this.elementLink.has(e.element)&&(this.observer.unobserve(e.element),this.elementLink.delete(e.element))}},{key:"supported",value:function(){return d()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Vb(r.i),i.Vb(s))},e.\u0275prov=i.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),v=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.loader=t,this.queue=n}return _createClass(e,[{key:"register",value:function(e){var t=this;this.queue.add(e.urlTree),l((function(){return t.loader.preload().subscribe((function(){}))}))}},{key:"unregister",value:function(e){}},{key:"supported",value:function(){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Vb(r.i),i.Vb(s))},e.\u0275prov=i.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),g=function(){var e=function(){function e(t,n,i,r){_classCallCheck(this,e),this.linkHandlers=t,this.el=n,this.linkHandler=this.linkHandlers.filter((function(e){return e.supported()})).shift(),this.rl=i||r}return _createClass(e,[{key:"ngOnChanges",value:function(e){e.routerLink&&(this.linkHandler.unregister(this),this.linkHandler.register(this))}},{key:"ngOnDestroy",value:function(){this.linkHandler.unregister(this)}},{key:"element",get:function(){return this.el.nativeElement}},{key:"urlTree",get:function(){return this.rl.urlTree}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Lb(h),i.Lb(i.l),i.Lb(r.e,8),i.Lb(r.f,8))},e.\u0275dir=i.Gb({type:e,selectors:[["","routerLink",""]],inputs:{routerLink:"routerLink"},features:[i.xb]}),e}(),p=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.queue=t,this.router=n,this.loading=new Set}return _createClass(e,[{key:"preload",value:function(e,t){if(this.loading.has(e))return a.a;var n="undefined"!=typeof window?navigator.connection:void 0;if(n&&((n.effectiveType||"").includes("2g")||n.saveData))return a.a;if(e.data&&!1===e.data.preload)return a.a;var i=y(this.router.config,e);return this.queue.shouldPrefetch(i)?(this.loading.add(e),t()):a.a}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Vb(s),i.Vb(r.d))},e.\u0275prov=i.Hb({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),y=function(e,t){e=e.slice();for(var n=new Map,i=new Set,r=function(){var r=e.shift();if(i.add(r),r===t)return"break";var a=r.children||[],o=r._loadedConfig;o&&o.routes&&(a=a.concat(o.routes)),a.forEach((function(t){i.has(t)||(n.set(t,r),e.push(t))}))};e.length;){if("break"===r())break}for(var a="",o=t;o;)a=m(o)?"/".concat(o.path).concat(a):"/(".concat(o.outlet,":").concat(o.path).concat(a,")"),o=n.get(o);return a};function m(e){return e.outlet===r.c||!e.outlet}var k=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Jb({type:e}),e.\u0275inj=i.Ib({factory:function(t){return new(t||e)},providers:[{provide:h,useClass:f,multi:!0},{provide:h,useClass:v,multi:!0},s,p]}),e}()},OzqD:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("A8zI"),r=n("eI2u"),a=n("+lji"),o=n("zOUh"),s=n("7RJT"),u=n("fXoL"),c=function(){var e=function(){function e(t,n,r){_classCallCheck(this,e),this.listenStatusService=t,this.crudService=n,this.infoTokenService=r,this.estadoPedido=new i.a,this.keyStorage="sys::status",this.timeInterval=null,this.timeNow=new Date,this.hayPedidoPendiente=!1,this.timeRestanteAproxSource=new s.BehaviorSubject(0),this.timeRestanteAprox$=this.timeRestanteAproxSource.asObservable(),this.hayCuentaClienteSource=new s.BehaviorSubject(null),this.hayCuentaCliente$=this.hayCuentaClienteSource.asObservable(),this.deserializar(),this.dataPost={idsede:this.infoTokenService.getInfoUs().idsede,idcliente:this.infoTokenService.getInfoUs().idcliente}}return _createClass(e,[{key:"deserializar",value:function(){var e=localStorage.getItem(this.keyStorage);e="{}"===e?null:e,this.estadoPedido=e?JSON.parse(e):new i.a}},{key:"get",value:function(){this.deserializar(),this.getCuentaTotales()}},{key:"getCuentaTotales",value:function(){var e=this,t=0;return this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe((function(n){0!==n.data.length?(t=n.data[0].importe||0,e.setImporte(t),e.estadoPedido.hayPedidoCliente=!0,e.calcTimeAprox(),e.notifyChange()):e.estadoPedido.hayPedidoCliente=!1})),t}},{key:"getCuenta",value:function(){var e=this;this.crudService.postFree(this.dataPost,"pedido","lacuenta-cliente",!1).subscribe((function(t){if(0!==t.data.length)return e.estadoPedido.hayPedidoCliente=!0,e.calcTimeAprox(),e.hayCuentaClienteSource.next(t),e.notifyChange(),t;e.estadoPedido.hayPedidoCliente=!1}))}},{key:"getImporteCuenta",value:function(){var e=this;return new Promise((function(t){e.crudService.postFree(e.dataPost,"pedido","lacuenta-cliente-totales",!1).subscribe((function(e){t(e.success?e.data[0].importe:0)}))}))}},{key:"getObj",value:function(){return this.estadoPedido||this.deserializar(),this.estadoPedido}},{key:"setEstado",value:function(e){this.deserializar(),this.estadoPedido.estado=e,this.notifyChange()}},{key:"setImporte",value:function(e){this.deserializar(),this.estadoPedido.importe=e,this.notifyChange()}},{key:"setHoraInitPedido",value:function(e){this.deserializar(),this.estadoPedido.horaInt=e,this.notifyChange()}},{key:"setTimeAprox",value:function(e){this.deserializar(),this.estadoPedido.isTiempoAproxCumplido=e,this.notifyChange()}},{key:"setHayPedidoPendiente",value:function(e){this.deserializar(),this.estadoPedido.hayPedidoClientePendiente=e,this.notifyChange()}},{key:"setisPagada",value:function(e){this.deserializar(),this.estadoPedido.isPagada=e,this.notifyChange()}},{key:"setisRegisterPago",value:function(e){this.deserializar(),this.estadoPedido.isRegisterOnePago=e,this.notifyChange()}},{key:"calcTimeAprox",value:function(){var e=this;this.crudService.postFree(this.dataPost,"pedido","calc-time-despacho",!1).subscribe((function(t){e.estadoPedido.estado=0,e.estadoPedido.numMinAprox=t.data[0].rpt,e.estadoPedido.isTiempoAproxCumplido=!1,e.notifyChange(),e.getTimeAprox()}))}},{key:"getTimeAprox",value:function(){var e=this;return 0===this.estadoPedido.estado?this.timeInterval=setTimeout((function(){var t=e.calTimeMin();t<=0?(e.estadoPedido.estado=1,e.notifyChange(),e.clearTimeout(),clearTimeout(e.timeInterval),t=0):e.getTimeAprox(),e.timeRestanteAproxSource.next(t)}),2e3):this.clearTimeout(),0}},{key:"calTimeMin",value:function(){var e=(new Date).getTime()-this.estadoPedido.horaInt;return e=Math.round(e%864e5%36e5/6e4),e=this.estadoPedido.numMinAprox-e,isNaN(e)?0:e}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(this.timeInterval),this.timeInterval=null}))},{key:"notifyChange",value:function(){this.listenStatusService.setEstadoPedido(this.estadoPedido),localStorage.setItem(this.keyStorage,JSON.stringify(this.estadoPedido))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Vb(r.a),u.Vb(a.a),u.Vb(o.a))},e.\u0275prov=u.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},PCNd:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),r=n("FDOz"),a=n("fXoL"),o=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},imports:[[i.c,r.a],r.a]}),e}()},"nYx/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("zOUh"),r=n("+lji"),a=n("yFR0"),o=n("HDdC"),s=n("JOr0"),u=n("fXoL"),c=function(){var e=function(){function e(t,n,i,r){_classCallCheck(this,e),this.infoTokenService=t,this.crudService=n,this.socketService=i,this.establecimiento=r,this.infoToken=this.infoTokenService.getInfoUs()}return _createClass(e,[{key:"getSubtotales",value:function(){this.objTotales=JSON.parse(atob(localStorage.getItem("sys::st")))}},{key:"registrarPago",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.getSubtotales();var a={idcliente:this.infoToken.idcliente,idorg:this.establecimiento.get().idorg,idsede:this.establecimiento.get().idsede,mesa:this.infoToken.numMesaLector,importe:e},s={idcliente:a.idcliente,idorg:a.idorg,idsede:a.idsede,mesa:a.mesa,importe:a.importe,isdelivery:r,objSubTotal:this.objTotales,objTransaction:t,objCliente:n,objOperacion:a};return new o.a((function(e){i.crudService.postFree(s,"transaction","registrar-pago",!1).subscribe((function(t){i.socketService.emit("notificar-pago-pwa",s),i.setIdPwaPago(t.data[0].idregistro_pago),e.next(t.data[0].idregistro_pago)}))}))}},{key:"setIdPwaPago",value:function(e){localStorage.setItem("sys::irp",e.toString())}},{key:"getIdPwaPago",value:function(){var e=parseInt(localStorage.getItem("sys::irp"),0);return e=e?0:e,localStorage.removeItem("sys::irp"),e}},{key:"getIpClient",value:function(){var e="";return this.crudService.getFree("https://api.ipify.org?format=jsonp&callback=?").subscribe((function(t){e=t.ip})),e}},{key:"getDataTrasaction",value:function(){return this.loadDataTransaction(),this.responseTransaction.isSuccess=!(this.responseTransaction&&!this.responseTransaction.error),this.responseTransaction}},{key:"setIdRegistroPagoTransaction",value:function(e){this.loadDataTransaction(),this.responseTransaction.idregistro_pago=e,this.upDataTransaction()}},{key:"loadDataTransaction",value:function(){this.responseTransaction=JSON.parse(localStorage.getItem("sys::transaction-response"))}},{key:"upDataTransaction",value:function(){localStorage.setItem("sys::transaction-response",JSON.stringify(this.responseTransaction))}},{key:"removeLocalDataTransaction",value:function(){localStorage.removeItem("sys::transaction-response"),this.responseTransaction=null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Vb(i.a),u.Vb(r.a),u.Vb(a.a),u.Vb(s.a))},e.\u0275prov=u.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);